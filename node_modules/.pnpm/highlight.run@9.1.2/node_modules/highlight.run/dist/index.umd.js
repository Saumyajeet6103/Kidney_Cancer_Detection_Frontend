(function(Se,Ne){typeof exports=="object"&&typeof module!="undefined"?Ne(exports):typeof define=="function"&&define.amd?define(["exports"],Ne):(Se=typeof globalThis!="undefined"?globalThis:Se||self,Ne(Se.H={}))})(this,function(Se){"use strict";var CZ=Object.defineProperty,OZ=Object.defineProperties;var wZ=Object.getOwnPropertyDescriptors;var Ji=Object.getOwnPropertySymbols;var md=Object.prototype.hasOwnProperty,fd=Object.prototype.propertyIsEnumerable;var Ho=(Se,Ne,Oe)=>Ne in Se?CZ(Se,Ne,{enumerable:!0,configurable:!0,writable:!0,value:Oe}):Se[Ne]=Oe,rt=(Se,Ne)=>{for(var Oe in Ne||(Ne={}))md.call(Ne,Oe)&&Ho(Se,Oe,Ne[Oe]);if(Ji)for(var Oe of Ji(Ne))fd.call(Ne,Oe)&&Ho(Se,Oe,Ne[Oe]);return Se},vt=(Se,Ne)=>OZ(Se,wZ(Ne));var Jo=(Se,Ne)=>{var Oe={};for(var Be in Se)md.call(Se,Be)&&Ne.indexOf(Be)<0&&(Oe[Be]=Se[Be]);if(Se!=null&&Ji)for(var Be of Ji(Se))Ne.indexOf(Be)<0&&fd.call(Se,Be)&&(Oe[Be]=Se[Be]);return Oe};var fe=(Se,Ne,Oe)=>(Ho(Se,typeof Ne!="symbol"?Ne+"":Ne,Oe),Oe);var _t=(Se,Ne,Oe)=>new Promise((Be,wr)=>{var Ki=mt=>{try{Fn(Oe.next(mt))}catch(fn){wr(fn)}},Bi=mt=>{try{Fn(Oe.throw(mt))}catch(fn){wr(fn)}},Fn=mt=>mt.done?Be(mt.value):Promise.resolve(mt.value).then(Ki,Bi);Fn((Oe=Oe.apply(Se,Ne)).next())});function Ne(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const Oe=({apiKey:e})=>{(function(t,n){var s=t.amplitude||{_q:[],_iq:{}},a=n.createElement("script");a.type="text/javascript",a.integrity="sha384-+EO59vL/X7v6VE2s6/F4HxfHlK0nDUVWKVg8K9oUlvffAeeaShVBmbORTC2D3UF+",a.crossOrigin="anonymous",a.async=!0,a.src="https://cdn.amplitude.com/libs/amplitude-8.17.0-min.gz.js",a.onload=function(){t.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK"),amplitude.getInstance().init(e)};var l=n.getElementsByTagName("script")[0];l.parentNode.insertBefore(a,l);function p(G,K){G.prototype[K]=function(){return this._q.push([K].concat(Array.prototype.slice.call(arguments,0))),this}}for(var m=function(){return this._q=[],this},y=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove"],T=0;T<y.length;T++)p(m,y[T]);s.Identify=m;for(var g=function(){return this._q=[],this},_=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"],Z=0;Z<_.length;Z++)p(g,_[Z]);s.Revenue=g;var R=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function V(G){function K(M){G[M]=function(){G._q.push([M].concat(Array.prototype.slice.call(arguments,0)))}}for(var re=0;re<R.length;re++)K(R[re])}V(s),s.getInstance=function(G){return G=(!G||G.length===0?"$default_instance":G).toLowerCase(),Object.prototype.hasOwnProperty.call(s._iq,G)||(s._iq[G]={_q:[]},V(s._iq[G])),s._iq[G]},t.amplitude=s})(window,document)};var Be;(function(e){e.RECORDING_START_TIME="highlightRecordingStartTime",e.SEGMENT_LAST_SENT_HASH_KEY="HIGHLIGHT_SEGMENT_LAST_SENT_HASH_KEY",e.SESSION_DATA="sessionData",e.SESSION_SECURE_ID="sessionSecureID",e.USER_IDENTIFIER="highlightIdentifier",e.USER_OBJECT="highlightUserObject",e.PAYLOAD_ID="payloadId"})(Be||(Be={}));const wr=({projectToken:e})=>{if(window.mixpanel)return;(function(n,s){if(!s.__SV){var a,l;window.mixpanel=s,s._i=[],s.init=function(p,m,y){function T(Z,R){var V=R.split(".");V.length==2&&(Z=Z[V[0]],R=V[1]),Z[R]=function(){Z.push([R].concat(Array.prototype.slice.call(arguments,0)))}}var g=s;for(typeof y!="undefined"?g=s[y]=[]:y="mixpanel",g.people=g.people||[],g.toString=function(Z){var R="mixpanel";return y!=="mixpanel"&&(R+="."+y),Z||(R+=" (stub)"),R},g.people.toString=function(){return g.toString(1)+".people (stub)"},a="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" "),l=0;l<a.length;l++)T(g,a[l]);var _="set set_once union unset remove delete".split(" ");g.get_group=function(){function Z(K){R[K]=function(){call2_args=arguments,call2=[K].concat(Array.prototype.slice.call(call2_args,0)),g.push([V,call2])}}for(var R={},V=["get_group"].concat(Array.prototype.slice.call(arguments,0)),G=0;G<_.length;G++)Z(_[G]);return R},s._i.push([p,m,y])},s.__SV=1.2}})(document,window.mixpanel||[]);const t=document.createElement("script");t.src=Ki,document.head.appendChild(t),t.addEventListener("load",()=>{var n;(n=window.mixpanel)==null||n.init(e)})},Ki="https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";function Bi(e,t,n){try{if(!(t in e))return()=>{};const s=e[t],a=n(s);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=a,()=>{e[t]=s}}catch(s){return()=>{}}}function Fn(e){if(!e||!e.outerHTML)return"";let t="";for(;e.parentElement;){let n=e.localName;if(!n)break;n=n.toLowerCase();let s=e.parentElement,a=[];if(s.children&&s.children.length>0)for(let l=0;l<s.children.length;l++){let p=s.children[l];p.localName&&p.localName.toLowerCase&&p.localName.toLowerCase()===n&&a.push(p)}a.length>1&&(n+=":eq("+a.indexOf(e)+")"),t=n+(t?">"+t:""),e=s}return t}function mt(e){return Object.prototype.toString.call(e)==="[object Object]"}function fn(e,t){if(t===0)return!0;const n=Object.keys(e);for(const s of n)if(mt(e[s])&&fn(e[s],t-1))return!0;return!1}function zi(e,t){const n={numOfKeysLimit:50,depthOfLimit:4};Object.assign(n,t);const s=[],a=[];return JSON.stringify(e,function(m,y){if(s.length>0){const T=s.indexOf(this);~T?s.splice(T+1):s.push(this),~T?a.splice(T,1/0,m):a.push(m),~s.indexOf(y)&&(s[0]===y?y="[Circular ~]":y="[Circular ~."+a.slice(0,s.indexOf(y)).join(".")+"]")}else s.push(y);if(y==null)return y;if(l(y))return p(y);if(y instanceof Event){const T={};for(const g in y){const _=y[g];Array.isArray(_)?T[g]=Fn(_.length?_[0]:null):T[g]=_}return T}else{if(y instanceof Node)return y instanceof HTMLElement?y?y.outerHTML:"":y.nodeName;if(y instanceof Error)return y.name+": "+y.message}return y});function l(m){return mt(m)&&Object.keys(m).length>n.numOfKeysLimit||typeof m=="function"?!0:m instanceof Event&&m.isTrusted===!1?Object.keys(m).length===1:!!(mt(m)&&fn(m,n.depthOfLimit))}function p(m){let y=m.toString();return n.stringLengthLimit&&y.length>n.stringLengthLimit&&(y=`${y.slice(0,n.stringLengthLimit)}...`),y}}var Yn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ko(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bo={exports:{}},ji={exports:{}},zo;function bd(){return zo||(zo=1,function(e,t){(function(n,s){e.exports=s()})(Yn,function(){function n(G){return!isNaN(parseFloat(G))&&isFinite(G)}function s(G){return G.charAt(0).toUpperCase()+G.substring(1)}function a(G){return function(){return this[G]}}var l=["isConstructor","isEval","isNative","isToplevel"],p=["columnNumber","lineNumber"],m=["fileName","functionName","source"],y=["args"],T=["evalOrigin"],g=l.concat(p,m,y,T);function _(G){if(G)for(var K=0;K<g.length;K++)G[g[K]]!==void 0&&this["set"+s(g[K])](G[g[K]])}_.prototype={getArgs:function(){return this.args},setArgs:function(G){if(Object.prototype.toString.call(G)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=G},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(G){if(G instanceof _)this.evalOrigin=G;else if(G instanceof Object)this.evalOrigin=new _(G);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var G=this.getFileName()||"",K=this.getLineNumber()||"",re=this.getColumnNumber()||"",M=this.getFunctionName()||"";return this.getIsEval()?G?"[eval] ("+G+":"+K+":"+re+")":"[eval]:"+K+":"+re:M?M+" ("+G+":"+K+":"+re+")":G+":"+K+":"+re}},_.fromString=function(K){var re=K.indexOf("("),M=K.lastIndexOf(")"),Ge=K.substring(0,re),Ve=K.substring(re+1,M).split(","),be=K.substring(M+1);if(be.indexOf("@")===0)var ze=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(be,""),Pt=ze[1],At=ze[2],Mt=ze[3];return new _({functionName:Ge,args:Ve||void 0,fileName:Pt,lineNumber:At||void 0,columnNumber:Mt||void 0})};for(var Z=0;Z<l.length;Z++)_.prototype["get"+s(l[Z])]=a(l[Z]),_.prototype["set"+s(l[Z])]=function(G){return function(K){this[G]=!!K}}(l[Z]);for(var R=0;R<p.length;R++)_.prototype["get"+s(p[R])]=a(p[R]),_.prototype["set"+s(p[R])]=function(G){return function(K){if(!n(K))throw new TypeError(G+" must be a Number");this[G]=Number(K)}}(p[R]);for(var V=0;V<m.length;V++)_.prototype["get"+s(m[V])]=a(m[V]),_.prototype["set"+s(m[V])]=function(G){return function(K){this[G]=String(K)}}(m[V]);return _})}(ji)),ji.exports}(function(e,t){(function(n,s){e.exports=s(bd())})(Yn,function(s){var a=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,p=/^(eval@)?(\[native code])?$/;return{parse:function(y){if(typeof y.stacktrace!="undefined"||typeof y["opera#sourceloc"]!="undefined")return this.parseOpera(y);if(y.stack&&y.stack.match(l))return this.parseV8OrIE(y);if(y.stack)return this.parseFFOrSafari(y);throw new Error("Cannot parse given Error object")},extractLocation:function(y){if(y.indexOf(":")===-1)return[y];var T=/(.+?)(?::(\d+))?(?::(\d+))?$/,g=T.exec(y.replace(/[()]/g,""));return[g[1],g[2]||void 0,g[3]||void 0]},parseV8OrIE:function(y){var T=y.stack.split(`
`).filter(function(g){return!!g.match(l)},this);return T.map(function(g){g.indexOf("(eval ")>-1&&(g=g.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var _=g.replace(/^\s+/,"").replace(/\(eval code/g,"("),Z=_.match(/ (\((.+):(\d+):(\d+)\)$)/);_=Z?_.replace(Z[0],""):_;var R=_.split(/\s+/).slice(1),V=this.extractLocation(Z?Z[1]:R.pop()),G=R.join(" ")||void 0,K=["eval","<anonymous>"].indexOf(V[0])>-1?void 0:V[0];return new s({functionName:G,fileName:K,lineNumber:V[1],columnNumber:V[2],source:g})},this)},parseFFOrSafari:function(y){var T=y.stack.split(`
`).filter(function(g){return!g.match(p)},this);return T.map(function(g){if(g.indexOf(" > eval")>-1&&(g=g.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),g.indexOf("@")===-1&&g.indexOf(":")===-1)return new s({functionName:g});var _=/((.*".+"[^@]*)?[^@]*)(?:@)/,Z=g.match(_),R=Z&&Z[1]?Z[1]:void 0,V=this.extractLocation(g.replace(_,""));return new s({functionName:R,fileName:V[0],lineNumber:V[1],columnNumber:V[2],source:g})},this)},parseOpera:function(y){return!y.stacktrace||y.message.indexOf(`
`)>-1&&y.message.split(`
`).length>y.stacktrace.split(`
`).length?this.parseOpera9(y):y.stack?this.parseOpera11(y):this.parseOpera10(y)},parseOpera9:function(y){for(var T=/Line (\d+).*script (?:in )?(\S+)/i,g=y.message.split(`
`),_=[],Z=2,R=g.length;Z<R;Z+=2){var V=T.exec(g[Z]);V&&_.push(new s({fileName:V[2],lineNumber:V[1],source:g[Z]}))}return _},parseOpera10:function(y){for(var T=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,g=y.stacktrace.split(`
`),_=[],Z=0,R=g.length;Z<R;Z+=2){var V=T.exec(g[Z]);V&&_.push(new s({functionName:V[3]||void 0,fileName:V[2],lineNumber:V[1],source:g[Z]}))}return _},parseOpera11:function(y){var T=y.stack.split(`
`).filter(function(g){return!!g.match(a)&&!g.match(/^Error created at/)},this);return T.map(function(g){var _=g.split("@"),Z=this.extractLocation(_.pop()),R=_.shift()||"",V=R.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,G;R.match(/\(([^)]*)\)/)&&(G=R.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var K=G===void 0||G==="[arguments not available]"?void 0:G.split(",");return new s({functionName:V,args:K,fileName:Z[0],lineNumber:Z[1],columnNumber:Z[2],source:g})},this)}}})})(Bo);var yd=Bo.exports;const Gr=Ko(yd);function gd(e,t){const n=t.logger;if(!n)return()=>{};let s;typeof n=="string"?s=window[n]:s=n;const a=[];if(t.level.includes("error")&&window){const p=m=>{const{message:y,error:T}=m;let g=[];T&&(g=Gr.parse(T));const _=[zi(y,t.stringifyOptions)];e({type:"Error",trace:g,time:Date.now(),value:_})};window.addEventListener("error",p),a.push(()=>{window&&window.removeEventListener("error",p)})}for(const p of t.level)a.push(l(s,p));return()=>{a.forEach(p=>p())};function l(p,m){return p[m]?Bi(p,m,y=>(...T)=>{y.apply(this,T);try{const g=Gr.parse(new Error),_=t.serializeConsoleAttributes?T.map(Z=>typeof Z=="object"?zi(Z,t.stringifyOptions):Z):T.filter(Z=>typeof Z!="object").map(Z=>`${Z}`);e({type:m,trace:g.slice(1),value:_,attributes:zi(T.filter(Z=>typeof Z=="object").reduce((Z,R)=>rt(rt({},Z),R),{}),t.stringifyOptions),time:Date.now()})}catch(g){y("highlight logger error:",g,...T)}}):()=>{}}}var Qi={exports:{}};(function(e,t){t=e.exports=n,t.getSerialize=s;function n(a,l,p,m){return JSON.stringify(a,s(l,m),p)}function s(a,l){var p=[],m=[];return l==null&&(l=function(y,T){return p[0]===T?"[Circular ~]":"[Circular ~."+m.slice(0,p.indexOf(T)).join(".")+"]"}),function(y,T){if(p.length>0){var g=p.indexOf(this);~g?p.splice(g+1):p.push(this),~g?m.splice(g,1/0,y):m.push(y),~p.indexOf(T)&&(T=l.call(this,y,T))}else p.push(T);return a==null?T:a.call(this,y,T)}}})(Qi,Qi.exports);var Sd=Qi.exports;const Lr=Ko(Sd);function $i(e,t,n,s){var m,y,T,g;let a=[];try{a=Gr.parse(s!=null?s:t)}catch(_){a=Gr.parse(new Error)}let l={};t instanceof Error&&(t=t.message,t.cause&&(l={"exception.cause":t.cause}));const p=vd(a);e({event:Lr(t),type:"window.onerror",url:window.location.href,source:n!=null?n:"",lineNumber:(m=p[0])!=null&&m.lineNumber?(y=p[0])==null?void 0:y.lineNumber:0,columnNumber:(T=p[0])!=null&&T.columnNumber?(g=p[0])==null?void 0:g.columnNumber:0,stackTrace:p,timestamp:new Date().toISOString(),payload:l?Lr(l):void 0})}const Td=(e,{enablePromisePatch:t})=>{if(typeof window=="undefined")return()=>{};const n=window.onerror=(p,m,y,T,g)=>{$i(e,p,m,g)},s=window.onunhandledrejection=p=>{if(p.reason){const m=p.promise;m.getStack?$i(e,p.reason,p.type,m.getStack()):$i(e,p.reason,p.type)}},a=window.Promise,l=class extends a{constructor(y){super(y);fe(this,"promiseCreationError");this.promiseCreationError=new Error}getStack(){return this.promiseCreationError}static shouldPatch(){const y=typeof window.Zone=="undefined";return t&&y}};return l.shouldPatch()&&(window.Promise=l),()=>{window.Promise=a,window.onunhandledrejection=s,window.onerror=n}},vd=e=>{var n,s;if(e.length===0)return e;const t=e[0];return(n=t.fileName)!=null&&n.includes("highlight.run")||(s=t.fileName)!=null&&s.includes("highlight.io")||t.functionName==="new highlightPromise"?e.slice(1):e},_d=["assert","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"];var jo;(function(e){e.DeviceMemory="DeviceMemory",e.ViewportHeight="ViewportHeight",e.ViewportWidth="ViewportWidth",e.ScreenHeight="ScreenHeight",e.ScreenWidth="ScreenWidth",e.ViewportArea="ViewportArea"})(jo||(jo={}));var Qo;(function(e){e.Device="Device",e.WebVital="WebVital",e.Performance="Performance",e.Frontend="Frontend",e.Backend="Backend"})(Qo||(Qo={}));const $o=['["\\"Script error.\\""]','"Script error."','["\\"Load failed.\\""]','"Load failed."','["\\"Network request failed.\\""]','"Network request failed."','["\\"Document is not focused.\\""]','"Document is not focused."','["\\"Failed to fetch\\""]','"Failed to fetch"','[{"isTrusted":true}]','{"isTrusted":true}','["{}"]','"{}"','[""]','""','["\\"\\""]','""'],qo=["websocket error",'\\"ResizeObserver loop'],ea=(e,t,n)=>{const s=ta(t,e.headers,n);return vt(rt({},e),{headers:s})},ta=(e,t,n)=>{var a,l;const s=rt({},t);return n?((a=Object.keys(s))==null||a.forEach(p=>{[...n].includes(p==null?void 0:p.toLowerCase())||(s[p]="[REDACTED]")}),s):((l=Object.keys(s))==null||l.forEach(p=>{[...Ed,...e].includes(p==null?void 0:p.toLowerCase())&&(s[p]="[REDACTED]")}),s)},Ed=["authorization","cookie","proxy-authorization","token"],na=["https://www.googleapis.com/identitytoolkit","https://securetoken.googleapis.com"];let Id="localStorage";class Rd{constructor(){fe(this,"storage",{})}getItem(t){var n;return(n=this.storage[t])!=null?n:""}setItem(t,n){this.storage[t]=n}removeItem(t){delete this.storage[t]}}let Nd=new Rd;const ra=()=>{try{switch(Id){case"localStorage":return window.localStorage;case"sessionStorage":return window.sessionStorage}}catch(e){return Nd}},ia=e=>ra().getItem(e),Zd=(e,t)=>ra().setItem(e,t),Cd=15*60*1e3,Od=()=>{let e=JSON.parse(ia(Be.SESSION_DATA)||"{}");if(e&&e.lastPushTime&&Date.now()-e.lastPushTime<Cd)return e},sa=function(){var e;return(e=ia(Be.SESSION_SECURE_ID))!=null?e:""};var wd={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const oa="X-Highlight-Request",aa=e=>{let t=e;return!e.startsWith("https://")&&!e.startsWith("http://")&&(t=`${window.location.origin}${t}`),t.replace(/\/+$/,"")},Gd=(e,{headersToRedact:t,headersToRecord:n,requestResponseSanitizer:s})=>{var y,T;let a=e;if(s){let _=!0;try{a.request.body=JSON.parse(a.request.body)}catch(R){_=!1}let Z=!0;try{a.response.body=JSON.parse(a.response.body)}catch(R){Z=!1}try{a=s(a)}catch(R){}finally{_=_&&!!((y=a==null?void 0:a.request)!=null&&y.body),Z=Z&&!!((T=a==null?void 0:a.response)!=null&&T.body),_&&(a.request.body=JSON.stringify(a.request.body)),Z&&(a.response.body=JSON.stringify(a.response.body))}if(!a)return null}const g=a,{request:l,response:p}=g,m=Jo(g,["request","response"]);return rt({request:ea(l,t,n),response:ea(p,t,n)},m)},la=(e,t,n,s)=>{e.sort((y,T)=>y.responseEnd-T.responseEnd);const a={xmlhttprequest:{},others:{},fetch:{}},l=e.reduce((y,T)=>{const g=aa(T.name);return T.initiatorType===n?y[n][g]=[...y[n][g]||[],T]:y.others[g]=[...y.others[g]||[],T],y},a);let p={};p=t.reduce((y,T)=>{const g=aa(T.request.url);return y[g]=[...y[g]||[],T],y},p);for(let y in l[n]){const T=l[n][y],g=p[y];if(!g)continue;const _=Math.max(T.length-g.length,0);for(let Z=_;Z<T.length;Z++)T[Z]&&(T[Z].requestResponsePair=g[Z-_])}let m=[];for(let y in l)for(let T in l[y])m=m.concat(l[y][T]);return m.sort((y,T)=>y.fetchStart-T.fetchStart).reduce((y,T)=>{let g=T.requestResponsePair;return g&&(g=Gd(T.requestResponsePair,s),!g)||(T.toJSON=function(){const _=window.performance.timeOrigin;return{initiatorType:this.initiatorType,startTimeAbs:_+this.startTime,connectStartAbs:_+this.connectStart,connectEndAbs:_+this.connectEnd,domainLookupStartAbs:_+this.domainLookupStart,domainLookupEndAbs:_+this.domainLookupEnd,fetchStartAbs:_+this.fetchStart,redirectStartAbs:_+this.redirectStart,redirectEndAbs:_+this.redirectEnd,requestStartAbs:_+this.requestStart,responseStartAbs:_+this.responseStart,responseEndAbs:_+this.responseEnd,secureConnectionStartAbs:_+this.secureConnectionStart,workerStartAbs:_+this.workerStart,name:this.name,transferSize:this.transferSize,encodedBodySize:this.encodedBodySize,decodedBodySize:this.decodedBodySize,nextHopProtocol:this.nextHopProtocol,requestResponsePairs:g}},y.push(T)),y},[])},Ld=(e,t)=>{var n;return e.toLocaleLowerCase().includes((n=wd.REACT_APP_PUBLIC_GRAPH_URI)!=null?n:"highlight.io")||e.toLocaleLowerCase().includes("highlight.io")||e.toLocaleLowerCase().includes(t)},Vr=(e,t,n)=>!Ld(e,t)||Xr(e,n),Xr=(e,t)=>{var a;let n=[];t===!0?(n=["localhost",/^\//],(a=window==null?void 0:window.location)!=null&&a.host&&n.push(window.location.host)):t instanceof Array&&(n=t);let s=!1;return n.forEach(l=>{e.match(l)&&(s=!0)}),s};function Vd(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=n.length,a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*s));return t}const qi=()=>[sa(),Vd(10)],ca=(e,t)=>e+"/"+t,Xd=(e,t,n,s,a,l)=>{const p=XMLHttpRequest.prototype,m=p.open,y=p.send,T=p.setRequestHeader;return p.open=function(g,_){return typeof _=="string"?this._url=_:this._url=_.toString(),this._method=g,this._requestHeaders={},this._shouldRecordHeaderAndBody=!s.some(Z=>this._url.toLowerCase().includes(Z)),m.apply(this,arguments)},p.setRequestHeader=function(g,_){return this._requestHeaders[g]=_,T.apply(this,arguments)},p.send=function(g){if(!Vr(this._url,t,n))return y.apply(this,arguments);const[_,Z]=qi();Xr(this._url,n)&&this.setRequestHeader(oa,ca(_,Z));const R=this._shouldRecordHeaderAndBody,V={sessionSecureID:_,id:Z,url:this._url,verb:this._method,headers:R?this._requestHeaders:{},body:void 0};if(R&&g){const G=ua(g,V.url);G&&(this._body=G,V.body=Ft(G,a,l,V.headers))}return this.addEventListener("load",function(){return _t(this,null,function*(){const G={status:this.status,headers:{},body:void 0};if(R){const M=this.getAllResponseHeaders().trim().split(/[\r\n]+/),Ge={};if(M.forEach(function(Ve){const be=Ve.split(": "),ze=be.shift();Ge[ze]=be.join(": ")}),G.headers=Ge,g){const Ve=ua(g,V.url);Ve&&(V.body=Ft(Ve,a,l,G.headers))}if(this.responseType===""||this.responseType==="text")G.body=Ft(this.responseText,a,l,G.headers),G.size=this.responseText.length*8;else if(this.responseType==="blob"){if(this.response instanceof Blob)try{const Ve=yield this.response.text();G.body=Ft(Ve,a,l,G.headers),G.size=this.response.size}catch(Ve){}}else try{G.body=Ft(this.response,a,l,G.headers)}catch(Ve){}}e({request:V,response:G,urlBlocked:!R})})}),this.addEventListener("error",function(){return _t(this,null,function*(){const G={status:this.status,headers:void 0,body:void 0};e({request:V,response:G,urlBlocked:!1})})}),y.apply(this,arguments)},()=>{p.open=m,p.send=y,p.setRequestHeader=T}},ua=(e,t)=>{if(typeof e=="string"){if(!((t!=null&&t.includes("localhost")||t!=null&&t.includes("highlight.run"))&&e.includes("pushPayload")))return e}else if(typeof e=="object"||typeof e=="number"||typeof e=="boolean")return Lr(e);return null},da=64*1024,Wd={"application/json":64*1024*1024,"text/plain":64*1024*1024},Ft=(e,t,n,s)=>{var l,p,m;let a=da;if(s){let y="";typeof s.get=="function"?y=(l=s.get("content-type"))!=null?l:"":y=(p=s["content-type"])!=null?p:"";try{y=y.split(";")[0]}catch(T){}a=(m=Wd[y])!=null?m:da}if(e){if(t)try{const y=JSON.parse(e);Array.isArray(y)?y.forEach(T=>{Object.keys(T).forEach(g=>{t.includes(g.toLocaleLowerCase())&&(T[g]="[REDACTED]")})}):Object.keys(y).forEach(T=>{t.includes(T.toLocaleLowerCase())&&(y[T]="[REDACTED]")}),e=JSON.stringify(y)}catch(y){}if(n)try{const y=JSON.parse(e);Object.keys(y).forEach(T=>{n.includes(T.toLocaleLowerCase())||(y[T]="[REDACTED]")}),e=JSON.stringify(y)}catch(y){}}try{e=e.slice(0,a)}catch(y){}return e},kd=(e,t,n,s,a,l)=>{const p=window._fetchProxy;return window._fetchProxy=function(m,y){const{method:T,url:g}=Pd(m,y);if(!Vr(g,t,n))return p.call(this,m,y);const[_,Z]=qi();if(Xr(g,n)){y=y||{};let K=new Headers(y.headers);m instanceof Request&&[...m.headers].forEach(([re,M])=>K.set(re,M)),K.set(oa,ca(_,Z)),y.headers=Object.fromEntries(K.entries())}const R={sessionSecureID:_,id:Z,headers:{},body:void 0,url:g,verb:T},V=!s.some(K=>g.toLowerCase().includes(K));V&&(R.headers=Object.fromEntries(new Headers(y==null?void 0:y.headers).entries()),R.body=Ft(y==null?void 0:y.body,a,l,y==null?void 0:y.headers));let G=p.call(this,m,y);return Ad(G,R,e,V,a,l),G},()=>{window._fetchProxy=p}},Pd=(e,t)=>{const n=t&&t.method||typeof e=="object"&&"method"in e&&e.method||"GET";let s;return typeof e=="object"?"url"in e&&e.url?s=e.url:s=e.toString():s=e,{method:n,url:s}},Ad=(e,t,n,s,a,l)=>{const p=m=>_t(this,null,function*(){let y={body:void 0,headers:void 0,status:0,size:0},T=!1,g=!s;"stack"in m||m instanceof Error?(y=vt(rt({},y),{body:m.message,status:0,size:void 0}),T=!0):"status"in m&&(y=vt(rt({},y),{status:m.status}),s&&(y.body=yield pa(m,l,a),y.headers=Object.fromEntries(m.headers.entries()),y.size=y.body.length*8),(m.type==="opaque"||m.type==="opaqueredirect")&&(g=!0,y=vt(rt({},y),{body:"CORS blocked request"})),T=!0),T&&n({request:t,response:y,urlBlocked:g})});e.then(p).catch(()=>{})},pa=(e,t,n)=>_t(this,null,function*(){let s;try{const l=e.clone().body;if(l){let p=l.getReader(),m=new TextDecoder,y,T="";for(;!(y=yield p.read()).done;){let g=y.value;T+=m.decode(g)}s=T,s=Ft(s,n,t,e.headers)}else s=""}catch(a){s=`Unable to clone response: ${a}`}return s}),Md=(e,t,n)=>{const s=window._highlightWebSocketRequestCallback;window._highlightWebSocketRequestCallback=e;const a=window._highlightWebSocketEventCallback;return window._highlightWebSocketEventCallback=l=>{const _=l,{message:p,size:m}=_,y=Jo(_,["message","size"]),g=n.some(Z=>l.name.toLowerCase().includes(Z))?y:l;t(g)},()=>{window._highlightWebSocketRequestCallback=s,window._highlightWebSocketEventCallback=a}},xd=({xhrCallback:e,fetchCallback:t,webSocketRequestCallback:n,webSocketEventCallback:s,disableWebSocketRecording:a,bodyKeysToRedact:l,backendUrl:p,tracingOrigins:m,urlBlocklist:y,sessionSecureID:T,bodyKeysToRecord:g})=>{const _=Xd(e,p,m,y,l,g),Z=kd(t,p,m,y,l,g),R=a?()=>{}:Md(n,s,y);return()=>{_(),Z(),R()}};var Ud={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};class es{constructor(t){fe(this,"disableConsoleRecording");fe(this,"reportConsoleErrors");fe(this,"enablePromisePatch");fe(this,"consoleMethodsToRecord");fe(this,"listeners");fe(this,"errors");fe(this,"messages");fe(this,"options");fe(this,"hasNetworkRecording",!0);fe(this,"_backendUrl");fe(this,"disableNetworkRecording");fe(this,"enableRecordingNetworkContents");fe(this,"xhrNetworkContents");fe(this,"fetchNetworkContents");fe(this,"disableRecordingWebSocketContents");fe(this,"webSocketNetworkContents");fe(this,"webSocketEventContents");fe(this,"tracingOrigins");fe(this,"networkHeadersToRedact");fe(this,"networkBodyKeysToRedact");fe(this,"networkBodyKeysToRecord");fe(this,"networkHeaderKeysToRecord");fe(this,"lastNetworkRequestTimestamp");fe(this,"urlBlocklist");fe(this,"requestResponseSanitizer");var n,s;this.options=t,this.disableConsoleRecording=!!t.disableConsoleRecording,this.reportConsoleErrors=(n=t.reportConsoleErrors)!=null?n:!1,this.enablePromisePatch=(s=t.enablePromisePatch)!=null?s:!0,this.consoleMethodsToRecord=t.consoleMethodsToRecord||[..._d],this.listeners=[],this.errors=[],this.messages=[],this.lastNetworkRequestTimestamp=0}isListening(){return this.listeners.length>0}startListening(){if(this.isListening())return;const t=this;this.disableConsoleRecording||this.listeners.push(gd(n=>{var s,a,l;if(this.reportConsoleErrors&&(n.type==="Error"||n.type==="error")&&n.value&&n.trace){const p=Lr(n.value);if($o.includes(p)||qo.some(m=>p.includes(m)))return;t.errors.push({event:p,type:"console.error",url:window.location.href,source:(s=n.trace[0])!=null&&s.fileName?n.trace[0].fileName:"",lineNumber:(a=n.trace[0])!=null&&a.lineNumber?n.trace[0].lineNumber:0,columnNumber:(l=n.trace[0])!=null&&l.columnNumber?n.trace[0].columnNumber:0,stackTrace:n.trace,timestamp:new Date().toISOString()})}t.messages.push(n)},{level:this.consoleMethodsToRecord,logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}})),this.listeners.push(Td(n=>{$o.includes(n.event)||qo.some(s=>n.event.includes(s))||t.errors.push(n)},{enablePromisePatch:this.enablePromisePatch})),this.options.enableOtelTracing&&Promise.resolve().then(()=>zl).then(({shutdown:n})=>{this.listeners.push(n)}),es.setupNetworkListener(this,this.options)}stopListening(){this.listeners.forEach(t=>t()),this.listeners=[]}static setupNetworkListener(t,n){var s,a,l,p,m,y,T,g,_,Z,R,V;t._backendUrl=(n==null?void 0:n.backendUrl)||Ud.REACT_APP_PUBLIC_GRAPH_URI||"https://pub.highlight.run",t.xhrNetworkContents=[],t.fetchNetworkContents=[],t.webSocketNetworkContents=[],t.webSocketEventContents=[],t.networkHeadersToRedact=[],t.urlBlocklist=[],t.tracingOrigins=n.tracingOrigins||[],(n==null?void 0:n.disableNetworkRecording)!==void 0?(t.disableNetworkRecording=n==null?void 0:n.disableNetworkRecording,t.enableRecordingNetworkContents=!1,t.disableRecordingWebSocketContents=!0,t.networkHeadersToRedact=[],t.networkBodyKeysToRedact=[],t.urlBlocklist=[],t.networkBodyKeysToRecord=[],t.networkBodyKeysToRecord=[]):typeof(n==null?void 0:n.networkRecording)=="boolean"?(t.disableNetworkRecording=!n.networkRecording,t.enableRecordingNetworkContents=!1,t.disableRecordingWebSocketContents=!0,t.networkHeadersToRedact=[],t.networkBodyKeysToRedact=[],t.urlBlocklist=[]):(((s=n.networkRecording)==null?void 0:s.enabled)!==void 0?t.disableNetworkRecording=!n.networkRecording.enabled:t.disableNetworkRecording=!1,t.enableRecordingNetworkContents=((a=n.networkRecording)==null?void 0:a.recordHeadersAndBody)||!1,t.disableRecordingWebSocketContents=((l=n.networkRecording)==null?void 0:l.disableWebSocketEventRecordings)||!1,t.networkHeadersToRedact=((m=(p=n.networkRecording)==null?void 0:p.networkHeadersToRedact)==null?void 0:m.map(G=>G.toLowerCase()))||[],t.networkBodyKeysToRedact=((T=(y=n.networkRecording)==null?void 0:y.networkBodyKeysToRedact)==null?void 0:T.map(G=>G.toLowerCase()))||[],t.urlBlocklist=((_=(g=n.networkRecording)==null?void 0:g.urlBlocklist)==null?void 0:_.map(G=>G.toLowerCase()))||[],t.urlBlocklist=[...t.urlBlocklist,...na],t.requestResponseSanitizer=(Z=n.networkRecording)==null?void 0:Z.requestResponseSanitizer,t.networkHeaderKeysToRecord=(R=n.networkRecording)==null?void 0:R.headerKeysToRecord,t.networkHeaderKeysToRecord&&(t.networkHeadersToRedact=[],t.networkHeaderKeysToRecord=t.networkHeaderKeysToRecord.map(G=>G.toLocaleLowerCase())),t.networkBodyKeysToRecord=(V=n.networkRecording)==null?void 0:V.bodyKeysToRecord,t.networkBodyKeysToRecord&&(t.networkBodyKeysToRedact=[],t.networkBodyKeysToRecord=t.networkBodyKeysToRecord.map(G=>G.toLocaleLowerCase()))),!t.disableNetworkRecording&&t.enableRecordingNetworkContents&&t.listeners.push(xd({xhrCallback:G=>{t.xhrNetworkContents.push(G)},fetchCallback:G=>{t.fetchNetworkContents.push(G)},webSocketRequestCallback:G=>{t.webSocketNetworkContents&&t.webSocketNetworkContents.push(G)},webSocketEventCallback:G=>{t.webSocketEventContents.push(G)},disableWebSocketRecording:t.disableRecordingWebSocketContents,bodyKeysToRedact:t.networkBodyKeysToRedact,backendUrl:t._backendUrl,tracingOrigins:t.tracingOrigins,urlBlocklist:t.urlBlocklist,sessionSecureID:n.sessionSecureID,bodyKeysToRecord:t.networkBodyKeysToRecord}))}static getRecordedNetworkResources(t,n){var l,p;let s=[],a=[];if(!t.disableNetworkRecording){const m=((l=window==null?void 0:window.performance)==null?void 0:l.timeOrigin)||0;s=performance.getEntriesByType("resource");const y=(n-m)*2;if(s=s.filter(T=>T.responseEnd<t.lastNetworkRequestTimestamp?!1:Vr(T.name,t._backendUrl,t.tracingOrigins)).map(T=>vt(rt({},T.toJSON()),{offsetStartTime:T.startTime-y,offsetResponseEnd:T.responseEnd-y,offsetFetchStart:T.fetchStart-y})),t.lastNetworkRequestTimestamp=((p=s.at(-1))==null?void 0:p.responseEnd)||t.lastNetworkRequestTimestamp,t.enableRecordingNetworkContents){const T={headersToRedact:t.networkHeadersToRedact,headersToRecord:t.networkHeaderKeysToRecord,requestResponseSanitizer:t.requestResponseSanitizer};s=la(s,t.xhrNetworkContents,"xmlhttprequest",T),s=la(s,t.fetchNetworkContents,"fetch",T)}}return t.disableRecordingWebSocketContents||(a=t.webSocketNetworkContents||[]),[...s,...a]}static getRecordedWebSocketEvents(t){let n=[];return!t.disableNetworkRecording&&!t.disableRecordingWebSocketContents&&(n=t.webSocketEventContents),n}static clearRecordedNetworkResources(t){t.disableNetworkRecording||(t.xhrNetworkContents=[],t.fetchNetworkContents=[],t.webSocketNetworkContents=[],t.webSocketEventContents=[],performance.clearResourceTimings())}}const Dd=()=>{var l;const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var n="";const s=typeof window!="undefined"&&((l=window.crypto)==null?void 0:l.getRandomValues),a=new Uint32Array(28);s&&window.crypto.getRandomValues(a);for(let p=0;p<28;p++)s?n+=t.charAt(a[p]%t.length):n+=t.charAt(Math.floor(Math.random()*t.length));return n},Fd=({next:e,payload:t})=>{if(typeof window!="undefined"&&typeof document!="undefined"&&"H"in window){if(t.obj.type==="track"){const n=t.obj.event,s=t.obj.properties;window.H.track(n,s)}else if(t.obj.type==="identify"){const n=t.obj.userId;if(n!=null&&n.length){const s=t.obj.traits;window.H.identify(n,s)}}}e(t)};function Yd(e){var t;e.on&&((t=e.webContents)!=null&&t.send)&&(e.on("focus",()=>{e.webContents.send("highlight.run",{visible:!0})}),e.on("blur",()=>{e.webContents.send("highlight.run",{visible:!1})}),e.on("close",()=>{e.webContents.send("highlight.run",{visible:!1})}))}const Hd="9.1.2",ts=()=>{if(typeof window!="undefined"){if(typeof window._highlightFetchPatch!="undefined")return;window._originalFetch=window.fetch,window._fetchProxy=(e,t)=>window._originalFetch(e,t),window._highlightFetchPatch=(e,t)=>window._fetchProxy.call(window||global,e,t),window.fetch=window._highlightFetchPatch}},ha=()=>null,ns=()=>{if(typeof window!="undefined"){if(typeof window._highlightWebSocketRequestCallback!="undefined")return;window._highlightWebSocketRequestCallback=ha,window._highlightWebSocketEventCallback=ha;const e=new Proxy(window.WebSocket,{construct(t,n){const[,s]=qi(),a=new t(...n),l=g=>{window._highlightWebSocketRequestCallback({socketId:s,initiatorType:"websocket",type:"open",name:a.url,startTimeAbs:performance.timeOrigin+g.timeStamp})},p=g=>{window._highlightWebSocketRequestCallback({socketId:s,initiatorType:"websocket",type:"close",name:a.url,responseEndAbs:performance.timeOrigin+g.timeStamp}),a.removeEventListener("open",l),a.removeEventListener("error",y),a.removeEventListener("message",m),a.removeEventListener("close",p)},m=g=>{const{data:_}=g,Z=typeof _=="string"?g.data:void 0;let R;typeof _=="string"?R=_.length:_ instanceof Blob?R=_.size:R=_.byteLength||0,window._highlightWebSocketEventCallback({socketId:s,type:"received",name:a.url,timeStamp:performance.timeOrigin+g.timeStamp,size:R,message:Z})},y=g=>{window._highlightWebSocketEventCallback({socketId:s,type:"error",name:a.url,timeStamp:performance.timeOrigin+g.timeStamp,size:0})};a.addEventListener("open",l),a.addEventListener("error",y),a.addEventListener("message",m),a.addEventListener("close",p);const T=new Proxy(a.send,{apply:function(g,_,Z){const R=Z[0],V=typeof R=="string"?R:void 0;let G;typeof R=="string"?G=R.length:R instanceof Blob?G=R.size:G=R.byteLength||0,window._highlightWebSocketEventCallback({socketId:s,type:"sent",name:a.url,timeStamp:performance.timeOrigin+performance.now(),size:G,message:V}),g.apply(_,Z)}});return a.send=T,a}});window.WebSocket=e}},Jd=()=>{var e,t;typeof chrome!="undefined"&&((e=chrome==null?void 0:chrome.runtime)!=null&&e.onMessage)&&((t=chrome==null?void 0:chrome.runtime)==null||t.onMessage.addListener((n,s,a)=>{const l=n.action;switch(console.log(`[highlight] received '${l}' event from extension.`),l){case"init":{ke.init(1,{debug:!0}),ke.getSessionURL().then(p=>{a({url:p})});break}case"stop":{ke.stop(),a({success:!0});break}}return!0}))};Se.MetricCategory=void 0,function(e){e.Device="Device",e.WebVital="WebVital",e.Frontend="Frontend",e.Backend="Backend"}(Se.MetricCategory||(Se.MetricCategory={}));const Ot=(e,t)=>{console.warn(`highlight.run warning: (${e}): `,t)},Kd=200;let Wr=[],rs,Ie,kr,ma=!1,Hn;const ke={options:void 0,init:(e,t)=>{var n,s,a,l,p,m,y,T;try{if(ke.options=t,typeof window=="undefined"||typeof document=="undefined")return;if(!e){console.info("Highlight is not initializing because projectID was passed undefined.");return}let g=Od(),_=Dd();if(g!=null&&g.sessionSecureID)_=g.sessionSecureID;else{const R=vt(rt({},g),{projectID:+e,sessionSecureID:_});Zd(Be.SESSION_DATA,JSON.stringify(R))}if(ma)return{sessionSecureID:_};ma=!0,t!=null&&t.enableOtelTracing&&Promise.resolve().then(()=>zl).then(({setupBrowserTracing:R,getTracer:V})=>{var G,K;R({endpoint:t==null?void 0:t.otlpEndpoint,projectId:e,sessionSecureId:_,environment:(G=t==null?void 0:t.environment)!=null?G:"production",networkRecordingOptions:typeof(t==null?void 0:t.networkRecording)=="object"?t.networkRecording:void 0,tracingOrigins:t==null?void 0:t.tracingOrigins,serviceName:(K=t==null?void 0:t.serviceName)!=null?K:"highlight-browser"}),Hn=V}),ts(),ns(),Promise.resolve().then(()=>QI).then(V=>_t(this,[V],function*({Highlight:R}){Ie=new R(Z,kr),ts(),ns(),t!=null&&t.manualStart||(yield Ie.initialize())}));const Z={organizationID:e,debug:t==null?void 0:t.debug,backendUrl:t==null?void 0:t.backendUrl,tracingOrigins:t==null?void 0:t.tracingOrigins,disableNetworkRecording:t==null?void 0:t.disableNetworkRecording,networkRecording:t==null?void 0:t.networkRecording,disableBackgroundRecording:t==null?void 0:t.disableBackgroundRecording,disableConsoleRecording:t==null?void 0:t.disableConsoleRecording,disableSessionRecording:t==null?void 0:t.disableSessionRecording,reportConsoleErrors:t==null?void 0:t.reportConsoleErrors,consoleMethodsToRecord:t==null?void 0:t.consoleMethodsToRecord,privacySetting:t==null?void 0:t.privacySetting,enableSegmentIntegration:t==null?void 0:t.enableSegmentIntegration,enableCanvasRecording:t==null?void 0:t.enableCanvasRecording,enablePerformanceRecording:t==null?void 0:t.enablePerformanceRecording,enablePromisePatch:t==null?void 0:t.enablePromisePatch,samplingStrategy:t==null?void 0:t.samplingStrategy,inlineImages:t==null?void 0:t.inlineImages,inlineStylesheet:t==null?void 0:t.inlineStylesheet,recordCrossOriginIframe:t==null?void 0:t.recordCrossOriginIframe,firstloadVersion:Hd,environment:(t==null?void 0:t.environment)||"production",appVersion:t==null?void 0:t.version,serviceName:t==null?void 0:t.serviceName,sessionShortcut:t==null?void 0:t.sessionShortcut,sessionSecureID:_,storageMode:t==null?void 0:t.storageMode,sendMode:t==null?void 0:t.sendMode};return kr=new es(Z),t!=null&&t.manualStart||kr.startListening(),!((s=(n=t==null?void 0:t.integrations)==null?void 0:n.mixpanel)!=null&&s.disabled)&&((l=(a=t==null?void 0:t.integrations)==null?void 0:a.mixpanel)!=null&&l.projectToken)&&wr(t.integrations.mixpanel),!((m=(p=t==null?void 0:t.integrations)==null?void 0:p.amplitude)!=null&&m.disabled)&&((T=(y=t==null?void 0:t.integrations)==null?void 0:y.amplitude)!=null&&T.apiKey)&&Oe(t.integrations.amplitude),{sessionSecureID:_}}catch(g){Ot("init",g)}},snapshot:e=>_t(this,null,function*(){try{if(Ie&&Ie.ready)return yield Ie.snapshot(e)}catch(t){Ot("snapshot",t)}}),addSessionFeedback:({verbatim:e,userName:t,userEmail:n,timestampOverride:s})=>{try{ke.onHighlightReady(()=>Ie.addSessionFeedback({verbatim:e,timestamp:s||new Date().toISOString(),user_email:n,user_name:t}))}catch(a){Ot("error",a)}},consumeError:(e,t,n)=>{try{ke.onHighlightReady(()=>Ie.consumeCustomError(e,t,JSON.stringify(n)))}catch(s){Ot("error",s)}},consume:(e,t)=>{try{ke.onHighlightReady(()=>Ie.consumeError(e,t))}catch(n){Ot("error",n)}},error:(e,t)=>{try{ke.onHighlightReady(()=>Ie.pushCustomError(e,JSON.stringify(t)))}catch(n){Ot("error",n)}},track:(e,t={})=>{var n,s,a,l,p,m,y,T,g,_,Z;try{ke.onHighlightReady(()=>Ie.addProperties(vt(rt({},t),{event:e})));const R=Ie==null?void 0:Ie.getCurrentSessionURL();(a=(s=(n=ke.options)==null?void 0:n.integrations)==null?void 0:s.mixpanel)!=null&&a.disabled||(l=window.mixpanel)!=null&&l.track&&window.mixpanel.track(e,vt(rt({},t),{highlightSessionURL:R})),(y=(m=(p=ke.options)==null?void 0:p.integrations)==null?void 0:m.amplitude)!=null&&y.disabled||(T=window.amplitude)!=null&&T.getInstance&&window.amplitude.getInstance().logEvent(e,vt(rt({},t),{highlightSessionURL:R})),(Z=(_=(g=ke.options)==null?void 0:g.integrations)==null?void 0:_.intercom)!=null&&Z.disabled||window.Intercom&&window.Intercom("trackEvent",e,t)}catch(R){Ot("track",R)}},start:e=>{(Ie==null?void 0:Ie.state)==="Recording"&&!(e!=null&&e.forceNew)?e!=null&&e.silent||console.warn("Highlight is already recording. Please `H.stop()` the current session before starting a new one."):(kr.startListening(),ke.onHighlightReady(()=>_t(this,null,function*(){yield Ie.initialize(e)}),{waitForReady:!1}))},stop:e=>{(Ie==null?void 0:Ie.state)!=="Recording"?e!=null&&e.silent||console.warn("Highlight is already stopped. Please call `H.start()`."):ke.onHighlightReady(()=>Ie.stopRecording(!0))},identify:(e,t={})=>{var n,s,a,l,p,m,y,T;try{ke.onHighlightReady(()=>Ie.identify(e,t))}catch(g){Ot("identify",g)}if((a=(s=(n=ke.options)==null?void 0:n.integrations)==null?void 0:s.mixpanel)!=null&&a.disabled||(l=window.mixpanel)!=null&&l.identify&&(window.mixpanel.identify(typeof(t==null?void 0:t.email)=="string"?t==null?void 0:t.email:e),t&&(window.mixpanel.track("identify",t),window.mixpanel.people.set(t))),!((y=(m=(p=ke.options)==null?void 0:p.integrations)==null?void 0:m.amplitude)!=null&&y.disabled)&&(T=window.amplitude)!=null&&T.getInstance&&(window.amplitude.getInstance().setUserId(e),Object.keys(t).length>0)){const g=Object.keys(t).reduce((_,Z)=>(_.set(Z,t[Z]),_),new window.amplitude.Identify);window.amplitude.getInstance().identify(g)}},metrics:e=>{try{ke.onHighlightReady(()=>Ie.recordMetric(e.map(t=>vt(rt({},t),{category:Se.MetricCategory.Frontend}))))}catch(t){Ot("metrics",t)}},startSpan:(e,t,n,s)=>{const a=typeof Hn=="function"?Hn():void 0;if(!a)return typeof s=="function"?s():void 0;const l=(p,m)=>_t(this,null,function*(){try{return yield m(p)}finally{p.end()}});return s===void 0&&n===void 0?a.startActiveSpan(e,p=>l(p,t)):s===void 0?a.startActiveSpan(e,t,p=>l(p,n)):a.startActiveSpan(e,t,n,p=>l(p,s))},startManualSpan:(e,t,n,s)=>{if(typeof Hn!="function")return;const a=Hn();return s===void 0&&n===void 0?a.startActiveSpan(e,t):s===void 0?a.startActiveSpan(e,t,n):a.startActiveSpan(e,t,n,s)},getSessionURL:()=>new Promise((e,t)=>{const n=sa();n?e(n):t(new Error("Unable to get session URL"))}),getSessionDetails:()=>new Promise((e,t)=>{ke.onHighlightReady(()=>{const n=Ie.getCurrentSessionURL();if(n){const s=Ie.getCurrentSessionTimestamp(),a=new Date().getTime(),l=new URL(n),p=new URL(n);p.searchParams.set("ts",((a-s)/1e3).toString()),e({url:l.toString(),urlWithTimestamp:p.toString()})}else t(new Error("Could not get session URL"))})}),getRecordingState:()=>{var e;return(e=Ie==null?void 0:Ie.state)!=null?e:"NotRecording"},onHighlightReady:(e,t)=>{if(Wr.push({options:t,func:e}),rs===void 0){const n=()=>{var a;const s=[];for(const l of Wr)Ie&&(((a=l.options)==null?void 0:a.waitForReady)===!1||Ie.ready)?l.func():s.push(l);Wr=s,rs=void 0,Wr.length>0&&(rs=setTimeout(n,Kd))};n()}}};typeof window!="undefined"&&(window.H=ke),Jd(),ts(),ns();var Bd=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Qt="1.8.0",fa=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function zd(e){var t=new Set([e]),n=new Set,s=e.match(fa);if(!s)return function(){return!1};var a={major:+s[1],minor:+s[2],patch:+s[3],prerelease:s[4]};if(a.prerelease!=null)return function(y){return y===e};function l(m){return n.add(m),!1}function p(m){return t.add(m),!0}return function(y){if(t.has(y))return!0;if(n.has(y))return!1;var T=y.match(fa);if(!T)return l(y);var g={major:+T[1],minor:+T[2],patch:+T[3],prerelease:T[4]};return g.prerelease!=null||a.major!==g.major?l(y):a.major===0?a.minor===g.minor&&a.patch<=g.patch?p(y):l(y):a.minor<=g.minor?p(y):l(y)}}var jd=zd(Qt),Qd=Qt.split(".")[0],Jn=Symbol.for("opentelemetry.js.api."+Qd),Kn=Bd;function Bn(e,t,n,s){var a;s===void 0&&(s=!1);var l=Kn[Jn]=(a=Kn[Jn])!==null&&a!==void 0?a:{version:Qt};if(!s&&l[e]){var p=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(p.stack||p.message),!1}if(l.version!==Qt){var p=new Error("@opentelemetry/api: Registration of version v"+l.version+" for "+e+" does not match previously registered API v"+Qt);return n.error(p.stack||p.message),!1}return l[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Qt+"."),!0}function $t(e){var t,n,s=(t=Kn[Jn])===null||t===void 0?void 0:t.version;if(!(!s||!jd(s)))return(n=Kn[Jn])===null||n===void 0?void 0:n[e]}function zn(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Qt+".");var n=Kn[Jn];n&&delete n[e]}var $d=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},qd=function(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,l;s<a;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))},ep=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jn("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jn("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jn("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jn("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return jn("verbose",this._namespace,t)},e}();function jn(e,t,n){var s=$t("diag");if(s)return n.unshift(t),s[e].apply(s,qd([],$d(n),!1))}var Pe;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Pe||(Pe={}));function tp(e,t){e<Pe.NONE?e=Pe.NONE:e>Pe.ALL&&(e=Pe.ALL),t=t||{};function n(s,a){var l=t[s];return typeof l=="function"&&e>=a?l.bind(t):function(){}}return{error:n("error",Pe.ERROR),warn:n("warn",Pe.WARN),info:n("info",Pe.INFO),debug:n("debug",Pe.DEBUG),verbose:n("verbose",Pe.VERBOSE)}}var np=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},rp=function(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,l;s<a;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))},ip="diag",Et=function(){function e(){function t(a){return function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var m=$t("diag");if(m)return m[a].apply(m,rp([],np(l),!1))}}var n=this,s=function(a,l){var p,m,y;if(l===void 0&&(l={logLevel:Pe.INFO}),a===n){var T=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((p=T.stack)!==null&&p!==void 0?p:T.message),!1}typeof l=="number"&&(l={logLevel:l});var g=$t("diag"),_=tp((m=l.logLevel)!==null&&m!==void 0?m:Pe.INFO,a);if(g&&!l.suppressOverrideMessage){var Z=(y=new Error().stack)!==null&&y!==void 0?y:"<failed to generate stacktrace>";g.warn("Current logger will be overwritten from "+Z),_.warn("Current logger will overwrite one already registered from "+Z)}return Bn("diag",_,n,!0)};n.setLogger=s,n.disable=function(){zn(ip,n)},n.createComponentLogger=function(a){return new ep(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),sp=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},op=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ap=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var n=this._entries.get(t);if(n)return Object.assign({},n)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var n=sp(t,2),s=n[0],a=n[1];return[s,a]})},e.prototype.setEntry=function(t,n){var s=new e(this._entries);return s._entries.set(t,n),s},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var l=new e(this._entries);try{for(var p=op(s),m=p.next();!m.done;m=p.next()){var y=m.value;l._entries.delete(y)}}catch(T){t={error:T}}finally{try{m&&!m.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}return l},e.prototype.clear=function(){return new e},e}(),lp=Symbol("BaggageEntryMetadata"),cp=Et.instance();function up(e){return e===void 0&&(e={}),new ap(new Map(Object.entries(e)))}function dp(e){return typeof e!="string"&&(cp.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:lp,toString:function(){return e}}}function is(e){return Symbol.for(e)}var pp=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(s){return n._currentContext.get(s)},n.setValue=function(s,a){var l=new e(n._currentContext);return l._currentContext.set(s,a),l},n.deleteValue=function(s){var a=new e(n._currentContext);return a._currentContext.delete(s),a}}return e}(),qt=new pp,bn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),hp=function(){function e(){}return e.prototype.createHistogram=function(t,n){return _p},e.prototype.createCounter=function(t,n){return vp},e.prototype.createUpDownCounter=function(t,n){return Ep},e.prototype.createObservableGauge=function(t,n){return Rp},e.prototype.createObservableCounter=function(t,n){return Ip},e.prototype.createObservableUpDownCounter=function(t,n){return Np},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),ss=function(){function e(){}return e}(),mp=function(e){bn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,s){},t}(ss),fp=function(e){bn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,s){},t}(ss),bp=function(e){bn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,s){},t}(ss),os=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),yp=function(e){bn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(os),gp=function(e){bn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(os),Sp=function(e){bn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(os),Tp=new hp,vp=new mp,_p=new bp,Ep=new fp,Ip=new yp,Rp=new gp,Np=new Sp,Zp={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},Cp={set:function(e,t,n){e!=null&&(e[t]=n)}},Op=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},wp=function(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,l;s<a;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))},Gp=function(){function e(){}return e.prototype.active=function(){return qt},e.prototype.with=function(t,n,s){for(var a=[],l=3;l<arguments.length;l++)a[l-3]=arguments[l];return n.call.apply(n,wp([s],Op(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Lp=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},Vp=function(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,l;s<a;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))},as="context",Xp=new Gp,Pr=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Bn(as,t,Et.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,s){for(var a,l=[],p=3;p<arguments.length;p++)l[p-3]=arguments[p];return(a=this._getContextManager()).with.apply(a,Vp([t,n,s],Lp(l),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return $t(as)||Xp},e.prototype.disable=function(){this._getContextManager().disable(),zn(as,Et.instance())},e}(),It;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(It||(It={}));var ba="0000000000000000",ya="00000000000000000000000000000000",ga={traceId:ya,spanId:ba,traceFlags:It.NONE},Qn=function(){function e(t){t===void 0&&(t=ga),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),ls=is("OpenTelemetry Context Key SPAN");function cs(e){return e.getValue(ls)||void 0}function Wp(){return cs(Pr.getInstance().active())}function us(e,t){return e.setValue(ls,t)}function kp(e){return e.deleteValue(ls)}function Pp(e,t){return us(e,new Qn(t))}function Sa(e){var t;return(t=cs(e))===null||t===void 0?void 0:t.spanContext()}var Ap=/^([0-9a-f]{32})$/i,Mp=/^[0-9a-f]{16}$/i;function Ta(e){return Ap.test(e)&&e!==ya}function xp(e){return Mp.test(e)&&e!==ba}function Ar(e){return Ta(e.traceId)&&xp(e.spanId)}function Up(e){return new Qn(e)}var ds=Pr.getInstance(),va=function(){function e(){}return e.prototype.startSpan=function(t,n,s){s===void 0&&(s=ds.active());var a=!!(n!=null&&n.root);if(a)return new Qn;var l=s&&Sa(s);return Dp(l)&&Ar(l)?new Qn(l):new Qn},e.prototype.startActiveSpan=function(t,n,s,a){var l,p,m;if(!(arguments.length<2)){arguments.length===2?m=n:arguments.length===3?(l=n,m=s):(l=n,p=s,m=a);var y=p!=null?p:ds.active(),T=this.startSpan(t,l,y),g=us(y,T);return ds.with(g,m,void 0,T)}},e}();function Dp(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Fp=new va,Yp=function(){function e(t,n,s,a){this._provider=t,this.name=n,this.version=s,this.options=a}return e.prototype.startSpan=function(t,n,s){return this._getTracer().startSpan(t,n,s)},e.prototype.startActiveSpan=function(t,n,s,a){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Fp},e}(),Hp=function(){function e(){}return e.prototype.getTracer=function(t,n,s){return new va},e}(),Jp=new Hp,_a=function(){function e(){}return e.prototype.getTracer=function(t,n,s){var a;return(a=this.getDelegateTracer(t,n,s))!==null&&a!==void 0?a:new Yp(this,t,n,s)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Jp},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,s){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,s)},e}(),Mr;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Mr||(Mr={}));var $n;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})($n||($n={}));var ps;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(ps||(ps={}));var Ee=Pr.getInstance(),de=Et.instance(),Kp=function(){function e(){}return e.prototype.getMeter=function(t,n,s){return Tp},e}(),Bp=new Kp,hs="metrics",zp=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return Bn(hs,t,Et.instance())},e.prototype.getMeterProvider=function(){return $t(hs)||Bp},e.prototype.getMeter=function(t,n,s){return this.getMeterProvider().getMeter(t,n,s)},e.prototype.disable=function(){zn(hs,Et.instance())},e}(),Ea=zp.getInstance(),jp=function(){function e(){}return e.prototype.inject=function(t,n){},e.prototype.extract=function(t,n){return t},e.prototype.fields=function(){return[]},e}(),ms=is("OpenTelemetry Baggage Key");function Ia(e){return e.getValue(ms)||void 0}function Qp(){return Ia(Pr.getInstance().active())}function $p(e,t){return e.setValue(ms,t)}function qp(e){return e.deleteValue(ms)}var fs="propagation",eh=new jp,th=function(){function e(){this.createBaggage=up,this.getBaggage=Ia,this.getActiveBaggage=Qp,this.setBaggage=$p,this.deleteBaggage=qp}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return Bn(fs,t,Et.instance())},e.prototype.inject=function(t,n,s){return s===void 0&&(s=Cp),this._getGlobalPropagator().inject(t,n,s)},e.prototype.extract=function(t,n,s){return s===void 0&&(s=Zp),this._getGlobalPropagator().extract(t,n,s)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){zn(fs,Et.instance())},e.prototype._getGlobalPropagator=function(){return $t(fs)||eh},e}(),at=th.getInstance(),bs="trace",nh=function(){function e(){this._proxyTracerProvider=new _a,this.wrapSpanContext=Up,this.isSpanContextValid=Ar,this.deleteSpan=kp,this.getSpan=cs,this.getActiveSpan=Wp,this.getSpanContext=Sa,this.setSpan=us,this.setSpanContext=Pp}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=Bn(bs,this._proxyTracerProvider,Et.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return $t(bs)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){zn(bs,Et.instance()),this._proxyTracerProvider=new _a},e}(),Le=nh.getInstance(),Ra=is("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Na(e){return e.setValue(Ra,!0)}function ys(e){return e.getValue(Ra)===!0}var rh="=",gs=";",xr=",",Ss="baggage",ih=180,sh=4096,oh=8192,ah=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l};function lh(e){return e.reduce(function(t,n){var s=""+t+(t!==""?xr:"")+n;return s.length>oh?t:s},"")}function ch(e){return e.getAllEntries().map(function(t){var n=ah(t,2),s=n[0],a=n[1],l=encodeURIComponent(s)+"="+encodeURIComponent(a.value);return a.metadata!==void 0&&(l+=gs+a.metadata.toString()),l})}function Za(e){var t=e.split(gs);if(!(t.length<=0)){var n=t.shift();if(n){var s=n.indexOf(rh);if(!(s<=0)){var a=decodeURIComponent(n.substring(0,s).trim()),l=decodeURIComponent(n.substring(s+1).trim()),p;return t.length>0&&(p=dp(t.join(gs))),{key:a,value:l,metadata:p}}}}}function Ca(e){return typeof e!="string"||e.length===0?{}:e.split(xr).map(function(t){return Za(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,n){return t[n.key]=n.value,t},{})}var Oa=function(){function e(){}return e.prototype.inject=function(t,n,s){var a=at.getBaggage(t);if(!(!a||ys(t))){var l=ch(a).filter(function(m){return m.length<=sh}).slice(0,ih),p=lh(l);p.length>0&&s.set(n,Ss,p)}},e.prototype.extract=function(t,n,s){var a=s.get(n,Ss),l=Array.isArray(a)?a.join(xr):a;if(!l)return t;var p={};if(l.length===0)return t;var m=l.split(xr);return m.forEach(function(y){var T=Za(y);if(T){var g={value:T.value};T.metadata&&(g.metadata=T.metadata),p[T.key]=g}}),Object.entries(p).length===0?t:at.setBaggage(t,at.createBaggage(p))},e.prototype.fields=function(){return[Ss]},e}(),wa=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},uh=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l};function Ur(e){var t,n,s={};if(typeof e!="object"||e==null)return s;try{for(var a=wa(Object.entries(e)),l=a.next();!l.done;l=a.next()){var p=uh(l.value,2),m=p[0],y=p[1];if(!dh(m)){de.warn("Invalid attribute key: "+m);continue}if(!Ga(y)){de.warn("Invalid attribute value set for key: "+m);continue}Array.isArray(y)?s[m]=y.slice():s[m]=y}}catch(T){t={error:T}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s}function dh(e){return typeof e=="string"&&e.length>0}function Ga(e){return e==null?!0:Array.isArray(e)?ph(e):La(e)}function ph(e){var t,n,s;try{for(var a=wa(e),l=a.next();!l.done;l=a.next()){var p=l.value;if(p!=null){if(!s){if(La(p)){s=typeof p;continue}return!1}if(typeof p!==s)return!1}}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}function La(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}function hh(){return function(e){de.error(mh(e))}}function mh(e){return typeof e=="string"?e:JSON.stringify(fh(e))}function fh(e){for(var t={},n=e;n!==null;)Object.getOwnPropertyNames(n).forEach(function(s){if(!t[s]){var a=n[s];a&&(t[s]=String(a))}}),n=Object.getPrototypeOf(n);return t}var bh=hh();function en(e){try{bh(e)}catch(t){}}var Rt;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(Rt||(Rt={}));var qn=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},yh=",",gh=["OTEL_SDK_DISABLED"];function Sh(e){return gh.indexOf(e)>-1}var Th=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function vh(e){return Th.indexOf(e)>-1}var _h=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Eh(e){return _h.indexOf(e)>-1}var Dr=1/0,Fr=128,Ih=128,Rh=128,Va={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Pe.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Dr,OTEL_ATTRIBUTE_COUNT_LIMIT:Fr,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Dr,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Fr,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Dr,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Fr,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:Ih,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:Rh,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Rt.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Nh(e,t,n){if(typeof n[e]!="undefined"){var s=String(n[e]);t[e]=s.toLowerCase()==="true"}}function Zh(e,t,n,s,a){if(s===void 0&&(s=-1/0),a===void 0&&(a=1/0),typeof n[e]!="undefined"){var l=Number(n[e]);isNaN(l)||(l<s?t[e]=s:l>a?t[e]=a:t[e]=l)}}function Ch(e,t,n,s){s===void 0&&(s=yh);var a=n[e];typeof a=="string"&&(t[e]=a.split(s).map(function(l){return l.trim()}))}var Oh={ALL:Pe.ALL,VERBOSE:Pe.VERBOSE,DEBUG:Pe.DEBUG,INFO:Pe.INFO,WARN:Pe.WARN,ERROR:Pe.ERROR,NONE:Pe.NONE};function wh(e,t,n){var s=n[e];if(typeof s=="string"){var a=Oh[s.toUpperCase()];a!=null&&(t[e]=a)}}function Ts(e){var t={};for(var n in Va){var s=n;switch(s){case"OTEL_LOG_LEVEL":wh(s,t,e);break;default:if(Sh(s))Nh(s,t,e);else if(vh(s))Zh(s,t,e);else if(Eh(s))Ch(s,t,e);else{var a=e[s];typeof a!="undefined"&&a!==null&&(t[s]=String(a))}}}return t}function Gh(){return typeof process!="undefined"&&process&&process.env?Ts(process.env):Ts(qn)}function Ae(){var e=Ts(qn);return Object.assign({},Va,e)}function Xa(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function vs(e){for(var t=new Uint8Array(e.length/2),n=0,s=0;s<e.length;s+=2){var a=Xa(e.charCodeAt(s)),l=Xa(e.charCodeAt(s+1));t[n++]=a<<4|l}return t}var lt=performance,Lh="1.22.0";function Wa(e){for(var t={},n=e.length,s=0;s<n;s++){var a=e[s];a&&(t[String(a).toUpperCase().replace(/[-.]/g,"_")]=a)}return t}var Vh="http.url",Xh="http.user_agent",_s=Vh,Wh=Xh,kh="cloud.provider",Ph="cloud.account.id",Ah="cloud.region",Mh="cloud.availability_zone",xh="cloud.platform",Uh="aws.ecs.container.arn",Dh="aws.ecs.cluster.arn",Fh="aws.ecs.launchtype",Yh="aws.ecs.task.arn",Hh="aws.ecs.task.family",Jh="aws.ecs.task.revision",Kh="aws.eks.cluster.arn",Bh="aws.log.group.names",zh="aws.log.group.arns",jh="aws.log.stream.names",Qh="aws.log.stream.arns",$h="container.name",qh="container.id",em="container.runtime",tm="container.image.name",nm="container.image.tag",rm="deployment.environment",im="device.id",sm="device.model.identifier",om="device.model.name",am="faas.name",lm="faas.id",cm="faas.version",um="faas.instance",dm="faas.max_memory",pm="host.id",hm="host.name",mm="host.type",fm="host.arch",bm="host.image.name",ym="host.image.id",gm="host.image.version",Sm="k8s.cluster.name",Tm="k8s.node.name",vm="k8s.node.uid",_m="k8s.namespace.name",Em="k8s.pod.uid",Im="k8s.pod.name",Rm="k8s.container.name",Nm="k8s.replicaset.uid",Zm="k8s.replicaset.name",Cm="k8s.deployment.uid",Om="k8s.deployment.name",wm="k8s.statefulset.uid",Gm="k8s.statefulset.name",Lm="k8s.daemonset.uid",Vm="k8s.daemonset.name",Xm="k8s.job.uid",Wm="k8s.job.name",km="k8s.cronjob.uid",Pm="k8s.cronjob.name",Am="os.type",Mm="os.description",xm="os.name",Um="os.version",Dm="process.pid",Fm="process.executable.name",Ym="process.executable.path",Hm="process.command",Jm="process.command_line",Km="process.command_args",Bm="process.owner",zm="process.runtime.name",jm="process.runtime.version",Qm="process.runtime.description",$m="service.name",qm="service.namespace",ef="service.instance.id",tf="service.version",nf="telemetry.sdk.name",rf="telemetry.sdk.language",sf="telemetry.sdk.version",of="telemetry.auto.version",af="webengine.name",lf="webengine.version",cf="webengine.description",ft=Wa([kh,Ph,Ah,Mh,xh,Uh,Dh,Fh,Yh,Hh,Jh,Kh,Bh,zh,jh,Qh,$h,qh,em,tm,nm,rm,im,sm,om,am,lm,cm,um,dm,pm,hm,mm,fm,bm,ym,gm,Sm,Tm,vm,_m,Em,Im,Rm,Nm,Zm,Cm,Om,wm,Gm,Lm,Vm,Xm,Wm,km,Pm,Am,Mm,xm,Um,Dm,Fm,Ym,Hm,Jm,Km,Bm,zm,jm,Qm,$m,qm,ef,tf,nf,rf,sf,of,af,lf,cf]),uf="cpp",df="dotnet",pf="erlang",hf="go",mf="java",ff="nodejs",bf="php",yf="python",gf="ruby",Sf="webjs",Tf=Wa([uf,df,pf,hf,mf,ff,bf,yf,gf,Sf]),yn,Es=(yn={},yn[ft.TELEMETRY_SDK_NAME]="opentelemetry",yn[ft.PROCESS_RUNTIME_NAME]="browser",yn[ft.TELEMETRY_SDK_LANGUAGE]=Tf.WEBJS,yn[ft.TELEMETRY_SDK_VERSION]=Lh,yn),vf=9,_f=6,Ef=Math.pow(10,_f),Yr=Math.pow(10,vf);function wt(e){var t=e/1e3,n=Math.trunc(t),s=Math.round(e%1e3*Ef);return[n,s]}function Is(){var e=lt.timeOrigin;if(typeof e!="number"){var t=lt;e=t.timing&&t.timing.fetchStart}return e}function gn(e){var t=wt(Is()),n=wt(typeof e=="number"?e:lt.now());return Aa(t,n)}function er(e){if(Rs(e))return e;if(typeof e=="number")return e<Is()?gn(e):wt(e);if(e instanceof Date)return wt(e.getTime());throw TypeError("Invalid input type")}function If(e,t){var n=t[0]-e[0],s=t[1]-e[1];return s<0&&(n-=1,s+=Yr),[n,s]}function Gt(e){return e[0]*Yr+e[1]}function ka(e){return e[0]*1e6+e[1]/1e3}function Rs(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function Pa(e){return Rs(e)||typeof e=="number"||e instanceof Date}function Aa(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=Yr&&(n[1]-=Yr,n[0]+=1),n}var Lt;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(Lt||(Lt={}));var Rf=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ma=function(){function e(t){t===void 0&&(t={});var n;this._propagators=(n=t.propagators)!==null&&n!==void 0?n:[],this._fields=Array.from(new Set(this._propagators.map(function(s){return typeof s.fields=="function"?s.fields():[]}).reduce(function(s,a){return s.concat(a)},[])))}return e.prototype.inject=function(t,n,s){var a,l;try{for(var p=Rf(this._propagators),m=p.next();!m.done;m=p.next()){var y=m.value;try{y.inject(t,n,s)}catch(T){de.warn("Failed to inject with "+y.constructor.name+". Err: "+T.message)}}}catch(T){a={error:T}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(a)throw a.error}}},e.prototype.extract=function(t,n,s){return this._propagators.reduce(function(a,l){try{return l.extract(a,n,s)}catch(p){de.warn("Failed to inject with "+l.constructor.name+". Err: "+p.message)}return a},t)},e.prototype.fields=function(){return this._fields.slice()},e}(),Ns="[_0-9a-z-*/]",Nf="[a-z]"+Ns+"{0,255}",Zf="[a-z0-9]"+Ns+"{0,240}@[a-z]"+Ns+"{0,13}",Cf=new RegExp("^(?:"+Nf+"|"+Zf+")$"),Of=/^[ -~]{0,255}[!-~]$/,wf=/,|=/;function Gf(e){return Cf.test(e)}function Lf(e){return Of.test(e)&&!wf.test(e)}var xa=32,Vf=512,Ua=",",Da="=",Xf=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var s=this._clone();return s._internalState.has(t)&&s._internalState.delete(t),s._internalState.set(t,n),s},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,s){return n.push(s+Da+t.get(s)),n},[]).join(Ua)},e.prototype._parse=function(t){t.length>Vf||(this._internalState=t.split(Ua).reverse().reduce(function(n,s){var a=s.trim(),l=a.indexOf(Da);if(l!==-1){var p=a.slice(0,l),m=a.slice(l+1,s.length);Gf(p)&&Lf(m)&&n.set(p,m)}return n},new Map),this._internalState.size>xa&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,xa))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),Hr="traceparent",Zs="tracestate",Wf="00",kf="(?!ff)[\\da-f]{2}",Pf="(?![0]{32})[\\da-f]{32}",Af="(?![0]{16})[\\da-f]{16}",Mf="[\\da-f]{2}",xf=new RegExp("^\\s?("+kf+")-("+Pf+")-("+Af+")-("+Mf+")(-.*)?\\s?$");function Uf(e){var t=xf.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var Fa=function(){function e(){}return e.prototype.inject=function(t,n,s){var a=Le.getSpanContext(t);if(!(!a||ys(t)||!Ar(a))){var l=Wf+"-"+a.traceId+"-"+a.spanId+"-0"+Number(a.traceFlags||It.NONE).toString(16);s.set(n,Hr,l),a.traceState&&s.set(n,Zs,a.traceState.serialize())}},e.prototype.extract=function(t,n,s){var a=s.get(n,Hr);if(!a)return t;var l=Array.isArray(a)?a[0]:a;if(typeof l!="string")return t;var p=Uf(l);if(!p)return t;p.isRemote=!0;var m=s.get(n,Zs);if(m){var y=Array.isArray(m)?m.join(","):m;p.traceState=new Xf(typeof y=="string"?y:void 0)}return Le.setSpanContext(t,p)},e.prototype.fields=function(){return[Hr,Zs]},e}(),Df="[object Object]",Ff="[object Null]",Yf="[object Undefined]",Hf=Function.prototype,Ya=Hf.toString,Jf=Ya.call(Object),Kf=Bf(Object.getPrototypeOf,Object),Ha=Object.prototype,Ja=Ha.hasOwnProperty,tn=Symbol?Symbol.toStringTag:void 0,Ka=Ha.toString;function Bf(e,t){return function(n){return e(t(n))}}function Ba(e){if(!zf(e)||jf(e)!==Df)return!1;var t=Kf(e);if(t===null)return!0;var n=Ja.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ya.call(n)===Jf}function zf(e){return e!=null&&typeof e=="object"}function jf(e){return e==null?e===void 0?Yf:Ff:tn&&tn in Object(e)?Qf(e):$f(e)}function Qf(e){var t=Ja.call(e,tn),n=e[tn],s=!1;try{e[tn]=void 0,s=!0}catch(l){}var a=Ka.call(e);return s&&(t?e[tn]=n:delete e[tn]),a}function $f(e){return Ka.call(e)}var qf=20;function eb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),s=new WeakMap;e.length>0;)n=za(n,e.shift(),0,s);return n}function Cs(e){return Jr(e)?e.slice():e}function za(e,t,n,s){n===void 0&&(n=0);var a;if(!(n>qf)){if(n++,Kr(e)||Kr(t)||Qa(t))a=Cs(t);else if(Jr(e)){if(a=e.slice(),Jr(t))for(var l=0,p=t.length;l<p;l++)a.push(Cs(t[l]));else if(tr(t))for(var m=Object.keys(t),l=0,p=m.length;l<p;l++){var y=m[l];a[y]=Cs(t[y])}}else if(tr(e))if(tr(t)){if(!tb(e,t))return t;a=Object.assign({},e);for(var m=Object.keys(t),l=0,p=m.length;l<p;l++){var y=m[l],T=t[y];if(Kr(T))typeof T=="undefined"?delete a[y]:a[y]=T;else{var g=a[y],_=T;if(ja(e,y,s)||ja(t,y,s))delete a[y];else{if(tr(g)&&tr(_)){var Z=s.get(g)||[],R=s.get(_)||[];Z.push({obj:e,key:y}),R.push({obj:t,key:y}),s.set(g,Z),s.set(_,R)}a[y]=za(a[y],T,n,s)}}}}else a=t;return a}}function ja(e,t,n){for(var s=n.get(e[t])||[],a=0,l=s.length;a<l;a++){var p=s[a];if(p.key===t&&p.obj===e)return!0}return!1}function Jr(e){return Array.isArray(e)}function Qa(e){return typeof e=="function"}function tr(e){return!Kr(e)&&!Jr(e)&&!Qa(e)&&typeof e=="object"}function Kr(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="undefined"||e instanceof Date||e instanceof RegExp||e===null}function tb(e,t){return!(!Ba(e)||!Ba(t))}var nb=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function $a(e,t){return typeof t=="string"?e===t:!!e.match(t)}function qa(e,t){var n,s;if(!t)return!1;try{for(var a=nb(t),l=a.next();!l.done;l=a.next()){var p=l.value;if($a(e,p))return!0}}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}return!1}var rb=function(){function e(){var t=this;this._promise=new Promise(function(n,s){t._resolve=n,t._reject=s})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),ib=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},sb=function(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,l;s<a;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))},Os=function(){function e(t,n){this._callback=t,this._that=n,this._isCalled=!1,this._deferred=new rb}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,n=this,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,sb([this._that],ib(s),!1))).then(function(l){return n._deferred.resolve(l)},function(l){return n._deferred.reject(l)})}catch(l){this._deferred.reject(l)}}return this._deferred.promise},e}();function ob(e,t){return new Promise(function(n){Ee.with(Na(Ee.active()),function(){e.export(t,function(s){n(s)})})})}var ab={_export:ob};function lb(e){for(var t={},n=e.length,s=0;s<n;s++){var a=e[s];a&&(t[String(a).toUpperCase().replace(/[-.]/g,"_")]=a)}return t}var cb="aws.lambda.invoked_arn",ub="db.system",db="db.connection_string",pb="db.user",hb="db.jdbc.driver_classname",mb="db.name",fb="db.statement",bb="db.operation",yb="db.mssql.instance_name",gb="db.cassandra.keyspace",Sb="db.cassandra.page_size",Tb="db.cassandra.consistency_level",vb="db.cassandra.table",_b="db.cassandra.idempotence",Eb="db.cassandra.speculative_execution_count",Ib="db.cassandra.coordinator.id",Rb="db.cassandra.coordinator.dc",Nb="db.hbase.namespace",Zb="db.redis.database_index",Cb="db.mongodb.collection",Ob="db.sql.table",wb="exception.type",Gb="exception.message",Lb="exception.stacktrace",Vb="exception.escaped",Xb="faas.trigger",Wb="faas.execution",kb="faas.document.collection",Pb="faas.document.operation",Ab="faas.document.time",Mb="faas.document.name",xb="faas.time",Ub="faas.cron",Db="faas.coldstart",Fb="faas.invoked_name",Yb="faas.invoked_provider",Hb="faas.invoked_region",Jb="net.transport",Kb="net.peer.ip",Bb="net.peer.port",zb="net.peer.name",jb="net.host.ip",Qb="net.host.port",$b="net.host.name",qb="net.host.connection.type",ey="net.host.connection.subtype",ty="net.host.carrier.name",ny="net.host.carrier.mcc",ry="net.host.carrier.mnc",iy="net.host.carrier.icc",sy="peer.service",oy="enduser.id",ay="enduser.role",ly="enduser.scope",cy="thread.id",uy="thread.name",dy="code.function",py="code.namespace",hy="code.filepath",my="code.lineno",fy="http.method",by="http.url",yy="http.target",gy="http.host",Sy="http.scheme",Ty="http.status_code",vy="http.flavor",_y="http.user_agent",Ey="http.request_content_length",Iy="http.request_content_length_uncompressed",Ry="http.response_content_length",Ny="http.response_content_length_uncompressed",Zy="http.server_name",Cy="http.route",Oy="http.client_ip",wy="aws.dynamodb.table_names",Gy="aws.dynamodb.consumed_capacity",Ly="aws.dynamodb.item_collection_metrics",Vy="aws.dynamodb.provisioned_read_capacity",Xy="aws.dynamodb.provisioned_write_capacity",Wy="aws.dynamodb.consistent_read",ky="aws.dynamodb.projection",Py="aws.dynamodb.limit",Ay="aws.dynamodb.attributes_to_get",My="aws.dynamodb.index_name",xy="aws.dynamodb.select",Uy="aws.dynamodb.global_secondary_indexes",Dy="aws.dynamodb.local_secondary_indexes",Fy="aws.dynamodb.exclusive_start_table",Yy="aws.dynamodb.table_count",Hy="aws.dynamodb.scan_forward",Jy="aws.dynamodb.segment",Ky="aws.dynamodb.total_segments",By="aws.dynamodb.count",zy="aws.dynamodb.scanned_count",jy="aws.dynamodb.attribute_definitions",Qy="aws.dynamodb.global_secondary_index_updates",$y="messaging.system",qy="messaging.destination",eg="messaging.destination_kind",tg="messaging.temp_destination",ng="messaging.protocol",rg="messaging.protocol_version",ig="messaging.url",sg="messaging.message_id",og="messaging.conversation_id",ag="messaging.message_payload_size_bytes",lg="messaging.message_payload_compressed_size_bytes",cg="messaging.operation",ug="messaging.consumer_id",dg="messaging.rabbitmq.routing_key",pg="messaging.kafka.message_key",hg="messaging.kafka.consumer_group",mg="messaging.kafka.client_id",fg="messaging.kafka.partition",bg="messaging.kafka.tombstone",yg="rpc.system",gg="rpc.service",Sg="rpc.method",Tg="rpc.grpc.status_code",vg="rpc.jsonrpc.version",_g="rpc.jsonrpc.request_id",Eg="rpc.jsonrpc.error_code",Ig="rpc.jsonrpc.error_message",Rg="message.type",Ng="message.id",Zg="message.compressed_size",Cg="message.uncompressed_size",Vt=lb([cb,ub,db,pb,hb,mb,fb,bb,yb,gb,Sb,Tb,vb,_b,Eb,Ib,Rb,Nb,Zb,Cb,Ob,wb,Gb,Lb,Vb,Xb,Wb,kb,Pb,Ab,Mb,xb,Ub,Db,Fb,Yb,Hb,Jb,Kb,Bb,zb,jb,Qb,$b,qb,ey,ty,ny,ry,iy,sy,oy,ay,ly,cy,uy,dy,py,hy,my,fy,by,yy,gy,Sy,Ty,vy,_y,Ey,Iy,Ry,Ny,Zy,Cy,Oy,wy,Gy,Ly,Vy,Xy,Wy,ky,Py,Ay,My,xy,Uy,Dy,Fy,Yy,Hy,Jy,Ky,By,zy,jy,Qy,$y,qy,eg,tg,ng,rg,ig,sg,og,ag,lg,cg,ug,dg,pg,hg,mg,fg,bg,yg,gg,Sg,Tg,vg,_g,Eg,Ig,Rg,Ng,Zg,Cg]),Og="exception",wg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gg=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},Lg=function(){function e(t,n,s,a,l,p,m,y,T,g){m===void 0&&(m=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:ps.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=s,this._spanContext=a,this.parentSpanId=p,this.kind=l,this.links=m;var _=Date.now();this._performanceStartTime=lt.now(),this._performanceOffset=_-(this._performanceStartTime+Is()),this._startTimeProvided=y!=null,this.startTime=this._getTime(y!=null?y:_),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,g!=null&&this.setAttributes(g),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return n==null||this._isSpanEnded()?this:t.length===0?(de.warn("Invalid attribute key: "+t),this):Ga(n)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(n),this):(de.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){var n,s;try{for(var a=wg(Object.entries(t)),l=a.next();!l.done;l=a.next()){var p=Gg(l.value,2),m=p[0],y=p[1];this.setAttribute(m,y)}}catch(T){n={error:T}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}return this},e.prototype.addEvent=function(t,n,s){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return de.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&de.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Pa(n)&&(Pa(s)||(s=n),n=void 0);var a=Ur(n);return this.events.push({name:t,attributes:a,time:this._getTime(s),droppedAttributesCount:0}),this},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(this._isSpanEnded()){de.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(t),this._duration=If(this.startTime,this.endTime),this._duration[0]<0&&(de.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&de.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},e.prototype._getTime=function(t){if(typeof t=="number"&&t<lt.now())return gn(t+this._performanceOffset);if(typeof t=="number")return wt(t);if(t instanceof Date)return wt(t.getTime());if(Rs(t))return t;if(this._startTimeProvided)return wt(Date.now());var n=lt.now()-this._performanceStartTime;return Aa(this.startTime,wt(n))},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,n){var s={};typeof t=="string"?s[Vt.EXCEPTION_MESSAGE]=t:t&&(t.code?s[Vt.EXCEPTION_TYPE]=t.code.toString():t.name&&(s[Vt.EXCEPTION_TYPE]=t.name),t.message&&(s[Vt.EXCEPTION_MESSAGE]=t.message),t.stack&&(s[Vt.EXCEPTION_STACKTRACE]=t.stack)),s[Vt.EXCEPTION_TYPE]||s[Vt.EXCEPTION_MESSAGE]?this.addEvent(Og,s,n):de.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&de.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(t,n){return t.length<=n?t:t.substr(0,n)},e.prototype._truncateToSize=function(t){var n=this,s=this._attributeValueLengthLimit;return s<=0?(de.warn("Attribute value limit must be positive, got "+s),t):typeof t=="string"?this._truncateToLimitUtil(t,s):Array.isArray(t)?t.map(function(a){return typeof a=="string"?n._truncateToLimitUtil(a,s):a}):t},e}(),Sn;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Sn||(Sn={}));var Br=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Sn.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),Tn=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Sn.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),ws=function(){function e(t){var n,s,a,l;this._root=t.root,this._root||(en(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Tn),this._remoteParentSampled=(n=t.remoteParentSampled)!==null&&n!==void 0?n:new Tn,this._remoteParentNotSampled=(s=t.remoteParentNotSampled)!==null&&s!==void 0?s:new Br,this._localParentSampled=(a=t.localParentSampled)!==null&&a!==void 0?a:new Tn,this._localParentNotSampled=(l=t.localParentNotSampled)!==null&&l!==void 0?l:new Br}return e.prototype.shouldSample=function(t,n,s,a,l,p){var m=Le.getSpanContext(t);return!m||!Ar(m)?this._root.shouldSample(t,n,s,a,l,p):m.isRemote?m.traceFlags&It.SAMPLED?this._remoteParentSampled.shouldSample(t,n,s,a,l,p):this._remoteParentNotSampled.shouldSample(t,n,s,a,l,p):m.traceFlags&It.SAMPLED?this._localParentSampled.shouldSample(t,n,s,a,l,p):this._localParentNotSampled.shouldSample(t,n,s,a,l,p)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),el=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,n){return{decision:Ta(n)&&this._accumulate(n)<this._upperBound?Sn.RECORD_AND_SAMPLED:Sn.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var n=0,s=0;s<t.length/8;s++){var a=s*8,l=parseInt(t.slice(a,a+8),16);n=(n^l)>>>0}return n},e}(),Vg=Ae(),Xg=Rt.AlwaysOn,vn=1;function tl(){return{sampler:nl(Vg),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:Ae().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Ae().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:Ae().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Ae().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:Ae().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:Ae().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:Ae().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:Ae().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function nl(e){switch(e===void 0&&(e=Ae()),e.OTEL_TRACES_SAMPLER){case Rt.AlwaysOn:return new Tn;case Rt.AlwaysOff:return new Br;case Rt.ParentBasedAlwaysOn:return new ws({root:new Tn});case Rt.ParentBasedAlwaysOff:return new ws({root:new Br});case Rt.TraceIdRatio:return new el(rl(e));case Rt.ParentBasedTraceIdRatio:return new ws({root:new el(rl(e))});default:return de.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Xg+'".'),new Tn}}function rl(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return de.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+vn+"."),vn;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(de.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+vn+"."),vn):t<0||t>1?(de.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+vn+"."),vn):t}function Wg(e){var t={sampler:nl()},n=tl(),s=Object.assign({},n,t,e);return s.generalLimits=Object.assign({},n.generalLimits,e.generalLimits||{}),s.spanLimits=Object.assign({},n.spanLimits,e.spanLimits||{}),s}function kg(e){var t,n,s,a,l,p,m,y,T,g,_,Z,R=Object.assign({},e.spanLimits),V=Gh();return R.attributeCountLimit=(p=(l=(a=(n=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&n!==void 0?n:(s=e.generalLimits)===null||s===void 0?void 0:s.attributeCountLimit)!==null&&a!==void 0?a:V.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&l!==void 0?l:V.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&p!==void 0?p:Fr,R.attributeValueLengthLimit=(Z=(_=(g=(y=(m=e.spanLimits)===null||m===void 0?void 0:m.attributeValueLengthLimit)!==null&&y!==void 0?y:(T=e.generalLimits)===null||T===void 0?void 0:T.attributeValueLengthLimit)!==null&&g!==void 0?g:V.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&_!==void 0?_:V.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&Z!==void 0?Z:Dr,Object.assign({},e,{spanLimits:R})}var Pg=function(){function e(t,n){this._exporter=t,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var s=Ae();this._maxExportBatchSize=typeof(n==null?void 0:n.maxExportBatchSize)=="number"?n.maxExportBatchSize:s.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(n==null?void 0:n.maxQueueSize)=="number"?n.maxQueueSize:s.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(n==null?void 0:n.scheduledDelayMillis)=="number"?n.scheduledDelayMillis:s.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(n==null?void 0:n.exportTimeoutMillis)=="number"?n.exportTimeoutMillis:s.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Os(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(de.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(t,n){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&It.SAMPLED&&this._addToBuffer(t)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},e.prototype._addToBuffer=function(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&de.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(de.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()},e.prototype._flushAll=function(){var t=this;return new Promise(function(n,s){for(var a=[],l=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),p=0,m=l;p<m;p++)a.push(t._flushOneBatch());Promise.all(a).then(function(){n()}).catch(s)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(n,s){var a=setTimeout(function(){s(new Error("Timeout"))},t._exportTimeoutMillis);Ee.with(Na(Ee.active()),function(){var l;t._finishedSpans.length<=t._maxExportBatchSize?(l=t._finishedSpans,t._finishedSpans=[]):l=t._finishedSpans.splice(0,t._maxExportBatchSize);for(var p=function(){return t._exporter.export(l,function(_){var Z;clearTimeout(a),_.code===Lt.SUCCESS?n():s((Z=_.error)!==null&&Z!==void 0?Z:new Error("BatchSpanProcessor: span export failed"))})},m=null,y=0,T=l.length;y<T;y++){var g=l[y];g.resource.asyncAttributesPending&&g.resource.waitForAsyncAttributes&&(m!=null||(m=[]),m.push(g.resource.waitForAsyncAttributes()))}m===null?p():Promise.all(m).then(p,function(_){en(_),s(_)})})})},e.prototype._maybeStartTimer=function(){var t=this;if(!this._isExporting){var n=function(){t._isExporting=!0,t._flushOneBatch().finally(function(){t._isExporting=!1,t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(s){t._isExporting=!1,en(s)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return n();this._timer===void 0&&(this._timer=setTimeout(function(){return n()},this._scheduledDelayMillis))}},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}(),Ag=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),il=function(e){Ag(t,e);function t(n,s){var a=e.call(this,n,s)||this;return a.onInit(s),a}return t.prototype.onInit=function(n){var s=this;(n==null?void 0:n.disableAutoFlushOnDocumentHide)!==!0&&typeof document!="undefined"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&s.forceFlush()},this._pageHideListener=function(){s.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){typeof document!="undefined"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(Pg),Mg=8,xg=16,Ug=function(){function e(){this.generateTraceId=sl(xg),this.generateSpanId=sl(Mg)}return e}(),zr=Array(32);function sl(e){return function(){for(var n=0;n<e*2;n++)zr[n]=Math.floor(Math.random()*16)+48,zr[n]>=58&&(zr[n]+=39);return String.fromCharCode.apply(null,zr.slice(0,e*2))}}var Dg=function(){function e(t,n,s){this._tracerProvider=s;var a=Wg(n);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=n.idGenerator||new Ug,this.resource=s.resource,this.instrumentationLibrary=t}return e.prototype.startSpan=function(t,n,s){var a,l,p;n===void 0&&(n={}),s===void 0&&(s=Ee.active()),n.root&&(s=Le.deleteSpan(s));var m=Le.getSpan(s);if(ys(s)){de.debug("Instrumentation suppressed, returning Noop Span");var y=Le.wrapSpanContext(ga);return y}var T=m==null?void 0:m.spanContext(),g=this._idGenerator.generateSpanId(),_,Z,R;!T||!Le.isSpanContextValid(T)?_=this._idGenerator.generateTraceId():(_=T.traceId,Z=T.traceState,R=T.spanId);var V=(a=n.kind)!==null&&a!==void 0?a:$n.INTERNAL,G=((l=n.links)!==null&&l!==void 0?l:[]).map(function(ze){return{context:ze.context,attributes:Ur(ze.attributes)}}),K=Ur(n.attributes),re=this._sampler.shouldSample(s,_,t,V,K,G);Z=(p=re.traceState)!==null&&p!==void 0?p:Z;var M=re.decision===Mr.RECORD_AND_SAMPLED?It.SAMPLED:It.NONE,Ge={traceId:_,spanId:g,traceFlags:M,traceState:Z};if(re.decision===Mr.NOT_RECORD){de.debug("Recording is off, propagating context in a non-recording span");var y=Le.wrapSpanContext(Ge);return y}var Ve=Ur(Object.assign(K,re.attributes)),be=new Lg(this,s,t,Ge,V,R,G,n.startTime,void 0,Ve);return be},e.prototype.startActiveSpan=function(t,n,s,a){var l,p,m;if(!(arguments.length<2)){arguments.length===2?m=n:arguments.length===3?(l=n,m=s):(l=n,p=s,m=a);var y=p!=null?p:Ee.active(),T=this.startSpan(t,l,y),g=Le.setSpan(y,T);return Ee.with(g,m,void 0,T)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}();function Fg(){return"unknown_service"}var Yt=function(){return Yt=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Yt.apply(this,arguments)},Yg=function(e,t,n,s){function a(l){return l instanceof n?l:new n(function(p){p(l)})}return new(n||(n=Promise))(function(l,p){function m(g){try{T(s.next(g))}catch(_){p(_)}}function y(g){try{T(s.throw(g))}catch(_){p(_)}}function T(g){g.done?l(g.value):a(g.value).then(m,y)}T((s=s.apply(e,t||[])).next())})},Hg=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,p;return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(T){return function(g){return y([T,g])}}function y(T){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,a&&(l=T[0]&2?a.return:T[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,T[1])).done)return l;switch(a=0,l&&(T=[T[0]&2,l.value]),T[0]){case 0:case 1:l=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,a=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!l||T[1]>l[0]&&T[1]<l[3])){n.label=T[1];break}if(T[0]===6&&n.label<l[1]){n.label=l[1],l=T;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(T);break}l[2]&&n.ops.pop(),n.trys.pop();continue}T=t.call(e,n)}catch(g){T=[6,g],a=0}finally{s=l=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},Jg=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},Gs=function(){function e(t,n){var s=this,a;this._attributes=t,this.asyncAttributesPending=n!=null,this._syncAttributes=(a=this._attributes)!==null&&a!==void 0?a:{},this._asyncAttributesPromise=n==null?void 0:n.then(function(l){return s._attributes=Object.assign({},s._attributes,l),s.asyncAttributesPending=!1,l},function(l){return de.debug("a resource's async attributes promise rejected: %s",l),s.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[ft.SERVICE_NAME]=Fg(),t[ft.TELEMETRY_SDK_LANGUAGE]=Es[ft.TELEMETRY_SDK_LANGUAGE],t[ft.TELEMETRY_SDK_NAME]=Es[ft.TELEMETRY_SDK_NAME],t[ft.TELEMETRY_SDK_VERSION]=Es[ft.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var t;return this.asyncAttributesPending&&de.error("Accessing resource attributes before async attributes settled"),(t=this._attributes)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return Yg(this,void 0,void 0,function(){return Hg(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.merge=function(t){var n=this,s;if(!t)return this;var a=Yt(Yt({},this._syncAttributes),(s=t._syncAttributes)!==null&&s!==void 0?s:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(a);var l=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(p){var m,y=Jg(p,2),T=y[0],g=y[1];return Yt(Yt(Yt(Yt({},n._syncAttributes),T),(m=t._syncAttributes)!==null&&m!==void 0?m:t.attributes),g)});return new e(a,l)},e.EMPTY=new e({}),e}(),jr=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kg=function(){function e(t){this._spanProcessors=t}return e.prototype.forceFlush=function(){var t,n,s=[];try{for(var a=jr(this._spanProcessors),l=a.next();!l.done;l=a.next()){var p=l.value;s.push(p.forceFlush())}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return new Promise(function(m){Promise.all(s).then(function(){m()}).catch(function(y){en(y||new Error("MultiSpanProcessor: forceFlush failed")),m()})})},e.prototype.onStart=function(t,n){var s,a;try{for(var l=jr(this._spanProcessors),p=l.next();!p.done;p=l.next()){var m=p.value;m.onStart(t,n)}}catch(y){s={error:y}}finally{try{p&&!p.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}},e.prototype.onEnd=function(t){var n,s;try{for(var a=jr(this._spanProcessors),l=a.next();!l.done;l=a.next()){var p=l.value;p.onEnd(t)}}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}},e.prototype.shutdown=function(){var t,n,s=[];try{for(var a=jr(this._spanProcessors),l=a.next();!l.done;l=a.next()){var p=l.value;s.push(p.shutdown())}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return new Promise(function(m,y){Promise.all(s).then(function(){m()},y)})},e}(),Bg=function(){function e(){}return e.prototype.onStart=function(t,n){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),nn;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(nn||(nn={}));var zg=function(){function e(t){t===void 0&&(t={});var n;this._registeredSpanProcessors=[],this._tracers=new Map;var s=eb({},tl(),kg(t));this.resource=(n=s.resource)!==null&&n!==void 0?n:Gs.empty(),this.resource=Gs.default().merge(this.resource),this._config=Object.assign({},s,{resource:this.resource});var a=this._buildExporterFromEnv();if(a!==void 0){var l=new il(a);this.activeSpanProcessor=l}else this.activeSpanProcessor=new Bg}return e.prototype.getTracer=function(t,n,s){var a=t+"@"+(n||"")+":"+((s==null?void 0:s.schemaUrl)||"");return this._tracers.has(a)||this._tracers.set(a,new Dg({name:t,version:n,schemaUrl:s==null?void 0:s.schemaUrl},this._config,this)),this._tracers.get(a)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(n){return de.error("Error while trying to shutdown current span processor",n)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new Kg(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),Le.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Ee.setGlobalContextManager(t.contextManager),t.propagator&&at.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,n=this._registeredSpanProcessors.map(function(s){return new Promise(function(a){var l,p=setTimeout(function(){a(new Error("Span processor did not completed within timeout period of "+t+" ms")),l=nn.timeout},t);s.forceFlush().then(function(){clearTimeout(p),l!==nn.timeout&&(l=nn.resolved,a(l))}).catch(function(m){clearTimeout(p),l=nn.error,a(m)})})});return new Promise(function(s,a){Promise.all(n).then(function(l){var p=l.filter(function(m){return m!==nn.resolved});p.length>0?a(p):s()}).catch(function(l){return a([l])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var n;return(n=this.constructor._registeredPropagators.get(t))===null||n===void 0?void 0:n()},e.prototype._getSpanExporter=function(t){var n;return(n=this.constructor._registeredExporters.get(t))===null||n===void 0?void 0:n()},e.prototype._buildPropagatorFromEnv=function(){var t=this,n=Array.from(new Set(Ae().OTEL_PROPAGATORS)),s=n.map(function(l){var p=t._getPropagator(l);return p||de.warn('Propagator "'+l+'" requested through environment variable is unavailable.'),p}),a=s.reduce(function(l,p){return p&&l.push(p),l},[]);if(a.length!==0)return n.length===1?a[0]:new Ma({propagators:a})},e.prototype._buildExporterFromEnv=function(){var t=Ae().OTEL_TRACES_EXPORTER;if(!(t==="none"||t==="")){var n=this._getSpanExporter(t);return n||de.error('Exporter "'+t+'" requested through environment variable is unavailable.'),n}},e._registeredPropagators=new Map([["tracecontext",function(){return new Fa}],["baggage",function(){return new Oa}]]),e._registeredExporters=new Map,e}(),jg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qg=function(){function e(){}return e.prototype.export=function(t,n){return this._sendSpans(t,n)},e.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype._exportInfo=function(t){var n;return{resource:{attributes:t.resource.attributes},traceId:t.spanContext().traceId,parentId:t.parentSpanId,traceState:(n=t.spanContext().traceState)===null||n===void 0?void 0:n.serialize(),name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:ka(t.startTime),duration:ka(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}},e.prototype._sendSpans=function(t,n){var s,a;try{for(var l=jg(t),p=l.next();!p.done;p=l.next()){var m=p.value;console.dir(this._exportInfo(m),{depth:3})}}catch(y){s={error:y}}finally{try{p&&!p.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}if(n)return n({code:Lt.SUCCESS})},e}(),$g=function(e,t,n,s){function a(l){return l instanceof n?l:new n(function(p){p(l)})}return new(n||(n=Promise))(function(l,p){function m(g){try{T(s.next(g))}catch(_){p(_)}}function y(g){try{T(s.throw(g))}catch(_){p(_)}}function T(g){g.done?l(g.value):a(g.value).then(m,y)}T((s=s.apply(e,t||[])).next())})},qg=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,p;return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(T){return function(g){return y([T,g])}}function y(T){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,a&&(l=T[0]&2?a.return:T[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,T[1])).done)return l;switch(a=0,l&&(T=[T[0]&2,l.value]),T[0]){case 0:case 1:l=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,a=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!l||T[1]>l[0]&&T[1]<l[3])){n.label=T[1];break}if(T[0]===6&&n.label<l[1]){n.label=l[1],l=T;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(T);break}l[2]&&n.ops.pop(),n.trys.pop();continue}T=t.call(e,n)}catch(g){T=[6,g],a=0}finally{s=l=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},eS=function(){function e(t){this._exporter=t,this._shutdownOnce=new Os(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.forceFlush=function(){return $g(this,void 0,void 0,function(){return qg(this,function(t){switch(t.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return t.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.onStart=function(t,n){},e.prototype.onEnd=function(t){var n=this,s,a;if(!this._shutdownOnce.isCalled&&t.spanContext().traceFlags&It.SAMPLED){var l=function(){return ab._export(n._exporter,[t]).then(function(m){var y;m.code!==Lt.SUCCESS&&en((y=m.error)!==null&&y!==void 0?y:new Error("SimpleSpanProcessor: span export failed (status "+m+")"))}).catch(function(m){en(m)})};if(t.resource.asyncAttributesPending){var p=(a=(s=t.resource).waitForAsyncAttributes)===null||a===void 0?void 0:a.call(s).then(function(){return p!=null&&n._unresolvedExports.delete(p),l()},function(m){return en(m)});p!=null&&this._unresolvedExports.add(p)}else l()}},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}(),tS=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},nS=function(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,l;s<a;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))},ol=function(){function e(){this._enabled=!1,this._currentContext=qt}return e.prototype._bindFunction=function(t,n){t===void 0&&(t=qt);var s=this,a=function(){for(var l=this,p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];return s.with(t,function(){return n.apply(l,p)})};return Object.defineProperty(a,"length",{enumerable:!1,configurable:!0,writable:!1,value:n.length}),a},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(t,n){return t===void 0&&(t=this.active()),typeof n=="function"?this._bindFunction(t,n):n},e.prototype.disable=function(){return this._currentContext=qt,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=qt,this)},e.prototype.with=function(t,n,s){for(var a=[],l=3;l<arguments.length;l++)a[l-3]=arguments[l];var p=this._currentContext;this._currentContext=t||qt;try{return n.call.apply(n,nS([s],tS(a),!1))}finally{this._currentContext=p}},e}(),rS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),iS=function(e){rS(t,e);function t(n){n===void 0&&(n={});var s=e.call(this,n)||this;if(n.contextManager)throw"contextManager should be defined in register method not in constructor";if(n.propagator)throw"propagator should be defined in register method not in constructor";return s}return t.prototype.register=function(n){n===void 0&&(n={}),n.contextManager===void 0&&(n.contextManager=new ol),n.contextManager&&n.contextManager.enable(),e.prototype.register.call(this,n)},t}(zg),le;(function(e){e.CONNECT_END="connectEnd",e.CONNECT_START="connectStart",e.DECODED_BODY_SIZE="decodedBodySize",e.DOM_COMPLETE="domComplete",e.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",e.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",e.DOM_INTERACTIVE="domInteractive",e.DOMAIN_LOOKUP_END="domainLookupEnd",e.DOMAIN_LOOKUP_START="domainLookupStart",e.ENCODED_BODY_SIZE="encodedBodySize",e.FETCH_START="fetchStart",e.LOAD_EVENT_END="loadEventEnd",e.LOAD_EVENT_START="loadEventStart",e.NAVIGATION_START="navigationStart",e.REDIRECT_END="redirectEnd",e.REDIRECT_START="redirectStart",e.REQUEST_START="requestStart",e.RESPONSE_END="responseEnd",e.RESPONSE_START="responseStart",e.SECURE_CONNECTION_START="secureConnectionStart",e.UNLOAD_EVENT_END="unloadEventEnd",e.UNLOAD_EVENT_START="unloadEventStart"})(le||(le={}));var Ls;function sS(){return Ls||(Ls=document.createElement("a")),Ls}function Ht(e,t){return t in e}function Ye(e,t,n,s){var a=void 0,l=void 0;Ht(n,t)&&typeof n[t]=="number"&&(a=n[t]);var p=s||le.FETCH_START;if(Ht(n,p)&&typeof n[p]=="number"&&(l=n[p]),a!==void 0&&l!==void 0&&a>=l)return e.addEvent(t,a),e}function _n(e,t){Ye(e,le.FETCH_START,t),Ye(e,le.DOMAIN_LOOKUP_START,t),Ye(e,le.DOMAIN_LOOKUP_END,t),Ye(e,le.CONNECT_START,t),Ht(t,"name")&&t.name.startsWith("https:")&&Ye(e,le.SECURE_CONNECTION_START,t),Ye(e,le.CONNECT_END,t),Ye(e,le.REQUEST_START,t),Ye(e,le.RESPONSE_START,t),Ye(e,le.RESPONSE_END,t);var n=t[le.ENCODED_BODY_SIZE];n!==void 0&&e.setAttribute(Vt.HTTP_RESPONSE_CONTENT_LENGTH,n);var s=t[le.DECODED_BODY_SIZE];s!==void 0&&n!==s&&e.setAttribute(Vt.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,s)}function oS(e){return e.slice().sort(function(t,n){var s=t[le.FETCH_START],a=n[le.FETCH_START];return s>a?1:s<a?-1:0})}function al(){return typeof location!="undefined"?location.origin:void 0}function ll(e,t,n,s,a,l){a===void 0&&(a=new WeakSet);var p=Xt(e);e=p.toString();var m=lS(e,t,n,s,a,l);if(m.length===0)return{mainRequest:void 0};if(m.length===1)return{mainRequest:m[0]};var y=oS(m);if(p.origin!==al()&&y.length>1){var T=y[0],g=aS(y,T[le.RESPONSE_END],n),_=T[le.RESPONSE_END],Z=g[le.FETCH_START];return Z<_&&(g=T,T=void 0),{corsPreFlightRequest:T,mainRequest:g}}else return{mainRequest:m[0]}}function aS(e,t,n){for(var s=Gt(n),a=Gt(er(t)),l=e[1],p,m=e.length,y=1;y<m;y++){var T=e[y],g=Gt(er(T[le.FETCH_START])),_=Gt(er(T[le.RESPONSE_END])),Z=s-_;g>=a&&(!p||Z<p)&&(p=Z,l=T)}return l}function lS(e,t,n,s,a,l){var p=Gt(t),m=Gt(n),y=s.filter(function(T){var g=Gt(er(T[le.FETCH_START])),_=Gt(er(T[le.RESPONSE_END]));return T.initiatorType.toLowerCase()===(l||"xmlhttprequest")&&T.name===e&&g>=p&&_<=m});return y.length>0&&(y=y.filter(function(T){return!a.has(T)})),y}function Xt(e){if(typeof URL=="function")return new URL(e,typeof document!="undefined"?document.baseURI:typeof location!="undefined"?location.href:void 0);var t=sS();return t.href=e,t}function cl(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return"/";var n=uS(e,t);if(t&&n.indexOf("@id")>0)return n;var s="";return e.parentNode&&(s+=cl(e.parentNode,!1)),s+=n,s}function cS(e){if(!e.parentNode)return 0;var t=[e.nodeType];e.nodeType===Node.CDATA_SECTION_NODE&&t.push(Node.TEXT_NODE);var n=Array.from(e.parentNode.childNodes);return n=n.filter(function(s){var a=s.localName;return t.indexOf(s.nodeType)>=0&&a===e.localName}),n.length>=1?n.indexOf(e)+1:0}function uS(e,t){var n=e.nodeType,s=cS(e),a="";if(n===Node.ELEMENT_NODE){var l=e.getAttribute("id");if(t&&l)return'//*[@id="'+l+'"]';a=e.localName}else if(n===Node.TEXT_NODE||n===Node.CDATA_SECTION_NODE)a="text()";else if(n===Node.COMMENT_NODE)a="comment()";else return"";return a&&s>1?"/"+a+"["+s+"]":"/"+a}function ul(e,t){var n=t||[];(typeof n=="string"||n instanceof RegExp)&&(n=[n]);var s=Xt(e);return s.origin===al()?!0:n.some(function(a){return $a(e,a)})}var dS=function(){function e(){}return e.prototype.emit=function(t){},e}(),pS=function(){function e(){}return e.prototype.getLogger=function(t,n,s){return new dS},e}(),dl=new pS,hS=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Qr=Symbol.for("io.opentelemetry.js.api.logs"),nr=hS;function mS(e,t,n){return function(s){return s===e?t:n}}var pl=1,fS=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalLoggerProvider=function(t){return nr[Qr]?this.getLoggerProvider():(nr[Qr]=mS(pl,t,dl),t)},e.prototype.getLoggerProvider=function(){var t,n;return(n=(t=nr[Qr])===null||t===void 0?void 0:t.call(nr,pl))!==null&&n!==void 0?n:dl},e.prototype.getLogger=function(t,n,s){return this.getLoggerProvider().getLogger(t,n,s)},e.prototype.disable=function(){delete nr[Qr]},e}(),hl=fS.getInstance();function ml(e){e===void 0&&(e=[]);for(var t=[],n=0,s=e.length;n<s;n++){var a=e[n];if(Array.isArray(a)){var l=ml(a);t=t.concat(l.instrumentations)}else typeof a=="function"?t.push(new a):a.instrumentationName&&t.push(a)}return{instrumentations:t}}function bS(e,t,n,s){for(var a=0,l=e.length;a<l;a++){var p=e[a];t&&p.setTracerProvider(t),n&&p.setMeterProvider(n),s&&p.setLoggerProvider&&p.setLoggerProvider(s),p.getConfig().enabled||p.enable()}}function yS(e){e.forEach(function(t){return t.disable()})}function gS(e){var t=ml(e.instrumentations).instrumentations,n=e.tracerProvider||Le.getTracerProvider(),s=e.meterProvider||Ea.getMeterProvider(),a=e.loggerProvider||hl.getLoggerProvider();return bS(t,n,s,a),function(){yS(t)}}function Vs(e){return typeof e=="function"}var $e=console.error.bind(console);function rr(e,t,n){var s=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:s,writable:!0,value:n})}function ir(e){e&&e.logger&&(Vs(e.logger)?$e=e.logger:$e("new logger isn't a function, not replacing"))}function fl(e,t,n){if(!e||!e[t]){$e("no original function "+t+" to wrap");return}if(!n){$e("no wrapper function"),$e(new Error().stack);return}if(!Vs(e[t])||!Vs(n)){$e("original object and wrapper must be functions");return}var s=e[t],a=n(s,t);return rr(a,"__original",s),rr(a,"__unwrap",function(){e[t]===a&&rr(e,t,s)}),rr(a,"__wrapped",!0),rr(e,t,a),a}function SS(e,t,n){if(e)Array.isArray(e)||(e=[e]);else{$e("must provide one or more modules to patch"),$e(new Error().stack);return}if(!(t&&Array.isArray(t))){$e("must provide one or more functions to wrap on modules");return}e.forEach(function(s){t.forEach(function(a){fl(s,a,n)})})}function bl(e,t){if(!e||!e[t]){$e("no function to unwrap."),$e(new Error().stack);return}if(!e[t].__unwrap)$e("no original to unwrap to -- has "+t+" already been unwrapped?");else return e[t].__unwrap()}function TS(e,t){if(e)Array.isArray(e)||(e=[e]);else{$e("must provide one or more modules to patch"),$e(new Error().stack);return}if(!(t&&Array.isArray(t))){$e("must provide one or more functions to unwrap on modules");return}e.forEach(function(n){t.forEach(function(s){bl(n,s)})})}ir.wrap=fl,ir.massWrap=SS,ir.unwrap=bl,ir.massUnwrap=TS;var $r=ir,Xs=function(){return Xs=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Xs.apply(this,arguments)},vS=function(){function e(t,n,s){s===void 0&&(s={}),this.instrumentationName=t,this.instrumentationVersion=n,this._wrap=$r.wrap,this._unwrap=$r.unwrap,this._massWrap=$r.massWrap,this._massUnwrap=$r.massUnwrap,this._config=Xs({enabled:!0},s),this._diag=de.createComponentLogger({namespace:t}),this._tracer=Le.getTracer(t,n),this._meter=Ea.getMeter(t,n),this._logger=hl.getLogger(t,n),this._updateMetricInstruments()}return Object.defineProperty(e.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),e.prototype.setMeterProvider=function(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),e.prototype.setLoggerProvider=function(t){this._logger=t.getLogger(this.instrumentationName,this.instrumentationVersion)},e.prototype.getModuleDefinitions=function(){var t,n=(t=this.init())!==null&&t!==void 0?t:[];return Array.isArray(n)?n:[n]},e.prototype._updateMetricInstruments=function(){},e.prototype.getConfig=function(){return this._config},e.prototype.setConfig=function(t){t===void 0&&(t={}),this._config=Object.assign({},t)},e.prototype.setTracerProvider=function(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(e.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),e}(),_S=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),qr=function(e){_S(t,e);function t(n,s,a){a===void 0&&(a={});var l=e.call(this,n,s,a)||this;return l._config.enabled&&l.enable(),l}return t}(vS);function ei(e,t,n){var s,a;try{a=e()}catch(l){s=l}finally{if(t(s,a),s&&!n)throw s;return a}}function rn(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}var sr;(function(e){e.DOCUMENT_LOAD="documentLoad",e.DOCUMENT_FETCH="documentFetch",e.RESOURCE_FETCH="resourceFetch"})(sr||(sr={}));var ES="0.38.0",ti;(function(e){e.FIRST_PAINT="firstPaint",e.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(ti||(ti={}));var IS=function(){var e,t,n={},s=(t=(e=lt).getEntriesByType)===null||t===void 0?void 0:t.call(e,"navigation")[0];if(s){var a=Object.values(le);a.forEach(function(m){if(Ht(s,m)){var y=s[m];typeof y=="number"&&(n[m]=y)}})}else{var l=lt,p=l.timing;if(p){var a=Object.values(le);a.forEach(function(y){if(Ht(p,y)){var T=p[y];typeof T=="number"&&(n[y]=T)}})}}return n},yl={"first-paint":ti.FIRST_PAINT,"first-contentful-paint":ti.FIRST_CONTENTFUL_PAINT},RS=function(e){var t,n,s=(n=(t=lt).getEntriesByType)===null||n===void 0?void 0:n.call(t,"paint");s&&s.forEach(function(a){var l=a.name,p=a.startTime;Ht(yl,l)&&e.addEvent(yl[l],p)})},NS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),ZS=function(e){NS(t,e);function t(n){n===void 0&&(n={});var s=e.call(this,"@opentelemetry/instrumentation-document-load",ES,n)||this;return s.component="document-load",s.version="1",s.moduleName=s.component,s}return t.prototype.init=function(){},t.prototype._onDocumentLoaded=function(){var n=this;window.setTimeout(function(){n._collectPerformance()})},t.prototype._addResourcesSpans=function(n){var s=this,a,l,p=(l=(a=lt).getEntriesByType)===null||l===void 0?void 0:l.call(a,"resource");p&&p.forEach(function(m){s._initResourceSpan(m,n)})},t.prototype._collectPerformance=function(){var n=this,s=Array.from(document.getElementsByTagName("meta")).find(function(p){return p.getAttribute("name")===Hr}),a=IS(),l=s&&s.content||"";Ee.with(at.extract(qt,{traceparent:l}),function(){var p,m=n._startSpan(sr.DOCUMENT_LOAD,le.FETCH_START,a);m&&(Ee.with(Le.setSpan(Ee.active(),m),function(){var y=n._startSpan(sr.DOCUMENT_FETCH,le.FETCH_START,a);y&&(y.setAttribute(_s,location.href),Ee.with(Le.setSpan(Ee.active(),y),function(){var T;_n(y,a),n._addCustomAttributesOnSpan(y,(T=n._getConfig().applyCustomAttributesOnSpan)===null||T===void 0?void 0:T.documentFetch),n._endSpan(y,le.RESPONSE_END,a)}))}),m.setAttribute(_s,location.href),m.setAttribute(Wh,navigator.userAgent),n._addResourcesSpans(m),Ye(m,le.FETCH_START,a),Ye(m,le.UNLOAD_EVENT_START,a),Ye(m,le.UNLOAD_EVENT_END,a),Ye(m,le.DOM_INTERACTIVE,a),Ye(m,le.DOM_CONTENT_LOADED_EVENT_START,a),Ye(m,le.DOM_CONTENT_LOADED_EVENT_END,a),Ye(m,le.DOM_COMPLETE,a),Ye(m,le.LOAD_EVENT_START,a),Ye(m,le.LOAD_EVENT_END,a),RS(m),n._addCustomAttributesOnSpan(m,(p=n._getConfig().applyCustomAttributesOnSpan)===null||p===void 0?void 0:p.documentLoad),n._endSpan(m,le.LOAD_EVENT_END,a))})},t.prototype._endSpan=function(n,s,a){n&&(Ht(a,s)?n.end(a[s]):n.end())},t.prototype._initResourceSpan=function(n,s){var a,l=this._startSpan(sr.RESOURCE_FETCH,le.FETCH_START,n,s);l&&(l.setAttribute(_s,n.name),_n(l,n),this._addCustomAttributesOnResourceSpan(l,n,(a=this._getConfig().applyCustomAttributesOnSpan)===null||a===void 0?void 0:a.resourceFetch),this._endSpan(l,le.RESPONSE_END,n))},t.prototype._startSpan=function(n,s,a,l){if(Ht(a,s)&&typeof a[s]=="number"){var p=this.tracer.startSpan(n,{startTime:a[s]},l?Le.setSpan(Ee.active(),l):void 0);return p}},t.prototype._waitForPageLoad=function(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))},t.prototype._getConfig=function(){return this._config},t.prototype._addCustomAttributesOnSpan=function(n,s){var a=this;s&&ei(function(){return s(n)},function(l){l&&a._diag.error("addCustomAttributesOnSpan",l)},!0)},t.prototype._addCustomAttributesOnResourceSpan=function(n,s,a){var l=this;a&&ei(function(){return a(n,s)},function(p){p&&l._diag.error("addCustomAttributesOnResourceSpan",p)},!0)},t.prototype.enable=function(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()},t.prototype.disable=function(){window.removeEventListener("load",this._onDocumentLoaded)},t}(qr),ni;(function(e){e.COMPONENT="component",e.HTTP_ERROR_NAME="http.error_name",e.HTTP_STATUS_TEXT="http.status_text"})(ni||(ni={}));function CS(e){for(var t={},n=e.length,s=0;s<n;s++){var a=e[s];a&&(t[String(a).toUpperCase().replace(/[-.]/g,"_")]=a)}return t}var OS="aws.lambda.invoked_arn",wS="db.system",GS="db.connection_string",LS="db.user",VS="db.jdbc.driver_classname",XS="db.name",WS="db.statement",kS="db.operation",PS="db.mssql.instance_name",AS="db.cassandra.keyspace",MS="db.cassandra.page_size",xS="db.cassandra.consistency_level",US="db.cassandra.table",DS="db.cassandra.idempotence",FS="db.cassandra.speculative_execution_count",YS="db.cassandra.coordinator.id",HS="db.cassandra.coordinator.dc",JS="db.hbase.namespace",KS="db.redis.database_index",BS="db.mongodb.collection",zS="db.sql.table",jS="exception.type",QS="exception.message",$S="exception.stacktrace",qS="exception.escaped",eT="faas.trigger",tT="faas.execution",nT="faas.document.collection",rT="faas.document.operation",iT="faas.document.time",sT="faas.document.name",oT="faas.time",aT="faas.cron",lT="faas.coldstart",cT="faas.invoked_name",uT="faas.invoked_provider",dT="faas.invoked_region",pT="net.transport",hT="net.peer.ip",mT="net.peer.port",fT="net.peer.name",bT="net.host.ip",yT="net.host.port",gT="net.host.name",ST="net.host.connection.type",TT="net.host.connection.subtype",vT="net.host.carrier.name",_T="net.host.carrier.mcc",ET="net.host.carrier.mnc",IT="net.host.carrier.icc",RT="peer.service",NT="enduser.id",ZT="enduser.role",CT="enduser.scope",OT="thread.id",wT="thread.name",GT="code.function",LT="code.namespace",VT="code.filepath",XT="code.lineno",WT="http.method",kT="http.url",PT="http.target",AT="http.host",MT="http.scheme",xT="http.status_code",UT="http.flavor",DT="http.user_agent",FT="http.request_content_length",YT="http.request_content_length_uncompressed",HT="http.response_content_length",JT="http.response_content_length_uncompressed",KT="http.server_name",BT="http.route",zT="http.client_ip",jT="aws.dynamodb.table_names",QT="aws.dynamodb.consumed_capacity",$T="aws.dynamodb.item_collection_metrics",qT="aws.dynamodb.provisioned_read_capacity",ev="aws.dynamodb.provisioned_write_capacity",tv="aws.dynamodb.consistent_read",nv="aws.dynamodb.projection",rv="aws.dynamodb.limit",iv="aws.dynamodb.attributes_to_get",sv="aws.dynamodb.index_name",ov="aws.dynamodb.select",av="aws.dynamodb.global_secondary_indexes",lv="aws.dynamodb.local_secondary_indexes",cv="aws.dynamodb.exclusive_start_table",uv="aws.dynamodb.table_count",dv="aws.dynamodb.scan_forward",pv="aws.dynamodb.segment",hv="aws.dynamodb.total_segments",mv="aws.dynamodb.count",fv="aws.dynamodb.scanned_count",bv="aws.dynamodb.attribute_definitions",yv="aws.dynamodb.global_secondary_index_updates",gv="messaging.system",Sv="messaging.destination",Tv="messaging.destination_kind",vv="messaging.temp_destination",_v="messaging.protocol",Ev="messaging.protocol_version",Iv="messaging.url",Rv="messaging.message_id",Nv="messaging.conversation_id",Zv="messaging.message_payload_size_bytes",Cv="messaging.message_payload_compressed_size_bytes",Ov="messaging.operation",wv="messaging.consumer_id",Gv="messaging.rabbitmq.routing_key",Lv="messaging.kafka.message_key",Vv="messaging.kafka.consumer_group",Xv="messaging.kafka.client_id",Wv="messaging.kafka.partition",kv="messaging.kafka.tombstone",Pv="rpc.system",Av="rpc.service",Mv="rpc.method",xv="rpc.grpc.status_code",Uv="rpc.jsonrpc.version",Dv="rpc.jsonrpc.request_id",Fv="rpc.jsonrpc.error_code",Yv="rpc.jsonrpc.error_message",Hv="message.type",Jv="message.id",Kv="message.compressed_size",Bv="message.uncompressed_size",En=CS([OS,wS,GS,LS,VS,XS,WS,kS,PS,AS,MS,xS,US,DS,FS,YS,HS,JS,KS,BS,zS,jS,QS,$S,qS,eT,tT,nT,rT,iT,sT,oT,aT,lT,cT,uT,dT,pT,hT,mT,fT,bT,yT,gT,ST,TT,vT,_T,ET,IT,RT,NT,ZT,CT,OT,wT,GT,LT,VT,XT,WT,kT,PT,AT,MT,xT,UT,DT,FT,YT,HT,JT,KT,BT,zT,jT,QT,$T,qT,ev,tv,nv,rv,iv,sv,ov,av,lv,cv,uv,dv,pv,hv,mv,fv,bv,yv,gv,Sv,Tv,vv,_v,Ev,Iv,Rv,Nv,Zv,Cv,Ov,wv,Gv,Lv,Vv,Xv,Wv,kv,Pv,Av,Mv,xv,Uv,Dv,Fv,Yv,Hv,Jv,Kv,Bv]),gl="0.51.1",zv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ws,jv=300,Sl=typeof process=="object"&&((Ws=process.release)===null||Ws===void 0?void 0:Ws.name)==="node",Qv=function(e){zv(t,e);function t(n){var s=e.call(this,"@opentelemetry/instrumentation-fetch",gl,n)||this;return s.component="fetch",s.version=gl,s.moduleName=s.component,s._usedResources=new WeakSet,s._tasksCount=0,s}return t.prototype.init=function(){},t.prototype._getConfig=function(){return this._config},t.prototype._addChildSpan=function(n,s){var a=this.tracer.startSpan("CORS Preflight",{startTime:s[le.FETCH_START]},Le.setSpan(Ee.active(),n));this._getConfig().ignoreNetworkEvents||_n(a,s),a.end(s[le.RESPONSE_END])},t.prototype._addFinalSpanAttributes=function(n,s){var a=Xt(s.url);n.setAttribute(En.HTTP_STATUS_CODE,s.status),s.statusText!=null&&n.setAttribute(ni.HTTP_STATUS_TEXT,s.statusText),n.setAttribute(En.HTTP_HOST,a.host),n.setAttribute(En.HTTP_SCHEME,a.protocol.replace(":","")),typeof navigator!="undefined"&&n.setAttribute(En.HTTP_USER_AGENT,navigator.userAgent)},t.prototype._addHeaders=function(n,s){if(!ul(s,this._getConfig().propagateTraceHeaderCorsUrls)){var a={};at.inject(Ee.active(),a),Object.keys(a).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(n instanceof Request)at.inject(Ee.active(),n.headers,{set:function(l,p,m){return l.set(p,typeof m=="string"?m:String(m))}});else if(n.headers instanceof Headers)at.inject(Ee.active(),n.headers,{set:function(l,p,m){return l.set(p,typeof m=="string"?m:String(m))}});else if(n.headers instanceof Map)at.inject(Ee.active(),n.headers,{set:function(l,p,m){return l.set(p,typeof m=="string"?m:String(m))}});else{var a={};at.inject(Ee.active(),a),n.headers=Object.assign({},a,n.headers||{})}},t.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},t.prototype._createSpan=function(n,s){var a;if(s===void 0&&(s={}),qa(n,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var l=(s.method||"GET").toUpperCase(),p="HTTP "+l;return this.tracer.startSpan(p,{kind:$n.CLIENT,attributes:(a={},a[ni.COMPONENT]=this.moduleName,a[En.HTTP_METHOD]=l,a[En.HTTP_URL]=n,a)})},t.prototype._findResourceAndAddNetworkEvents=function(n,s,a){var l=s.entries;if(!l.length){if(!performance.getEntriesByType)return;l=performance.getEntriesByType("resource")}var p=ll(s.spanUrl,s.startTime,a,l,this._usedResources,"fetch");if(p.mainRequest){var m=p.mainRequest;this._markResourceAsUsed(m);var y=p.corsPreFlightRequest;y&&(this._addChildSpan(n,y),this._markResourceAsUsed(y)),this._getConfig().ignoreNetworkEvents||_n(n,m)}},t.prototype._markResourceAsUsed=function(n){this._usedResources.add(n)},t.prototype._endSpan=function(n,s,a){var l=this,p=wt(Date.now()),m=gn();this._addFinalSpanAttributes(n,a),setTimeout(function(){var y;(y=s.observer)===null||y===void 0||y.disconnect(),l._findResourceAndAddNetworkEvents(n,s,m),l._tasksCount--,l._clearResources(),n.end(p)},jv)},t.prototype._patchConstructor=function(){var n=this;return function(s){var a=n;return function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];var y=this,T=Xt(p[0]instanceof Request?p[0].url:String(p[0])).href,g=p[0]instanceof Request?p[0]:p[1]||{},_=a._createSpan(T,g);if(!_)return s.apply(this,p);var Z=a._prepareSpanData(T);function R(re,M){a._applyAttributesAfterFetch(re,g,M),a._endSpan(re,Z,{status:M.status||0,statusText:M.message,url:T})}function V(re,M){a._applyAttributesAfterFetch(re,g,M),M.status>=200&&M.status<400?a._endSpan(re,Z,M):a._endSpan(re,Z,{status:M.status,statusText:M.statusText,url:T})}function G(re,M,Ge){try{var Ve=Ge.clone(),be=Ge.clone(),ze=Ve.body;if(ze){var Pt=ze.getReader(),At=function(){Pt.read().then(function(Mt){var Jt=Mt.done;Jt?V(re,be):At()},function(Mt){R(re,Mt)})};At()}else V(re,Ge)}finally{M(Ge)}}function K(re,M,Ge){try{R(re,Ge)}finally{M(Ge)}}return new Promise(function(re,M){return Ee.with(Le.setSpan(Ee.active(),_),function(){return a._addHeaders(g,T),a._tasksCount++,s.apply(y,g instanceof Request?[g]:[T,g]).then(G.bind(y,_,re),K.bind(y,_,M))})})}}},t.prototype._applyAttributesAfterFetch=function(n,s,a){var l=this,p=this._getConfig().applyCustomAttributesOnSpan;p&&ei(function(){return p(n,s,a)},function(m){m&&l._diag.error("applyCustomAttributesOnSpan",m)},!0)},t.prototype._prepareSpanData=function(n){var s=gn(),a=[];if(typeof PerformanceObserver!="function")return{entries:a,startTime:s,spanUrl:n};var l=new PerformanceObserver(function(p){var m=p.getEntries();m.forEach(function(y){y.initiatorType==="fetch"&&y.name===n&&a.push(y)})});return l.observe({entryTypes:["resource"]}),{entries:a,observer:l,startTime:s,spanUrl:n}},t.prototype.enable=function(){if(Sl){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}rn(fetch)&&(this._unwrap(qn,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(qn,"fetch",this._patchConstructor())},t.prototype.disable=function(){Sl||(this._unwrap(qn,"fetch"),this._usedResources=new WeakSet)},t}(qr);function $v(e){for(var t={},n=e.length,s=0;s<n;s++){var a=e[s];a&&(t[String(a).toUpperCase().replace(/[-.]/g,"_")]=a)}return t}var qv="aws.lambda.invoked_arn",e0="db.system",t0="db.connection_string",n0="db.user",r0="db.jdbc.driver_classname",i0="db.name",s0="db.statement",o0="db.operation",a0="db.mssql.instance_name",l0="db.cassandra.keyspace",c0="db.cassandra.page_size",u0="db.cassandra.consistency_level",d0="db.cassandra.table",p0="db.cassandra.idempotence",h0="db.cassandra.speculative_execution_count",m0="db.cassandra.coordinator.id",f0="db.cassandra.coordinator.dc",b0="db.hbase.namespace",y0="db.redis.database_index",g0="db.mongodb.collection",S0="db.sql.table",T0="exception.type",v0="exception.message",_0="exception.stacktrace",E0="exception.escaped",I0="faas.trigger",R0="faas.execution",N0="faas.document.collection",Z0="faas.document.operation",C0="faas.document.time",O0="faas.document.name",w0="faas.time",G0="faas.cron",L0="faas.coldstart",V0="faas.invoked_name",X0="faas.invoked_provider",W0="faas.invoked_region",k0="net.transport",P0="net.peer.ip",A0="net.peer.port",M0="net.peer.name",x0="net.host.ip",U0="net.host.port",D0="net.host.name",F0="net.host.connection.type",Y0="net.host.connection.subtype",H0="net.host.carrier.name",J0="net.host.carrier.mcc",K0="net.host.carrier.mnc",B0="net.host.carrier.icc",z0="peer.service",j0="enduser.id",Q0="enduser.role",$0="enduser.scope",q0="thread.id",e_="thread.name",t_="code.function",n_="code.namespace",r_="code.filepath",i_="code.lineno",s_="http.method",o_="http.url",a_="http.target",l_="http.host",c_="http.scheme",u_="http.status_code",d_="http.flavor",p_="http.user_agent",h_="http.request_content_length",m_="http.request_content_length_uncompressed",f_="http.response_content_length",b_="http.response_content_length_uncompressed",y_="http.server_name",g_="http.route",S_="http.client_ip",T_="aws.dynamodb.table_names",v_="aws.dynamodb.consumed_capacity",__="aws.dynamodb.item_collection_metrics",E_="aws.dynamodb.provisioned_read_capacity",I_="aws.dynamodb.provisioned_write_capacity",R_="aws.dynamodb.consistent_read",N_="aws.dynamodb.projection",Z_="aws.dynamodb.limit",C_="aws.dynamodb.attributes_to_get",O_="aws.dynamodb.index_name",w_="aws.dynamodb.select",G_="aws.dynamodb.global_secondary_indexes",L_="aws.dynamodb.local_secondary_indexes",V_="aws.dynamodb.exclusive_start_table",X_="aws.dynamodb.table_count",W_="aws.dynamodb.scan_forward",k_="aws.dynamodb.segment",P_="aws.dynamodb.total_segments",A_="aws.dynamodb.count",M_="aws.dynamodb.scanned_count",x_="aws.dynamodb.attribute_definitions",U_="aws.dynamodb.global_secondary_index_updates",D_="messaging.system",F_="messaging.destination",Y_="messaging.destination_kind",H_="messaging.temp_destination",J_="messaging.protocol",K_="messaging.protocol_version",B_="messaging.url",z_="messaging.message_id",j_="messaging.conversation_id",Q_="messaging.message_payload_size_bytes",$_="messaging.message_payload_compressed_size_bytes",q_="messaging.operation",eE="messaging.consumer_id",tE="messaging.rabbitmq.routing_key",nE="messaging.kafka.message_key",rE="messaging.kafka.consumer_group",iE="messaging.kafka.client_id",sE="messaging.kafka.partition",oE="messaging.kafka.tombstone",aE="rpc.system",lE="rpc.service",cE="rpc.method",uE="rpc.grpc.status_code",dE="rpc.jsonrpc.version",pE="rpc.jsonrpc.request_id",hE="rpc.jsonrpc.error_code",mE="rpc.jsonrpc.error_message",fE="message.type",bE="message.id",yE="message.compressed_size",gE="message.uncompressed_size",In=$v([qv,e0,t0,n0,r0,i0,s0,o0,a0,l0,c0,u0,d0,p0,h0,m0,f0,b0,y0,g0,S0,T0,v0,_0,E0,I0,R0,N0,Z0,C0,O0,w0,G0,L0,V0,X0,W0,k0,P0,A0,M0,x0,U0,D0,F0,Y0,H0,J0,K0,B0,z0,j0,Q0,$0,q0,e_,t_,n_,r_,i_,s_,o_,a_,l_,c_,u_,d_,p_,h_,m_,f_,b_,y_,g_,S_,T_,v_,__,E_,I_,R_,N_,Z_,C_,O_,w_,G_,L_,V_,X_,W_,k_,P_,A_,M_,x_,U_,D_,F_,Y_,H_,J_,K_,B_,z_,j_,Q_,$_,q_,eE,tE,nE,rE,iE,sE,oE,aE,lE,cE,uE,dE,pE,hE,mE,fE,bE,yE,gE]),Wt;(function(e){e.METHOD_OPEN="open",e.METHOD_SEND="send",e.EVENT_ABORT="abort",e.EVENT_ERROR="error",e.EVENT_LOAD="loaded",e.EVENT_TIMEOUT="timeout"})(Wt||(Wt={}));var Tl="0.51.1",ks;(function(e){e.HTTP_STATUS_TEXT="http.status_text"})(ks||(ks={}));var SE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),TE=300,vE=function(e){SE(t,e);function t(n){var s=e.call(this,"@opentelemetry/instrumentation-xml-http-request",Tl,n)||this;return s.component="xml-http-request",s.version=Tl,s.moduleName=s.component,s._tasksCount=0,s._xhrMem=new WeakMap,s._usedResources=new WeakSet,s}return t.prototype.init=function(){},t.prototype._getConfig=function(){return this._config},t.prototype._addHeaders=function(n,s){var a=Xt(s).href;if(!ul(a,this._getConfig().propagateTraceHeaderCorsUrls)){var l={};at.inject(Ee.active(),l),Object.keys(l).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}var p={};at.inject(Ee.active(),p),Object.keys(p).forEach(function(m){n.setRequestHeader(m,String(p[m]))})},t.prototype._addChildSpan=function(n,s){var a=this;Ee.with(Le.setSpan(Ee.active(),n),function(){var l=a.tracer.startSpan("CORS Preflight",{startTime:s[le.FETCH_START]});a._getConfig().ignoreNetworkEvents||_n(l,s),l.end(s[le.RESPONSE_END])})},t.prototype._addFinalSpanAttributes=function(n,s,a){if(typeof a=="string"){var l=Xt(a);s.status!==void 0&&n.setAttribute(In.HTTP_STATUS_CODE,s.status),s.statusText!==void 0&&n.setAttribute(ks.HTTP_STATUS_TEXT,s.statusText),n.setAttribute(In.HTTP_HOST,l.host),n.setAttribute(In.HTTP_SCHEME,l.protocol.replace(":","")),n.setAttribute(In.HTTP_USER_AGENT,navigator.userAgent)}},t.prototype._applyAttributesAfterXHR=function(n,s){var a=this,l=this._getConfig().applyCustomAttributesOnSpan;typeof l=="function"&&ei(function(){return l(n,s)},function(p){p&&a._diag.error("applyCustomAttributesOnSpan",p)},!0)},t.prototype._addResourceObserver=function(n,s){var a=this._xhrMem.get(n);!a||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(a.createdResources={observer:new PerformanceObserver(function(l){var p=l.getEntries(),m=Xt(s);p.forEach(function(y){y.initiatorType==="xmlhttprequest"&&y.name===m.href&&a.createdResources&&a.createdResources.entries.push(y)})}),entries:[]},a.createdResources.observer.observe({entryTypes:["resource"]}))},t.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(lt.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},t.prototype._findResourceAndAddNetworkEvents=function(n,s,a,l,p){if(!(!a||!l||!p||!n.createdResources)){var m=n.createdResources.entries;(!m||!m.length)&&(m=lt.getEntriesByType("resource"));var y=ll(Xt(a).href,l,p,m,this._usedResources);if(y.mainRequest){var T=y.mainRequest;this._markResourceAsUsed(T);var g=y.corsPreFlightRequest;g&&(this._addChildSpan(s,g),this._markResourceAsUsed(g)),this._getConfig().ignoreNetworkEvents||_n(s,T)}}},t.prototype._cleanPreviousSpanInformation=function(n){var s=this._xhrMem.get(n);if(s){var a=s.callbackToRemoveEvents;a&&a(),this._xhrMem.delete(n)}},t.prototype._createSpan=function(n,s,a){var l;if(qa(s,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var p=a.toUpperCase(),m=this.tracer.startSpan(p,{kind:$n.CLIENT,attributes:(l={},l[In.HTTP_METHOD]=a,l[In.HTTP_URL]=Xt(s).toString(),l)});return m.addEvent(Wt.METHOD_OPEN),this._cleanPreviousSpanInformation(n),this._xhrMem.set(n,{span:m,spanUrl:s}),m},t.prototype._markResourceAsUsed=function(n){this._usedResources.add(n)},t.prototype._patchOpen=function(){var n=this;return function(s){var a=n;return function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];var y=p[0],T=p[1];return a._createSpan(this,T,y),s.apply(this,p)}}},t.prototype._patchSend=function(){var n=this;function s(g,_,Z,R){var V=_.callbackToRemoveEvents;typeof V=="function"&&V();var G=_.span,K=_.spanUrl,re=_.sendStartTime;G&&(n._findResourceAndAddNetworkEvents(_,G,K,re,Z),G.addEvent(g,R),n._addFinalSpanAttributes(G,_,K),G.end(R),n._tasksCount--),n._clearResources()}function a(g,_){var Z=n._xhrMem.get(_);if(Z){Z.status=_.status,Z.statusText=_.statusText,n._xhrMem.delete(_),Z.span&&n._applyAttributesAfterXHR(Z.span,_);var R=gn(),V=Date.now();setTimeout(function(){s(g,Z,R,V)},TE)}}function l(){a(Wt.EVENT_ERROR,this)}function p(){a(Wt.EVENT_ABORT,this)}function m(){a(Wt.EVENT_TIMEOUT,this)}function y(){this.status<299?a(Wt.EVENT_LOAD,this):a(Wt.EVENT_ERROR,this)}function T(g){g.removeEventListener("abort",p),g.removeEventListener("error",l),g.removeEventListener("load",y),g.removeEventListener("timeout",m);var _=n._xhrMem.get(g);_&&(_.callbackToRemoveEvents=void 0)}return function(g){return function(){for(var Z=this,R=[],V=0;V<arguments.length;V++)R[V]=arguments[V];var G=n._xhrMem.get(this);if(!G)return g.apply(this,R);var K=G.span,re=G.spanUrl;return K&&re&&Ee.with(Le.setSpan(Ee.active(),K),function(){n._tasksCount++,G.sendStartTime=gn(),K.addEvent(Wt.METHOD_SEND),Z.addEventListener("abort",p),Z.addEventListener("error",l),Z.addEventListener("load",y),Z.addEventListener("timeout",m),G.callbackToRemoveEvents=function(){T(Z),G.createdResources&&G.createdResources.observer.disconnect()},n._addHeaders(Z,re),n._addResourceObserver(Z,re)}),g.apply(this,R)}}},t.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),rn(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),rn(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},t.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},t}(qr),_E=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l},vl=1e4,EE=5,IE=1e3,RE=5e3,NE=1.5;function ZE(e){e===void 0&&(e={});var t={};return Object.entries(e).forEach(function(n){var s=_E(n,2),a=s[0],l=s[1];typeof l!="undefined"?t[a]=String(l):de.warn('Header "'+a+'" has wrong value and will be ignored')}),t}function CE(e,t){return e.endsWith("/")||(e=e+"/"),e+t}function OE(e){try{var t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch(n){return de.warn("Could not parse export URL: '"+e+"'"),e}}function wE(e){return typeof e=="number"?e<=0?_l(e,vl):e:GE()}function GE(){var e,t=Number((e=Ae().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:Ae().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?_l(t,vl):t}function _l(e,t){return de.warn("Timeout must be greater than 0",e),t}function LE(e){var t=[429,502,503,504];return t.includes(e)}function VE(e){if(e==null)return-1;var t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?t*1e3:-1;var n=new Date(e).getTime()-Date.now();return n>=0?n:0}var XE=function(){function e(t){t===void 0&&(t={}),this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new Os(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:30,this.timeoutMillis=wE(t.timeoutMillis),this.onInit(t)}return e.prototype.export=function(t,n){if(this._shutdownOnce.isCalled){n({code:Lt.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){n({code:Lt.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(function(){n({code:Lt.SUCCESS})}).catch(function(s){n({code:Lt.FAILED,error:s})})},e.prototype._export=function(t){var n=this;return new Promise(function(s,a){try{de.debug("items to be sent",t),n.send(t,s,a)}catch(l){a(l)}})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then(function(){})},e.prototype._shutdown=function(){return de.debug("shutdown started"),this.onShutdown(),this.forceFlush()},e}(),WE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),or=function(e){WE(t,e);function t(n,s,a){var l=e.call(this,n)||this;return l.name="OTLPExporterError",l.data=a,l.code=s,l}return t}(Error),ri=function(){return ri=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ri.apply(this,arguments)},kE=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l};function PE(e,t,n,s,a){if(navigator.sendBeacon(t,new Blob([e],n)))de.debug("sendBeacon - can send",e),s();else{var l=new or("sendBeacon - cannot send "+e);a(l)}}function AE(e,t,n,s,a,l){var p,m,y=!1,T=setTimeout(function(){if(clearTimeout(p),y=!0,m.readyState===XMLHttpRequest.DONE){var _=new or("Request Timeout");l(_)}else m.abort()},s),g=function(_,Z){_===void 0&&(_=EE),Z===void 0&&(Z=IE),m=new XMLHttpRequest,m.open("POST",t);var R={Accept:"application/json","Content-Type":"application/json"};Object.entries(ri(ri({},R),n)).forEach(function(V){var G=kE(V,2),K=G[0],re=G[1];m.setRequestHeader(K,re)}),m.send(e),m.onreadystatechange=function(){if(m.readyState===XMLHttpRequest.DONE&&y===!1)if(m.status>=200&&m.status<=299)de.debug("xhr success",e),a(),clearTimeout(T),clearTimeout(p);else if(m.status&&LE(m.status)&&_>0){var V=void 0;Z=NE*Z,m.getResponseHeader("Retry-After")?V=VE(m.getResponseHeader("Retry-After")):V=Math.round(Math.random()*(RE-Z)+Z),p=setTimeout(function(){g(_-1,Z)},V)}else{var G=new or("Failed to export with XHR (status: "+m.status+")",m.status);l(G),clearTimeout(T),clearTimeout(p)}},m.onabort=function(){if(y){var V=new or("Request Timeout");l(V)}clearTimeout(T),clearTimeout(p)},m.onerror=function(){if(y){var V=new or("Request Timeout");l(V)}clearTimeout(T),clearTimeout(p)}};g()}var ME=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),xE=function(e){ME(t,e);function t(n){n===void 0&&(n={});var s=e.call(this,n)||this;return s._useXHR=!1,s._useXHR=!!n.headers||typeof navigator.sendBeacon!="function",s._useXHR?s._headers=Object.assign({},ZE(n.headers),Ca(Ae().OTEL_EXPORTER_OTLP_HEADERS)):s._headers={},s}return t.prototype.onInit=function(){},t.prototype.onShutdown=function(){},t.prototype.send=function(n,s,a){var l=this;if(this._shutdownOnce.isCalled){de.debug("Shutdown already started. Cannot send objects");return}var p=this.convert(n),m=JSON.stringify(p),y=new Promise(function(g,_){l._useXHR?AE(m,l.url,l._headers,l.timeoutMillis,g,_):PE(m,l.url,{type:"application/json"},g,_)}).then(s,a);this._sendingPromises.push(y);var T=function(){var g=l._sendingPromises.indexOf(y);l._sendingPromises.splice(g,1)};y.then(T,T)},t}(XE);function El(e){var t=BigInt(1e9);return BigInt(e[0])*t+BigInt(e[1])}function UE(e){var t=Number(BigInt.asUintN(32,e)),n=Number(BigInt.asUintN(32,e>>BigInt(32)));return{low:t,high:n}}function Il(e){var t=El(e);return UE(t)}function DE(e){var t=El(e);return t.toString()}var FE=typeof BigInt!="undefined"?DE:Gt;function Rl(e){return e}function Nl(e){if(e!==void 0)return vs(e)}var YE={encodeHrTime:Il,encodeSpanContext:vs,encodeOptionalSpanContext:Nl};function HE(e){var t,n;if(e===void 0)return YE;var s=(t=e.useLongBits)!==null&&t!==void 0?t:!0,a=(n=e.useHex)!==null&&n!==void 0?n:!1;return{encodeHrTime:s?Il:FE,encodeSpanContext:a?Rl:vs,encodeOptionalSpanContext:a?Rl:Nl}}var JE=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l};function ii(e){return Object.keys(e).map(function(t){return Zl(t,e[t])})}function Zl(e,t){return{key:e,value:Cl(t)}}function Cl(e){var t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(Cl)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(function(n){var s=JE(n,2),a=s[0],l=s[1];return Zl(a,l)})}}:{}}function KE(e,t){var n,s=e.spanContext(),a=e.status;return{traceId:t.encodeSpanContext(s.traceId),spanId:t.encodeSpanContext(s.spanId),parentSpanId:t.encodeOptionalSpanContext(e.parentSpanId),traceState:(n=s.traceState)===null||n===void 0?void 0:n.serialize(),name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:t.encodeHrTime(e.startTime),endTimeUnixNano:t.encodeHrTime(e.endTime),attributes:ii(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(function(l){return zE(l,t)}),droppedEventsCount:e.droppedEventsCount,status:{code:a.code,message:a.message},links:e.links.map(function(l){return BE(l,t)}),droppedLinksCount:e.droppedLinksCount}}function BE(e,t){var n;return{attributes:e.attributes?ii(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:(n=e.context.traceState)===null||n===void 0?void 0:n.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}function zE(e,t){return{attributes:e.attributes?ii(e.attributes):[],name:e.name,timeUnixNano:t.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}var jE=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},QE=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),a,l=[],p;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(m){p={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(p)throw p.error}}return l};function $E(e,t){var n=HE(t);return{resourceSpans:eI(e,n)}}function qE(e){var t,n,s=new Map;try{for(var a=jE(e),l=a.next();!l.done;l=a.next()){var p=l.value,m=s.get(p.resource);m||(m=new Map,s.set(p.resource,m));var y=p.instrumentationLibrary.name+"@"+(p.instrumentationLibrary.version||"")+":"+(p.instrumentationLibrary.schemaUrl||""),T=m.get(y);T||(T=[],m.set(y,T)),T.push(p)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s}function eI(e,t){for(var n=qE(e),s=[],a=n.entries(),l=a.next();!l.done;){for(var p=QE(l.value,2),m=p[0],y=p[1],T=[],g=y.values(),_=g.next();!_.done;){var Z=_.value;if(Z.length>0){var R=Z[0].instrumentationLibrary,V=R.name,G=R.version,K=R.schemaUrl,re=Z.map(function(Ge){return KE(Ge,t)});T.push({scope:{name:V,version:G},spans:re,schemaUrl:K})}_=g.next()}var M={resource:{attributes:ii(m.attributes),droppedAttributesCount:0},scopeSpans:T,schemaUrl:void 0};s.push(M),l=a.next()}return s}var tI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ol="v1/traces",nI="http://localhost:4318/"+Ol,rI=function(e){tI(t,e);function t(n){n===void 0&&(n={});var s=e.call(this,n)||this;return s._headers=Object.assign(s._headers,Ca(Ae().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),s}return t.prototype.convert=function(n){return $E(n,{useHex:!0,useLongBits:!1})},t.prototype.getDefaultUrl=function(n){return typeof n.url=="string"?n.url:Ae().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?OE(Ae().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):Ae().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?CE(Ae().OTEL_EXPORTER_OTLP_ENDPOINT,Ol):nI},t}(xE),iI="deployment.environment",sI="service.name",oI=iI,aI=sI;function Ps(e,t){if(!!!e)throw new Error(t)}function lI(e){return typeof e=="object"&&e!==null}function cI(e,t){if(!!!e)throw new Error(t!=null?t:"Unexpected invariant triggered.")}const uI=/\r\n|[\n\r]/g;function As(e,t){let n=0,s=1;for(const a of e.body.matchAll(uI)){if(typeof a.index=="number"||cI(!1),a.index>=t)break;n=a.index+a[0].length,s+=1}return{line:s,column:t+1-n}}function dI(e){return wl(e.source,As(e.source,e.start))}function wl(e,t){const n=e.locationOffset.column-1,s="".padStart(n)+e.body,a=t.line-1,l=e.locationOffset.line-1,p=t.line+l,m=t.line===1?n:0,y=t.column+m,T=`${e.name}:${p}:${y}
`,g=s.split(/\r\n|[\n\r]/g),_=g[a];if(_.length>120){const Z=Math.floor(y/80),R=y%80,V=[];for(let G=0;G<_.length;G+=80)V.push(_.slice(G,G+80));return T+Gl([[`${p} |`,V[0]],...V.slice(1,Z+1).map(G=>["|",G]),["|","^".padStart(R)],["|",V[Z+1]]])}return T+Gl([[`${p-1} |`,g[a-1]],[`${p} |`,_],["|","^".padStart(y)],[`${p+1} |`,g[a+1]]])}function Gl(e){const t=e.filter(([s,a])=>a!==void 0),n=Math.max(...t.map(([s])=>s.length));return t.map(([s,a])=>s.padStart(n)+(a?" "+a:"")).join(`
`)}function pI(e){const t=e[0];return t==null||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}class Ms extends Error{constructor(t,...n){var s,a,l;const{nodes:p,source:m,positions:y,path:T,originalError:g,extensions:_}=pI(n);super(t),this.name="GraphQLError",this.path=T!=null?T:void 0,this.originalError=g!=null?g:void 0,this.nodes=Ll(Array.isArray(p)?p:p?[p]:void 0);const Z=Ll((s=this.nodes)===null||s===void 0?void 0:s.map(V=>V.loc).filter(V=>V!=null));this.source=m!=null?m:Z==null||(a=Z[0])===null||a===void 0?void 0:a.source,this.positions=y!=null?y:Z==null?void 0:Z.map(V=>V.start),this.locations=y&&m?y.map(V=>As(m,V)):Z==null?void 0:Z.map(V=>As(V.source,V.start));const R=lI(g==null?void 0:g.extensions)?g==null?void 0:g.extensions:void 0;this.extensions=(l=_!=null?_:R)!==null&&l!==void 0?l:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),g!=null&&g.stack?Object.defineProperty(this,"stack",{value:g.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Ms):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let t=this.message;if(this.nodes)for(const n of this.nodes)n.loc&&(t+=`

`+dI(n.loc));else if(this.source&&this.locations)for(const n of this.locations)t+=`

`+wl(this.source,n);return t}toJSON(){const t={message:this.message};return this.locations!=null&&(t.locations=this.locations),this.path!=null&&(t.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(t.extensions=this.extensions),t}}function Ll(e){return e===void 0||e.length===0?void 0:e}function He(e,t,n){return new Ms(`Syntax Error: ${n}`,{source:e,positions:[t]})}class hI{constructor(t,n,s){this.start=t.start,this.end=n.end,this.startToken=t,this.endToken=n,this.source=s}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Vl{constructor(t,n,s,a,l,p){this.kind=t,this.start=n,this.end=s,this.line=a,this.column=l,this.value=p,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const mI={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};new Set(Object.keys(mI));var Rn;(function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"})(Rn||(Rn={}));var xs;(function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(xs||(xs={}));var oe;(function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(oe||(oe={}));function fI(e){return e===9||e===32}function ar(e){return e>=48&&e<=57}function Xl(e){return e>=97&&e<=122||e>=65&&e<=90}function Wl(e){return Xl(e)||e===95}function bI(e){return Xl(e)||ar(e)||e===95}function yI(e){var t;let n=Number.MAX_SAFE_INTEGER,s=null,a=-1;for(let p=0;p<e.length;++p){var l;const m=e[p],y=gI(m);y!==m.length&&(s=(l=s)!==null&&l!==void 0?l:p,a=p,p!==0&&y<n&&(n=y))}return e.map((p,m)=>m===0?p:p.slice(n)).slice((t=s)!==null&&t!==void 0?t:0,a+1)}function gI(e){let t=0;for(;t<e.length&&fI(e.charCodeAt(t));)++t;return t}var U;(function(e){e.SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment"})(U||(U={}));class SI{constructor(t){const n=new Vl(U.SOF,0,0,0,0);this.source=t,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let t=this.token;if(t.kind!==U.EOF)do if(t.next)t=t.next;else{const n=vI(this,t.end);t.next=n,n.prev=t,t=n}while(t.kind===U.COMMENT);return t}}function TI(e){return e===U.BANG||e===U.DOLLAR||e===U.AMP||e===U.PAREN_L||e===U.PAREN_R||e===U.SPREAD||e===U.COLON||e===U.EQUALS||e===U.AT||e===U.BRACKET_L||e===U.BRACKET_R||e===U.BRACE_L||e===U.PIPE||e===U.BRACE_R}function Nn(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function si(e,t){return kl(e.charCodeAt(t))&&Pl(e.charCodeAt(t+1))}function kl(e){return e>=55296&&e<=56319}function Pl(e){return e>=56320&&e<=57343}function sn(e,t){const n=e.source.body.codePointAt(t);if(n===void 0)return U.EOF;if(n>=32&&n<=126){const s=String.fromCodePoint(n);return s==='"'?`'"'`:`"${s}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function Me(e,t,n,s,a){const l=e.line,p=1+n-e.lineStart;return new Vl(t,n,s,l,p,a)}function vI(e,t){const n=e.source.body,s=n.length;let a=t;for(;a<s;){const l=n.charCodeAt(a);switch(l){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++e.line,e.lineStart=a;continue;case 13:n.charCodeAt(a+1)===10?a+=2:++a,++e.line,e.lineStart=a;continue;case 35:return _I(e,a);case 33:return Me(e,U.BANG,a,a+1);case 36:return Me(e,U.DOLLAR,a,a+1);case 38:return Me(e,U.AMP,a,a+1);case 40:return Me(e,U.PAREN_L,a,a+1);case 41:return Me(e,U.PAREN_R,a,a+1);case 46:if(n.charCodeAt(a+1)===46&&n.charCodeAt(a+2)===46)return Me(e,U.SPREAD,a,a+3);break;case 58:return Me(e,U.COLON,a,a+1);case 61:return Me(e,U.EQUALS,a,a+1);case 64:return Me(e,U.AT,a,a+1);case 91:return Me(e,U.BRACKET_L,a,a+1);case 93:return Me(e,U.BRACKET_R,a,a+1);case 123:return Me(e,U.BRACE_L,a,a+1);case 124:return Me(e,U.PIPE,a,a+1);case 125:return Me(e,U.BRACE_R,a,a+1);case 34:return n.charCodeAt(a+1)===34&&n.charCodeAt(a+2)===34?CI(e,a):II(e,a)}if(ar(l)||l===45)return EI(e,a,l);if(Wl(l))return OI(e,a);throw He(e.source,a,l===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Nn(l)||si(n,a)?`Unexpected character: ${sn(e,a)}.`:`Invalid character: ${sn(e,a)}.`)}return Me(e,U.EOF,s,s)}function _I(e,t){const n=e.source.body,s=n.length;let a=t+1;for(;a<s;){const l=n.charCodeAt(a);if(l===10||l===13)break;if(Nn(l))++a;else if(si(n,a))a+=2;else break}return Me(e,U.COMMENT,t,a,n.slice(t+1,a))}function EI(e,t,n){const s=e.source.body;let a=t,l=n,p=!1;if(l===45&&(l=s.charCodeAt(++a)),l===48){if(l=s.charCodeAt(++a),ar(l))throw He(e.source,a,`Invalid number, unexpected digit after 0: ${sn(e,a)}.`)}else a=Us(e,a,l),l=s.charCodeAt(a);if(l===46&&(p=!0,l=s.charCodeAt(++a),a=Us(e,a,l),l=s.charCodeAt(a)),(l===69||l===101)&&(p=!0,l=s.charCodeAt(++a),(l===43||l===45)&&(l=s.charCodeAt(++a)),a=Us(e,a,l),l=s.charCodeAt(a)),l===46||Wl(l))throw He(e.source,a,`Invalid number, expected digit but got: ${sn(e,a)}.`);return Me(e,p?U.FLOAT:U.INT,t,a,s.slice(t,a))}function Us(e,t,n){if(!ar(n))throw He(e.source,t,`Invalid number, expected digit but got: ${sn(e,t)}.`);const s=e.source.body;let a=t+1;for(;ar(s.charCodeAt(a));)++a;return a}function II(e,t){const n=e.source.body,s=n.length;let a=t+1,l=a,p="";for(;a<s;){const m=n.charCodeAt(a);if(m===34)return p+=n.slice(l,a),Me(e,U.STRING,t,a+1,p);if(m===92){p+=n.slice(l,a);const y=n.charCodeAt(a+1)===117?n.charCodeAt(a+2)===123?RI(e,a):NI(e,a):ZI(e,a);p+=y.value,a+=y.size,l=a;continue}if(m===10||m===13)break;if(Nn(m))++a;else if(si(n,a))a+=2;else throw He(e.source,a,`Invalid character within String: ${sn(e,a)}.`)}throw He(e.source,a,"Unterminated string.")}function RI(e,t){const n=e.source.body;let s=0,a=3;for(;a<12;){const l=n.charCodeAt(t+a++);if(l===125){if(a<5||!Nn(s))break;return{value:String.fromCodePoint(s),size:a}}if(s=s<<4|lr(l),s<0)break}throw He(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+a)}".`)}function NI(e,t){const n=e.source.body,s=Al(n,t+2);if(Nn(s))return{value:String.fromCodePoint(s),size:6};if(kl(s)&&n.charCodeAt(t+6)===92&&n.charCodeAt(t+7)===117){const a=Al(n,t+8);if(Pl(a))return{value:String.fromCodePoint(s,a),size:12}}throw He(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+6)}".`)}function Al(e,t){return lr(e.charCodeAt(t))<<12|lr(e.charCodeAt(t+1))<<8|lr(e.charCodeAt(t+2))<<4|lr(e.charCodeAt(t+3))}function lr(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function ZI(e,t){const n=e.source.body;switch(n.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw He(e.source,t,`Invalid character escape sequence: "${n.slice(t,t+2)}".`)}function CI(e,t){const n=e.source.body,s=n.length;let a=e.lineStart,l=t+3,p=l,m="";const y=[];for(;l<s;){const T=n.charCodeAt(l);if(T===34&&n.charCodeAt(l+1)===34&&n.charCodeAt(l+2)===34){m+=n.slice(p,l),y.push(m);const g=Me(e,U.BLOCK_STRING,t,l+3,yI(y).join(`
`));return e.line+=y.length-1,e.lineStart=a,g}if(T===92&&n.charCodeAt(l+1)===34&&n.charCodeAt(l+2)===34&&n.charCodeAt(l+3)===34){m+=n.slice(p,l),p=l+1,l+=4;continue}if(T===10||T===13){m+=n.slice(p,l),y.push(m),T===13&&n.charCodeAt(l+1)===10?l+=2:++l,m="",p=l,a=l;continue}if(Nn(T))++l;else if(si(n,l))l+=2;else throw He(e.source,l,`Invalid character within String: ${sn(e,l)}.`)}throw He(e.source,l,"Unterminated string.")}function OI(e,t){const n=e.source.body,s=n.length;let a=t+1;for(;a<s;){const l=n.charCodeAt(a);if(bI(l))++a;else break}return Me(e,U.NAME,t,a,n.slice(t,a))}const wI=10,Ml=2;function xl(e){return oi(e,[])}function oi(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return GI(e,t);default:return String(e)}}function GI(e,t){if(e===null)return"null";if(t.includes(e))return"[Circular]";const n=[...t,e];if(LI(e)){const s=e.toJSON();if(s!==e)return typeof s=="string"?s:oi(s,n)}else if(Array.isArray(e))return XI(e,n);return VI(e,n)}function LI(e){return typeof e.toJSON=="function"}function VI(e,t){const n=Object.entries(e);return n.length===0?"{}":t.length>Ml?"["+WI(e)+"]":"{ "+n.map(([a,l])=>a+": "+oi(l,t)).join(", ")+" }"}function XI(e,t){if(e.length===0)return"[]";if(t.length>Ml)return"[Array]";const n=Math.min(wI,e.length),s=e.length-n,a=[];for(let l=0;l<n;++l)a.push(oi(e[l],t));return s===1?a.push("... 1 more item"):s>1&&a.push(`... ${s} more items`),"["+a.join(", ")+"]"}function WI(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){const n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}const kI=globalThis.process&&globalThis.process.env.NODE_ENV==="production"?function(t,n){return t instanceof n}:function(t,n){if(t instanceof n)return!0;if(typeof t=="object"&&t!==null){var s;const a=n.prototype[Symbol.toStringTag],l=Symbol.toStringTag in t?t[Symbol.toStringTag]:(s=t.constructor)===null||s===void 0?void 0:s.name;if(a===l){const p=xl(t);throw new Error(`Cannot use ${a} "${p}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class Ul{constructor(t,n="GraphQL request",s={line:1,column:1}){typeof t=="string"||Ps(!1,`Body must be a string. Received: ${xl(t)}.`),this.body=t,this.name=n,this.locationOffset=s,this.locationOffset.line>0||Ps(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Ps(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function PI(e){return kI(e,Ul)}function AI(e,t){return new MI(e,t).parseDocument()}class MI{constructor(t,n={}){const s=PI(t)?t:new Ul(t);this._lexer=new SI(s),this._options=n,this._tokenCounter=0}parseName(){const t=this.expectToken(U.NAME);return this.node(t,{kind:oe.NAME,value:t.value})}parseDocument(){return this.node(this._lexer.token,{kind:oe.DOCUMENT,definitions:this.many(U.SOF,this.parseDefinition,U.EOF)})}parseDefinition(){if(this.peek(U.BRACE_L))return this.parseOperationDefinition();const t=this.peekDescription(),n=t?this._lexer.lookahead():this._lexer.token;if(n.kind===U.NAME){switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(t)throw He(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(n.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(n)}parseOperationDefinition(){const t=this._lexer.token;if(this.peek(U.BRACE_L))return this.node(t,{kind:oe.OPERATION_DEFINITION,operation:Rn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const n=this.parseOperationType();let s;return this.peek(U.NAME)&&(s=this.parseName()),this.node(t,{kind:oe.OPERATION_DEFINITION,operation:n,name:s,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const t=this.expectToken(U.NAME);switch(t.value){case"query":return Rn.QUERY;case"mutation":return Rn.MUTATION;case"subscription":return Rn.SUBSCRIPTION}throw this.unexpected(t)}parseVariableDefinitions(){return this.optionalMany(U.PAREN_L,this.parseVariableDefinition,U.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:oe.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(U.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(U.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const t=this._lexer.token;return this.expectToken(U.DOLLAR),this.node(t,{kind:oe.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:oe.SELECTION_SET,selections:this.many(U.BRACE_L,this.parseSelection,U.BRACE_R)})}parseSelection(){return this.peek(U.SPREAD)?this.parseFragment():this.parseField()}parseField(){const t=this._lexer.token,n=this.parseName();let s,a;return this.expectOptionalToken(U.COLON)?(s=n,a=this.parseName()):a=n,this.node(t,{kind:oe.FIELD,alias:s,name:a,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(U.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(t){const n=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(U.PAREN_L,n,U.PAREN_R)}parseArgument(t=!1){const n=this._lexer.token,s=this.parseName();return this.expectToken(U.COLON),this.node(n,{kind:oe.ARGUMENT,name:s,value:this.parseValueLiteral(t)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const t=this._lexer.token;this.expectToken(U.SPREAD);const n=this.expectOptionalKeyword("on");return!n&&this.peek(U.NAME)?this.node(t,{kind:oe.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(t,{kind:oe.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const t=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(t,{kind:oe.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:oe.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(t){const n=this._lexer.token;switch(n.kind){case U.BRACKET_L:return this.parseList(t);case U.BRACE_L:return this.parseObject(t);case U.INT:return this.advanceLexer(),this.node(n,{kind:oe.INT,value:n.value});case U.FLOAT:return this.advanceLexer(),this.node(n,{kind:oe.FLOAT,value:n.value});case U.STRING:case U.BLOCK_STRING:return this.parseStringLiteral();case U.NAME:switch(this.advanceLexer(),n.value){case"true":return this.node(n,{kind:oe.BOOLEAN,value:!0});case"false":return this.node(n,{kind:oe.BOOLEAN,value:!1});case"null":return this.node(n,{kind:oe.NULL});default:return this.node(n,{kind:oe.ENUM,value:n.value})}case U.DOLLAR:if(t)if(this.expectToken(U.DOLLAR),this._lexer.token.kind===U.NAME){const s=this._lexer.token.value;throw He(this._lexer.source,n.start,`Unexpected variable "$${s}" in constant value.`)}else throw this.unexpected(n);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const t=this._lexer.token;return this.advanceLexer(),this.node(t,{kind:oe.STRING,value:t.value,block:t.kind===U.BLOCK_STRING})}parseList(t){const n=()=>this.parseValueLiteral(t);return this.node(this._lexer.token,{kind:oe.LIST,values:this.any(U.BRACKET_L,n,U.BRACKET_R)})}parseObject(t){const n=()=>this.parseObjectField(t);return this.node(this._lexer.token,{kind:oe.OBJECT,fields:this.any(U.BRACE_L,n,U.BRACE_R)})}parseObjectField(t){const n=this._lexer.token,s=this.parseName();return this.expectToken(U.COLON),this.node(n,{kind:oe.OBJECT_FIELD,name:s,value:this.parseValueLiteral(t)})}parseDirectives(t){const n=[];for(;this.peek(U.AT);)n.push(this.parseDirective(t));return n}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(t){const n=this._lexer.token;return this.expectToken(U.AT),this.node(n,{kind:oe.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t)})}parseTypeReference(){const t=this._lexer.token;let n;if(this.expectOptionalToken(U.BRACKET_L)){const s=this.parseTypeReference();this.expectToken(U.BRACKET_R),n=this.node(t,{kind:oe.LIST_TYPE,type:s})}else n=this.parseNamedType();return this.expectOptionalToken(U.BANG)?this.node(t,{kind:oe.NON_NULL_TYPE,type:n}):n}parseNamedType(){return this.node(this._lexer.token,{kind:oe.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(U.STRING)||this.peek(U.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("schema");const s=this.parseConstDirectives(),a=this.many(U.BRACE_L,this.parseOperationTypeDefinition,U.BRACE_R);return this.node(t,{kind:oe.SCHEMA_DEFINITION,description:n,directives:s,operationTypes:a})}parseOperationTypeDefinition(){const t=this._lexer.token,n=this.parseOperationType();this.expectToken(U.COLON);const s=this.parseNamedType();return this.node(t,{kind:oe.OPERATION_TYPE_DEFINITION,operation:n,type:s})}parseScalarTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");const s=this.parseName(),a=this.parseConstDirectives();return this.node(t,{kind:oe.SCALAR_TYPE_DEFINITION,description:n,name:s,directives:a})}parseObjectTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");const s=this.parseName(),a=this.parseImplementsInterfaces(),l=this.parseConstDirectives(),p=this.parseFieldsDefinition();return this.node(t,{kind:oe.OBJECT_TYPE_DEFINITION,description:n,name:s,interfaces:a,directives:l,fields:p})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(U.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(U.BRACE_L,this.parseFieldDefinition,U.BRACE_R)}parseFieldDefinition(){const t=this._lexer.token,n=this.parseDescription(),s=this.parseName(),a=this.parseArgumentDefs();this.expectToken(U.COLON);const l=this.parseTypeReference(),p=this.parseConstDirectives();return this.node(t,{kind:oe.FIELD_DEFINITION,description:n,name:s,arguments:a,type:l,directives:p})}parseArgumentDefs(){return this.optionalMany(U.PAREN_L,this.parseInputValueDef,U.PAREN_R)}parseInputValueDef(){const t=this._lexer.token,n=this.parseDescription(),s=this.parseName();this.expectToken(U.COLON);const a=this.parseTypeReference();let l;this.expectOptionalToken(U.EQUALS)&&(l=this.parseConstValueLiteral());const p=this.parseConstDirectives();return this.node(t,{kind:oe.INPUT_VALUE_DEFINITION,description:n,name:s,type:a,defaultValue:l,directives:p})}parseInterfaceTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");const s=this.parseName(),a=this.parseImplementsInterfaces(),l=this.parseConstDirectives(),p=this.parseFieldsDefinition();return this.node(t,{kind:oe.INTERFACE_TYPE_DEFINITION,description:n,name:s,interfaces:a,directives:l,fields:p})}parseUnionTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");const s=this.parseName(),a=this.parseConstDirectives(),l=this.parseUnionMemberTypes();return this.node(t,{kind:oe.UNION_TYPE_DEFINITION,description:n,name:s,directives:a,types:l})}parseUnionMemberTypes(){return this.expectOptionalToken(U.EQUALS)?this.delimitedMany(U.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");const s=this.parseName(),a=this.parseConstDirectives(),l=this.parseEnumValuesDefinition();return this.node(t,{kind:oe.ENUM_TYPE_DEFINITION,description:n,name:s,directives:a,values:l})}parseEnumValuesDefinition(){return this.optionalMany(U.BRACE_L,this.parseEnumValueDefinition,U.BRACE_R)}parseEnumValueDefinition(){const t=this._lexer.token,n=this.parseDescription(),s=this.parseEnumValueName(),a=this.parseConstDirectives();return this.node(t,{kind:oe.ENUM_VALUE_DEFINITION,description:n,name:s,directives:a})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw He(this._lexer.source,this._lexer.token.start,`${ai(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");const s=this.parseName(),a=this.parseConstDirectives(),l=this.parseInputFieldsDefinition();return this.node(t,{kind:oe.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:s,directives:a,fields:l})}parseInputFieldsDefinition(){return this.optionalMany(U.BRACE_L,this.parseInputValueDef,U.BRACE_R)}parseTypeSystemExtension(){const t=this._lexer.lookahead();if(t.kind===U.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)}parseSchemaExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const n=this.parseConstDirectives(),s=this.optionalMany(U.BRACE_L,this.parseOperationTypeDefinition,U.BRACE_R);if(n.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:oe.SCHEMA_EXTENSION,directives:n,operationTypes:s})}parseScalarTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const n=this.parseName(),s=this.parseConstDirectives();if(s.length===0)throw this.unexpected();return this.node(t,{kind:oe.SCALAR_TYPE_EXTENSION,name:n,directives:s})}parseObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const n=this.parseName(),s=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),l=this.parseFieldsDefinition();if(s.length===0&&a.length===0&&l.length===0)throw this.unexpected();return this.node(t,{kind:oe.OBJECT_TYPE_EXTENSION,name:n,interfaces:s,directives:a,fields:l})}parseInterfaceTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const n=this.parseName(),s=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),l=this.parseFieldsDefinition();if(s.length===0&&a.length===0&&l.length===0)throw this.unexpected();return this.node(t,{kind:oe.INTERFACE_TYPE_EXTENSION,name:n,interfaces:s,directives:a,fields:l})}parseUnionTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const n=this.parseName(),s=this.parseConstDirectives(),a=this.parseUnionMemberTypes();if(s.length===0&&a.length===0)throw this.unexpected();return this.node(t,{kind:oe.UNION_TYPE_EXTENSION,name:n,directives:s,types:a})}parseEnumTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const n=this.parseName(),s=this.parseConstDirectives(),a=this.parseEnumValuesDefinition();if(s.length===0&&a.length===0)throw this.unexpected();return this.node(t,{kind:oe.ENUM_TYPE_EXTENSION,name:n,directives:s,values:a})}parseInputObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const n=this.parseName(),s=this.parseConstDirectives(),a=this.parseInputFieldsDefinition();if(s.length===0&&a.length===0)throw this.unexpected();return this.node(t,{kind:oe.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:s,fields:a})}parseDirectiveDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(U.AT);const s=this.parseName(),a=this.parseArgumentDefs(),l=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const p=this.parseDirectiveLocations();return this.node(t,{kind:oe.DIRECTIVE_DEFINITION,description:n,name:s,arguments:a,repeatable:l,locations:p})}parseDirectiveLocations(){return this.delimitedMany(U.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const t=this._lexer.token,n=this.parseName();if(Object.prototype.hasOwnProperty.call(xs,n.value))return n;throw this.unexpected(t)}node(t,n){return this._options.noLocation!==!0&&(n.loc=new hI(t,this._lexer.lastToken,this._lexer.source)),n}peek(t){return this._lexer.token.kind===t}expectToken(t){const n=this._lexer.token;if(n.kind===t)return this.advanceLexer(),n;throw He(this._lexer.source,n.start,`Expected ${Dl(t)}, found ${ai(n)}.`)}expectOptionalToken(t){return this._lexer.token.kind===t?(this.advanceLexer(),!0):!1}expectKeyword(t){const n=this._lexer.token;if(n.kind===U.NAME&&n.value===t)this.advanceLexer();else throw He(this._lexer.source,n.start,`Expected "${t}", found ${ai(n)}.`)}expectOptionalKeyword(t){const n=this._lexer.token;return n.kind===U.NAME&&n.value===t?(this.advanceLexer(),!0):!1}unexpected(t){const n=t!=null?t:this._lexer.token;return He(this._lexer.source,n.start,`Unexpected ${ai(n)}.`)}any(t,n,s){this.expectToken(t);const a=[];for(;!this.expectOptionalToken(s);)a.push(n.call(this));return a}optionalMany(t,n,s){if(this.expectOptionalToken(t)){const a=[];do a.push(n.call(this));while(!this.expectOptionalToken(s));return a}return[]}many(t,n,s){this.expectToken(t);const a=[];do a.push(n.call(this));while(!this.expectOptionalToken(s));return a}delimitedMany(t,n){this.expectOptionalToken(t);const s=[];do s.push(n.call(this));while(this.expectOptionalToken(t));return s}advanceLexer(){const{maxTokens:t}=this._options,n=this._lexer.advance();if(t!==void 0&&n.kind!==U.EOF&&(++this._tokenCounter,this._tokenCounter>t))throw He(this._lexer.source,n.start,`Document contains more that ${t} tokens. Parsing aborted.`)}}function ai(e){const t=e.value;return Dl(e.kind)+(t!=null?` "${t}"`:"")}function Dl(e){return TI(e)?`"${e}"`:e}const xI=["click","input","submit"];function UI(){return!1}class DI extends qr{constructor(n={}){var s;super("user-interaction","1.0.0",n);fe(this,"_spansData",new WeakMap);fe(this,"_wrappedListeners",new WeakMap);fe(this,"_eventsSpanMap",new WeakMap);fe(this,"_eventNames");fe(this,"_shouldPreventSpanCreation");this._eventNames=new Set((s=n==null?void 0:n.eventNames)!=null?s:xI),this._shouldPreventSpanCreation=typeof(n==null?void 0:n.shouldPreventSpanCreation)=="function"?n.shouldPreventSpanCreation:UI}init(){}_allowEventName(n){return this._eventNames.has(n)}_createSpan(n,s){var m;const a=n==null?void 0:n.target,l=n==null?void 0:n.type;if(!(a instanceof HTMLElement)||!a.getAttribute||a.hasAttribute("disabled")||!this._allowEventName(l))return;const p=cl(a,!0);try{const y=this.tracer.startSpan(l,{attributes:{"event.type":l,"event.tag":a.tagName,"event.xpath":p,"event.id":a.id,"event.text":(m=a.textContent)!=null?m:"","event.url":window.location.href,"viewport.width":window.innerWidth,"viewport.height":window.innerHeight}},s?Le.setSpan(Ee.active(),s):void 0);return n instanceof MouseEvent&&(y.setAttribute("event.x",n.clientX),y.setAttribute("event.y",n.clientY),y.setAttribute("event.relativeX",n.clientX/window.innerWidth),y.setAttribute("event.relativeY",n.clientY/window.innerHeight),l==="scroll"&&(y.setAttribute("event.scrollX",window.scrollX),y.setAttribute("event.scrollY",window.scrollY))),this._shouldPreventSpanCreation(l,a,y)===!0?void 0:(this._spansData.set(y,{taskCount:0}),y)}catch(y){this._diag.error("failed to start create new user interaction span",y)}}addPatchedListener(n,s,a,l){let p=this._wrappedListeners.get(a);p||(p=new Map,this._wrappedListeners.set(a,p));let m=p.get(s);return m||(m=new Map,p.set(s,m)),m.has(n)?!1:(m.set(n,l),!0)}removePatchedListener(n,s,a){const l=this._wrappedListeners.get(a);if(!l)return;const p=l.get(s);if(!p)return;const m=p.get(n);return m&&(p.delete(n),p.size===0&&(l.delete(s),l.size===0&&this._wrappedListeners.delete(a))),m}_invokeListener(n,s,a){return typeof n=="function"?n.apply(s,a):n.handleEvent(a[0])}_patchAddEventListener(){const n=this;let s=0;return a=>function(p,m,y){if(!m)return a.call(this,p,m,y);const T=y&&typeof y=="object"&&y.once,g=function(..._){let Z;const R=_[0];if((R==null?void 0:R.type)==="mousemove"&&Date.now()-s<100)return;s=Date.now(),R&&(Z=n._eventsSpanMap.get(R)),T&&n.removePatchedListener(this,p,m);const V=n._createSpan(R,Z);return V?(R&&n._eventsSpanMap.set(R,V),Ee.with(Le.setSpan(Ee.active(),V),()=>{const G=n._invokeListener(m,this,_);return V.end(),G})):n._invokeListener(m,this,_)};if(n.addPatchedListener(this,p,m,g))return a.call(this,p,g,y)}}_patchRemoveEventListener(){const n=this;return s=>function(l,p,m){const y=n.removePatchedListener(this,l,p);return y?s.call(this,l,y,m):s.call(this,l,p,m)}}_getPatchableEventTargets(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]}enable(){this._getPatchableEventTargets().forEach(s=>{rn(s.addEventListener)&&(this._unwrap(s,"addEventListener"),this._diag.debug("removing previous patch from method addEventListener")),rn(s.removeEventListener)&&(this._unwrap(s,"removeEventListener"),this._diag.debug("removing previous patch from method removeEventListener")),this._wrap(s,"addEventListener",this._patchAddEventListener()),this._wrap(s,"removeEventListener",this._patchRemoveEventListener())})}disable(){this._getPatchableEventTargets().forEach(s=>{rn(s.addEventListener)&&this._unwrap(s,"addEventListener"),rn(s.removeEventListener)&&this._unwrap(s,"removeEventListener")})}}var Fl={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let kt;const li="highlight.record",FI=e=>{var T,g,_,Z,R;if(kt!==void 0){console.warn("OTEL already initialized. Skipping...");return}const t=e.backendUrl||Fl.REACT_APP_PUBLIC_GRAPH_URI||"https://pub.highlight.run",n=[...(g=(T=e.networkRecordingOptions)==null?void 0:T.urlBlocklist)!=null?g:[],...na],s=Fl.DEBUG==="true",a=(_=e.endpoint)!=null?_:"https://otel.highlight.io:4318",l=(Z=e.environment)!=null?Z:"production";kt=new iS({resource:new Gs({[aI]:(R=e.serviceName)!=null?R:"highlight-browser",[oI]:l,"highlight.project_id":e.projectId,"highlight.session_id":e.sessionSecureId})}),s&&kt.addSpanProcessor(new eS(new Qg));const p=new rI({url:a+"/v1/traces",concurrencyLimit:10,compression:"gzip"}),m=new YI(p,{maxExportBatchSize:15});kt.addSpanProcessor(m),gS({instrumentations:[new ZS({applyCustomAttributesOnSpan:{documentLoad:Kl,documentFetch:Kl,resourceFetch:zI}}),new DI,new Qv({propagateTraceHeaderCorsUrls:/.*/,applyCustomAttributesOnSpan:(V,G,K)=>_t(this,null,function*(){var be,ze,Pt;const re=V;if(re.attributes[li]===!1)return;const M=re.attributes["http.url"],Ge=(be=G.method)!=null?be:"GET";if(V.updateName(Hl(M,Ge,G.body)),!(K instanceof Response)){V.setAttributes({"http.response.error":K.message,"http.response.status":K.status});return}Jl(V,G.body,G.headers,e.networkRecordingOptions);const Ve=yield pa(K,(ze=e.networkRecordingOptions)==null?void 0:ze.bodyKeysToRecord,(Pt=e.networkRecordingOptions)==null?void 0:Pt.networkBodyKeysToRedact);V.setAttribute("http.response.body",Ve)})}),new vE({propagateTraceHeaderCorsUrls:/.*/,applyCustomAttributesOnSpan:(V,G)=>{var Ve,be;const K=G;if(V.attributes[li]===!1)return;const M=Hl(K._url,K._method,G.responseText);V.updateName(M),Jl(V,K._body,K._requestHeaders,e.networkRecordingOptions);const Ge=Ft(K._body,(Ve=e.networkRecordingOptions)==null?void 0:Ve.networkBodyKeysToRedact,(be=e.networkRecordingOptions)==null?void 0:be.bodyKeysToRecord,K._requestHeaders);V.setAttribute("http.request.body",Ge)}})]});const y=new ol;y.enable(),kt.register({contextManager:y,propagator:new Ma({propagators:[new Oa,new HI({backendUrl:t,tracingOrigins:e.tracingOrigins,urlBlocklist:n})]})})};class YI extends il{onEnd(t){t.attributes[li]!==!1&&super.onEnd(t)}}class HI extends Fa{constructor(n){super();fe(this,"backendUrl");fe(this,"tracingOrigins");fe(this,"urlBlocklist");this.backendUrl=n.backendUrl,this.tracingOrigins=n.tracingOrigins,this.urlBlocklist=n.urlBlocklist}inject(n,s,a){const l=Le.getSpan(n);if(!l)return;const p=l.attributes["http.url"];if(typeof p=="string"&&!BI(p,this.backendUrl,this.tracingOrigins,this.urlBlocklist)){l.setAttribute(li,!1);return}super.inject(n,s,a)}}const Yl="highlight-browser",JI=()=>kt.getTracer(Yl),KI=()=>_t(this,null,function*(){kt!==void 0&&(yield kt.forceFlush(),kt.shutdown())}),Hl=(e,t,n)=>{var m,y,T;let s;const a=new URL(e),l=a.pathname;let p=`${t} - ${l}`;try{if(s=typeof n=="string"?JSON.parse(n):n,s&&s.query){const g=AI(s.query),_=((m=g.definitions[0])==null?void 0:m.kind)==="OperationDefinition"?(T=(y=g.definitions[0])==null?void 0:y.name)==null?void 0:T.value:void 0;_&&(p=`${_} (GraphQL: ${a.host+a.pathname})`)}}catch(g){}return p},Jl=(e,t,n,s)=>{var m;const a=typeof t=="string"?t:String(t);let l;try{l=t?JSON.parse(a):void 0,l.operationName&&e.setAttribute("graphql.operation.name",l.operationName)}catch(y){}const p=ta((m=s==null?void 0:s.networkHeadersToRedact)!=null?m:[],n,s==null?void 0:s.headerKeysToRecord);e.setAttributes({"highlight.type":"http.request","http.request.headers":JSON.stringify(p),"http.request.body":a})},BI=(e,t,n,s)=>!!(s!=null&&s.some(p=>e.toLowerCase().includes(p)))||!Vr(e,t,n)?!1:Xr(e,n),Kl=e=>{const n=e.events,s={unload:bt("unloadEventStart","unloadEventEnd",n),dom_interactive:bt("domInteractive","fetchStart",n),dom_content_loaded:bt("domContentLoadedEventEnd","domContentLoadedEventStart",n),dom_complete:bt("fetchStart","domComplete",n),load_event:bt("loadEventStart","loadEventEnd",n),first_paint:bt("fetchStart","firstPaint",n),first_contentful_paint:bt("fetchStart","firstContentfulPaint",n),domain_lookup:bt("domainLookupStart","domainLookupEnd",n),connect:bt("connectStart","connectEnd",n),request:bt("requestStart","requestEnd",n),response:bt("responseStart","responseEnd",n)};Object.entries(s).forEach(([a,l])=>{l>0&&(e.setAttribute(`timings.${a}.ns`,l),e.setAttribute(`timings.${a}.readable`,Bl(l)))})};function bt(e,t,n){const s=n.find(m=>m.name===e),a=n.find(m=>m.name===t);if(!s||!a)return 0;const l=s.time[0]*1e9+s.time[1];return a.time[0]*1e9+a.time[1]-l}const zI=(e,t)=>{const n={domain_lookup:(t.domainLookupEnd-t.domainLookupStart)*1e6,connect:(t.connectEnd-t.connectStart)*1e6,request:(t.responseEnd-t.requestStart)*1e6,response:(t.responseEnd-t.responseStart)*1e6};Object.entries(n).forEach(([s,a])=>{a>0&&(e.setAttribute(`timings.${s}.ns`,a),e.setAttribute(`timings.${s}.readable`,Bl(a)))})},Bl=e=>{if(e>=36e11){const p=e/36e11;return`${Number(p.toFixed(1))}h`}else if(e>=6e10){const p=e/6e10;return`${Number(p.toFixed(1))}m`}else if(e>=1e9){const p=e/1e9;return`${Number(p.toFixed(1))}s`}else if(e>=1e6){const p=e/1e6;return`${Number(p.toFixed(1))}ms`}else if(e>=1e3){const p=e/1e3;return`${Number(p.toFixed(1))}s`}else return`${Number(e.toFixed(1))}ns`},zl=Object.freeze(Object.defineProperty({__proto__:null,BROWSER_TRACER_NAME:Yl,getTracer:JI,setupBrowserTracing:FI,shutdown:KI},Symbol.toStringTag,{value:"Module"}));var Ds={exports:{}};(function(e,t){(function(n,s){s(t)})(Yn,function(n){var s=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,T=(i,r,o)=>r in i?s(i,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[r]=o,g=(i,r)=>{for(var o in r||(r={}))m.call(r,o)&&T(i,o,r[o]);if(p)for(var o of p(r))y.call(r,o)&&T(i,o,r[o]);return i},_=(i,r)=>a(i,l(r)),Z=(i,r)=>{var o={};for(var c in i)m.call(i,c)&&r.indexOf(c)<0&&(o[c]=i[c]);if(i!=null&&p)for(var c of p(i))r.indexOf(c)<0&&y.call(i,c)&&(o[c]=i[c]);return o},R=(i,r,o)=>(T(i,typeof r!="symbol"?r+"":r,o),o),V=(i,r,o)=>new Promise((c,u)=>{var d=f=>{try{b(o.next(f))}catch(S){u(S)}},h=f=>{try{b(o.throw(f))}catch(S){u(S)}},b=f=>f.done?c(f.value):Promise.resolve(f.value).then(d,h);b((o=o.apply(i,r)).next())});function G(i,r){for(var o=0;o<r.length;o++){const c=r[o];if(typeof c!="string"&&!Array.isArray(c)){for(const u in c)if(u!=="default"&&!(u in i)){const d=Object.getOwnPropertyDescriptor(c,u);d&&Object.defineProperty(i,u,d.get?d:{enumerable:!0,get:()=>c[u]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}var K,re=Object.defineProperty,M=(i,r,o)=>(((c,u,d)=>{u in c?re(c,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[u]=d})(i,typeof r!="symbol"?r+"":r,o),o),Ge=Object.defineProperty,Ve=(i,r,o)=>(((c,u,d)=>{u in c?Ge(c,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[u]=d})(i,typeof r!="symbol"?r+"":r,o),o),be=(i=>(i[i.Document=0]="Document",i[i.DocumentType=1]="DocumentType",i[i.Element=2]="Element",i[i.Text=3]="Text",i[i.CDATA=4]="CDATA",i[i.Comment=5]="Comment",i))(be||{});const ze={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Pt={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},At={},Mt={};function Jt(i,r,o){var c;const u=`${i}.${String(o)}`;if(Mt[u])return Mt[u].call(r);const d=function(b){if(At[b])return At[b];const f=globalThis[b],S=f.prototype,v=b in ze?ze[b]:void 0,I=!!(v&&v.every(P=>{var L,x;return!!((x=(L=Object.getOwnPropertyDescriptor(S,P))==null?void 0:L.get)!=null&&x.toString().includes("[native code]"))})),N=b in Pt?Pt[b]:void 0,C=!!(N&&N.every(P=>{var L;return typeof S[P]=="function"&&((L=S[P])==null?void 0:L.toString().includes("[native code]"))}));if(I&&C)return At[b]=f.prototype,f.prototype;try{const P=document.createElement("iframe");document.body.appendChild(P);const L=P.contentWindow;if(!L)return f.prototype;const x=L[b].prototype;return document.body.removeChild(P),x?At[b]=x:S}catch(P){return S}}(i),h=(c=Object.getOwnPropertyDescriptor(d,o))==null?void 0:c.get;return h?(Mt[u]=h,h.call(r)):r[o]}function Fs(i){return Jt("Node",i,"childNodes")}function ci(i){return Jt("Node",i,"parentNode")}function Ys(i){return Jt("Node",i,"parentElement")}function Hs(i){return Jt("Node",i,"textContent")}function Js(i){return i&&"shadowRoot"in i?Jt("Element",i,"shadowRoot"):null}function jl(i){return i.nodeType===i.ELEMENT_NODE}function cr(i){const r=i&&"host"in i&&"mode"in i&&function(o){return o&&"host"in o?Jt("ShadowRoot",o,"host"):null}(i)||null;return!!(r&&"shadowRoot"in r&&Js(r)===i)}function ur(i){return Object.prototype.toString.call(i)==="[object ShadowRoot]"}function ui(i){try{const o=i.rules||i.cssRules;return o?((r=Array.from(o,Ql).join("")).includes(" background-clip: text;")&&!r.includes(" -webkit-background-clip: text;")&&(r=r.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),r):null}catch(o){return null}var r}function Ql(i){let r;if(function(o){return"styleSheet"in o}(i))try{r=ui(i.styleSheet)||function(o){const{cssText:c}=o;if(c.split('"').length<3)return c;const u=["@import",`url(${JSON.stringify(o.href)})`];return o.layerName===""?u.push("layer"):o.layerName&&u.push(`layer(${o.layerName})`),o.supportsText&&u.push(`supports(${o.supportsText})`),o.media.length&&u.push(o.media.mediaText),u.join(" ")+";"}(i)}catch(o){}else if(function(o){return"selectorText"in o}(i)&&i.selectorText.includes(":"))return function(o){const c=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return o.replace(c,"$1\\$2")}(i.cssText);return r||i.cssText}class $l{constructor(){Ve(this,"idNodeMap",new Map),Ve(this,"nodeMetaMap",new WeakMap)}getId(r){var o;if(!r)return-1;const c=(o=this.getMeta(r))==null?void 0:o.id;return c!=null?c:-1}getNode(r){return this.idNodeMap.get(r)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(r){return this.nodeMetaMap.get(r)||null}removeNodeFromMap(r){const o=this.getId(r);this.idNodeMap.delete(o),r.childNodes&&r.childNodes.forEach(c=>this.removeNodeFromMap(c))}has(r){return this.idNodeMap.has(r)}hasNode(r){return this.nodeMetaMap.has(r)}add(r,o){const c=o.id;this.idNodeMap.set(c,r),this.nodeMetaMap.set(r,o)}replace(r,o){const c=this.getNode(r);if(c){const u=this.nodeMetaMap.get(c);u&&this.nodeMetaMap.set(o,u)}this.idNodeMap.set(r,o)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Ks({element:i,maskInputOptions:r,tagName:o,type:c,value:u,overwriteRecord:d,maskInputFn:h}){let b=u||"";return nc({maskInputOptions:r,tagName:o,type:c,overwriteRecord:d})&&(b=h?h(b,i):"*".repeat(b.length)),b}function Zn(i){return i.toLowerCase()}const ql="__rrweb_original__";function Bs(i){const r=i.type;return i.hasAttribute("data-rr-is-password")?"password":r?Zn(r):null}function ec(i,r){var o;let c;try{c=new URL(i,r!=null?r:window.location.href)}catch(d){return null}const u=c.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(o=u==null?void 0:u[1])!=null?o:null}function zs(i){return i=((i=i.replace(/[^ -~]+/g,""))==null?void 0:i.split(" ").map(r=>Math.random().toString(20).substr(2,r.length)).join(" "))||""}function js(i){return i==="img"||i==="video"||i==="audio"||i==="source"}const $I=[new RegExp(/[a-zA-Z0-9.!#$%&'*+=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*/),new RegExp(/[0-9]{9,16}/),new RegExp(/[0-9]{3}-?[0-9]{2}-?[0-9]{4}/),new RegExp(/[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}/),new RegExp(/[0-9]{4}-?[0-9]{4}-?[0-9]{4}-?[0-9]{4}/),new RegExp(/[0-9]{1,5}.?[0-9]{0,3}\s[a-zA-Z]{2,30}\s[a-zA-Z]{2,15}/),new RegExp(/(?:[0-9]{1,3}.){3}[0-9]{1,3}/)];function tc(i){return!!i&&$I.some(r=>r.test(i))}const nc=({maskInputOptions:i,tagName:r,type:o,overwriteRecord:c})=>{const u=o&&o.toLowerCase();return!(c==="true"||!i[r.toLowerCase()]&&(!u||!i[u]))};let qI=1;const eR=new RegExp("[^a-z0-9-_:]"),dr=-2;function rc(){return qI++}let Cn,ic;const tR=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,nR=/^(?:[a-z+]+:)?\/\//i,rR=/^www\..*/i,iR=/^(data:)([^,]*),(.*)/i;function di(i,r){return(i||"").replace(tR,(o,c,u,d,h,b)=>{const f=u||h||b,S=c||d||"";if(!f)return o;if(nR.test(f)||rR.test(f))return`url(${S}${f}${S})`;if(iR.test(f))return`url(${S}${f}${S})`;if(f[0]==="/")return`url(${S}${function(N){let C="";return C=N.indexOf("//")>-1?N.split("/").slice(0,3).join("/"):N.split("/")[0],C=C.split("?")[0],C}(r)+f}${S})`;const v=r.split("/"),I=f.split("/");v.pop();for(const N of I)N!=="."&&(N===".."?v.pop():v.push(N));return`url(${S}${v.join("/")}${S})`})}const sR=/^[^ \t\n\r\u000c]+/,oR=/^[, \t\n\r\u000c]+/,sc=new WeakMap;function pr(i,r){return r&&r.trim()!==""?pi(i,r):r}function aR(i){return!!(i.tagName==="svg"||i.ownerSVGElement)}function pi(i,r){let o=sc.get(i);if(o||(o=i.createElement("a"),sc.set(i,o)),r){if(r.startsWith("blob:")||r.startsWith("data:"))return r}else r="";return o.setAttribute("href",r),o.href}function oc(i,r,o,c){return c&&(o==="src"||o==="href"&&(r!=="use"||c[0]!=="#")||o==="xlink:href"&&c[0]!=="#"?pr(i,c):o!=="background"||r!=="table"&&r!=="td"&&r!=="th"?o==="srcset"?function(u,d){if(d.trim()==="")return d;let h=0;function b(S){let v;const I=S.exec(d.substring(h));return I?(v=I[0],h+=v.length,v):""}const f=[];for(;b(oR),!(h>=d.length);){let S=b(sR);if(S.slice(-1)===",")S=pr(u,S.substring(0,S.length-1)),f.push(S);else{let v="";S=pr(u,S);let I=!1;for(;;){const N=d.charAt(h);if(N===""){f.push((S+v).trim());break}if(I)N===")"&&(I=!1);else{if(N===","){h+=1,f.push((S+v).trim());break}N==="("&&(I=!0)}v+=N,h+=1}}}return f.join(", ")}(i,c):o==="style"?di(c,pi(i)):r==="object"&&o==="data"?pr(i,c):c:pr(i,c))}function ac(i,r,o){return(i==="video"||i==="audio")&&r==="autoplay"}function lc(i,r,o){try{if(typeof r=="string"){if(i.classList.contains(r))return!0}else for(let c=i.classList.length;c--;){const u=i.classList[c];if(r.test(u))return!0}if(o)return i.matches(o)}catch(c){}return!1}function hi(i,r,o){if(!i)return!1;if(i.nodeType!==i.ELEMENT_NODE)return!!o&&hi(ci(i),r,o);for(let c=i.classList.length;c--;){const u=i.classList[c];if(r.test(u))return!0}return!!o&&hi(ci(i),r,o)}function cc(i,r,o,c){let u;if(jl(i)){if(u=i,!Fs(u).length)return!1}else{if(Ys(i)===null)return!1;u=Ys(i)}try{if(typeof r=="string"){if(c){if(u.closest(`.${r}`))return!0}else if(u.classList.contains(r))return!0}else if(hi(u,r,c))return!0;if(o){if(c){if(u.closest(o))return!0}else if(u.matches(o))return!0}}catch(d){}return!1}function lR(i,r){const{doc:o,mirror:c,blockClass:u,blockSelector:d,needsMask:h,inlineStylesheet:b,maskInputOptions:f={},maskTextClass:S,maskTextFn:v,maskInputFn:I,dataURLOptions:N={},inlineImages:C,recordCanvas:P,keepIframeSrcFn:L,newlyAddedElement:x=!1,privacySetting:w}=r,X=function(O,W){if(!W.hasNode(O))return;const Y=W.getId(O);return Y===1?void 0:Y}(o,c);switch(i.nodeType){case i.DOCUMENT_NODE:return i.compatMode!=="CSS1Compat"?{type:be.Document,childNodes:[],compatMode:i.compatMode}:{type:be.Document,childNodes:[]};case i.DOCUMENT_TYPE_NODE:return{type:be.DocumentType,name:i.name,publicId:i.publicId,systemId:i.systemId,rootId:X};case i.ELEMENT_NODE:return function(O,W){const{doc:Y,blockClass:j,blockSelector:te,inlineStylesheet:ne,maskInputOptions:Q={},maskInputFn:z,maskTextClass:ee,dataURLOptions:J={},inlineImages:E,recordCanvas:A,keepIframeSrcFn:H,newlyAddedElement:F=!1,privacySetting:se,rootId:k}=W;let B=lc(O,j,te);const _e=lc(O,ee,null),ge=se==="strict";let pe=function($){if($ instanceof HTMLFormElement)return"form";const ue=Zn($.tagName);return eR.test(ue)?"div":ue}(O),ae={};const nt=O.attributes.length;for(let $=0;$<nt;$++){const ue=O.attributes[$];ac(pe,ue.name)||(ae[ue.name]=oc(Y,pe,Zn(ue.name),ue.value))}if(pe==="link"&&ne){const $=Array.from(Y.styleSheets).find(Fe=>Fe.href===O.href);let ue=null;$&&(ue=ui($)),ue&&(delete ae.rel,delete ae.href,ae._cssText=di(ue,$.href))}if(pe==="style"&&O.sheet&&!(O.innerText||Hs(O)||"").trim().length){const $=ui(O.sheet);$&&(ae._cssText=di($,pi(Y)))}if(pe==="input"||pe==="textarea"||pe==="select"){const $=O.value,ue=O.checked;ae.type!=="radio"&&ae.type!=="checkbox"&&ae.type!=="submit"&&ae.type!=="button"&&$?ae.value=Ks({element:O,type:Bs(O),tagName:pe,value:$,overwriteRecord:O.getAttribute("data-hl-record"),maskInputOptions:Q,maskInputFn:z}):ue&&(ae.checked=ue)}if(pe==="option"&&(O.selected&&!Q.select?ae.selected=!0:delete ae.selected),pe==="canvas"&&A){if(O.__context==="2d")(function($){const ue=$.getContext("2d");if(!ue)return!0;for(let Fe=0;Fe<$.width;Fe+=50)for(let Ke=0;Ke<$.height;Ke+=50){const jt=ue.getImageData,Cr=ql in jt?jt[ql]:jt;if(new Uint32Array(Cr.call(ue,Fe,Ke,Math.min(50,$.width-Fe),Math.min(50,$.height-Ke)).data.buffer).some(Di=>Di!==0))return!1}return!0})(O)||(ae.rr_dataURL=O.toDataURL(J.type,J.quality));else if(!("__context"in O)){const $=O.toDataURL(J.type,J.quality),ue=Y.createElement("canvas");ue.width=O.width,ue.height=O.height,$!==ue.toDataURL(J.type,J.quality)&&(ae.rr_dataURL=$)}}if(pe==="img"&&E&&!B&&!_e&&!ge){Cn||(Cn=Y.createElement("canvas"),ic=Cn.getContext("2d"));const $=O,ue=$.currentSrc||$.getAttribute("src")||"<unknown-src>",Fe=$.crossOrigin,Ke=()=>{$.removeEventListener("load",Ke);try{Cn.width=$.naturalWidth,Cn.height=$.naturalHeight,ic.drawImage($,0,0),ae.rr_dataURL=Cn.toDataURL(J.type,J.quality)}catch(jt){if($.crossOrigin!=="anonymous")return $.crossOrigin="anonymous",void($.complete&&$.naturalWidth!==0?Ke():$.addEventListener("load",Ke));console.warn(`Cannot inline img src=${ue}! Error: ${jt}`)}$.crossOrigin==="anonymous"&&(Fe?ae.crossOrigin=Fe:$.removeAttribute("crossorigin"))};$.complete&&$.naturalWidth!==0?Ke():$.addEventListener("load",Ke)}if(pe==="audio"||pe==="video"){const $=ae;$.rr_mediaState=O.paused?"paused":"played",$.rr_mediaCurrentTime=O.currentTime,$.rr_mediaPlaybackRate=O.playbackRate,$.rr_mediaMuted=O.muted,$.rr_mediaLoop=O.loop,$.rr_mediaVolume=O.volume}if(F||(O.scrollLeft&&(ae.rr_scrollLeft=O.scrollLeft),O.scrollTop&&(ae.rr_scrollTop=O.scrollTop)),B||_e||ge&&js(pe)){const{width:$,height:ue}=O.getBoundingClientRect();ae={class:ae.class,rr_width:`${$}px`,rr_height:`${ue}px`}}ge&&js(pe)&&(B=!0),pe!=="iframe"||H(ae.src)||(O.contentDocument||(ae.rr_src=ae.src),delete ae.src);let Qe;try{customElements.get(pe)&&(Qe=!0)}catch($){}if(E&&pe==="video"){const $=O;if($.src===""||$.src.indexOf("blob:")!==-1){const{width:ue,height:Fe}=O.getBoundingClientRect();ae={width:ue,height:Fe,rr_width:`${ue}px`,rr_height:`${Fe}px`,rr_inlined_video:!0},pe="canvas";const Ke=Y.createElement("canvas");Ke.width=O.width,Ke.height=O.height,ae.rr_dataURL=Ke.toDataURL(J.type,J.quality)}}return{type:be.Element,tagName:pe,attributes:ae,childNodes:[],isSVG:aR(O)||void 0,needBlock:B,needMask:_e,rootId:k,isCustom:Qe}}(i,{doc:o,blockClass:u,blockSelector:d,inlineStylesheet:b,maskInputOptions:f,maskInputFn:I,maskTextClass:S,dataURLOptions:N,inlineImages:C,recordCanvas:P,keepIframeSrcFn:L,newlyAddedElement:x,privacySetting:w,rootId:X});case i.TEXT_NODE:return function(O,W){var Y,j;const{needsMask:te,maskTextFn:ne,privacySetting:Q,rootId:z}=W,ee=ci(O),J=ee&&ee.tagName;let E=Hs(O);const A=J==="STYLE"||void 0,H=J==="SCRIPT"||void 0;let F=!1;if(A&&E){try{O.nextSibling||O.previousSibling||(Y=ee.sheet)!=null&&Y.cssRules&&(E=ui(ee.sheet))}catch(_e){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${_e}`,O)}E=di(E,pi(W.doc)),F=!0}H?(E="SCRIPT_PLACEHOLDER",F=!0):J==="NOSCRIPT"&&(E="",F=!0),!A&&!H&&E&&te&&(E=ne?ne(E,Ys(O)):E.replace(/[\S]/g,"*"));const se=Q==="strict",k=(j=O.parentElement)==null?void 0:j.getAttribute("data-hl-record"),B=Q==="default"&&tc(E);return(se||B)&&!k&&!F&&J&&!new Set(["HEAD","TITLE","STYLE","SCRIPT","HTML","BODY","NOSCRIPT"]).has(J)&&E&&(E=zs(E)),{type:be.Text,textContent:E||"",isStyle:A,rootId:z}}(i,{doc:o,needsMask:h,maskTextFn:v,privacySetting:w,rootId:X});case i.CDATA_SECTION_NODE:return{type:be.CDATA,textContent:"",rootId:X};case i.COMMENT_NODE:return{type:be.Comment,textContent:Hs(i)||"",rootId:X};default:return!1}}function Ze(i){return i==null?"":i.toLowerCase()}function On(i,r){const{doc:o,mirror:c,blockClass:u,blockSelector:d,maskTextClass:h,maskTextSelector:b,skipChild:f=!1,inlineStylesheet:S=!0,maskInputOptions:v={},maskTextFn:I,maskInputFn:N,slimDOMOptions:C,dataURLOptions:P={},inlineImages:L=!1,recordCanvas:x=!1,onSerialize:w,onIframeLoad:X,iframeLoadTimeout:O=5e3,onStylesheetLoad:W,stylesheetLoadTimeout:Y=5e3,keepIframeSrcFn:j=()=>!1,newlyAddedElement:te=!1,privacySetting:ne}=r;let{needsMask:Q}=r,{preserveWhiteSpace:z=!0}=r;Q||(Q=cc(i,h,b,Q===void 0));const ee=lR(i,{doc:o,mirror:c,blockClass:u,blockSelector:d,needsMask:Q,inlineStylesheet:S,maskInputOptions:v,maskTextClass:h,maskTextFn:I,maskInputFn:N,dataURLOptions:P,inlineImages:L,recordCanvas:x,keepIframeSrcFn:j,newlyAddedElement:te,privacySetting:ne});if(!ee)return console.warn(i,"not serialized"),null;let J;J=c.hasNode(i)?c.getId(i):!function(k,B){return!!(B.comment&&k.type===be.Comment||k.type===be.Element&&(B.script&&(k.tagName==="script"||k.tagName==="link"&&(k.attributes.rel==="preload"||k.attributes.rel==="modulepreload")&&k.attributes.as==="script"||k.tagName==="link"&&k.attributes.rel==="prefetch"&&typeof k.attributes.href=="string"&&ec(k.attributes.href)==="js")||B.headFavicon&&(k.tagName==="link"&&k.attributes.rel==="shortcut icon"||k.tagName==="meta"&&(Ze(k.attributes.name).match(/^msapplication-tile(image|color)$/)||Ze(k.attributes.name)==="application-name"||Ze(k.attributes.rel)==="icon"||Ze(k.attributes.rel)==="apple-touch-icon"||Ze(k.attributes.rel)==="shortcut icon"))||k.tagName==="meta"&&(B.headMetaDescKeywords&&Ze(k.attributes.name).match(/^description|keywords$/)||B.headMetaSocial&&(Ze(k.attributes.property).match(/^(og|twitter|fb):/)||Ze(k.attributes.name).match(/^(og|twitter):/)||Ze(k.attributes.name)==="pinterest")||B.headMetaRobots&&(Ze(k.attributes.name)==="robots"||Ze(k.attributes.name)==="googlebot"||Ze(k.attributes.name)==="bingbot")||B.headMetaHttpEquiv&&k.attributes["http-equiv"]!==void 0||B.headMetaAuthorship&&(Ze(k.attributes.name)==="author"||Ze(k.attributes.name)==="generator"||Ze(k.attributes.name)==="framework"||Ze(k.attributes.name)==="publisher"||Ze(k.attributes.name)==="progid"||Ze(k.attributes.property).match(/^article:/)||Ze(k.attributes.property).match(/^product:/))||B.headMetaVerification&&(Ze(k.attributes.name)==="google-site-verification"||Ze(k.attributes.name)==="yandex-verification"||Ze(k.attributes.name)==="csrf-token"||Ze(k.attributes.name)==="p:domain_verify"||Ze(k.attributes.name)==="verify-v1"||Ze(k.attributes.name)==="verification"||Ze(k.attributes.name)==="shopify-checkout-api-token"))))}(ee,C)&&(z||ee.type!==be.Text||ee.isStyle||ee.textContent.replace(/^\s+|\s+$/gm,"").length)?rc():dr;const E=Object.assign(ee,{id:J});if(c.add(i,E),J===dr)return null;w&&w(i);let A=!f,H=ne,F=ne==="strict";if(E.type===be.Element){if(A=A&&!E.needBlock,F||(F=!!E.needBlock||!!E.needMask),H=F?"strict":H,F&&js(E.tagName)){const B=i.cloneNode();B.src="",c.add(B,E)}delete E.needBlock,delete E.needMask;const k=Js(i);k&&ur(k)&&(E.isShadowHost=!0)}if((E.type===be.Document||E.type===be.Element)&&A){C.headWhitespace&&E.type===be.Element&&E.tagName==="head"&&(z=!1);const k={doc:o,mirror:c,blockClass:u,blockSelector:d,needsMask:Q,maskTextClass:h,maskTextSelector:b,skipChild:f,inlineStylesheet:S,maskInputOptions:v,maskTextFn:I,maskInputFn:N,slimDOMOptions:C,dataURLOptions:P,inlineImages:L,recordCanvas:x,preserveWhiteSpace:z,onSerialize:w,onIframeLoad:X,iframeLoadTimeout:O,onStylesheetLoad:W,stylesheetLoadTimeout:Y,keepIframeSrcFn:j,privacySetting:H};if(!(E.type===be.Element&&E.tagName==="textarea"&&E.attributes.value!==void 0))for(const _e of Array.from(Fs(i))){const ge=On(_e,k);ge&&E.childNodes.push(ge)}let B=null;if(jl(i)&&(B=Js(i)))for(const _e of Array.from(Fs(B))){const ge=On(_e,k);ge&&(ur(B)&&(ge.isShadow=!0),E.childNodes.push(ge))}}const se=ci(i);return se&&cr(se)&&ur(se)&&(E.isShadow=!0),E.type===be.Element&&E.tagName==="iframe"&&function(k,B,_e){const ge=k.contentWindow;if(!ge)return;let pe,ae=!1;try{pe=ge.document.readyState}catch(Qe){return}if(pe!=="complete"){const Qe=setTimeout(()=>{ae||(B(),ae=!0)},_e);return void k.addEventListener("load",()=>{clearTimeout(Qe),ae=!0,B()})}const nt="about:blank";if(ge.location.href!==nt||k.src===nt||k.src==="")return setTimeout(B,0),k.addEventListener("load",B);k.addEventListener("load",B)}(i,()=>{const k=i.contentDocument;if(k&&X){const B=On(k,{doc:k,mirror:c,blockClass:u,blockSelector:d,needsMask:Q,maskTextClass:h,maskTextSelector:b,skipChild:!1,inlineStylesheet:S,maskInputOptions:v,maskTextFn:I,maskInputFn:N,slimDOMOptions:C,dataURLOptions:P,inlineImages:L,recordCanvas:x,preserveWhiteSpace:z,onSerialize:w,onIframeLoad:X,iframeLoadTimeout:O,onStylesheetLoad:W,stylesheetLoadTimeout:Y,keepIframeSrcFn:j,privacySetting:ne});B&&X(i,B)}},O),E.type===be.Element&&E.tagName==="link"&&typeof E.attributes.rel=="string"&&(E.attributes.rel==="stylesheet"||E.attributes.rel==="preload"&&typeof E.attributes.href=="string"&&ec(E.attributes.href)==="css")&&function(k,B,_e){let ge,pe=!1;try{ge=k.sheet}catch(nt){return}if(ge)return;const ae=setTimeout(()=>{pe||(B(),pe=!0)},_e);k.addEventListener("load",()=>{clearTimeout(ae),pe=!0,B()})}(i,()=>{if(W){const k=On(i,{doc:o,mirror:c,blockClass:u,blockSelector:d,needsMask:Q,maskTextClass:h,maskTextSelector:b,skipChild:!1,inlineStylesheet:S,maskInputOptions:v,maskTextFn:I,maskInputFn:N,slimDOMOptions:C,dataURLOptions:P,inlineImages:L,recordCanvas:x,preserveWhiteSpace:z,onSerialize:w,onIframeLoad:X,iframeLoadTimeout:O,onStylesheetLoad:W,stylesheetLoadTimeout:Y,keepIframeSrcFn:j,privacySetting:ne});k&&W(i,k)}},Y),E}var cR=Object.defineProperty,ct=(i,r,o)=>(((c,u,d)=>{u in c?cR(c,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[u]=d})(i,typeof r!="symbol"?r+"":r,o),o);class Qs{constructor(...r){ct(this,"parentElement",null),ct(this,"parentNode",null),ct(this,"ownerDocument"),ct(this,"firstChild",null),ct(this,"lastChild",null),ct(this,"previousSibling",null),ct(this,"nextSibling",null),ct(this,"ELEMENT_NODE",1),ct(this,"TEXT_NODE",3),ct(this,"nodeType"),ct(this,"nodeName"),ct(this,"RRNodeType")}get childNodes(){const r=[];let o=this.firstChild;for(;o;)r.push(o),o=o.nextSibling;return r}contains(r){if(!(r instanceof Qs)||r.ownerDocument!==this.ownerDocument)return!1;if(r===this)return!0;for(;r.parentNode;){if(r.parentNode===this)return!0;r=r.parentNode}return!1}appendChild(r){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(r,o){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(r){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}const uc={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},dc={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},mi={};function $s(i){if(mi[i])return mi[i];const r=globalThis[i],o=r.prototype,c=i in uc?uc[i]:void 0,u=!!(c&&c.every(b=>{var f,S;return!!((S=(f=Object.getOwnPropertyDescriptor(o,b))==null?void 0:f.get)!=null&&S.toString().includes("[native code]"))})),d=i in dc?dc[i]:void 0,h=!!(d&&d.every(b=>{var f;return typeof o[b]=="function"&&((f=o[b])==null?void 0:f.toString().includes("[native code]"))}));if(u&&h)return mi[i]=r.prototype,r.prototype;try{const b=document.createElement("iframe");document.body.appendChild(b);const f=b.contentWindow;if(!f)return r.prototype;const S=f[i].prototype;return document.body.removeChild(b),S?mi[i]=S:o}catch(b){return o}}const qs={};function wn(i,r,o){var c;const u=`${i}.${String(o)}`;if(qs[u])return qs[u].call(r);const d=$s(i),h=(c=Object.getOwnPropertyDescriptor(d,o))==null?void 0:c.get;return h?(qs[u]=h,h.call(r)):r[o]}const eo={};function pc(i,r,o){const c=`${i}.${String(o)}`;if(eo[c])return eo[c].bind(r);const u=$s(i)[o];return typeof u!="function"?r[o]:(eo[c]=u,u.bind(r))}function fi(i){return wn("Node",i,"childNodes")}function Nt(i){return wn("Node",i,"parentNode")}function bi(i){return wn("Node",i,"parentElement")}function hc(i){return wn("Node",i,"textContent")}function mc(i,r){return pc("Node",i,"contains")(r)}function to(i){return pc("Node",i,"getRootNode")()}function Gn(i){return i&&"host"in i?wn("ShadowRoot",i,"host"):null}function hr(i){return i&&"shadowRoot"in i?wn("Element",i,"shadowRoot"):null}function qe(i,r,o=document){const c={capture:!0};return o.addEventListener(i,r,c),()=>o.removeEventListener(i,r,c)}const Ln=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let fc={map:{},getId:()=>(console.error(Ln),-1),getNode:()=>(console.error(Ln),null),removeNodeFromMap(){console.error(Ln)},has:()=>(console.error(Ln),!1),reset(){console.error(Ln)}};function mr(i,r,o={}){let c=null,u=0;return function(...d){const h=Date.now();u||o.leading!==!1||(u=h);const b=r-(h-u),f=this;b<=0||b>r?(c&&(clearTimeout(c),c=null),u=h,i.apply(f,d)):c||o.trailing===!1||(c=setTimeout(()=>{u=o.leading===!1?0:Date.now(),c=null,i.apply(f,d)},b))}}function yi(i,r,o,c,u=window){const d=u.Object.getOwnPropertyDescriptor(i,r);return u.Object.defineProperty(i,r,c?o:{set(h){setTimeout(()=>{o.set.call(this,h)},0),d&&d.set&&d.set.call(this,h)}}),()=>yi(i,r,d||{},!0)}function Vn(i,r,o){try{if(!(r in i))return()=>{};const c=i[r],u=o(c);return typeof u=="function"&&(u.prototype=u.prototype||{},Object.defineProperties(u,{__rrweb_original__:{enumerable:!1,value:c}})),i[r]=u,()=>{i[r]=c}}catch(c){return()=>{}}}typeof window!="undefined"&&window.Proxy&&window.Reflect&&(fc=new Proxy(fc,{get:(i,r,o)=>(r==="map"&&console.error(Ln),Reflect.get(i,r,o))}));let gi=Date.now;function bc(i){var r,o,c,u;const d=i.document;return{left:d.scrollingElement?d.scrollingElement.scrollLeft:i.pageXOffset!==void 0?i.pageXOffset:d.documentElement.scrollLeft||(d==null?void 0:d.body)&&((r=bi(d.body))==null?void 0:r.scrollLeft)||((o=d==null?void 0:d.body)==null?void 0:o.scrollLeft)||0,top:d.scrollingElement?d.scrollingElement.scrollTop:i.pageYOffset!==void 0?i.pageYOffset:(d==null?void 0:d.documentElement.scrollTop)||(d==null?void 0:d.body)&&((c=bi(d.body))==null?void 0:c.scrollTop)||((u=d==null?void 0:d.body)==null?void 0:u.scrollTop)||0}}function yc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function gc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Sc(i){return i?i.nodeType===i.ELEMENT_NODE?i:bi(i):null}/[1-9][0-9]{12}/.test(Date.now().toString())||(gi=()=>new Date().getTime());const uR=i=>{try{if(i instanceof HTMLElement)return i.tagName==="CANVAS"}catch(r){return!1}return!1};function je(i,r,o,c){if(!i)return!1;const u=Sc(i);if(!u)return!1;try{if(typeof r=="string"){if(u.classList.contains(r)||c&&u.closest("."+r)!==null)return!0}else if(hi(u,r,c))return!0}catch(d){}return!!(o&&(u.matches(o)||c&&u.closest(o)!==null))}function no(i,r,o){return!(i.tagName!=="TITLE"||!o.headTitleMutations)||r.getId(i)===dr}function Tc(i,r){if(cr(i))return!1;const o=r.getId(i);if(!r.has(o))return!0;const c=Nt(i);return(!c||c.nodeType!==i.DOCUMENT_NODE)&&(!c||Tc(c,r))}function ro(i){return!!i.changedTouches}function vc(i,r){return!!(i.nodeName==="IFRAME"&&r.getMeta(i))}function _c(i,r){return!!(i.nodeName==="LINK"&&i.nodeType===i.ELEMENT_NODE&&i.getAttribute&&i.getAttribute("rel")==="stylesheet"&&r.getMeta(i))}function io(i){return!!i&&(i instanceof Qs&&"shadowRoot"in i?!!i.shadowRoot:!!hr(i))}class dR{constructor(){M(this,"id",1),M(this,"styleIDMap",new WeakMap),M(this,"idStyleMap",new Map)}getId(r){var o;return(o=this.styleIDMap.get(r))!=null?o:-1}has(r){return this.styleIDMap.has(r)}add(r,o){if(this.has(r))return this.getId(r);let c;return c=o===void 0?this.id++:o,this.styleIDMap.set(r,c),this.idStyleMap.set(c,r),c}getStyle(r){return this.idStyleMap.get(r)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Ec(i){var r;let o=null;return"getRootNode"in i&&((r=to(i))==null?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&Gn(to(i))&&(o=Gn(to(i))),o}function pR(i){const r=i.ownerDocument;if(!r)return!1;const o=function(c){let u,d=c;for(;u=Ec(d);)d=u;return d}(i);return mc(r,o)}function Ic(i){const r=i.ownerDocument;return!!r&&(mc(r,i)||pR(i))}var ve=(i=>(i[i.DomContentLoaded=0]="DomContentLoaded",i[i.Load=1]="Load",i[i.FullSnapshot=2]="FullSnapshot",i[i.IncrementalSnapshot=3]="IncrementalSnapshot",i[i.Meta=4]="Meta",i[i.Custom=5]="Custom",i[i.Plugin=6]="Plugin",i))(ve||{}),ye=(i=>(i[i.Mutation=0]="Mutation",i[i.MouseMove=1]="MouseMove",i[i.MouseInteraction=2]="MouseInteraction",i[i.Scroll=3]="Scroll",i[i.ViewportResize=4]="ViewportResize",i[i.Input=5]="Input",i[i.TouchMove=6]="TouchMove",i[i.MediaInteraction=7]="MediaInteraction",i[i.StyleSheetRule=8]="StyleSheetRule",i[i.CanvasMutation=9]="CanvasMutation",i[i.Font=10]="Font",i[i.Log=11]="Log",i[i.Drag=12]="Drag",i[i.StyleDeclaration=13]="StyleDeclaration",i[i.Selection=14]="Selection",i[i.AdoptedStyleSheet=15]="AdoptedStyleSheet",i[i.CustomElement=16]="CustomElement",i))(ye||{}),it=(i=>(i[i.MouseUp=0]="MouseUp",i[i.MouseDown=1]="MouseDown",i[i.Click=2]="Click",i[i.ContextMenu=3]="ContextMenu",i[i.DblClick=4]="DblClick",i[i.Focus=5]="Focus",i[i.Blur=6]="Blur",i[i.TouchStart=7]="TouchStart",i[i.TouchMove_Departed=8]="TouchMove_Departed",i[i.TouchEnd=9]="TouchEnd",i[i.TouchCancel=10]="TouchCancel",i))(it||{}),Kt=(i=>(i[i.Mouse=0]="Mouse",i[i.Pen=1]="Pen",i[i.Touch=2]="Touch",i))(Kt||{}),Xn=(i=>(i[i["2D"]=0]="2D",i[i.WebGL=1]="WebGL",i[i.WebGL2=2]="WebGL2",i))(Xn||{}),Wn=(i=>(i[i.Play=0]="Play",i[i.Pause=1]="Pause",i[i.Seeked=2]="Seeked",i[i.VolumeChange=3]="VolumeChange",i[i.RateChange=4]="RateChange",i))(Wn||{});function Rc(i){return"__ln"in i}class hR{constructor(){M(this,"length",0),M(this,"head",null),M(this,"tail",null)}get(r){if(r>=this.length)throw new Error("Position outside of list range");let o=this.head;for(let c=0;c<r;c++)o=(o==null?void 0:o.next)||null;return o}addNode(r){const o={value:r,previous:null,next:null};if(r.__ln=o,r.previousSibling&&Rc(r.previousSibling)){const c=r.previousSibling.__ln.next;o.next=c,o.previous=r.previousSibling.__ln,r.previousSibling.__ln.next=o,c&&(c.previous=o)}else if(r.nextSibling&&Rc(r.nextSibling)&&r.nextSibling.__ln.previous){const c=r.nextSibling.__ln.previous;o.previous=c,o.next=r.nextSibling.__ln,r.nextSibling.__ln.previous=o,c&&(c.next=o)}else this.head&&(this.head.previous=o),o.next=this.head,this.head=o;o.next===null&&(this.tail=o),this.length++}removeNode(r){const o=r.__ln;this.head&&(o.previous?(o.previous.next=o.next,o.next?o.next.previous=o.previous:this.tail=o.previous):(this.head=o.next,this.head?this.head.previous=null:this.tail=null),r.__ln&&delete r.__ln,this.length--)}}const Nc=(i,r)=>`${i}@${r}`;class mR{constructor(){M(this,"frozen",!1),M(this,"locked",!1),M(this,"texts",[]),M(this,"attributes",[]),M(this,"attributeMap",new WeakMap),M(this,"removes",[]),M(this,"mapRemoves",[]),M(this,"movedMap",{}),M(this,"addedSet",new Set),M(this,"movedSet",new Set),M(this,"droppedSet",new Set),M(this,"mutationCb"),M(this,"blockClass"),M(this,"blockSelector"),M(this,"maskTextClass"),M(this,"maskTextSelector"),M(this,"inlineStylesheet"),M(this,"maskInputOptions"),M(this,"maskTextFn"),M(this,"maskInputFn"),M(this,"keepIframeSrcFn"),M(this,"recordCanvas"),M(this,"inlineImages"),M(this,"privacySetting"),M(this,"slimDOMOptions"),M(this,"dataURLOptions"),M(this,"doc"),M(this,"mirror"),M(this,"iframeManager"),M(this,"stylesheetManager"),M(this,"shadowDomManager"),M(this,"canvasManager"),M(this,"processedNodeManager"),M(this,"unattachedDoc"),M(this,"processMutations",r=>{r.forEach(this.processMutation),this.emit()}),M(this,"emit",()=>{if(this.frozen||this.locked)return;const r=[],o=new Set,c=new hR,u=f=>{let S=f,v=dr;for(;v===dr;)S=S&&S.nextSibling,v=S&&this.mirror.getId(S);return v},d=f=>{const S=Nt(f);if(!S||!Ic(f)||S.tagName==="TEXTAREA")return;const v=cr(S)?this.mirror.getId(Ec(f)):this.mirror.getId(S),I=u(f);if(v===-1||I===-1)return c.addNode(f);const N=On(f,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,privacySetting:this.privacySetting,onSerialize:C=>{vc(C,this.mirror)&&this.iframeManager.addIframe(C),_c(C,this.mirror)&&this.stylesheetManager.trackLinkElement(C),io(f)&&this.shadowDomManager.addShadowRoot(hr(f),this.doc)},onIframeLoad:(C,P)=>{this.iframeManager.attachIframe(C,P),this.shadowDomManager.observeAttachShadow(C)},onStylesheetLoad:(C,P)=>{this.stylesheetManager.attachLinkElement(C,P)}});N&&(r.push({parentId:v,nextId:I,node:N}),o.add(N.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const f of this.movedSet)Zc(this.removes,f,this.mirror)&&!this.movedSet.has(Nt(f))||d(f);for(const f of this.addedSet)Cc(this.droppedSet,f)||Zc(this.removes,f,this.mirror)?Cc(this.movedSet,f)?d(f):this.droppedSet.add(f):d(f);let h=null;for(;c.length;){let f=null;if(h){const S=this.mirror.getId(Nt(h.value)),v=u(h.value);S!==-1&&v!==-1&&(f=h)}if(!f){let S=c.tail;for(;S;){const v=S;if(S=S.previous,v){const I=this.mirror.getId(Nt(v.value));if(u(v.value)===-1)continue;if(I!==-1){f=v;break}{const N=Nt(v.value);if(N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const C=Gn(N);if(this.mirror.getId(C)!==-1){f=v;break}}}}}}if(!f){for(;c.head;)c.removeNode(c.head.value);break}h=f.previous,c.removeNode(f.value),d(f.value)}const b={texts:this.texts.map(f=>{var S,v;const I=f.node,N=Nt(I);N&&N.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(N);let C=f.value;const P=this.privacySetting==="strict",L=this.privacySetting==="default"&&tc(C),x=(v=(S=f.node)==null?void 0:S.parentElement)==null?void 0:v.getAttribute("data-hl-record");return(P||L)&&!x&&C&&(C=zs(C)),{id:this.mirror.getId(I),value:C}}).filter(f=>!o.has(f.id)).filter(f=>this.mirror.has(f.id)),attributes:this.attributes.map(f=>{const{attributes:S}=f;if(typeof S.style=="string"){const v=JSON.stringify(f.styleDiff),I=JSON.stringify(f._unchangedStyles);v.length<S.style.length&&(v+I).split("var(").length===S.style.split("var(").length&&(S.style=f.styleDiff)}return{id:this.mirror.getId(f.node),attributes:S}}).filter(f=>!o.has(f.id)).filter(f=>this.mirror.has(f.id)),removes:this.removes,adds:r};(b.texts.length||b.attributes.length||b.removes.length||b.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(b))}),M(this,"genTextAreaValueMutation",r=>{let o=this.attributeMap.get(r);o||(o={node:r,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(r,o)),o.attributes.value=Array.from(fi(r),c=>hc(c)||"").join("")}),M(this,"processMutation",r=>{if(!no(r.target,this.mirror,this.slimDOMOptions))switch(r.type){case"characterData":{const o=hc(r.target);je(r.target,this.blockClass,this.blockSelector,!1)||o===r.oldValue||this.texts.push({value:cc(r.target,this.maskTextClass,this.maskTextSelector,!0)&&o?this.maskTextFn?this.maskTextFn(o,Sc(r.target)):o.replace(/[\S]/g,"*"):o,node:r.target});break}case"attributes":{const o=r.target;let c=r.attributeName,u=r.target.getAttribute(c);if(c==="value"){const h=Bs(o);u=Ks({element:o,maskInputOptions:this.maskInputOptions,tagName:o.tagName,type:h,value:u,overwriteRecord:o.getAttribute("data-hl-record"),maskInputFn:this.maskInputFn})}if(je(r.target,this.blockClass,this.blockSelector,!1)||u===r.oldValue)return;let d=this.attributeMap.get(r.target);if(o.tagName==="IFRAME"&&c==="src"&&!this.keepIframeSrcFn(u)){if(o.contentDocument)return;c="rr_src"}if(d||(d={node:r.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(d),this.attributeMap.set(r.target,d)),c==="type"&&o.tagName==="INPUT"&&(r.oldValue||"").toLowerCase()==="password"&&o.setAttribute("data-rr-is-password","true"),!ac(o.tagName,c)){if(r.target.tagName==="INPUT"){const h=r.target;if(h.type==="password"){d.attributes.value="*".repeat(h.value.length);break}}if(d.attributes[c]=oc(this.doc,Zn(o.tagName),Zn(c),u),c==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(b){this.unattachedDoc=this.doc}const h=this.unattachedDoc.createElement("span");r.oldValue&&h.setAttribute("style",r.oldValue);for(const b of Array.from(o.style)){const f=o.style.getPropertyValue(b),S=o.style.getPropertyPriority(b);f!==h.style.getPropertyValue(b)||S!==h.style.getPropertyPriority(b)?d.styleDiff[b]=S===""?f:[f,S]:d._unchangedStyles[b]=[f,S]}for(const b of Array.from(h.style))o.style.getPropertyValue(b)===""&&(d.styleDiff[b]=!1)}}break}case"childList":if(je(r.target,this.blockClass,this.blockSelector,!0))return;if(r.target.tagName==="TEXTAREA")return void this.genTextAreaValueMutation(r.target);r.addedNodes.forEach(o=>this.genAdds(o,r.target)),r.removedNodes.forEach(o=>{const c=this.mirror.getId(o),u=cr(r.target)?this.mirror.getId(Gn(r.target)):this.mirror.getId(r.target);je(r.target,this.blockClass,this.blockSelector,!1)||no(o,this.mirror,this.slimDOMOptions)||!function(d,h){return h.getId(d)!==-1}(o,this.mirror)||(this.addedSet.has(o)?(so(this.addedSet,o),this.droppedSet.add(o)):this.addedSet.has(r.target)&&c===-1||Tc(r.target,this.mirror)||(this.movedSet.has(o)&&this.movedMap[Nc(c,u)]?so(this.movedSet,o):this.removes.push({parentId:u,id:c,isShadow:!(!cr(r.target)||!ur(r.target))||void 0})),this.mapRemoves.push(o))})}}),M(this,"genAdds",(r,o)=>{if(!this.processedNodeManager.inOtherBuffer(r,this)&&!this.addedSet.has(r)&&!this.movedSet.has(r)){if(this.mirror.hasNode(r)){if(no(r,this.mirror,this.slimDOMOptions))return;this.movedSet.add(r);let c=null;o&&this.mirror.hasNode(o)&&(c=this.mirror.getId(o)),c&&c!==-1&&(this.movedMap[Nc(this.mirror.getId(r),c)]=!0)}else this.addedSet.add(r),this.droppedSet.delete(r);je(r,this.blockClass,this.blockSelector,!1)||(fi(r).forEach(c=>this.genAdds(c)),io(r)&&fi(hr(r)).forEach(c=>{this.processedNodeManager.add(c,this),this.genAdds(c,r)}))}})}init(r){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","privacySetting","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(o=>{this[o]=r[o]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function so(i,r){i.delete(r),fi(r).forEach(o=>so(i,o))}function Zc(i,r,o){return i.length!==0&&function(c,u,d){let h=Nt(u);for(;h;){const b=d.getId(h);if(c.some(f=>f.id===b))return!0;h=Nt(h)}return!1}(i,r,o)}function Cc(i,r){return i.size!==0&&Oc(i,r)}function Oc(i,r){const o=Nt(r);return!!o&&(!!i.has(o)||Oc(i,o))}let fr;const Te=i=>fr?(...r)=>{try{return i(...r)}catch(o){if(fr&&fr(o)===!0)return;throw o}}:i,on=[];function br(i){try{if("composedPath"in i){const r=i.composedPath();if(r.length)return r[0]}else if("path"in i&&i.path.length)return i.path[0]}catch(r){}return i&&i.target}function wc(i,r){const o=new mR;on.push(o),o.init(i);const c=new($s("MutationObserver")).constructor(Te(o.processMutations.bind(o)));return c.observe(r,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),c}function fR({mouseInteractionCb:i,doc:r,mirror:o,blockClass:c,blockSelector:u,sampling:d}){if(d.mouseInteraction===!1)return()=>{};const h=d.mouseInteraction===!0||d.mouseInteraction===void 0?{}:d.mouseInteraction,b=[];let f=null;return Object.keys(it).filter(S=>Number.isNaN(Number(S))&&!S.endsWith("_Departed")&&h[S]!==!1).forEach(S=>{let v=Zn(S);const I=(N=>C=>{const P=br(C);if(je(P,c,u,!0)||uR(P))return;let L=null,x=N;if("pointerType"in C){switch(C.pointerType){case"mouse":L=Kt.Mouse;break;case"touch":L=Kt.Touch;break;case"pen":L=Kt.Pen}L===Kt.Touch&&(it[N]===it.MouseDown?x="TouchStart":it[N]===it.MouseUp&&(x="TouchEnd"))}else ro(C)&&(L=Kt.Touch);L!==null?(f=L,(x.startsWith("Touch")&&L===Kt.Touch||x.startsWith("Mouse")&&L===Kt.Mouse)&&(L=null)):it[N]===it.Click&&(L=f,f=null);const w=ro(C)?C.changedTouches[0]:C;if(!w)return;const X=o.getId(P),{clientX:O,clientY:W}=w;Te(i)(g({type:it[x],id:X,x:O,y:W},L!==null&&{pointerType:L}))})(S);if(window.PointerEvent)switch(it[S]){case it.MouseDown:case it.MouseUp:v=v.replace("mouse","pointer");break;case it.TouchStart:case it.TouchEnd:return}b.push(qe(v,I,r))}),Te(()=>{b.forEach(S=>S())})}function Gc({scrollCb:i,doc:r,mirror:o,blockClass:c,blockSelector:u,sampling:d}){return qe("scroll",Te(mr(Te(h=>{const b=br(h);if(!b||je(b,c,u,!0))return;const f=o.getId(b);if(b===r&&r.defaultView){const S=bc(r.defaultView);i({id:f,x:S.left,y:S.top})}else i({id:f,x:b.scrollLeft,y:b.scrollTop})}),d.scroll||100)),r)}const bR=["INPUT","TEXTAREA","SELECT"],Lc=new WeakMap;function Si(i){return function(r,o){if(Ti("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Ti("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Ti("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Ti("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const c=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(c)}else if(r.parentStyleSheet){const c=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(c)}return o}(i,[])}function Bt(i,r,o){let c,u;return i?(i.ownerNode?c=r.getId(i.ownerNode):u=o.getId(i),{styleId:u,id:c}):{}}function Vc({mirror:i,stylesheetManager:r},o){var c,u,d;let h=null;h=o.nodeName==="#document"?i.getId(o):i.getId(Gn(o));const b=o.nodeName==="#document"?(c=o.defaultView)==null?void 0:c.Document:(d=(u=o.ownerDocument)==null?void 0:u.defaultView)==null?void 0:d.ShadowRoot,f=b!=null&&b.prototype?Object.getOwnPropertyDescriptor(b==null?void 0:b.prototype,"adoptedStyleSheets"):void 0;return h!==null&&h!==-1&&b&&f?(Object.defineProperty(o,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get(){var S;return(S=f.get)==null?void 0:S.call(this)},set(S){var v;const I=(v=f.set)==null?void 0:v.call(this,S);if(h!==null&&h!==-1)try{r.adoptStyleSheets(S,h)}catch(N){}return I}}),Te(()=>{Object.defineProperty(o,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get:f.get,set:f.set})})):()=>{}}function yR(i,r={}){const o=i.doc.defaultView;if(!o)return()=>{};let c;(function(w,X){const{mutationCb:O,mousemoveCb:W,mouseInteractionCb:Y,scrollCb:j,viewportResizeCb:te,inputCb:ne,mediaInteractionCb:Q,styleSheetRuleCb:z,styleDeclarationCb:ee,canvasMutationCb:J,fontCb:E,selectionCb:A,customElementCb:H}=w;w.mutationCb=(...F)=>{X.mutation&&X.mutation(...F),O(...F)},w.mousemoveCb=(...F)=>{X.mousemove&&X.mousemove(...F),W(...F)},w.mouseInteractionCb=(...F)=>{X.mouseInteraction&&X.mouseInteraction(...F),Y(...F)},w.scrollCb=(...F)=>{X.scroll&&X.scroll(...F),j(...F)},w.viewportResizeCb=(...F)=>{X.viewportResize&&X.viewportResize(...F),te(...F)},w.inputCb=(...F)=>{X.input&&X.input(...F),ne(...F)},w.mediaInteractionCb=(...F)=>{X.mediaInteaction&&X.mediaInteaction(...F),Q(...F)},w.styleSheetRuleCb=(...F)=>{X.styleSheetRule&&X.styleSheetRule(...F),z(...F)},w.styleDeclarationCb=(...F)=>{X.styleDeclaration&&X.styleDeclaration(...F),ee(...F)},w.canvasMutationCb=(...F)=>{X.canvasMutation&&X.canvasMutation(...F),J(...F)},w.fontCb=(...F)=>{X.font&&X.font(...F),E(...F)},w.selectionCb=(...F)=>{X.selection&&X.selection(...F),A(...F)},w.customElementCb=(...F)=>{X.customElement&&X.customElement(...F),H(...F)}})(i,r),i.recordDOM&&(c=wc(i,i.doc));const u=function({mousemoveCb:w,sampling:X,doc:O,mirror:W}){if(X.mousemove===!1)return()=>{};const Y=typeof X.mousemove=="number"?X.mousemove:50,j=typeof X.mousemoveCallback=="number"?X.mousemoveCallback:500;let te,ne=[];const Q=mr(Te(J=>{const E=Date.now()-te;w(ne.map(A=>(A.timeOffset-=E,A)),J),ne=[],te=null}),j),z=Te(mr(Te(J=>{const E=br(J),{clientX:A,clientY:H}=ro(J)?J.changedTouches[0]:J;te||(te=gi()),ne.push({x:A,y:H,id:W.getId(E),timeOffset:gi()-te}),Q(typeof DragEvent!="undefined"&&J instanceof DragEvent?ye.Drag:J instanceof MouseEvent?ye.MouseMove:ye.TouchMove)}),Y,{trailing:!1})),ee=[qe("mousemove",z,O),qe("touchmove",z,O),qe("drag",z,O)];return Te(()=>{ee.forEach(J=>J())})}(i),d=fR(i),h=Gc(i),b=function({viewportResizeCb:w},{win:X}){let O=-1,W=-1;return qe("resize",Te(mr(Te(()=>{const Y=yc(),j=gc();O===Y&&W===j||(w({width:Number(j),height:Number(Y)}),O=Y,W=j)}),200)),X)}(i,{win:o}),f=function({inputCb:w,doc:X,mirror:O,blockClass:W,blockSelector:Y,ignoreClass:j,ignoreSelector:te,maskInputOptions:ne,maskInputFn:Q,sampling:z,userTriggeredOnInput:ee}){function J(k){let B=br(k);const _e=k.isTrusted,ge=B&&B.tagName;if(B&&ge==="OPTION"&&(B=bi(B)),!B||!ge||bR.indexOf(ge)<0||je(B,W,Y,!0)||B.classList.contains(j)||te&&B.matches(te))return;let pe=B.value,ae=!1;const nt=Bs(B)||"",Qe=B.getAttribute("data-hl-record");nt==="radio"||nt==="checkbox"?ae=B.checked:nc({maskInputOptions:ne,type:nt,tagName:ge,overwriteRecord:Qe})&&(pe=Ks({element:B,maskInputOptions:ne,tagName:ge,type:nt,value:pe,overwriteRecord:Qe,maskInputFn:Q})),E(B,ee?{text:pe,isChecked:ae,userTriggered:_e}:{text:pe,isChecked:ae});const $=B.name;nt==="radio"&&$&&ae&&X.querySelectorAll(`input[type="radio"][name="${$}"]`).forEach(ue=>{if(ue!==B){const Fe=ue.value;E(ue,ee?{text:Fe,isChecked:!ae,userTriggered:!1}:{text:Fe,isChecked:!ae})}})}function E(k,B){const _e=Lc.get(k);if(!_e||_e.text!==B.text||_e.isChecked!==B.isChecked){Lc.set(k,B);const ge=O.getId(k);Te(w)(_(g({},B),{id:ge}))}}const A=(z.input==="last"?["change"]:["input","change"]).map(k=>qe(k,Te(J),X)),H=X.defaultView;if(!H)return()=>{A.forEach(k=>k())};const F=H.Object.getOwnPropertyDescriptor(H.HTMLInputElement.prototype,"value"),se=[[H.HTMLInputElement.prototype,"value"],[H.HTMLInputElement.prototype,"checked"],[H.HTMLSelectElement.prototype,"value"],[H.HTMLTextAreaElement.prototype,"value"],[H.HTMLSelectElement.prototype,"selectedIndex"],[H.HTMLOptionElement.prototype,"selected"]];return F&&F.set&&A.push(...se.map(k=>yi(k[0],k[1],{set(){Te(J)({target:this,isTrusted:!1})}},!1,H))),Te(()=>{A.forEach(k=>k())})}(i),S=function({mediaInteractionCb:w,blockClass:X,blockSelector:O,mirror:W,sampling:Y,doc:j}){const te=Te(Q=>mr(Te(z=>{const ee=br(z);if(!ee||je(ee,X,O,!0))return;const{currentTime:J,volume:E,muted:A,playbackRate:H,loop:F}=ee;w({type:Q,id:W.getId(ee),currentTime:J,volume:E,muted:A,playbackRate:H,loop:F})}),Y.media||500)),ne=[qe("play",te(Wn.Play),j),qe("pause",te(Wn.Pause),j),qe("seeked",te(Wn.Seeked),j),qe("volumechange",te(Wn.VolumeChange),j),qe("ratechange",te(Wn.RateChange),j)];return Te(()=>{ne.forEach(Q=>Q())})}(i);let v=()=>{},I=()=>{},N=()=>{},C=()=>{};i.recordDOM&&(v=function({styleSheetRuleCb:w,mirror:X,stylesheetManager:O},{win:W}){if(!W.CSSStyleSheet||!W.CSSStyleSheet.prototype)return()=>{};const Y=W.CSSStyleSheet.prototype.insertRule;W.CSSStyleSheet.prototype.insertRule=new Proxy(Y,{apply:Te((ee,J,E)=>{const[A,H]=E,{id:F,styleId:se}=Bt(J,X,O.styleMirror);return(F&&F!==-1||se&&se!==-1)&&w({id:F,styleId:se,adds:[{rule:A,index:H}]}),ee.apply(J,E)})});const j=W.CSSStyleSheet.prototype.deleteRule;let te,ne;W.CSSStyleSheet.prototype.deleteRule=new Proxy(j,{apply:Te((ee,J,E)=>{const[A]=E,{id:H,styleId:F}=Bt(J,X,O.styleMirror);return(H&&H!==-1||F&&F!==-1)&&w({id:H,styleId:F,removes:[{index:A}]}),ee.apply(J,E)})}),W.CSSStyleSheet.prototype.replace&&(te=W.CSSStyleSheet.prototype.replace,W.CSSStyleSheet.prototype.replace=new Proxy(te,{apply:Te((ee,J,E)=>{const[A]=E,{id:H,styleId:F}=Bt(J,X,O.styleMirror);return(H&&H!==-1||F&&F!==-1)&&w({id:H,styleId:F,replace:A}),ee.apply(J,E)})})),W.CSSStyleSheet.prototype.replaceSync&&(ne=W.CSSStyleSheet.prototype.replaceSync,W.CSSStyleSheet.prototype.replaceSync=new Proxy(ne,{apply:Te((ee,J,E)=>{const[A]=E,{id:H,styleId:F}=Bt(J,X,O.styleMirror);return(H&&H!==-1||F&&F!==-1)&&w({id:H,styleId:F,replaceSync:A}),ee.apply(J,E)})}));const Q={};vi("CSSGroupingRule")?Q.CSSGroupingRule=W.CSSGroupingRule:(vi("CSSMediaRule")&&(Q.CSSMediaRule=W.CSSMediaRule),vi("CSSConditionRule")&&(Q.CSSConditionRule=W.CSSConditionRule),vi("CSSSupportsRule")&&(Q.CSSSupportsRule=W.CSSSupportsRule));const z={};return Object.entries(Q).forEach(([ee,J])=>{z[ee]={insertRule:J.prototype.insertRule,deleteRule:J.prototype.deleteRule},J.prototype.insertRule=new Proxy(z[ee].insertRule,{apply:Te((E,A,H)=>{const[F,se]=H,{id:k,styleId:B}=Bt(A.parentStyleSheet,X,O.styleMirror);return(k&&k!==-1||B&&B!==-1)&&w({id:k,styleId:B,adds:[{rule:F,index:[...Si(A),se||0]}]}),E.apply(A,H)})}),J.prototype.deleteRule=new Proxy(z[ee].deleteRule,{apply:Te((E,A,H)=>{const[F]=H,{id:se,styleId:k}=Bt(A.parentStyleSheet,X,O.styleMirror);return(se&&se!==-1||k&&k!==-1)&&w({id:se,styleId:k,removes:[{index:[...Si(A),F]}]}),E.apply(A,H)})})}),Te(()=>{W.CSSStyleSheet.prototype.insertRule=Y,W.CSSStyleSheet.prototype.deleteRule=j,te&&(W.CSSStyleSheet.prototype.replace=te),ne&&(W.CSSStyleSheet.prototype.replaceSync=ne),Object.entries(Q).forEach(([ee,J])=>{J.prototype.insertRule=z[ee].insertRule,J.prototype.deleteRule=z[ee].deleteRule})})}(i,{win:o}),I=Vc(i,i.doc),N=function({styleDeclarationCb:w,mirror:X,ignoreCSSAttributes:O,stylesheetManager:W},{win:Y}){const j=Y.CSSStyleDeclaration.prototype.setProperty;Y.CSSStyleDeclaration.prototype.setProperty=new Proxy(j,{apply:Te((ne,Q,z)=>{var ee;const[J,E,A]=z;if(O.has(J))return j.apply(Q,[J,E,A]);const{id:H,styleId:F}=Bt((ee=Q.parentRule)==null?void 0:ee.parentStyleSheet,X,W.styleMirror);return(H&&H!==-1||F&&F!==-1)&&w({id:H,styleId:F,set:{property:J,value:E,priority:A},index:Si(Q.parentRule)}),ne.apply(Q,z)})});const te=Y.CSSStyleDeclaration.prototype.removeProperty;return Y.CSSStyleDeclaration.prototype.removeProperty=new Proxy(te,{apply:Te((ne,Q,z)=>{var ee;const[J]=z;if(O.has(J))return te.apply(Q,[J]);const{id:E,styleId:A}=Bt((ee=Q.parentRule)==null?void 0:ee.parentStyleSheet,X,W.styleMirror);return(E&&E!==-1||A&&A!==-1)&&w({id:E,styleId:A,remove:{property:J},index:Si(Q.parentRule)}),ne.apply(Q,z)})}),Te(()=>{Y.CSSStyleDeclaration.prototype.setProperty=j,Y.CSSStyleDeclaration.prototype.removeProperty=te})}(i,{win:o}),i.collectFonts&&(C=function({fontCb:w,doc:X}){const O=X.defaultView;if(!O)return()=>{};const W=[],Y=new WeakMap,j=O.FontFace;O.FontFace=function(ne,Q,z){const ee=new j(ne,Q,z);return Y.set(ee,{family:ne,buffer:typeof Q!="string",descriptors:z,fontSource:typeof Q=="string"?Q:JSON.stringify(Array.from(new Uint8Array(Q)))}),ee};const te=Vn(X.fonts,"add",function(ne){return function(Q){return setTimeout(Te(()=>{const z=Y.get(Q);z&&(w(z),Y.delete(Q))}),0),ne.apply(this,[Q])}});return W.push(()=>{O.FontFace=j}),W.push(te),Te(()=>{W.forEach(ne=>ne())})}(i)));const P=function(w){const{doc:X,mirror:O,blockClass:W,blockSelector:Y,selectionCb:j}=w;let te=!0;const ne=Te(()=>{const Q=X.getSelection();if(!Q||te&&(Q!=null&&Q.isCollapsed))return;te=Q.isCollapsed||!1;const z=[],ee=Q.rangeCount||0;for(let J=0;J<ee;J++){const E=Q.getRangeAt(J),{startContainer:A,startOffset:H,endContainer:F,endOffset:se}=E;je(A,W,Y,!0)||je(F,W,Y,!0)||z.push({start:O.getId(A),startOffset:H,end:O.getId(F),endOffset:se})}j({ranges:z})});return ne(),qe("selectionchange",ne)}(i),L=function({doc:w,customElementCb:X}){const O=w.defaultView;return O&&O.customElements?Vn(O.customElements,"define",function(W){return function(Y,j,te){try{X({define:{name:Y}})}catch(ne){console.warn(`Custom element callback failed for ${Y}`)}return W.apply(this,[Y,j,te])}}):()=>{}}(i),x=[];for(const w of i.plugins)x.push(w.observer(w.callback,o,w.options));return Te(()=>{on.forEach(w=>w.reset()),c==null||c.disconnect(),u(),d(),h(),b(),f(),S(),v(),I(),N(),C(),P(),L(),x.forEach(w=>w())})}function Ti(i){return window[i]!==void 0}function vi(i){return!!(window[i]!==void 0&&window[i].prototype&&"insertRule"in window[i].prototype&&"deleteRule"in window[i].prototype)}class Xc{constructor(r){M(this,"iframeIdToRemoteIdMap",new WeakMap),M(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=r}getId(r,o,c,u){const d=c||this.getIdToRemoteIdMap(r),h=u||this.getRemoteIdToIdMap(r);let b=d.get(o);return b||(b=this.generateIdFn(),d.set(o,b),h.set(b,o)),b}getIds(r,o){const c=this.getIdToRemoteIdMap(r),u=this.getRemoteIdToIdMap(r);return o.map(d=>this.getId(r,d,c,u))}getRemoteId(r,o,c){const u=c||this.getRemoteIdToIdMap(r);return typeof o!="number"?o:u.get(o)||-1}getRemoteIds(r,o){const c=this.getRemoteIdToIdMap(r);return o.map(u=>this.getRemoteId(r,u,c))}reset(r){if(!r)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(r),this.iframeRemoteIdToIdMap.delete(r)}getIdToRemoteIdMap(r){let o=this.iframeIdToRemoteIdMap.get(r);return o||(o=new Map,this.iframeIdToRemoteIdMap.set(r,o)),o}getRemoteIdToIdMap(r){let o=this.iframeRemoteIdToIdMap.get(r);return o||(o=new Map,this.iframeRemoteIdToIdMap.set(r,o)),o}}class gR{constructor(r){M(this,"iframes",new WeakMap),M(this,"crossOriginIframeMap",new WeakMap),M(this,"crossOriginIframeMirror",new Xc(rc)),M(this,"crossOriginIframeStyleMirror"),M(this,"crossOriginIframeRootIdMap",new WeakMap),M(this,"mirror"),M(this,"mutationCb"),M(this,"wrappedEmit"),M(this,"loadListener"),M(this,"stylesheetManager"),M(this,"recordCrossOriginIframes"),this.mutationCb=r.mutationCb,this.wrappedEmit=r.wrappedEmit,this.stylesheetManager=r.stylesheetManager,this.recordCrossOriginIframes=r.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Xc(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=r.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(r){this.iframes.set(r,!0),r.contentWindow&&this.crossOriginIframeMap.set(r.contentWindow,r)}addLoadListener(r){this.loadListener=r}attachIframe(r,o){var c,u;this.mutationCb({adds:[{parentId:this.mirror.getId(r),nextId:null,node:o}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((c=r.contentWindow)==null||c.addEventListener("message",this.handleMessage.bind(this))),(u=this.loadListener)==null||u.call(this,r),r.contentDocument&&r.contentDocument.adoptedStyleSheets&&r.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.contentDocument.adoptedStyleSheets,this.mirror.getId(r.contentDocument))}handleMessage(r){const o=r;if(o.data.type!=="rrweb"||o.origin!==o.data.origin)return;const c=r.source;if(!c)return;const u=this.crossOriginIframeMap.get(c);if(!u)return;const d=this.transformCrossOriginEvent(u,o.data.event);d&&this.wrappedEmit(d,o.data.isCheckout)}transformCrossOriginEvent(r,o){var c;switch(o.type){case ve.FullSnapshot:{this.crossOriginIframeMirror.reset(r),this.crossOriginIframeStyleMirror.reset(r),this.replaceIdOnNode(o.data.node,r);const u=o.data.node.id;return this.crossOriginIframeRootIdMap.set(r,u),this.patchRootIdOnNode(o.data.node,u),{timestamp:o.timestamp,type:ve.IncrementalSnapshot,data:{source:ye.Mutation,adds:[{parentId:this.mirror.getId(r),nextId:null,node:o.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case ve.Meta:case ve.Load:case ve.DomContentLoaded:return!1;case ve.Plugin:return o;case ve.Custom:return this.replaceIds(o.data.payload,r,["id","parentId","previousId","nextId"]),o;case ve.IncrementalSnapshot:switch(o.data.source){case ye.Mutation:return o.data.adds.forEach(u=>{this.replaceIds(u,r,["parentId","nextId","previousId"]),this.replaceIdOnNode(u.node,r);const d=this.crossOriginIframeRootIdMap.get(r);d&&this.patchRootIdOnNode(u.node,d)}),o.data.removes.forEach(u=>{this.replaceIds(u,r,["parentId","id"])}),o.data.attributes.forEach(u=>{this.replaceIds(u,r,["id"])}),o.data.texts.forEach(u=>{this.replaceIds(u,r,["id"])}),o;case ye.Drag:case ye.TouchMove:case ye.MouseMove:return o.data.positions.forEach(u=>{this.replaceIds(u,r,["id"])}),o;case ye.ViewportResize:return!1;case ye.MediaInteraction:case ye.MouseInteraction:case ye.Scroll:case ye.CanvasMutation:case ye.Input:return this.replaceIds(o.data,r,["id"]),o;case ye.StyleSheetRule:case ye.StyleDeclaration:return this.replaceIds(o.data,r,["id"]),this.replaceStyleIds(o.data,r,["styleId"]),o;case ye.Font:return o;case ye.Selection:return o.data.ranges.forEach(u=>{this.replaceIds(u,r,["start","end"])}),o;case ye.AdoptedStyleSheet:return this.replaceIds(o.data,r,["id"]),this.replaceStyleIds(o.data,r,["styleIds"]),(c=o.data.styles)==null||c.forEach(u=>{this.replaceStyleIds(u,r,["styleId"])}),o}}return!1}replace(r,o,c,u){for(const d of u)(Array.isArray(o[d])||typeof o[d]=="number")&&(Array.isArray(o[d])?o[d]=r.getIds(c,o[d]):o[d]=r.getId(c,o[d]));return o}replaceIds(r,o,c){return this.replace(this.crossOriginIframeMirror,r,o,c)}replaceStyleIds(r,o,c){return this.replace(this.crossOriginIframeStyleMirror,r,o,c)}replaceIdOnNode(r,o){this.replaceIds(r,o,["id","rootId"]),"childNodes"in r&&r.childNodes.forEach(c=>{this.replaceIdOnNode(c,o)})}patchRootIdOnNode(r,o){r.type===be.Document||r.rootId||(r.rootId=o),"childNodes"in r&&r.childNodes.forEach(c=>{this.patchRootIdOnNode(c,o)})}}class SR{constructor(r){M(this,"shadowDoms",new WeakSet),M(this,"mutationCb"),M(this,"scrollCb"),M(this,"bypassOptions"),M(this,"mirror"),M(this,"restoreHandlers",[]),this.mutationCb=r.mutationCb,this.scrollCb=r.scrollCb,this.bypassOptions=r.bypassOptions,this.mirror=r.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(r,o){if(!ur(r)||this.shadowDoms.has(r))return;this.shadowDoms.add(r);const c=wc(_(g({},this.bypassOptions),{doc:o,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),r);this.restoreHandlers.push(()=>c.disconnect()),this.restoreHandlers.push(Gc(_(g({},this.bypassOptions),{scrollCb:this.scrollCb,doc:r,mirror:this.mirror}))),setTimeout(()=>{r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(Gn(r))),this.restoreHandlers.push(Vc({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},r))},0)}observeAttachShadow(r){r.contentWindow&&r.contentDocument&&this.patchAttachShadow(r.contentWindow.Element,r.contentDocument)}patchAttachShadow(r,o){const c=this;this.restoreHandlers.push(Vn(r.prototype,"attachShadow",function(u){return function(d){const h=u.call(this,d),b=hr(this);return b&&Ic(this)&&c.addShadowRoot(b,o),h}}))}reset(){this.restoreHandlers.forEach(r=>{try{r()}catch(o){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TR=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),_i=0;_i<64;_i++)TR[yr.charCodeAt(_i)]=_i;const Wc=new Map,kc=(i,r,o)=>{if(!i||!Ac(i,r)&&typeof i!="object")return;const c=function(d,h){let b=Wc.get(d);return b||(b=new Map,Wc.set(d,b)),b.has(h)||b.set(h,[]),b.get(h)}(o,i.constructor.name);let u=c.indexOf(i);return u===-1&&(u=c.length,c.push(i)),u};function Ei(i,r,o){if(i instanceof Array)return i.map(c=>Ei(c,r,o));if(i===null)return i;if(i instanceof Float32Array||i instanceof Float64Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Uint8Array||i instanceof Uint16Array||i instanceof Int16Array||i instanceof Int8Array||i instanceof Uint8ClampedArray)return{rr_type:i.constructor.name,args:[Object.values(i)]};if(i instanceof ArrayBuffer)return{rr_type:i.constructor.name,base64:function(c){var u,d=new Uint8Array(c),h=d.length,b="";for(u=0;u<h;u+=3)b+=yr[d[u]>>2],b+=yr[(3&d[u])<<4|d[u+1]>>4],b+=yr[(15&d[u+1])<<2|d[u+2]>>6],b+=yr[63&d[u+2]];return h%3==2?b=b.substring(0,b.length-1)+"=":h%3==1&&(b=b.substring(0,b.length-2)+"=="),b}(i)};if(i instanceof DataView)return{rr_type:i.constructor.name,args:[Ei(i.buffer,r,o),i.byteOffset,i.byteLength]};if(i instanceof HTMLImageElement){const c=i.constructor.name,{src:u}=i;return{rr_type:c,src:u}}return i instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:i.toDataURL()}:i instanceof ImageData?{rr_type:i.constructor.name,args:[Ei(i.data,r,o),i.width,i.height]}:Ac(i,r)||typeof i=="object"?{rr_type:i.constructor.name,index:kc(i,r,o)}:i}const Pc=(i,r,o)=>i.map(c=>Ei(c,r,o)),Ac=(i,r)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(c=>typeof r[c]=="function").find(c=>i instanceof r[c]);function Mc(i,r,o,c){const u=[];try{const d=Vn(i.HTMLCanvasElement.prototype,"getContext",function(h){return function(b,...f){if(!je(this,r,o,!0)){const S=function(v){return v==="experimental-webgl"?"webgl":v}(b);if("__context"in this||(this.__context=S),c&&["webgl","webgl2"].includes(S))if(f[0]&&typeof f[0]=="object"){const v=f[0];v.preserveDrawingBuffer||(v.preserveDrawingBuffer=!0)}else f.splice(0,1,{preserveDrawingBuffer:!0})}return h.apply(this,[b,...f])}});u.push(d)}catch(d){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{u.forEach(d=>d())}}function xc(i,r,o,c,u,d){const h=[],b=Object.getOwnPropertyNames(i);for(const f of b)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(f))try{if(typeof i[f]!="function")continue;const S=Vn(i,f,function(v){return function(...I){const N=v.apply(this,I);if(kc(N,d,this),"tagName"in this.canvas&&!je(this.canvas,c,u,!0)){const C=Pc(I,d,this),P={type:r,property:f,args:C};o(this.canvas,P)}return N}});h.push(S)}catch(S){const v=yi(i,f,{set(I){o(this.canvas,{type:r,property:f,args:[I],setter:!0})}});h.push(v)}return h}const Uc="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpCiAgICAgICAgcmV0dXJuIHRyYW5zcGFyZW50QmxvYk1hcC5nZXQoaWQpOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIHRyYW5zcGFyZW50QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gIiI7CiAgICB9CiAgfQogIGNvbnN0IHdvcmtlciA9IHNlbGY7CiAgbGV0IGxvZ0RlYnVnID0gZmFsc2U7CiAgY29uc3QgZGVidWcgPSAoLi4uYXJncykgPT4gewogICAgaWYgKGxvZ0RlYnVnKSB7CiAgICAgIGNvbnNvbGUuZGVidWcoLi4uYXJncyk7CiAgICB9CiAgfTsKICB3b3JrZXIub25tZXNzYWdlID0gYXN5bmMgZnVuY3Rpb24oZSkgewogICAgbG9nRGVidWcgPSAhIWUuZGF0YS5sb2dEZWJ1ZzsKICAgIGlmICgiT2Zmc2NyZWVuQ2FudmFzIiBpbiBnbG9iYWxUaGlzKSB7CiAgICAgIGNvbnN0IHsgaWQsIGJpdG1hcCwgd2lkdGgsIGhlaWdodCwgZHgsIGR5LCBkdywgZGgsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgZGVidWcoIltoaWdobGlnaHQtd29ya2VyXSBjYW52YXMgYml0bWFwIGlzIHRyYW5zcGFyZW50IiwgewogICAgICAgICAgaWQsCiAgICAgICAgICBiYXNlNjQKICAgICAgICB9KTsKICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkLCBzdGF0dXM6ICJ0cmFuc3BhcmVudCIgfSk7CiAgICAgIH0KICAgICAgaWYgKGxhc3RCbG9iTWFwLmdldChpZCkgPT09IGJhc2U2NCkgewogICAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBpcyB1bmNoYW5nZWQiLCB7CiAgICAgICAgICBpZCwKICAgICAgICAgIGJhc2U2NAogICAgICAgIH0pOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCwgc3RhdHVzOiAidW5jaGFuZ2VkIiB9KTsKICAgICAgfQogICAgICBjb25zdCBtc2cgPSB7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIGR4LAogICAgICAgIGR5LAogICAgICAgIGR3LAogICAgICAgIGRoCiAgICAgIH07CiAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBwcm9jZXNzZWQiLCBtc2cpOwogICAgICB3b3JrZXIucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgfSBlbHNlIHsKICAgICAgZGVidWcoIltoaWdobGlnaHQtd29ya2VyXSBubyBvZmZzY3JlZW5jYW52YXMgc3VwcG9ydCIsIHsKICAgICAgICBpZDogZS5kYXRhLmlkCiAgICAgIH0pOwogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCwgc3RhdHVzOiAidW5zdXBwb3J0ZWQiIH0pOwogICAgfQogIH07Cn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWltYWdlLWJpdG1hcC1kYXRhLXVybC13b3JrZXItS0tvQ2VrWjEuanMubWFwCg==",Dc=typeof window!="undefined"&&window.Blob&&new Blob([(Fc=Uc,Uint8Array.from(atob(Fc),i=>i.charCodeAt(0)))],{type:"text/javascript;charset=utf-8"});var Fc;function vR(i){let r;try{if(r=Dc&&(window.URL||window.webkitURL).createObjectURL(Dc),!r)throw"";const o=new Worker(r,{name:i==null?void 0:i.name});return o.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(r)}),o}catch(o){return new Worker("data:text/javascript;base64,"+Uc,{name:i==null?void 0:i.name})}finally{r&&(window.URL||window.webkitURL).revokeObjectURL(r)}}class _R{constructor(r){M(this,"pendingCanvasMutations",new Map),M(this,"rafStamps",{latestId:0,invokeId:null}),M(this,"mirror"),M(this,"logger"),M(this,"worker"),M(this,"snapshotInProgressMap",new Map),M(this,"lastSnapshotTime",new Map),M(this,"options"),M(this,"mutationCb"),M(this,"resetObservers"),M(this,"frozen",!1),M(this,"locked",!1),M(this,"processMutation",(v,I)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(v)||this.pendingCanvasMutations.set(v,[]),this.pendingCanvasMutations.get(v).push(I)});const{sampling:o,win:c,blockClass:u,blockSelector:d,recordCanvas:h,recordVideos:b,initialSnapshotDelay:f,dataURLOptions:S}=r;this.mutationCb=r.mutationCb,this.mirror=r.mirror,this.logger=r.logger,this.worker=new vR,this.worker.onmessage=v=>{const{id:I}=v.data;if(this.snapshotInProgressMap.set(I,!1),!("base64"in v.data))return void this.debug(null,"canvas worker received empty message",{data:v.data,status:v.data.status});const{base64:N,type:C,dx:P,dy:L,dw:x,dh:w}=v.data,X={id:I,type:Xn["2D"],commands:[{property:"clearRect",args:[P,L,x,w]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:N}],type:C}]},P,L,x,w]}]};this.debug(null,"canvas worker recording mutation",X),this.mutationCb(X)},this.options=r,h&&o==="all"?(this.debug(null,"initializing canvas mutation observer",{sampling:o}),this.initCanvasMutationObserver(c,u,d)):h&&typeof o=="number"&&(this.debug(null,"initializing canvas fps observer",{sampling:o}),this.initCanvasFPSObserver(b,o,c,u,d,{initialSnapshotDelay:f,dataURLOptions:S},r.resizeFactor,r.maxSnapshotDimension))}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}debug(r,...o){if(!this.logger)return;const c=this.mirror.getId(r);let u="[highlight-canvas-manager]";r&&(u=`[highlight-canvas] [id:${c}]`,r.tagName.toLowerCase()==="canvas"&&(u+=` [ctx:${r.__context}]`)),this.logger.debug(u,r,...o)}snapshot(r){return V(this,null,function*(){var o;const c=this.mirror.getId(r);if(this.snapshotInProgressMap.get(c))return void this.debug(r,"snapshotting already in progress for",c);const u=1e3/(typeof this.options.samplingManual=="number"?this.options.samplingManual:1),d=this.lastSnapshotTime.get(c);if(!(d&&new Date().getTime()-d<u))if(this.debug(r,"starting snapshotting"),r.width!==0&&r.height!==0){this.lastSnapshotTime.set(c,new Date().getTime()),this.snapshotInProgressMap.set(c,!0);try{if(this.options.clearWebGLBuffer!==!1&&["webgl","webgl2"].includes(r.__context)){const v=r.getContext(r.__context);((o=v==null?void 0:v.getContextAttributes())==null?void 0:o.preserveDrawingBuffer)===!1&&(v.clear(v.COLOR_BUFFER_BIT),this.debug(r,"cleared webgl canvas to load it into memory",{attributes:v==null?void 0:v.getContextAttributes()}))}if(r.width===0||r.height===0)return void this.debug(r,"not yet ready",{width:r.width,height:r.height});let h=this.options.resizeFactor||1;if(this.options.maxSnapshotDimension){const v=Math.max(r.width,r.height);h=Math.min(h,this.options.maxSnapshotDimension/v)}const b=r.width*h,f=r.height*h,S=yield createImageBitmap(r,{resizeWidth:b,resizeHeight:f});this.debug(r,"created image bitmap",{width:S.width,height:S.height}),this.worker.postMessage({id:c,bitmap:S,width:b,height:f,dx:0,dy:0,dw:r.width,dh:r.height,dataURLOptions:this.options.dataURLOptions,logDebug:!!this.logger},[S]),this.debug(r,"sent message")}catch(h){this.debug(r,"failed to snapshot",h)}finally{this.snapshotInProgressMap.set(c,!1)}}else this.debug(r,"not yet ready",{width:r.width,height:r.height})})}initCanvasFPSObserver(r,o,c,u,d,h,b,f){const S=Mc(c,u,d,!0),v=1e3/o;let I,N=0;const C=new Map,P=w=>{const X=[];return c.document.querySelectorAll("canvas").forEach(O=>{if(!je(O,u,d,!0)){this.debug(O,"discovered canvas"),X.push(O);const W=this.mirror.getId(O);C.has(W)||C.set(W,w)}}),X},L=w=>{const X=[];return r&&c.document.querySelectorAll("video").forEach(O=>{if((O.src===""||O.src.indexOf("blob:")!==-1)&&!je(O,u,d,!0)){X.push(O);const W=this.mirror.getId(O);C.has(W)||C.set(W,w)}}),X},x=w=>V(this,null,function*(){if(N&&w-N<v)return void(I=requestAnimationFrame(x));N=w;const X=W=>{const Y=this.mirror.getId(W),j=C.get(Y),te=!h.initialSnapshotDelay||w-j>h.initialSnapshotDelay;return this.debug(W,{delay:h.initialSnapshotDelay,delta:w-j,hadLoadingTime:te}),te},O=[];O.push(...P(w).filter(X).map(W=>this.snapshot(W))),O.push(...L(w).filter(X).map(W=>V(this,null,function*(){this.debug(W,"starting video snapshotting");const Y=this.mirror.getId(W);if(this.snapshotInProgressMap.get(Y))this.debug(W,"video snapshotting already in progress for",Y);else{this.snapshotInProgressMap.set(Y,!0);try{const{width:j,height:te}=W.getBoundingClientRect(),{actualWidth:ne,actualHeight:Q}={actualWidth:W.videoWidth,actualHeight:W.videoHeight},z=Math.max(ne,Q);if(W.width===0||W.height===0||ne===0||Q===0||j===0||te===0)return void this.debug(W,"not yet ready",{width:W.width,height:W.height});let ee=b||1;f&&(ee=Math.min(ee,f/z));const J=ne*ee,E=Q*ee,A=yield createImageBitmap(W,{resizeWidth:J,resizeHeight:E}),H=Math.max(j,te)/z,F=ne*H,se=Q*H,k=(j-F)/2,B=(te-se)/2;this.debug(W,"created image bitmap",{actualWidth:ne,actualHeight:Q,boxWidth:j,boxHeight:te,outputWidth:F,outputHeight:se,resizeWidth:J,resizeHeight:E,scale:ee,outputScale:H,offsetX:k,offsetY:B}),this.worker.postMessage({id:Y,bitmap:A,width:J,height:E,dx:k,dy:B,dw:F,dh:se,dataURLOptions:h.dataURLOptions,logDebug:!!this.logger},[A]),this.debug(W,"send message")}catch(j){this.debug(W,"failed to snapshot",j)}finally{this.snapshotInProgressMap.set(Y,!1)}}}))),yield Promise.all(O).catch(console.error),I=requestAnimationFrame(x)});I=requestAnimationFrame(x),this.resetObservers=()=>{S(),I&&cancelAnimationFrame(I)}}initCanvasMutationObserver(r,o,c){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const u=Mc(r,o,c,!1),d=function(b,f,S,v){const I=[],N=Object.getOwnPropertyNames(f.CanvasRenderingContext2D.prototype);for(const C of N)try{if(typeof f.CanvasRenderingContext2D.prototype[C]!="function")continue;const P=Vn(f.CanvasRenderingContext2D.prototype,C,function(L){return function(...x){return je(this.canvas,S,v,!0)||setTimeout(()=>{const w=Pc(x,f,this);b(this.canvas,{type:Xn["2D"],property:C,args:w})},0),L.apply(this,x)}});I.push(P)}catch(P){const L=yi(f.CanvasRenderingContext2D.prototype,C,{set(x){b(this.canvas,{type:Xn["2D"],property:C,args:[x],setter:!0})}});I.push(L)}return()=>{I.forEach(C=>C())}}(this.processMutation.bind(this),r,o,c),h=function(b,f,S,v){const I=[];return I.push(...xc(f.WebGLRenderingContext.prototype,Xn.WebGL,b,S,v,f)),f.WebGL2RenderingContext!==void 0&&I.push(...xc(f.WebGL2RenderingContext.prototype,Xn.WebGL2,b,S,v,f)),()=>{I.forEach(N=>N())}}(this.processMutation.bind(this),r,o,c);this.resetObservers=()=>{u(),d(),h()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const r=o=>{this.rafStamps.latestId=o,requestAnimationFrame(r)};requestAnimationFrame(r)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((r,o)=>{const c=this.mirror.getId(o);this.flushPendingCanvasMutationFor(o,c)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(r,o){if(this.frozen||this.locked)return;const c=this.pendingCanvasMutations.get(r);if(!c||o===-1)return;const u=c.map(h=>Z(h,["type"])),{type:d}=c[0];this.mutationCb({id:o,type:d,commands:u}),this.pendingCanvasMutations.delete(r)}}class ER{constructor(r){M(this,"trackedLinkElements",new WeakSet),M(this,"mutationCb"),M(this,"adoptedStyleSheetCb"),M(this,"styleMirror",new dR),this.mutationCb=r.mutationCb,this.adoptedStyleSheetCb=r.adoptedStyleSheetCb}attachLinkElement(r,o){"_cssText"in o.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:o.id,attributes:o.attributes}]}),this.trackLinkElement(r)}trackLinkElement(r){this.trackedLinkElements.has(r)||(this.trackedLinkElements.add(r),this.trackStylesheetInLinkElement(r))}adoptStyleSheets(r,o){if(r.length===0)return;const c={id:o,styleIds:[]},u=[];for(const d of r){let h;this.styleMirror.has(d)?h=this.styleMirror.getId(d):(h=this.styleMirror.add(d),u.push({styleId:h,rules:Array.from(d.rules||CSSRule,(b,f)=>({rule:Ql(b),index:f}))})),c.styleIds.push(h)}u.length>0&&(c.styles=u),this.adoptedStyleSheetCb(c)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(r){}}class IR{constructor(){M(this,"nodeMap",new WeakMap),M(this,"active",!1)}inOtherBuffer(r,o){const c=this.nodeMap.get(r);return c&&Array.from(c).some(u=>u!==o)}add(r,o){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(r,(this.nodeMap.get(r)||new Set).add(o))}destroy(){}}let Xe,Ii,gr,Ri=!1;try{if(Array.from([1],i=>2*i)[0]!==2){const i=document.createElement("iframe");document.body.appendChild(i),Array.from=((K=i.contentWindow)==null?void 0:K.Array.from)||Array.from,document.body.removeChild(i)}}catch(i){console.debug("Unable to override Array.from",i)}const yt=new $l;function xt(i={}){var r,o,c,u,d,h,b,f;const{emit:S,checkoutEveryNms:v,checkoutEveryNth:I,blockClass:N="highlight-block",blockSelector:C=null,ignoreClass:P="highlight-ignore",ignoreSelector:L=null,maskTextClass:x="highlight-mask",maskTextSelector:w=null,inlineStylesheet:X=!0,maskAllInputs:O,maskInputOptions:W,slimDOMOptions:Y,maskInputFn:j,maskTextFn:te=zs,hooks:ne,packFn:Q,sampling:z={},mousemoveWait:ee,recordDOM:J=!0,recordCanvas:E=!1,recordCrossOriginIframes:A=!1,recordAfter:H=i.recordAfter==="DOMContentLoaded"?i.recordAfter:"load",userTriggeredOnInput:F=!1,collectFonts:se=!1,inlineImages:k=!1,plugins:B,keepIframeSrcFn:_e=()=>!1,privacySetting:ge="default",ignoreCSSAttributes:pe=new Set([]),errorHandler:ae,logger:nt}=i,Qe=g(g({},i.dataURLOptions),(o=(r=i.sampling)==null?void 0:r.canvas)==null?void 0:o.dataURLOptions);fr=ae;const $=!A||window.parent===window;let ue=!1;if(!$)try{window.parent.document&&(ue=!1)}catch(he){ue=!0}if($&&!S)throw new Error("emit function is required");if(!$&&!ue)return()=>{};ee!==void 0&&z.mousemove===void 0&&(z.mousemove=ee),yt.reset();const Fe=O===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:W!==void 0?W:{password:!0},Ke=Y===!0||Y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:Y==="all",headMetaDescKeywords:Y==="all",headTitleMutations:Y==="all"}:Y||{};let jt;(function(he=window){"NodeList"in he&&!he.NodeList.prototype.forEach&&(he.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in he&&!he.DOMTokenList.prototype.forEach&&(he.DOMTokenList.prototype.forEach=Array.prototype.forEach)})();let Cr=0;const Di=he=>{for(const Tt of B||[])Tt.eventProcessor&&(he=Tt.eventProcessor(he));return Q&&!ue&&(he=Q(he)),he};Xe=(he,Tt)=>{var Ce;const we=he;if(we.timestamp=gi(),!((Ce=on[0])!=null&&Ce.isFrozen())||we.type===ve.FullSnapshot||we.type===ve.IncrementalSnapshot&&we.data.source===ye.Mutation||on.forEach(ht=>ht.unfreeze()),$)S==null||S(Di(we),Tt);else if(ue){const ht={type:"rrweb",event:Di(we),origin:window.location.origin,isCheckout:Tt};window.parent.postMessage(ht,"*")}if(we.type===ve.FullSnapshot)jt=we,Cr=0;else if(we.type===ve.IncrementalSnapshot){if(we.data.source===ye.Mutation&&we.data.isAttachIframe)return;Cr++;const ht=I&&Cr>=I,Re=v&&we.timestamp-jt.timestamp>v;(ht||Re)&&Ii(!0)}};const Fi=he=>{Xe({type:ve.IncrementalSnapshot,data:g({source:ye.Mutation},he)})},pd=he=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.Scroll},he)}),hd=he=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.CanvasMutation},he)}),hn=new ER({mutationCb:Fi,adoptedStyleSheetCb:he=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.AdoptedStyleSheet},he)})}),mn=new gR({mirror:yt,mutationCb:Fi,stylesheetManager:hn,recordCrossOriginIframes:A,wrappedEmit:Xe});for(const he of B||[])he.getMirror&&he.getMirror({nodeMirror:yt,crossOriginIframeMirror:mn.crossOriginIframeMirror,crossOriginIframeStyleMirror:mn.crossOriginIframeStyleMirror});const Fo=new IR;gr=new _R({recordCanvas:E,recordVideos:k,mutationCb:hd,win:window,blockClass:N,blockSelector:C,mirror:yt,sampling:(c=z==null?void 0:z.canvas)==null?void 0:c.fps,samplingManual:(u=z==null?void 0:z.canvas)==null?void 0:u.fpsManual,clearWebGLBuffer:(d=z==null?void 0:z.canvas)==null?void 0:d.clearWebGLBuffer,initialSnapshotDelay:(h=z==null?void 0:z.canvas)==null?void 0:h.initialSnapshotDelay,dataURLOptions:Qe,resizeFactor:(b=z==null?void 0:z.canvas)==null?void 0:b.resizeFactor,maxSnapshotDimension:(f=z==null?void 0:z.canvas)==null?void 0:f.maxSnapshotDimension,logger:nt});const Yi=new SR({mutationCb:Fi,scrollCb:pd,bypassOptions:{blockClass:N,blockSelector:C,maskTextClass:x,maskTextSelector:w,inlineStylesheet:X,maskInputOptions:Fe,dataURLOptions:Qe,maskTextFn:te,maskInputFn:j,recordCanvas:E,inlineImages:k,privacySetting:ge,sampling:z,slimDOMOptions:Ke,iframeManager:mn,stylesheetManager:hn,canvasManager:gr,keepIframeSrcFn:_e,processedNodeManager:Fo},mirror:yt});Ii=(he=!1)=>{if(!J)return;Xe({type:ve.Meta,data:{href:window.location.href,width:gc(),height:yc()}},he),hn.reset(),Yi.init(),on.forEach(Ce=>Ce.lock());const Tt=function(Ce,we){const{mirror:ht=new $l,blockClass:Re="highlight-block",blockSelector:Or=null,maskTextClass:pZ="highlight-mask",maskTextSelector:hZ=null,inlineStylesheet:mZ=!0,inlineImages:fZ=!1,recordCanvas:bZ=!1,maskAllInputs:Yo=!1,maskTextFn:yZ,maskInputFn:gZ,slimDOM:Hi=!1,dataURLOptions:SZ,preserveWhiteSpace:TZ,onSerialize:vZ,onIframeLoad:_Z,iframeLoadTimeout:EZ,onStylesheetLoad:IZ,stylesheetLoadTimeout:RZ,keepIframeSrcFn:NZ=()=>!1,privacySetting:ZZ="default"}=we||{};return On(Ce,{doc:Ce,mirror:ht,blockClass:Re,blockSelector:Or,maskTextClass:pZ,maskTextSelector:hZ,skipChild:!1,inlineStylesheet:mZ,maskInputOptions:Yo===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:Yo===!1?{password:!0}:Yo,maskTextFn:yZ,maskInputFn:gZ,slimDOMOptions:Hi||Hi==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Hi==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Hi||{},dataURLOptions:SZ,inlineImages:fZ,recordCanvas:bZ,preserveWhiteSpace:TZ,onSerialize:vZ,onIframeLoad:_Z,iframeLoadTimeout:EZ,onStylesheetLoad:IZ,stylesheetLoadTimeout:RZ,keepIframeSrcFn:NZ,newlyAddedElement:!1,privacySetting:ZZ})}(document,{mirror:yt,blockClass:N,blockSelector:C,maskTextClass:x,maskTextSelector:w,inlineStylesheet:X,maskAllInputs:Fe,maskTextFn:te,maskInputFn:j,slimDOM:Ke,dataURLOptions:Qe,recordCanvas:E,inlineImages:k,privacySetting:ge,onSerialize:Ce=>{vc(Ce,yt)&&mn.addIframe(Ce),_c(Ce,yt)&&hn.trackLinkElement(Ce),io(Ce)&&Yi.addShadowRoot(hr(Ce),document)},onIframeLoad:(Ce,we)=>{mn.attachIframe(Ce,we),Yi.observeAttachShadow(Ce)},onStylesheetLoad:(Ce,we)=>{hn.attachLinkElement(Ce,we)},keepIframeSrcFn:_e});if(!Tt)return console.warn("Failed to snapshot the document");Xe({type:ve.FullSnapshot,data:{node:Tt,initialOffset:bc(window)}},he),on.forEach(Ce=>Ce.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&hn.adoptStyleSheets(document.adoptedStyleSheets,yt.getId(document))};try{const he=[],Tt=we=>{var ht;return Te(yR)({mutationCb:Fi,mousemoveCb:(Re,Or)=>Xe({type:ve.IncrementalSnapshot,data:{source:Or,positions:Re}}),mouseInteractionCb:Re=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.MouseInteraction},Re)}),scrollCb:pd,viewportResizeCb:Re=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.ViewportResize},Re)}),inputCb:Re=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.Input},Re)}),mediaInteractionCb:Re=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.MediaInteraction},Re)}),styleSheetRuleCb:Re=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.StyleSheetRule},Re)}),styleDeclarationCb:Re=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.StyleDeclaration},Re)}),canvasMutationCb:hd,fontCb:Re=>Xe({type:ve.IncrementalSnapshot,data:g({source:ye.Font},Re)}),selectionCb:Re=>{Xe({type:ve.IncrementalSnapshot,data:g({source:ye.Selection},Re)})},customElementCb:Re=>{Xe({type:ve.IncrementalSnapshot,data:g({source:ye.CustomElement},Re)})},blockClass:N,ignoreClass:P,ignoreSelector:L,maskTextClass:x,maskTextSelector:w,maskInputOptions:Fe,inlineStylesheet:X,sampling:z,recordDOM:J,recordCanvas:E,inlineImages:k,userTriggeredOnInput:F,collectFonts:se,doc:we,maskInputFn:j,maskTextFn:te,keepIframeSrcFn:_e,blockSelector:C,slimDOMOptions:Ke,dataURLOptions:Qe,mirror:yt,iframeManager:mn,stylesheetManager:hn,shadowDomManager:Yi,processedNodeManager:Fo,canvasManager:gr,ignoreCSSAttributes:pe,privacySetting:ge,plugins:((ht=B==null?void 0:B.filter(Re=>Re.observer))==null?void 0:ht.map(Re=>({observer:Re.observer,options:Re.options,callback:Or=>Xe({type:ve.Plugin,data:{plugin:Re.name,payload:Or}})})))||[]},ne)};mn.addLoadListener(we=>{try{he.push(Tt(we.contentDocument))}catch(ht){console.warn(ht)}});const Ce=()=>{Ii(),he.push(Tt(document)),Ri=!0};return document.readyState==="interactive"||document.readyState==="complete"?Ce():(he.push(qe("DOMContentLoaded",()=>{Xe({type:ve.DomContentLoaded,data:{}}),H==="DOMContentLoaded"&&Ce()})),he.push(qe("load",()=>{Xe({type:ve.Load,data:{}}),H==="load"&&Ce()},window))),()=>{he.forEach(we=>we()),Fo.destroy(),Ri=!1,fr=void 0}}catch(he){console.warn(he)}}var Yc,kn;xt.addCustomEvent=(i,r)=>{Ri&&Xe({type:ve.Custom,data:{tag:i,payload:r}})},xt.freezePage=()=>{on.forEach(i=>i.freeze())},xt.takeFullSnapshot=i=>{if(!Ri)throw new Error("please take full snapshot after start recording");Ii(i)},xt.snapshotCanvas=i=>V(this,null,function*(){if(!gr)throw new Error("canvas manager is not initialized");yield gr.snapshot(i)}),xt.mirror=yt,(kn=Yc||(Yc={}))[kn.NotStarted=0]="NotStarted",kn[kn.Running=1]="Running",kn[kn.Stopped=2]="Stopped";const{addCustomEvent:Hc}=xt,Jc={key:"_sid"},RR=i=>{const r=i?Object.assign({},Jc,i):Jc;let o=0;return{name:"rrweb/sequential-id@1",eventProcessor:c=>(Object.assign(c,{[r.key]:++o}),c),options:r}};function NR(i){if(!i||!i.outerHTML)return"";let r="";for(;i.parentElement;){let o=i.localName;if(!o)break;o=o.toLowerCase();let c=i.parentElement,u=[];if(c.children&&c.children.length>0)for(let d=0;d<c.children.length;d++){let h=c.children[d];h.localName&&h.localName.toLowerCase&&h.localName.toLowerCase()===o&&u.push(h)}u.length>1&&(o+=":eq("+u.indexOf(i)+")"),r=o+(r?">"+r:""),i=c}return r}function oo(i){return Object.prototype.toString.call(i)==="[object Object]"}function Kc(i,r){if(r===0)return!0;const o=Object.keys(i);for(const c of o)if(oo(i[c])&&Kc(i[c],r-1))return!0;return!1}function ao(i,r){const o={numOfKeysLimit:50,depthOfLimit:4};Object.assign(o,r);const c=[],u=[];return JSON.stringify(i,function(d,h){if(c.length>0){const b=c.indexOf(this);~b?c.splice(b+1):c.push(this),~b?u.splice(b,1/0,d):u.push(d),~c.indexOf(h)&&(h=c[0]===h?"[Circular ~]":"[Circular ~."+u.slice(0,c.indexOf(h)).join(".")+"]")}else c.push(h);if(h==null)return h;if(function(b){return oo(b)&&Object.keys(b).length>o.numOfKeysLimit||typeof b=="function"?!0:b instanceof Event&&b.isTrusted===!1?Object.keys(b).length===1:!!(oo(b)&&Kc(b,o.depthOfLimit))}(h))return function(b){let f=b.toString();return o.stringLengthLimit&&f.length>o.stringLengthLimit&&(f=`${f.slice(0,o.stringLengthLimit)}...`),f}(h);if(h instanceof Event){const b={};for(const f in h){const S=h[f];Array.isArray(S)?b[f]=NR(S.length?S[0]:null):b[f]=S}return b}return h instanceof Node?h instanceof HTMLElement?h?h.outerHTML:"":h.nodeName:h instanceof Error?h.name+": "+h.message:h})}function ZR(){return(i=document.createElement("canvas")).getContext&&i.getContext("2d")&&i.toDataURL("image/webp").indexOf("data:image/webp")==0?{type:"image/webp",quality:.9}:{type:"image/jpeg",quality:.6};var i}var CR=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Yn!="undefined"?Yn:typeof self!="undefined"?self:{};function lo(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Bc,an,zc,co,jc,Qc={exports:{}},$c={exports:{}};function OR(){return Bc||(Bc=1,$c.exports=function(){function i(C){return!isNaN(parseFloat(C))&&isFinite(C)}function r(C){return C.charAt(0).toUpperCase()+C.substring(1)}function o(C){return function(){return this[C]}}var c=["isConstructor","isEval","isNative","isToplevel"],u=["columnNumber","lineNumber"],d=["fileName","functionName","source"],h=["args"],b=["evalOrigin"],f=c.concat(u,d,h,b);function S(C){if(C)for(var P=0;P<f.length;P++)C[f[P]]!==void 0&&this["set"+r(f[P])](C[f[P]])}S.prototype={getArgs:function(){return this.args},setArgs:function(C){if(Object.prototype.toString.call(C)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=C},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(C){if(C instanceof S)this.evalOrigin=C;else{if(!(C instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new S(C)}},toString:function(){var C=this.getFileName()||"",P=this.getLineNumber()||"",L=this.getColumnNumber()||"",x=this.getFunctionName()||"";return this.getIsEval()?C?"[eval] ("+C+":"+P+":"+L+")":"[eval]:"+P+":"+L:x?x+" ("+C+":"+P+":"+L+")":C+":"+P+":"+L}},S.fromString=function(C){var P=C.indexOf("("),L=C.lastIndexOf(")"),x=C.substring(0,P),w=C.substring(P+1,L).split(","),X=C.substring(L+1);if(X.indexOf("@")===0)var O=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(X,""),W=O[1],Y=O[2],j=O[3];return new S({functionName:x,args:w||void 0,fileName:W,lineNumber:Y||void 0,columnNumber:j||void 0})};for(var v=0;v<c.length;v++)S.prototype["get"+r(c[v])]=o(c[v]),S.prototype["set"+r(c[v])]=function(C){return function(P){this[C]=!!P}}(c[v]);for(var I=0;I<u.length;I++)S.prototype["get"+r(u[I])]=o(u[I]),S.prototype["set"+r(u[I])]=function(C){return function(P){if(!i(P))throw new TypeError(C+" must be a Number");this[C]=Number(P)}}(u[I]);for(var N=0;N<d.length;N++)S.prototype["get"+r(d[N])]=o(d[N]),S.prototype["set"+r(d[N])]=function(C){return function(P){this[C]=String(P)}}(d[N]);return S}()),$c.exports}Qc.exports=(an=OR(),zc=/(^|@)\S+:\d+/,co=/^\s*at .*(\S+:\d+|\(native\))/m,jc=/^(eval@)?(\[native code])?$/,{parse:function(i){if(i.stacktrace!==void 0||i["opera#sourceloc"]!==void 0)return this.parseOpera(i);if(i.stack&&i.stack.match(co))return this.parseV8OrIE(i);if(i.stack)return this.parseFFOrSafari(i);throw new Error("Cannot parse given Error object")},extractLocation:function(i){if(i.indexOf(":")===-1)return[i];var r=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i.replace(/[()]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(i){return i.stack.split(`
`).filter(function(r){return!!r.match(co)},this).map(function(r){r.indexOf("(eval ")>-1&&(r=r.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var o=r.replace(/^\s+/,"").replace(/\(eval code/g,"("),c=o.match(/ (\((.+):(\d+):(\d+)\)$)/),u=(o=c?o.replace(c[0],""):o).split(/\s+/).slice(1),d=this.extractLocation(c?c[1]:u.pop()),h=u.join(" ")||void 0,b=["eval","<anonymous>"].indexOf(d[0])>-1?void 0:d[0];return new an({functionName:h,fileName:b,lineNumber:d[1],columnNumber:d[2],source:r})},this)},parseFFOrSafari:function(i){return i.stack.split(`
`).filter(function(r){return!r.match(jc)},this).map(function(r){if(r.indexOf(" > eval")>-1&&(r=r.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),r.indexOf("@")===-1&&r.indexOf(":")===-1)return new an({functionName:r});var o=/((.*".+"[^@]*)?[^@]*)(?:@)/,c=r.match(o),u=c&&c[1]?c[1]:void 0,d=this.extractLocation(r.replace(o,""));return new an({functionName:u,fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:r})},this)},parseOpera:function(i){return!i.stacktrace||i.message.indexOf(`
`)>-1&&i.message.split(`
`).length>i.stacktrace.split(`
`).length?this.parseOpera9(i):i.stack?this.parseOpera11(i):this.parseOpera10(i)},parseOpera9:function(i){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,o=i.message.split(`
`),c=[],u=2,d=o.length;u<d;u+=2){var h=r.exec(o[u]);h&&c.push(new an({fileName:h[2],lineNumber:h[1],source:o[u]}))}return c},parseOpera10:function(i){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=i.stacktrace.split(`
`),c=[],u=0,d=o.length;u<d;u+=2){var h=r.exec(o[u]);h&&c.push(new an({functionName:h[3]||void 0,fileName:h[2],lineNumber:h[1],source:o[u]}))}return c},parseOpera11:function(i){return i.stack.split(`
`).filter(function(r){return!!r.match(zc)&&!r.match(/^Error created at/)},this).map(function(r){var o,c=r.split("@"),u=this.extractLocation(c.pop()),d=c.shift()||"",h=d.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;d.match(/\(([^)]*)\)/)&&(o=d.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var b=o===void 0||o==="[arguments not available]"?void 0:o.split(",");return new an({functionName:h,args:b,fileName:u[0],lineNumber:u[1],columnNumber:u[2],source:r})},this)}});const Sr=lo(Qc.exports);function wR(i,r){const o=r.logger;if(!o)return()=>{};let c;c=typeof o=="string"?window[o]:o;const u=[];if(r.level.includes("error")&&window){const h=b=>{const{message:f,error:S}=b;let v=[];S&&(v=Sr.parse(S));const I=[ao(f,r.stringifyOptions)];i({type:"Error",trace:v,time:Date.now(),value:I})};window.addEventListener("error",h),u.push(()=>{window&&window.removeEventListener("error",h)})}for(const h of r.level)u.push(d(c,h));return()=>{u.forEach(h=>h())};function d(h,b){return h[b]?function(f,S,v){try{if(!(S in f))return()=>{};const I=f[S],N=v(I);return typeof N=="function"&&(N.prototype=N.prototype||{},Object.defineProperties(N,{__rrweb_original__:{enumerable:!1,value:I}})),f[S]=N,()=>{f[S]=I}}catch(I){return()=>{}}}(h,b,f=>(...S)=>{f.apply(this,S);try{const v=Sr.parse(new Error),I=r.serializeConsoleAttributes?S.map(N=>typeof N=="object"?ao(N,r.stringifyOptions):N):S.filter(N=>typeof N!="object").map(N=>`${N}`);i({type:b,trace:v.slice(1),value:I,attributes:ao(S.filter(N=>typeof N=="object").reduce((N,C)=>g(g({},N),C),{}),r.stringifyOptions),time:Date.now()})}catch(v){f("highlight logger error:",v,...S)}}):()=>{}}}var qc={exports:{}};(function(i,r){function o(c,u){var d=[],h=[];return u==null&&(u=function(b,f){return d[0]===f?"[Circular ~]":"[Circular ~."+h.slice(0,d.indexOf(f)).join(".")+"]"}),function(b,f){if(d.length>0){var S=d.indexOf(this);~S?d.splice(S+1):d.push(this),~S?h.splice(S,1/0,b):h.push(b),~d.indexOf(f)&&(f=u.call(this,b,f))}else d.push(f);return c==null?f:c.call(this,b,f)}}(i.exports=function(c,u,d,h){return JSON.stringify(c,o(u,h),d)}).getSerialize=o})(qc);const ln=lo(qc.exports);function uo(i,r,o,c){var u,d,h,b;let f=[];try{f=Sr.parse(c!=null?c:r)}catch(I){f=Sr.parse(new Error)}let S={};r instanceof Error&&(r=r.message).cause&&(S={"exception.cause":r.cause});const v=LR(f);i({event:ln(r),type:"window.onerror",url:window.location.href,source:o!=null?o:"",lineNumber:(u=v[0])!=null&&u.lineNumber?(d=v[0])==null?void 0:d.lineNumber:0,columnNumber:(h=v[0])!=null&&h.columnNumber?(b=v[0])==null?void 0:b.columnNumber:0,stackTrace:v,timestamp:new Date().toISOString(),payload:S?ln(S):void 0})}const GR=(i,{enablePromisePatch:r})=>{if(typeof window=="undefined")return()=>{};const o=window.onerror=(h,b,f,S,v)=>{uo(i,h,b,v)},c=window.onunhandledrejection=h=>{if(h.reason){const b=h.promise;b.getStack?uo(i,h.reason,h.type,b.getStack()):uo(i,h.reason,h.type)}},u=window.Promise,d=class extends u{constructor(h){super(h),R(this,"promiseCreationError"),this.promiseCreationError=new Error}getStack(){return this.promiseCreationError}static shouldPatch(){const h=window.Zone===void 0;return r&&h}};return d.shouldPatch()&&(window.Promise=d),()=>{window.Promise=u,window.onunhandledrejection=c,window.onerror=o}},LR=i=>{var r,o;if(i.length===0)return i;const c=i[0];return(r=c.fileName)!=null&&r.includes("highlight.run")||(o=c.fileName)!=null&&o.includes("highlight.io")||c.functionName==="new highlightPromise"?i.slice(1):i},VR=["assert","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"];var cn=(i=>(i.DeviceMemory="DeviceMemory",i.ViewportHeight="ViewportHeight",i.ViewportWidth="ViewportWidth",i.ScreenHeight="ScreenHeight",i.ScreenWidth="ScreenWidth",i.ViewportArea="ViewportArea",i))(cn||{}),ut=(i=>(i.Device="Device",i.WebVital="WebVital",i.Performance="Performance",i.Frontend="Frontend",i.Backend="Backend",i))(ut||{});const eu=['["\\"Script error.\\""]','"Script error."','["\\"Load failed.\\""]','"Load failed."','["\\"Network request failed.\\""]','"Network request failed."','["\\"Document is not focused.\\""]','"Document is not focused."','["\\"Failed to fetch\\""]','"Failed to fetch"','[{"isTrusted":true}]','{"isTrusted":true}','["{}"]','"{}"','[""]','""','["\\"\\""]','""'],tu=["websocket error",'\\"ResizeObserver loop'],nu=(i,r,o)=>{const c=XR(r,i.headers,o);return _(g({},i),{headers:c})},XR=(i,r,o)=>{var c,u;const d=g({},r);return o?((c=Object.keys(d))==null||c.forEach(h=>{[...o].includes(h==null?void 0:h.toLowerCase())||(d[h]="[REDACTED]")}),d):((u=Object.keys(d))==null||u.forEach(h=>{[...WR,...i].includes(h==null?void 0:h.toLowerCase())&&(d[h]="[REDACTED]")}),d)},WR=["authorization","cookie","proxy-authorization","token"],kR=["https://www.googleapis.com/identitytoolkit","https://securetoken.googleapis.com"];var Ue=(i=>(i.RECORDING_START_TIME="highlightRecordingStartTime",i.SEGMENT_LAST_SENT_HASH_KEY="HIGHLIGHT_SEGMENT_LAST_SENT_HASH_KEY",i.SESSION_DATA="sessionData",i.SESSION_SECURE_ID="sessionSecureID",i.USER_IDENTIFIER="highlightIdentifier",i.USER_OBJECT="highlightUserObject",i.PAYLOAD_ID="payloadId",i))(Ue||{});let po="localStorage",PR=new class{constructor(){R(this,"storage",{})}getItem(i){var r;return(r=this.storage[i])!=null?r:""}setItem(i,r){this.storage[i]=r}removeItem(i){delete this.storage[i]}};const ho=()=>{try{switch(po){case"localStorage":return window.localStorage;case"sessionStorage":return window.sessionStorage}}catch(i){return PR}},st=i=>ho().getItem(i),gt=(i,r)=>ho().setItem(i,r),mo=i=>ho().removeItem(i),AR=i=>{if(po==="sessionStorage")return void console.warn("highlight.io cannot use local storage; segment integration will not work");const r=window.localStorage.setItem;window.localStorage.setItem=function(){const[o,c]=arguments;i({keyName:o,keyValue:c}),r.apply(this,[o,c])}},ru={normal:{bytes:1e7,time:24e4},canvas:{bytes:16e6,time:5e3}},iu=()=>{let i=JSON.parse(st(Ue.SESSION_DATA)||"{}");if(i&&i.lastPushTime&&Date.now()-i.lastPushTime<9e5)return i},fo=function(i){i!==null?(gt(Ue.SESSION_DATA,JSON.stringify(i)),su(i.sessionSecureID)):mo(Ue.SESSION_DATA)},su=function(i){return gt(Ue.SESSION_SECURE_ID,i)};var MR={REACT_APP_COMMIT_SHA:"7e6f483f79dd1bb79a01e572dac9885e69c8234d",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ou="X-Highlight-Request",au=i=>{let r=i;return i.startsWith("https://")||i.startsWith("http://")||(r=`${window.location.origin}${r}`),r.replace(/\/+$/,"")},lu=(i,r,o,c)=>{i.sort((b,f)=>b.responseEnd-f.responseEnd);const u=i.reduce((b,f)=>{const S=au(f.name);return f.initiatorType===o?b[o][S]=[...b[o][S]||[],f]:b.others[S]=[...b.others[S]||[],f],b},{xmlhttprequest:{},others:{},fetch:{}});let d={};d=r.reduce((b,f)=>{const S=au(f.request.url);return b[S]=[...b[S]||[],f],b},d);for(let b in u[o]){const f=u[o][b],S=d[b];if(!S)continue;const v=Math.max(f.length-S.length,0);for(let I=v;I<f.length;I++)f[I]&&(f[I].requestResponsePair=S[I-v])}let h=[];for(let b in u)for(let f in u[b])h=h.concat(u[b][f]);return h.sort((b,f)=>b.fetchStart-f.fetchStart).reduce((b,f)=>{let S=f.requestResponsePair;return S&&(S=((v,{headersToRedact:I,headersToRecord:N,requestResponseSanitizer:C})=>{var P,L;let x=v;if(C){let Y=!0;try{x.request.body=JSON.parse(x.request.body)}catch(te){Y=!1}let j=!0;try{x.response.body=JSON.parse(x.response.body)}catch(te){j=!1}try{x=C(x)}catch(te){}finally{Y=Y&&!!((P=x==null?void 0:x.request)!=null&&P.body),j=j&&!!((L=x==null?void 0:x.response)!=null&&L.body),Y&&(x.request.body=JSON.stringify(x.request.body)),j&&(x.response.body=JSON.stringify(x.response.body))}if(!x)return null}const w=x,{request:X,response:O}=w,W=Z(w,["request","response"]);return g({request:nu(X,I,N),response:nu(O,I,N)},W)})(f.requestResponsePair,c),!S)||(f.toJSON=function(){const v=window.performance.timeOrigin;return{initiatorType:this.initiatorType,startTimeAbs:v+this.startTime,connectStartAbs:v+this.connectStart,connectEndAbs:v+this.connectEnd,domainLookupStartAbs:v+this.domainLookupStart,domainLookupEndAbs:v+this.domainLookupEnd,fetchStartAbs:v+this.fetchStart,redirectStartAbs:v+this.redirectStart,redirectEndAbs:v+this.redirectEnd,requestStartAbs:v+this.requestStart,responseStartAbs:v+this.responseStart,responseEndAbs:v+this.responseEnd,secureConnectionStartAbs:v+this.secureConnectionStart,workerStartAbs:v+this.workerStart,name:this.name,transferSize:this.transferSize,encodedBodySize:this.encodedBodySize,decodedBodySize:this.decodedBodySize,nextHopProtocol:this.nextHopProtocol,requestResponsePairs:S}},b.push(f)),b},[])},bo=(i,r,o)=>{return u=r,!((c=i).toLocaleLowerCase().includes((d=MR.REACT_APP_PUBLIC_GRAPH_URI)!=null?d:"highlight.io")||c.toLocaleLowerCase().includes("highlight.io")||c.toLocaleLowerCase().includes(u))||yo(i,o);var c,u,d},yo=(i,r)=>{var o;let c=[];r===!0?(c=["localhost",/^\//],(o=window==null?void 0:window.location)!=null&&o.host&&c.push(window.location.host)):r instanceof Array&&(c=r);let u=!1;return c.forEach(d=>{i.match(d)&&(u=!0)}),u};function xR(i){for(var r="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<i;c++)r+=o.charAt(Math.floor(62*Math.random()));return r}const cu=()=>{return[(i=st(Ue.SESSION_SECURE_ID))!=null?i:"",xR(10)];var i},uu=(i,r)=>i+"/"+r,UR=(i,r,o,c,u,d)=>{const h=XMLHttpRequest.prototype,b=h.open,f=h.send,S=h.setRequestHeader;return h.open=function(v,I){return this._url=typeof I=="string"?I:I.toString(),this._method=v,this._requestHeaders={},this._shouldRecordHeaderAndBody=!c.some(N=>this._url.toLowerCase().includes(N)),b.apply(this,arguments)},h.setRequestHeader=function(v,I){return this._requestHeaders[v]=I,S.apply(this,arguments)},h.send=function(v){if(!bo(this._url,r,o))return f.apply(this,arguments);const[I,N]=cu();yo(this._url,o)&&this.setRequestHeader(ou,uu(I,N));const C=this._shouldRecordHeaderAndBody,P={sessionSecureID:I,id:N,url:this._url,verb:this._method,headers:C?this._requestHeaders:{},body:void 0};if(C&&v){const L=du(v,P.url);L&&(this._body=L,P.body=un(L,u,d,P.headers))}return this.addEventListener("load",function(){return V(this,null,function*(){const L={status:this.status,headers:{},body:void 0};if(C){const x=this.getAllResponseHeaders().trim().split(/[\r\n]+/),w={};if(x.forEach(function(X){const O=X.split(": "),W=O.shift();w[W]=O.join(": ")}),L.headers=w,v){const X=du(v,P.url);X&&(P.body=un(X,u,d,L.headers))}if(this.responseType===""||this.responseType==="text")L.body=un(this.responseText,u,d,L.headers),L.size=8*this.responseText.length;else if(this.responseType==="blob"){if(this.response instanceof Blob)try{const X=yield this.response.text();L.body=un(X,u,d,L.headers),L.size=this.response.size}catch(X){}}else try{L.body=un(this.response,u,d,L.headers)}catch(X){}}i({request:P,response:L,urlBlocked:!C})})}),this.addEventListener("error",function(){return V(this,null,function*(){const L={status:this.status,headers:void 0,body:void 0};i({request:P,response:L,urlBlocked:!1})})}),f.apply(this,arguments)},()=>{h.open=b,h.send=f,h.setRequestHeader=S}},du=(i,r)=>{if(typeof i=="string"){if(!(r!=null&&r.includes("localhost"))&&!(r!=null&&r.includes("highlight.run"))||!i.includes("pushPayload"))return i}else if(typeof i=="object"||typeof i=="number"||typeof i=="boolean")return ln(i);return null},DR={"application/json":67108864,"text/plain":67108864},un=(i,r,o,c)=>{var u,d,h;let b=65536;if(c){let f="";f=typeof c.get=="function"?(u=c.get("content-type"))!=null?u:"":(d=c["content-type"])!=null?d:"";try{f=f.split(";")[0]}catch(S){}b=(h=DR[f])!=null?h:65536}if(i){if(r)try{const f=JSON.parse(i);Array.isArray(f)?f.forEach(S=>{Object.keys(S).forEach(v=>{r.includes(v.toLocaleLowerCase())&&(S[v]="[REDACTED]")})}):Object.keys(f).forEach(S=>{r.includes(S.toLocaleLowerCase())&&(f[S]="[REDACTED]")}),i=JSON.stringify(f)}catch(f){}if(o)try{const f=JSON.parse(i);Object.keys(f).forEach(S=>{o.includes(S.toLocaleLowerCase())||(f[S]="[REDACTED]")}),i=JSON.stringify(f)}catch(f){}}try{i=i.slice(0,b)}catch(f){}return i},FR=(i,r,o,c,u,d)=>{const h=window._fetchProxy;return window._fetchProxy=function(b,f){const{method:S,url:v}=YR(b,f);if(!bo(v,r,o))return h.call(this,b,f);const[I,N]=cu();if(yo(v,o)){f=f||{};let x=new Headers(f.headers);b instanceof Request&&[...b.headers].forEach(([w,X])=>x.set(w,X)),x.set(ou,uu(I,N)),f.headers=Object.fromEntries(x.entries())}const C={sessionSecureID:I,id:N,headers:{},body:void 0,url:v,verb:S},P=!c.some(x=>v.toLowerCase().includes(x));P&&(C.headers=Object.fromEntries(new Headers(f==null?void 0:f.headers).entries()),C.body=un(f==null?void 0:f.body,u,d,f==null?void 0:f.headers));let L=h.call(this,b,f);return HR(L,C,i,P,u,d),L},()=>{window._fetchProxy=h}},YR=(i,r)=>{const o=r&&r.method||typeof i=="object"&&"method"in i&&i.method||"GET";let c;return c=typeof i=="object"?"url"in i&&i.url?i.url:i.toString():i,{method:o,url:c}},HR=(i,r,o,c,u,d)=>{i.then(h=>V(this,null,function*(){let b={body:void 0,headers:void 0,status:0,size:0},f=!1,S=!c;"stack"in h||h instanceof Error?(b=_(g({},b),{body:h.message,status:0,size:void 0}),f=!0):"status"in h&&(b=_(g({},b),{status:h.status}),c&&(b.body=yield JR(h,d,u),b.headers=Object.fromEntries(h.headers.entries()),b.size=8*b.body.length),h.type!=="opaque"&&h.type!=="opaqueredirect"||(S=!0,b=_(g({},b),{body:"CORS blocked request"})),f=!0),f&&o({request:r,response:b,urlBlocked:S})})).catch(()=>{})},JR=(i,r,o)=>V(this,null,function*(){let c;try{const u=i.clone().body;if(u){let d,h=u.getReader(),b=new TextDecoder,f="";for(;!(d=yield h.read()).done;){let S=d.value;f+=b.decode(S)}c=f,c=un(c,o,r,i.headers)}else c=""}catch(u){c=`Unable to clone response: ${u}`}return c}),KR=({xhrCallback:i,fetchCallback:r,webSocketRequestCallback:o,webSocketEventCallback:c,disableWebSocketRecording:u,bodyKeysToRedact:d,backendUrl:h,tracingOrigins:b,urlBlocklist:f,sessionSecureID:S,bodyKeysToRecord:v})=>{const I=UR(i,h,b,f,d,v),N=FR(r,h,b,f,d,v),C=u?()=>{}:((P,L,x)=>{const w=window._highlightWebSocketRequestCallback;window._highlightWebSocketRequestCallback=P;const X=window._highlightWebSocketEventCallback;return window._highlightWebSocketEventCallback=O=>{const W=O,Y=Z(W,["message","size"]),j=x.some(te=>O.name.toLowerCase().includes(te));L(j?Y:O)},()=>{window._highlightWebSocketRequestCallback=w,window._highlightWebSocketEventCallback=X}})(o,c,f);return()=>{I(),N(),C()}};var BR={REACT_APP_COMMIT_SHA:"7e6f483f79dd1bb79a01e572dac9885e69c8234d",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};class Ut{constructor(r){var o,c;R(this,"disableConsoleRecording"),R(this,"reportConsoleErrors"),R(this,"enablePromisePatch"),R(this,"consoleMethodsToRecord"),R(this,"listeners"),R(this,"errors"),R(this,"messages"),R(this,"options"),R(this,"hasNetworkRecording",!0),R(this,"_backendUrl"),R(this,"disableNetworkRecording"),R(this,"enableRecordingNetworkContents"),R(this,"xhrNetworkContents"),R(this,"fetchNetworkContents"),R(this,"disableRecordingWebSocketContents"),R(this,"webSocketNetworkContents"),R(this,"webSocketEventContents"),R(this,"tracingOrigins"),R(this,"networkHeadersToRedact"),R(this,"networkBodyKeysToRedact"),R(this,"networkBodyKeysToRecord"),R(this,"networkHeaderKeysToRecord"),R(this,"lastNetworkRequestTimestamp"),R(this,"urlBlocklist"),R(this,"requestResponseSanitizer"),this.options=r,this.disableConsoleRecording=!!r.disableConsoleRecording,this.reportConsoleErrors=(o=r.reportConsoleErrors)!=null&&o,this.enablePromisePatch=(c=r.enablePromisePatch)==null||c,this.consoleMethodsToRecord=r.consoleMethodsToRecord||[...VR],this.listeners=[],this.errors=[],this.messages=[],this.lastNetworkRequestTimestamp=0}isListening(){return this.listeners.length>0}startListening(){if(this.isListening())return;const r=this;this.disableConsoleRecording||this.listeners.push(wR(o=>{var c,u,d;if(this.reportConsoleErrors&&(o.type==="Error"||o.type==="error")&&o.value&&o.trace){const h=ln(o.value);if(eu.includes(h)||tu.some(b=>h.includes(b)))return;r.errors.push({event:h,type:"console.error",url:window.location.href,source:(c=o.trace[0])!=null&&c.fileName?o.trace[0].fileName:"",lineNumber:(u=o.trace[0])!=null&&u.lineNumber?o.trace[0].lineNumber:0,columnNumber:(d=o.trace[0])!=null&&d.columnNumber?o.trace[0].columnNumber:0,stackTrace:o.trace,timestamp:new Date().toISOString()})}r.messages.push(o)},{level:this.consoleMethodsToRecord,logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}})),this.listeners.push(GR(o=>{eu.includes(o.event)||tu.some(c=>o.event.includes(c))||r.errors.push(o)},{enablePromisePatch:this.enablePromisePatch})),this.options.enableOtelTracing&&Promise.resolve().then(()=>dZ).then(({shutdown:o})=>{this.listeners.push(o)}),Ut.setupNetworkListener(this,this.options)}stopListening(){this.listeners.forEach(r=>r()),this.listeners=[]}static setupNetworkListener(r,o){var c,u,d,h,b,f,S,v,I,N,C,P;r._backendUrl=(o==null?void 0:o.backendUrl)||BR.REACT_APP_PUBLIC_GRAPH_URI||"https://pub.highlight.run",r.xhrNetworkContents=[],r.fetchNetworkContents=[],r.webSocketNetworkContents=[],r.webSocketEventContents=[],r.networkHeadersToRedact=[],r.urlBlocklist=[],r.tracingOrigins=o.tracingOrigins||[],(o==null?void 0:o.disableNetworkRecording)!==void 0?(r.disableNetworkRecording=o==null?void 0:o.disableNetworkRecording,r.enableRecordingNetworkContents=!1,r.disableRecordingWebSocketContents=!0,r.networkHeadersToRedact=[],r.networkBodyKeysToRedact=[],r.urlBlocklist=[],r.networkBodyKeysToRecord=[],r.networkBodyKeysToRecord=[]):typeof(o==null?void 0:o.networkRecording)=="boolean"?(r.disableNetworkRecording=!o.networkRecording,r.enableRecordingNetworkContents=!1,r.disableRecordingWebSocketContents=!0,r.networkHeadersToRedact=[],r.networkBodyKeysToRedact=[],r.urlBlocklist=[]):(((c=o.networkRecording)==null?void 0:c.enabled)!==void 0?r.disableNetworkRecording=!o.networkRecording.enabled:r.disableNetworkRecording=!1,r.enableRecordingNetworkContents=((u=o.networkRecording)==null?void 0:u.recordHeadersAndBody)||!1,r.disableRecordingWebSocketContents=((d=o.networkRecording)==null?void 0:d.disableWebSocketEventRecordings)||!1,r.networkHeadersToRedact=((b=(h=o.networkRecording)==null?void 0:h.networkHeadersToRedact)==null?void 0:b.map(L=>L.toLowerCase()))||[],r.networkBodyKeysToRedact=((S=(f=o.networkRecording)==null?void 0:f.networkBodyKeysToRedact)==null?void 0:S.map(L=>L.toLowerCase()))||[],r.urlBlocklist=((I=(v=o.networkRecording)==null?void 0:v.urlBlocklist)==null?void 0:I.map(L=>L.toLowerCase()))||[],r.urlBlocklist=[...r.urlBlocklist,...kR],r.requestResponseSanitizer=(N=o.networkRecording)==null?void 0:N.requestResponseSanitizer,r.networkHeaderKeysToRecord=(C=o.networkRecording)==null?void 0:C.headerKeysToRecord,r.networkHeaderKeysToRecord&&(r.networkHeadersToRedact=[],r.networkHeaderKeysToRecord=r.networkHeaderKeysToRecord.map(L=>L.toLocaleLowerCase())),r.networkBodyKeysToRecord=(P=o.networkRecording)==null?void 0:P.bodyKeysToRecord,r.networkBodyKeysToRecord&&(r.networkBodyKeysToRedact=[],r.networkBodyKeysToRecord=r.networkBodyKeysToRecord.map(L=>L.toLocaleLowerCase()))),!r.disableNetworkRecording&&r.enableRecordingNetworkContents&&r.listeners.push(KR({xhrCallback:L=>{r.xhrNetworkContents.push(L)},fetchCallback:L=>{r.fetchNetworkContents.push(L)},webSocketRequestCallback:L=>{r.webSocketNetworkContents&&r.webSocketNetworkContents.push(L)},webSocketEventCallback:L=>{r.webSocketEventContents.push(L)},disableWebSocketRecording:r.disableRecordingWebSocketContents,bodyKeysToRedact:r.networkBodyKeysToRedact,backendUrl:r._backendUrl,tracingOrigins:r.tracingOrigins,urlBlocklist:r.urlBlocklist,sessionSecureID:o.sessionSecureID,bodyKeysToRecord:r.networkBodyKeysToRecord}))}static getRecordedNetworkResources(r,o){var c,u;let d=[],h=[];if(!r.disableNetworkRecording){const b=((c=window==null?void 0:window.performance)==null?void 0:c.timeOrigin)||0;d=performance.getEntriesByType("resource");const f=2*(o-b);if(d=d.filter(S=>!(S.responseEnd<r.lastNetworkRequestTimestamp)&&bo(S.name,r._backendUrl,r.tracingOrigins)).map(S=>_(g({},S.toJSON()),{offsetStartTime:S.startTime-f,offsetResponseEnd:S.responseEnd-f,offsetFetchStart:S.fetchStart-f})),r.lastNetworkRequestTimestamp=((u=d.at(-1))==null?void 0:u.responseEnd)||r.lastNetworkRequestTimestamp,r.enableRecordingNetworkContents){const S={headersToRedact:r.networkHeadersToRedact,headersToRecord:r.networkHeaderKeysToRecord,requestResponseSanitizer:r.requestResponseSanitizer};d=lu(d,r.xhrNetworkContents,"xmlhttprequest",S),d=lu(d,r.fetchNetworkContents,"fetch",S)}}return r.disableRecordingWebSocketContents||(h=r.webSocketNetworkContents||[]),[...d,...h]}static getRecordedWebSocketEvents(r){let o=[];return r.disableNetworkRecording||r.disableRecordingWebSocketContents||(o=r.webSocketEventContents),o}static clearRecordedNetworkResources(r){r.disableNetworkRecording||(r.xhrNetworkContents=[],r.fetchNetworkContents=[],r.webSocketNetworkContents=[],r.webSocketEventContents=[],performance.clearResourceTimings())}}const zR=i=>{i(window.location.href);const r=history.pushState;history.pushState=(d=>function(){var h=d.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),h})(history.pushState);const o=history.replaceState;history.replaceState=(d=>function(){var h=d.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),h})(history.replaceState);const c=()=>{window.dispatchEvent(new Event("locationchange"))};window.addEventListener("popstate",c);const u=function(){i(window.location.href)};return window.addEventListener("locationchange",u),()=>{window.removeEventListener("popstate",c),window.removeEventListener("locationchange",u),history.pushState=r,history.replaceState=o}},go=JSON;function Ni(i,r){if(!i)throw new Error(r)}function jR(i,r){if(!i)throw new Error(r!=null?r:"Unexpected invariant triggered.")}const QR=/\r\n|[\n\r]/g;function So(i,r){let o=0,c=1;for(const u of i.body.matchAll(QR)){if(typeof u.index=="number"||jR(!1),u.index>=r)break;o=u.index+u[0].length,c+=1}return{line:c,column:r+1-o}}function pu(i,r){const o=i.locationOffset.column-1,c="".padStart(o)+i.body,u=r.line-1,d=i.locationOffset.line-1,h=r.line+d,b=r.line===1?o:0,f=r.column+b,S=`${i.name}:${h}:${f}
`,v=c.split(/\r\n|[\n\r]/g),I=v[u];if(I.length>120){const N=Math.floor(f/80),C=f%80,P=[];for(let L=0;L<I.length;L+=80)P.push(I.slice(L,L+80));return S+hu([[`${h} |`,P[0]],...P.slice(1,N+1).map(L=>["|",L]),["|","^".padStart(C)],["|",P[N+1]]])}return S+hu([[h-1+" |",v[u-1]],[`${h} |`,I],["|","^".padStart(f)],[`${h+1} |`,v[u+1]]])}function hu(i){const r=i.filter(([c,u])=>u!==void 0),o=Math.max(...r.map(([c])=>c.length));return r.map(([c,u])=>c.padStart(o)+(u?" "+u:"")).join(`
`)}class To extends Error{constructor(r,...o){var c,u,d;const{nodes:h,source:b,positions:f,path:S,originalError:v,extensions:I}=function(L){const x=L[0];return x==null||"kind"in x||"length"in x?{nodes:x,source:L[1],positions:L[2],path:L[3],originalError:L[4],extensions:L[5]}:x}(o);super(r),this.name="GraphQLError",this.path=S!=null?S:void 0,this.originalError=v!=null?v:void 0,this.nodes=mu(Array.isArray(h)?h:h?[h]:void 0);const N=mu((c=this.nodes)===null||c===void 0?void 0:c.map(L=>L.loc).filter(L=>L!=null));this.source=b!=null?b:N==null||(u=N[0])===null||u===void 0?void 0:u.source,this.positions=f!=null?f:N==null?void 0:N.map(L=>L.start),this.locations=f&&b?f.map(L=>So(b,L)):N==null?void 0:N.map(L=>So(L.source,L.start));const C=typeof(P=v==null?void 0:v.extensions)=="object"&&P!==null?v==null?void 0:v.extensions:void 0;var P;this.extensions=(d=I!=null?I:C)!==null&&d!==void 0?d:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),v!=null&&v.stack?Object.defineProperty(this,"stack",{value:v.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,To):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let r=this.message;if(this.nodes)for(const c of this.nodes)c.loc&&(r+=`

`+pu((o=c.loc).source,So(o.source,o.start)));else if(this.source&&this.locations)for(const c of this.locations)r+=`

`+pu(this.source,c);var o;return r}toJSON(){const r={message:this.message};return this.locations!=null&&(r.locations=this.locations),this.path!=null&&(r.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(r.extensions=this.extensions),r}}function mu(i){return i===void 0||i.length===0?void 0:i}function Je(i,r,o){return new To(`Syntax Error: ${o}`,{source:i,positions:[r]})}class $R{constructor(r,o,c){this.start=r.start,this.end=o.end,this.startToken=r,this.endToken=o,this.source=c}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class fu{constructor(r,o,c,u,d,h){this.kind=r,this.start=o,this.end=c,this.line=u,this.column=d,this.value=h,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const bu={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},qR=new Set(Object.keys(bu));function yu(i){const r=i==null?void 0:i.kind;return typeof r=="string"&&qR.has(r)}var Pn,vo,_o,De,ie,ce,D,We;function Eo(i){return i===9||i===32}function Tr(i){return i>=48&&i<=57}function gu(i){return i>=97&&i<=122||i>=65&&i<=90}function Su(i){return gu(i)||i===95}function eN(i){return gu(i)||Tr(i)||i===95}function tN(i){var r;let o=Number.MAX_SAFE_INTEGER,c=null,u=-1;for(let h=0;h<i.length;++h){var d;const b=i[h],f=nN(b);f!==b.length&&(c=(d=c)!==null&&d!==void 0?d:h,u=h,h!==0&&f<o&&(o=f))}return i.map((h,b)=>b===0?h:h.slice(o)).slice((r=c)!==null&&r!==void 0?r:0,u+1)}function nN(i){let r=0;for(;r<i.length&&Eo(i.charCodeAt(r));)++r;return r}(vo=Pn||(Pn={})).QUERY="query",vo.MUTATION="mutation",vo.SUBSCRIPTION="subscription",(De=_o||(_o={})).QUERY="QUERY",De.MUTATION="MUTATION",De.SUBSCRIPTION="SUBSCRIPTION",De.FIELD="FIELD",De.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",De.FRAGMENT_SPREAD="FRAGMENT_SPREAD",De.INLINE_FRAGMENT="INLINE_FRAGMENT",De.VARIABLE_DEFINITION="VARIABLE_DEFINITION",De.SCHEMA="SCHEMA",De.SCALAR="SCALAR",De.OBJECT="OBJECT",De.FIELD_DEFINITION="FIELD_DEFINITION",De.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",De.INTERFACE="INTERFACE",De.UNION="UNION",De.ENUM="ENUM",De.ENUM_VALUE="ENUM_VALUE",De.INPUT_OBJECT="INPUT_OBJECT",De.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION",(ce=ie||(ie={})).NAME="Name",ce.DOCUMENT="Document",ce.OPERATION_DEFINITION="OperationDefinition",ce.VARIABLE_DEFINITION="VariableDefinition",ce.SELECTION_SET="SelectionSet",ce.FIELD="Field",ce.ARGUMENT="Argument",ce.FRAGMENT_SPREAD="FragmentSpread",ce.INLINE_FRAGMENT="InlineFragment",ce.FRAGMENT_DEFINITION="FragmentDefinition",ce.VARIABLE="Variable",ce.INT="IntValue",ce.FLOAT="FloatValue",ce.STRING="StringValue",ce.BOOLEAN="BooleanValue",ce.NULL="NullValue",ce.ENUM="EnumValue",ce.LIST="ListValue",ce.OBJECT="ObjectValue",ce.OBJECT_FIELD="ObjectField",ce.DIRECTIVE="Directive",ce.NAMED_TYPE="NamedType",ce.LIST_TYPE="ListType",ce.NON_NULL_TYPE="NonNullType",ce.SCHEMA_DEFINITION="SchemaDefinition",ce.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",ce.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",ce.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",ce.FIELD_DEFINITION="FieldDefinition",ce.INPUT_VALUE_DEFINITION="InputValueDefinition",ce.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",ce.UNION_TYPE_DEFINITION="UnionTypeDefinition",ce.ENUM_TYPE_DEFINITION="EnumTypeDefinition",ce.ENUM_VALUE_DEFINITION="EnumValueDefinition",ce.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",ce.DIRECTIVE_DEFINITION="DirectiveDefinition",ce.SCHEMA_EXTENSION="SchemaExtension",ce.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",ce.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",ce.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",ce.UNION_TYPE_EXTENSION="UnionTypeExtension",ce.ENUM_TYPE_EXTENSION="EnumTypeExtension",ce.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",(We=D||(D={})).SOF="<SOF>",We.EOF="<EOF>",We.BANG="!",We.DOLLAR="$",We.AMP="&",We.PAREN_L="(",We.PAREN_R=")",We.SPREAD="...",We.COLON=":",We.EQUALS="=",We.AT="@",We.BRACKET_L="[",We.BRACKET_R="]",We.BRACE_L="{",We.PIPE="|",We.BRACE_R="}",We.NAME="Name",We.INT="Int",We.FLOAT="Float",We.STRING="String",We.BLOCK_STRING="BlockString",We.COMMENT="Comment";class rN{constructor(r){const o=new fu(D.SOF,0,0,0,0);this.source=r,this.lastToken=o,this.token=o,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let r=this.token;if(r.kind!==D.EOF)do if(r.next)r=r.next;else{const o=iN(this,r.end);r.next=o,o.prev=r,r=o}while(r.kind===D.COMMENT);return r}}function An(i){return i>=0&&i<=55295||i>=57344&&i<=1114111}function Zi(i,r){return Tu(i.charCodeAt(r))&&vu(i.charCodeAt(r+1))}function Tu(i){return i>=55296&&i<=56319}function vu(i){return i>=56320&&i<=57343}function dn(i,r){const o=i.source.body.codePointAt(r);if(o===void 0)return D.EOF;if(o>=32&&o<=126){const c=String.fromCodePoint(o);return c==='"'?`'"'`:`"${c}"`}return"U+"+o.toString(16).toUpperCase().padStart(4,"0")}function xe(i,r,o,c,u){const d=i.line,h=1+o-i.lineStart;return new fu(r,o,c,d,h,u)}function iN(i,r){const o=i.source.body,c=o.length;let u=r;for(;u<c;){const d=o.charCodeAt(u);switch(d){case 65279:case 9:case 32:case 44:++u;continue;case 10:++u,++i.line,i.lineStart=u;continue;case 13:o.charCodeAt(u+1)===10?u+=2:++u,++i.line,i.lineStart=u;continue;case 35:return sN(i,u);case 33:return xe(i,D.BANG,u,u+1);case 36:return xe(i,D.DOLLAR,u,u+1);case 38:return xe(i,D.AMP,u,u+1);case 40:return xe(i,D.PAREN_L,u,u+1);case 41:return xe(i,D.PAREN_R,u,u+1);case 46:if(o.charCodeAt(u+1)===46&&o.charCodeAt(u+2)===46)return xe(i,D.SPREAD,u,u+3);break;case 58:return xe(i,D.COLON,u,u+1);case 61:return xe(i,D.EQUALS,u,u+1);case 64:return xe(i,D.AT,u,u+1);case 91:return xe(i,D.BRACKET_L,u,u+1);case 93:return xe(i,D.BRACKET_R,u,u+1);case 123:return xe(i,D.BRACE_L,u,u+1);case 124:return xe(i,D.PIPE,u,u+1);case 125:return xe(i,D.BRACE_R,u,u+1);case 34:return o.charCodeAt(u+1)===34&&o.charCodeAt(u+2)===34?dN(i,u):aN(i,u)}if(Tr(d)||d===45)return oN(i,u,d);if(Su(d))return pN(i,u);throw Je(i.source,u,d===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:An(d)||Zi(o,u)?`Unexpected character: ${dn(i,u)}.`:`Invalid character: ${dn(i,u)}.`)}return xe(i,D.EOF,c,c)}function sN(i,r){const o=i.source.body,c=o.length;let u=r+1;for(;u<c;){const d=o.charCodeAt(u);if(d===10||d===13)break;if(An(d))++u;else{if(!Zi(o,u))break;u+=2}}return xe(i,D.COMMENT,r,u,o.slice(r+1,u))}function oN(i,r,o){const c=i.source.body;let u=r,d=o,h=!1;if(d===45&&(d=c.charCodeAt(++u)),d===48){if(d=c.charCodeAt(++u),Tr(d))throw Je(i.source,u,`Invalid number, unexpected digit after 0: ${dn(i,u)}.`)}else u=Io(i,u,d),d=c.charCodeAt(u);if(d===46&&(h=!0,d=c.charCodeAt(++u),u=Io(i,u,d),d=c.charCodeAt(u)),d!==69&&d!==101||(h=!0,d=c.charCodeAt(++u),d!==43&&d!==45||(d=c.charCodeAt(++u)),u=Io(i,u,d),d=c.charCodeAt(u)),d===46||Su(d))throw Je(i.source,u,`Invalid number, expected digit but got: ${dn(i,u)}.`);return xe(i,h?D.FLOAT:D.INT,r,u,c.slice(r,u))}function Io(i,r,o){if(!Tr(o))throw Je(i.source,r,`Invalid number, expected digit but got: ${dn(i,r)}.`);const c=i.source.body;let u=r+1;for(;Tr(c.charCodeAt(u));)++u;return u}function aN(i,r){const o=i.source.body,c=o.length;let u=r+1,d=u,h="";for(;u<c;){const b=o.charCodeAt(u);if(b===34)return h+=o.slice(d,u),xe(i,D.STRING,r,u+1,h);if(b!==92){if(b===10||b===13)break;if(An(b))++u;else{if(!Zi(o,u))throw Je(i.source,u,`Invalid character within String: ${dn(i,u)}.`);u+=2}}else{h+=o.slice(d,u);const f=o.charCodeAt(u+1)===117?o.charCodeAt(u+2)===123?lN(i,u):cN(i,u):uN(i,u);h+=f.value,u+=f.size,d=u}}throw Je(i.source,u,"Unterminated string.")}function lN(i,r){const o=i.source.body;let c=0,u=3;for(;u<12;){const d=o.charCodeAt(r+u++);if(d===125){if(u<5||!An(c))break;return{value:String.fromCodePoint(c),size:u}}if(c=c<<4|vr(d),c<0)break}throw Je(i.source,r,`Invalid Unicode escape sequence: "${o.slice(r,r+u)}".`)}function cN(i,r){const o=i.source.body,c=_u(o,r+2);if(An(c))return{value:String.fromCodePoint(c),size:6};if(Tu(c)&&o.charCodeAt(r+6)===92&&o.charCodeAt(r+7)===117){const u=_u(o,r+8);if(vu(u))return{value:String.fromCodePoint(c,u),size:12}}throw Je(i.source,r,`Invalid Unicode escape sequence: "${o.slice(r,r+6)}".`)}function _u(i,r){return vr(i.charCodeAt(r))<<12|vr(i.charCodeAt(r+1))<<8|vr(i.charCodeAt(r+2))<<4|vr(i.charCodeAt(r+3))}function vr(i){return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:-1}function uN(i,r){const o=i.source.body;switch(o.charCodeAt(r+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Je(i.source,r,`Invalid character escape sequence: "${o.slice(r,r+2)}".`)}function dN(i,r){const o=i.source.body,c=o.length;let u=i.lineStart,d=r+3,h=d,b="";const f=[];for(;d<c;){const S=o.charCodeAt(d);if(S===34&&o.charCodeAt(d+1)===34&&o.charCodeAt(d+2)===34){b+=o.slice(h,d),f.push(b);const v=xe(i,D.BLOCK_STRING,r,d+3,tN(f).join(`
`));return i.line+=f.length-1,i.lineStart=u,v}if(S!==92||o.charCodeAt(d+1)!==34||o.charCodeAt(d+2)!==34||o.charCodeAt(d+3)!==34)if(S!==10&&S!==13)if(An(S))++d;else{if(!Zi(o,d))throw Je(i.source,d,`Invalid character within String: ${dn(i,d)}.`);d+=2}else b+=o.slice(h,d),f.push(b),S===13&&o.charCodeAt(d+1)===10?d+=2:++d,b="",h=d,u=d;else b+=o.slice(h,d),h=d+1,d+=4}throw Je(i.source,d,"Unterminated string.")}function pN(i,r){const o=i.source.body,c=o.length;let u=r+1;for(;u<c&&eN(o.charCodeAt(u));)++u;return xe(i,D.NAME,r,u,o.slice(r,u))}const hN=10,Eu=2;function Ro(i){return Ci(i,[])}function Ci(i,r){switch(typeof i){case"string":return JSON.stringify(i);case"function":return i.name?`[function ${i.name}]`:"[function]";case"object":return function(o,c){if(o===null)return"null";if(c.includes(o))return"[Circular]";const u=[...c,o];if(function(d){return typeof d.toJSON=="function"}(o)){const d=o.toJSON();if(d!==o)return typeof d=="string"?d:Ci(d,u)}else if(Array.isArray(o))return function(d,h){if(d.length===0)return"[]";if(h.length>Eu)return"[Array]";const b=Math.min(hN,d.length),f=d.length-b,S=[];for(let v=0;v<b;++v)S.push(Ci(d[v],h));return f===1?S.push("... 1 more item"):f>1&&S.push(`... ${f} more items`),"["+S.join(", ")+"]"}(o,u);return function(d,h){const b=Object.entries(d);return b.length===0?"{}":h.length>Eu?"["+function(S){const v=Object.prototype.toString.call(S).replace(/^\[object /,"").replace(/]$/,"");if(v==="Object"&&typeof S.constructor=="function"){const I=S.constructor.name;if(typeof I=="string"&&I!=="")return I}return v}(d)+"]":"{ "+b.map(([S,v])=>S+": "+Ci(v,h)).join(", ")+" }"}(o,u)}(i,r);default:return String(i)}}const mN=globalThis.process&&globalThis.process.env.NODE_ENV==="production"?function(i,r){return i instanceof r}:function(i,r){if(i instanceof r)return!0;if(typeof i=="object"&&i!==null){var o;const c=r.prototype[Symbol.toStringTag];if(c===(Symbol.toStringTag in i?i[Symbol.toStringTag]:(o=i.constructor)===null||o===void 0?void 0:o.name)){const u=Ro(i);throw new Error(`Cannot use ${c} "${u}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class Iu{constructor(r,o="GraphQL request",c={line:1,column:1}){typeof r=="string"||Ni(!1,`Body must be a string. Received: ${Ro(r)}.`),this.body=r,this.name=o,this.locationOffset=c,this.locationOffset.line>0||Ni(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Ni(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function Ru(i,r){return new fN(i,r).parseDocument()}class fN{constructor(r,o={}){const c=function(u){return mN(u,Iu)}(r)?r:new Iu(r);this._lexer=new rN(c),this._options=o,this._tokenCounter=0}parseName(){const r=this.expectToken(D.NAME);return this.node(r,{kind:ie.NAME,value:r.value})}parseDocument(){return this.node(this._lexer.token,{kind:ie.DOCUMENT,definitions:this.many(D.SOF,this.parseDefinition,D.EOF)})}parseDefinition(){if(this.peek(D.BRACE_L))return this.parseOperationDefinition();const r=this.peekDescription(),o=r?this._lexer.lookahead():this._lexer.token;if(o.kind===D.NAME){switch(o.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(r)throw Je(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(o.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(o)}parseOperationDefinition(){const r=this._lexer.token;if(this.peek(D.BRACE_L))return this.node(r,{kind:ie.OPERATION_DEFINITION,operation:Pn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const o=this.parseOperationType();let c;return this.peek(D.NAME)&&(c=this.parseName()),this.node(r,{kind:ie.OPERATION_DEFINITION,operation:o,name:c,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const r=this.expectToken(D.NAME);switch(r.value){case"query":return Pn.QUERY;case"mutation":return Pn.MUTATION;case"subscription":return Pn.SUBSCRIPTION}throw this.unexpected(r)}parseVariableDefinitions(){return this.optionalMany(D.PAREN_L,this.parseVariableDefinition,D.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:ie.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(D.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(D.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const r=this._lexer.token;return this.expectToken(D.DOLLAR),this.node(r,{kind:ie.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:ie.SELECTION_SET,selections:this.many(D.BRACE_L,this.parseSelection,D.BRACE_R)})}parseSelection(){return this.peek(D.SPREAD)?this.parseFragment():this.parseField()}parseField(){const r=this._lexer.token,o=this.parseName();let c,u;return this.expectOptionalToken(D.COLON)?(c=o,u=this.parseName()):u=o,this.node(r,{kind:ie.FIELD,alias:c,name:u,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(D.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(r){const o=r?this.parseConstArgument:this.parseArgument;return this.optionalMany(D.PAREN_L,o,D.PAREN_R)}parseArgument(r=!1){const o=this._lexer.token,c=this.parseName();return this.expectToken(D.COLON),this.node(o,{kind:ie.ARGUMENT,name:c,value:this.parseValueLiteral(r)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const r=this._lexer.token;this.expectToken(D.SPREAD);const o=this.expectOptionalKeyword("on");return!o&&this.peek(D.NAME)?this.node(r,{kind:ie.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(r,{kind:ie.INLINE_FRAGMENT,typeCondition:o?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const r=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(r,{kind:ie.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(r,{kind:ie.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(r){const o=this._lexer.token;switch(o.kind){case D.BRACKET_L:return this.parseList(r);case D.BRACE_L:return this.parseObject(r);case D.INT:return this.advanceLexer(),this.node(o,{kind:ie.INT,value:o.value});case D.FLOAT:return this.advanceLexer(),this.node(o,{kind:ie.FLOAT,value:o.value});case D.STRING:case D.BLOCK_STRING:return this.parseStringLiteral();case D.NAME:switch(this.advanceLexer(),o.value){case"true":return this.node(o,{kind:ie.BOOLEAN,value:!0});case"false":return this.node(o,{kind:ie.BOOLEAN,value:!1});case"null":return this.node(o,{kind:ie.NULL});default:return this.node(o,{kind:ie.ENUM,value:o.value})}case D.DOLLAR:if(r){if(this.expectToken(D.DOLLAR),this._lexer.token.kind===D.NAME){const c=this._lexer.token.value;throw Je(this._lexer.source,o.start,`Unexpected variable "$${c}" in constant value.`)}throw this.unexpected(o)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const r=this._lexer.token;return this.advanceLexer(),this.node(r,{kind:ie.STRING,value:r.value,block:r.kind===D.BLOCK_STRING})}parseList(r){return this.node(this._lexer.token,{kind:ie.LIST,values:this.any(D.BRACKET_L,()=>this.parseValueLiteral(r),D.BRACKET_R)})}parseObject(r){return this.node(this._lexer.token,{kind:ie.OBJECT,fields:this.any(D.BRACE_L,()=>this.parseObjectField(r),D.BRACE_R)})}parseObjectField(r){const o=this._lexer.token,c=this.parseName();return this.expectToken(D.COLON),this.node(o,{kind:ie.OBJECT_FIELD,name:c,value:this.parseValueLiteral(r)})}parseDirectives(r){const o=[];for(;this.peek(D.AT);)o.push(this.parseDirective(r));return o}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(r){const o=this._lexer.token;return this.expectToken(D.AT),this.node(o,{kind:ie.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(r)})}parseTypeReference(){const r=this._lexer.token;let o;if(this.expectOptionalToken(D.BRACKET_L)){const c=this.parseTypeReference();this.expectToken(D.BRACKET_R),o=this.node(r,{kind:ie.LIST_TYPE,type:c})}else o=this.parseNamedType();return this.expectOptionalToken(D.BANG)?this.node(r,{kind:ie.NON_NULL_TYPE,type:o}):o}parseNamedType(){return this.node(this._lexer.token,{kind:ie.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(D.STRING)||this.peek(D.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const r=this._lexer.token,o=this.parseDescription();this.expectKeyword("schema");const c=this.parseConstDirectives(),u=this.many(D.BRACE_L,this.parseOperationTypeDefinition,D.BRACE_R);return this.node(r,{kind:ie.SCHEMA_DEFINITION,description:o,directives:c,operationTypes:u})}parseOperationTypeDefinition(){const r=this._lexer.token,o=this.parseOperationType();this.expectToken(D.COLON);const c=this.parseNamedType();return this.node(r,{kind:ie.OPERATION_TYPE_DEFINITION,operation:o,type:c})}parseScalarTypeDefinition(){const r=this._lexer.token,o=this.parseDescription();this.expectKeyword("scalar");const c=this.parseName(),u=this.parseConstDirectives();return this.node(r,{kind:ie.SCALAR_TYPE_DEFINITION,description:o,name:c,directives:u})}parseObjectTypeDefinition(){const r=this._lexer.token,o=this.parseDescription();this.expectKeyword("type");const c=this.parseName(),u=this.parseImplementsInterfaces(),d=this.parseConstDirectives(),h=this.parseFieldsDefinition();return this.node(r,{kind:ie.OBJECT_TYPE_DEFINITION,description:o,name:c,interfaces:u,directives:d,fields:h})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(D.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(D.BRACE_L,this.parseFieldDefinition,D.BRACE_R)}parseFieldDefinition(){const r=this._lexer.token,o=this.parseDescription(),c=this.parseName(),u=this.parseArgumentDefs();this.expectToken(D.COLON);const d=this.parseTypeReference(),h=this.parseConstDirectives();return this.node(r,{kind:ie.FIELD_DEFINITION,description:o,name:c,arguments:u,type:d,directives:h})}parseArgumentDefs(){return this.optionalMany(D.PAREN_L,this.parseInputValueDef,D.PAREN_R)}parseInputValueDef(){const r=this._lexer.token,o=this.parseDescription(),c=this.parseName();this.expectToken(D.COLON);const u=this.parseTypeReference();let d;this.expectOptionalToken(D.EQUALS)&&(d=this.parseConstValueLiteral());const h=this.parseConstDirectives();return this.node(r,{kind:ie.INPUT_VALUE_DEFINITION,description:o,name:c,type:u,defaultValue:d,directives:h})}parseInterfaceTypeDefinition(){const r=this._lexer.token,o=this.parseDescription();this.expectKeyword("interface");const c=this.parseName(),u=this.parseImplementsInterfaces(),d=this.parseConstDirectives(),h=this.parseFieldsDefinition();return this.node(r,{kind:ie.INTERFACE_TYPE_DEFINITION,description:o,name:c,interfaces:u,directives:d,fields:h})}parseUnionTypeDefinition(){const r=this._lexer.token,o=this.parseDescription();this.expectKeyword("union");const c=this.parseName(),u=this.parseConstDirectives(),d=this.parseUnionMemberTypes();return this.node(r,{kind:ie.UNION_TYPE_DEFINITION,description:o,name:c,directives:u,types:d})}parseUnionMemberTypes(){return this.expectOptionalToken(D.EQUALS)?this.delimitedMany(D.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const r=this._lexer.token,o=this.parseDescription();this.expectKeyword("enum");const c=this.parseName(),u=this.parseConstDirectives(),d=this.parseEnumValuesDefinition();return this.node(r,{kind:ie.ENUM_TYPE_DEFINITION,description:o,name:c,directives:u,values:d})}parseEnumValuesDefinition(){return this.optionalMany(D.BRACE_L,this.parseEnumValueDefinition,D.BRACE_R)}parseEnumValueDefinition(){const r=this._lexer.token,o=this.parseDescription(),c=this.parseEnumValueName(),u=this.parseConstDirectives();return this.node(r,{kind:ie.ENUM_VALUE_DEFINITION,description:o,name:c,directives:u})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Je(this._lexer.source,this._lexer.token.start,`${Oi(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const r=this._lexer.token,o=this.parseDescription();this.expectKeyword("input");const c=this.parseName(),u=this.parseConstDirectives(),d=this.parseInputFieldsDefinition();return this.node(r,{kind:ie.INPUT_OBJECT_TYPE_DEFINITION,description:o,name:c,directives:u,fields:d})}parseInputFieldsDefinition(){return this.optionalMany(D.BRACE_L,this.parseInputValueDef,D.BRACE_R)}parseTypeSystemExtension(){const r=this._lexer.lookahead();if(r.kind===D.NAME)switch(r.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(r)}parseSchemaExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const o=this.parseConstDirectives(),c=this.optionalMany(D.BRACE_L,this.parseOperationTypeDefinition,D.BRACE_R);if(o.length===0&&c.length===0)throw this.unexpected();return this.node(r,{kind:ie.SCHEMA_EXTENSION,directives:o,operationTypes:c})}parseScalarTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const o=this.parseName(),c=this.parseConstDirectives();if(c.length===0)throw this.unexpected();return this.node(r,{kind:ie.SCALAR_TYPE_EXTENSION,name:o,directives:c})}parseObjectTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const o=this.parseName(),c=this.parseImplementsInterfaces(),u=this.parseConstDirectives(),d=this.parseFieldsDefinition();if(c.length===0&&u.length===0&&d.length===0)throw this.unexpected();return this.node(r,{kind:ie.OBJECT_TYPE_EXTENSION,name:o,interfaces:c,directives:u,fields:d})}parseInterfaceTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const o=this.parseName(),c=this.parseImplementsInterfaces(),u=this.parseConstDirectives(),d=this.parseFieldsDefinition();if(c.length===0&&u.length===0&&d.length===0)throw this.unexpected();return this.node(r,{kind:ie.INTERFACE_TYPE_EXTENSION,name:o,interfaces:c,directives:u,fields:d})}parseUnionTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const o=this.parseName(),c=this.parseConstDirectives(),u=this.parseUnionMemberTypes();if(c.length===0&&u.length===0)throw this.unexpected();return this.node(r,{kind:ie.UNION_TYPE_EXTENSION,name:o,directives:c,types:u})}parseEnumTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const o=this.parseName(),c=this.parseConstDirectives(),u=this.parseEnumValuesDefinition();if(c.length===0&&u.length===0)throw this.unexpected();return this.node(r,{kind:ie.ENUM_TYPE_EXTENSION,name:o,directives:c,values:u})}parseInputObjectTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const o=this.parseName(),c=this.parseConstDirectives(),u=this.parseInputFieldsDefinition();if(c.length===0&&u.length===0)throw this.unexpected();return this.node(r,{kind:ie.INPUT_OBJECT_TYPE_EXTENSION,name:o,directives:c,fields:u})}parseDirectiveDefinition(){const r=this._lexer.token,o=this.parseDescription();this.expectKeyword("directive"),this.expectToken(D.AT);const c=this.parseName(),u=this.parseArgumentDefs(),d=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const h=this.parseDirectiveLocations();return this.node(r,{kind:ie.DIRECTIVE_DEFINITION,description:o,name:c,arguments:u,repeatable:d,locations:h})}parseDirectiveLocations(){return this.delimitedMany(D.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const r=this._lexer.token,o=this.parseName();if(Object.prototype.hasOwnProperty.call(_o,o.value))return o;throw this.unexpected(r)}node(r,o){return this._options.noLocation!==!0&&(o.loc=new $R(r,this._lexer.lastToken,this._lexer.source)),o}peek(r){return this._lexer.token.kind===r}expectToken(r){const o=this._lexer.token;if(o.kind===r)return this.advanceLexer(),o;throw Je(this._lexer.source,o.start,`Expected ${Nu(r)}, found ${Oi(o)}.`)}expectOptionalToken(r){return this._lexer.token.kind===r&&(this.advanceLexer(),!0)}expectKeyword(r){const o=this._lexer.token;if(o.kind!==D.NAME||o.value!==r)throw Je(this._lexer.source,o.start,`Expected "${r}", found ${Oi(o)}.`);this.advanceLexer()}expectOptionalKeyword(r){const o=this._lexer.token;return o.kind===D.NAME&&o.value===r&&(this.advanceLexer(),!0)}unexpected(r){const o=r!=null?r:this._lexer.token;return Je(this._lexer.source,o.start,`Unexpected ${Oi(o)}.`)}any(r,o,c){this.expectToken(r);const u=[];for(;!this.expectOptionalToken(c);)u.push(o.call(this));return u}optionalMany(r,o,c){if(this.expectOptionalToken(r)){const u=[];do u.push(o.call(this));while(!this.expectOptionalToken(c));return u}return[]}many(r,o,c){this.expectToken(r);const u=[];do u.push(o.call(this));while(!this.expectOptionalToken(c));return u}delimitedMany(r,o){this.expectOptionalToken(r);const c=[];do c.push(o.call(this));while(this.expectOptionalToken(r));return c}advanceLexer(){const{maxTokens:r}=this._options,o=this._lexer.advance();if(r!==void 0&&o.kind!==D.EOF&&(++this._tokenCounter,this._tokenCounter>r))throw Je(this._lexer.source,o.start,`Document contains more that ${r} tokens. Parsing aborted.`)}}function Oi(i){const r=i.value;return Nu(i.kind)+(r!=null?` "${r}"`:"")}function Nu(i){return function(r){return r===D.BANG||r===D.DOLLAR||r===D.AMP||r===D.PAREN_L||r===D.PAREN_R||r===D.SPREAD||r===D.COLON||r===D.EQUALS||r===D.AT||r===D.BRACKET_L||r===D.BRACKET_R||r===D.BRACE_L||r===D.PIPE||r===D.BRACE_R}(i)?`"${i}"`:i}const bN=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function yN(i){return gN[i.charCodeAt(0)]}const gN=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],SN=Object.freeze({});function TN(i,r){const o=i[r];return typeof o=="object"?o:typeof o=="function"?{enter:o,leave:void 0}:{enter:i.enter,leave:i.leave}}function Zu(i){return function(r,o,c=bu){const u=new Map;for(const X of Object.values(ie))u.set(X,TN(o,X));let d,h,b,f=Array.isArray(r),S=[r],v=-1,I=[],N=r;const C=[],P=[];do{v++;const X=v===S.length,O=X&&I.length!==0;if(X){if(h=P.length===0?void 0:C[C.length-1],N=b,b=P.pop(),O)if(f){N=N.slice();let Y=0;for(const[j,te]of I){const ne=j-Y;te===null?(N.splice(ne,1),Y++):N[ne]=te}}else{N=Object.defineProperties({},Object.getOwnPropertyDescriptors(N));for(const[Y,j]of I)N[Y]=j}v=d.index,S=d.keys,I=d.edits,f=d.inArray,d=d.prev}else if(b){if(h=f?v:S[v],N=b[h],N==null)continue;C.push(h)}let W;if(!Array.isArray(N)){var L,x;yu(N)||Ni(!1,`Invalid AST Node: ${Ro(N)}.`);const Y=X?(L=u.get(N.kind))===null||L===void 0?void 0:L.leave:(x=u.get(N.kind))===null||x===void 0?void 0:x.enter;if(W=Y==null?void 0:Y.call(o,N,h,b,C,P),W===SN)break;if(W===!1){if(!X){C.pop();continue}}else if(W!==void 0&&(I.push([h,W]),!X)){if(!yu(W)){C.pop();continue}N=W}}var w;W===void 0&&O&&I.push([h,N]),X?C.pop():(d={inArray:f,index:v,keys:S,edits:I,prev:d},f=Array.isArray(N),S=f?N:(w=c[N.kind])!==null&&w!==void 0?w:[],v=-1,I=[],b&&P.push(b),b=N)}while(d!==void 0);return I.length!==0?I[I.length-1][1]:r}(i,vN)}const vN={Name:{leave:i=>i.value},Variable:{leave:i=>"$"+i.name},Document:{leave:i=>q(i.definitions,`

`)},OperationDefinition:{leave(i){const r=me("(",q(i.variableDefinitions,", "),")"),o=q([i.operation,q([i.name,r]),q(i.directives," ")]," ");return(o==="query"?"":o+" ")+i.selectionSet}},VariableDefinition:{leave:({variable:i,type:r,defaultValue:o,directives:c})=>i+": "+r+me(" = ",o)+me(" ",q(c," "))},SelectionSet:{leave:({selections:i})=>St(i)},Field:{leave({alias:i,name:r,arguments:o,directives:c,selectionSet:u}){const d=me("",i,": ")+r;let h=d+me("(",q(o,", "),")");return h.length>80&&(h=d+me(`(
`,wi(q(o,`
`)),`
)`)),q([h,q(c," "),u]," ")}},Argument:{leave:({name:i,value:r})=>i+": "+r},FragmentSpread:{leave:({name:i,directives:r})=>"..."+i+me(" ",q(r," "))},InlineFragment:{leave:({typeCondition:i,directives:r,selectionSet:o})=>q(["...",me("on ",i),q(r," "),o]," ")},FragmentDefinition:{leave:({name:i,typeCondition:r,variableDefinitions:o,directives:c,selectionSet:u})=>`fragment ${i}${me("(",q(o,", "),")")} on ${r} ${me("",q(c," ")," ")}`+u},IntValue:{leave:({value:i})=>i},FloatValue:{leave:({value:i})=>i},StringValue:{leave:({value:i,block:r})=>r?function(o,c){const u=o.replace(/"""/g,'\\"""'),d=u.split(/\r\n|[\n\r]/g),h=d.length===1,b=d.length>1&&d.slice(1).every(L=>L.length===0||Eo(L.charCodeAt(0))),f=u.endsWith('\\"""'),S=o.endsWith('"')&&!f,v=o.endsWith("\\"),I=S||v,N=!(c!=null&&c.minimize)&&(!h||o.length>70||I||b||f);let C="";const P=h&&Eo(o.charCodeAt(0));return(N&&!P||b)&&(C+=`
`),C+=u,(N||I)&&(C+=`
`),'"""'+C+'"""'}(i):`"${i.replace(bN,yN)}"`},BooleanValue:{leave:({value:i})=>i?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:i})=>i},ListValue:{leave:({values:i})=>"["+q(i,", ")+"]"},ObjectValue:{leave:({fields:i})=>"{"+q(i,", ")+"}"},ObjectField:{leave:({name:i,value:r})=>i+": "+r},Directive:{leave:({name:i,arguments:r})=>"@"+i+me("(",q(r,", "),")")},NamedType:{leave:({name:i})=>i},ListType:{leave:({type:i})=>"["+i+"]"},NonNullType:{leave:({type:i})=>i+"!"},SchemaDefinition:{leave:({description:i,directives:r,operationTypes:o})=>me("",i,`
`)+q(["schema",q(r," "),St(o)]," ")},OperationTypeDefinition:{leave:({operation:i,type:r})=>i+": "+r},ScalarTypeDefinition:{leave:({description:i,name:r,directives:o})=>me("",i,`
`)+q(["scalar",r,q(o," ")]," ")},ObjectTypeDefinition:{leave:({description:i,name:r,interfaces:o,directives:c,fields:u})=>me("",i,`
`)+q(["type",r,me("implements ",q(o," & ")),q(c," "),St(u)]," ")},FieldDefinition:{leave:({description:i,name:r,arguments:o,type:c,directives:u})=>me("",i,`
`)+r+(Cu(o)?me(`(
`,wi(q(o,`
`)),`
)`):me("(",q(o,", "),")"))+": "+c+me(" ",q(u," "))},InputValueDefinition:{leave:({description:i,name:r,type:o,defaultValue:c,directives:u})=>me("",i,`
`)+q([r+": "+o,me("= ",c),q(u," ")]," ")},InterfaceTypeDefinition:{leave:({description:i,name:r,interfaces:o,directives:c,fields:u})=>me("",i,`
`)+q(["interface",r,me("implements ",q(o," & ")),q(c," "),St(u)]," ")},UnionTypeDefinition:{leave:({description:i,name:r,directives:o,types:c})=>me("",i,`
`)+q(["union",r,q(o," "),me("= ",q(c," | "))]," ")},EnumTypeDefinition:{leave:({description:i,name:r,directives:o,values:c})=>me("",i,`
`)+q(["enum",r,q(o," "),St(c)]," ")},EnumValueDefinition:{leave:({description:i,name:r,directives:o})=>me("",i,`
`)+q([r,q(o," ")]," ")},InputObjectTypeDefinition:{leave:({description:i,name:r,directives:o,fields:c})=>me("",i,`
`)+q(["input",r,q(o," "),St(c)]," ")},DirectiveDefinition:{leave:({description:i,name:r,arguments:o,repeatable:c,locations:u})=>me("",i,`
`)+"directive @"+r+(Cu(o)?me(`(
`,wi(q(o,`
`)),`
)`):me("(",q(o,", "),")"))+(c?" repeatable":"")+" on "+q(u," | ")},SchemaExtension:{leave:({directives:i,operationTypes:r})=>q(["extend schema",q(i," "),St(r)]," ")},ScalarTypeExtension:{leave:({name:i,directives:r})=>q(["extend scalar",i,q(r," ")]," ")},ObjectTypeExtension:{leave:({name:i,interfaces:r,directives:o,fields:c})=>q(["extend type",i,me("implements ",q(r," & ")),q(o," "),St(c)]," ")},InterfaceTypeExtension:{leave:({name:i,interfaces:r,directives:o,fields:c})=>q(["extend interface",i,me("implements ",q(r," & ")),q(o," "),St(c)]," ")},UnionTypeExtension:{leave:({name:i,directives:r,types:o})=>q(["extend union",i,q(r," "),me("= ",q(o," | "))]," ")},EnumTypeExtension:{leave:({name:i,directives:r,values:o})=>q(["extend enum",i,q(r," "),St(o)]," ")},InputObjectTypeExtension:{leave:({name:i,directives:r,fields:o})=>q(["extend input",i,q(r," "),St(o)]," ")}};function q(i,r=""){var o;return(o=i==null?void 0:i.filter(c=>c).join(r))!==null&&o!==void 0?o:""}function St(i){return me(`{
`,wi(q(i,`
`)),`
}`)}function me(i,r,o=""){return r!=null&&r!==""?i+r+o:""}function wi(i){return me("  ",i.replace(/\n/g,`
  `))}function Cu(i){var r;return(r=i==null?void 0:i.some(o=>o.includes(`
`)))!==null&&r!==void 0&&r}const Ou=i=>{var r,o;let c;const u=i.definitions.filter(d=>d.kind==="OperationDefinition");return u.length===1&&(c=(o=(r=u[0])==null?void 0:r.name)==null?void 0:o.value),c},No=i=>{if(typeof i=="string"){let o;try{const c=Ru(i);o=Ou(c)}catch(c){}return{query:i,operationName:o}}const r=Ou(i);return{query:Zu(i),operationName:r}};class Mn extends Error{constructor(r,o){super(`${Mn.extractMessage(r)}: ${JSON.stringify({response:r,request:o})}`),Object.setPrototypeOf(this,Mn.prototype),this.response=r,this.request=o,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Mn)}static extractMessage(r){var o,c,u;return(u=(c=(o=r.errors)==null?void 0:o[0])==null?void 0:c.message)!=null?u:`GraphQL Error (Code: ${r.status})`}}var Zo={exports:{}};(function(i,r){var o,c=typeof self!="undefined"?self:CR,u=function(){function h(){this.fetch=!1,this.DOMException=c.DOMException}return h.prototype=c,new h}();o=u,function(h){var b="URLSearchParams"in o,f="Symbol"in o&&"iterator"in Symbol,S="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch(E){return!1}}(),v="FormData"in o,I="ArrayBuffer"in o;if(I)var N=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],C=ArrayBuffer.isView||function(E){return E&&N.indexOf(Object.prototype.toString.call(E))>-1};function P(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(E))throw new TypeError("Invalid character in header field name");return E.toLowerCase()}function L(E){return typeof E!="string"&&(E=String(E)),E}function x(E){var A={next:function(){var H=E.shift();return{done:H===void 0,value:H}}};return f&&(A[Symbol.iterator]=function(){return A}),A}function w(E){this.map={},E instanceof w?E.forEach(function(A,H){this.append(H,A)},this):Array.isArray(E)?E.forEach(function(A){this.append(A[0],A[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(A){this.append(A,E[A])},this)}function X(E){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}function O(E){return new Promise(function(A,H){E.onload=function(){A(E.result)},E.onerror=function(){H(E.error)}})}function W(E){var A=new FileReader,H=O(A);return A.readAsArrayBuffer(E),H}function Y(E){if(E.slice)return E.slice(0);var A=new Uint8Array(E.byteLength);return A.set(new Uint8Array(E)),A.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(E){var A;this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:S&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:v&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:b&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():I&&S&&(A=E)&&DataView.prototype.isPrototypeOf(A)?(this._bodyArrayBuffer=Y(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):I&&(ArrayBuffer.prototype.isPrototypeOf(E)||C(E))?this._bodyArrayBuffer=Y(E):this._bodyText=E=Object.prototype.toString.call(E):this._bodyText="",this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},S&&(this.blob=function(){var E=X(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?X(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(W)}),this.text=function(){var E,A,H,F=X(this);if(F)return F;if(this._bodyBlob)return E=this._bodyBlob,A=new FileReader,H=O(A),A.readAsText(E),H;if(this._bodyArrayBuffer)return Promise.resolve(function(se){for(var k=new Uint8Array(se),B=new Array(k.length),_e=0;_e<k.length;_e++)B[_e]=String.fromCharCode(k[_e]);return B.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}w.prototype.append=function(E,A){E=P(E),A=L(A);var H=this.map[E];this.map[E]=H?H+", "+A:A},w.prototype.delete=function(E){delete this.map[P(E)]},w.prototype.get=function(E){return E=P(E),this.has(E)?this.map[E]:null},w.prototype.has=function(E){return this.map.hasOwnProperty(P(E))},w.prototype.set=function(E,A){this.map[P(E)]=L(A)},w.prototype.forEach=function(E,A){for(var H in this.map)this.map.hasOwnProperty(H)&&E.call(A,this.map[H],H,this)},w.prototype.keys=function(){var E=[];return this.forEach(function(A,H){E.push(H)}),x(E)},w.prototype.values=function(){var E=[];return this.forEach(function(A){E.push(A)}),x(E)},w.prototype.entries=function(){var E=[];return this.forEach(function(A,H){E.push([H,A])}),x(E)},f&&(w.prototype[Symbol.iterator]=w.prototype.entries);var te=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ne(E,A){var H,F,se=(A=A||{}).body;if(E instanceof ne){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,A.headers||(this.headers=new w(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,se||E._bodyInit==null||(se=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=A.credentials||this.credentials||"same-origin",!A.headers&&this.headers||(this.headers=new w(A.headers)),this.method=(H=A.method||this.method||"GET",F=H.toUpperCase(),te.indexOf(F)>-1?F:H),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&se)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(se)}function Q(E){var A=new FormData;return E.trim().split("&").forEach(function(H){if(H){var F=H.split("="),se=F.shift().replace(/\+/g," "),k=F.join("=").replace(/\+/g," ");A.append(decodeURIComponent(se),decodeURIComponent(k))}}),A}function z(E,A){A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in A?A.statusText:"OK",this.headers=new w(A.headers),this.url=A.url||"",this._initBody(E)}ne.prototype.clone=function(){return new ne(this,{body:this._bodyInit})},j.call(ne.prototype),j.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},z.error=function(){var E=new z(null,{status:0,statusText:""});return E.type="error",E};var ee=[301,302,303,307,308];z.redirect=function(E,A){if(ee.indexOf(A)===-1)throw new RangeError("Invalid status code");return new z(null,{status:A,headers:{location:E}})},h.DOMException=o.DOMException;try{new h.DOMException}catch(E){h.DOMException=function(A,H){this.message=A,this.name=H;var F=Error(A);this.stack=F.stack},h.DOMException.prototype=Object.create(Error.prototype),h.DOMException.prototype.constructor=h.DOMException}function J(E,A){return new Promise(function(H,F){var se=new ne(E,A);if(se.signal&&se.signal.aborted)return F(new h.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function B(){k.abort()}k.onload=function(){var _e,ge,pe={status:k.status,statusText:k.statusText,headers:(_e=k.getAllResponseHeaders()||"",ge=new w,_e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(nt){var Qe=nt.split(":"),$=Qe.shift().trim();if($){var ue=Qe.join(":").trim();ge.append($,ue)}}),ge)};pe.url="responseURL"in k?k.responseURL:pe.headers.get("X-Request-URL");var ae="response"in k?k.response:k.responseText;H(new z(ae,pe))},k.onerror=function(){F(new TypeError("Network request failed"))},k.ontimeout=function(){F(new TypeError("Network request failed"))},k.onabort=function(){F(new h.DOMException("Aborted","AbortError"))},k.open(se.method,se.url,!0),se.credentials==="include"?k.withCredentials=!0:se.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&S&&(k.responseType="blob"),se.headers.forEach(function(_e,ge){k.setRequestHeader(ge,_e)}),se.signal&&(se.signal.addEventListener("abort",B),k.onreadystatechange=function(){k.readyState===4&&se.signal.removeEventListener("abort",B)}),k.send(se._bodyInit===void 0?null:se._bodyInit)})}J.polyfill=!0,o.fetch||(o.fetch=J,o.Headers=w,o.Request=ne,o.Response=z),h.Headers=w,h.Request=ne,h.Response=z,h.fetch=J,Object.defineProperty(h,"__esModule",{value:!0})}({}),u.fetch.ponyfill=!0,delete u.fetch.polyfill;var d=u;(r=d.fetch).default=d.fetch,r.fetch=d.fetch,r.Headers=d.Headers,r.Request=d.Request,r.Response=d.Response,i.exports=r})(Zo,Zo.exports);var Gi=Zo.exports;const Li=lo(Gi),_N=G({__proto__:null,default:Li},[Gi]),xn=i=>{let r={};return i&&(typeof Headers!="undefined"&&i instanceof Headers||_N&&Gi.Headers&&i instanceof Gi.Headers?r=(o=>{const c={};return o.forEach((u,d)=>{c[d]=u}),c})(i):Array.isArray(i)?i.forEach(([o,c])=>{o&&c!==void 0&&(r[o]=c)}):r=i),r},wu=i=>i.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),EN=i=>r=>V(this,null,function*(){var o;const{url:c,query:u,variables:d,operationName:h,fetch:b,fetchOptions:f,middleware:S}=r,v=g({},r.headers);let I,N="";i==="POST"?(I=RN(u,d,h,f.jsonSerializer),typeof I=="string"&&(v["Content-Type"]="application/json")):N=(x=>{if(!Array.isArray(x.query)){const O=x,W=[`query=${encodeURIComponent(wu(O.query))}`];return x.variables&&W.push(`variables=${encodeURIComponent(O.jsonSerializer.stringify(O.variables))}`),O.operationName&&W.push(`operationName=${encodeURIComponent(O.operationName)}`),W.join("&")}if(x.variables!==void 0&&!Array.isArray(x.variables))throw new Error("Cannot create query with given variable type, array expected");const w=x,X=x.query.reduce((O,W,Y)=>(O.push({query:wu(W),variables:w.variables?w.jsonSerializer.stringify(w.variables[Y]):void 0}),O),[]);return`query=${encodeURIComponent(w.jsonSerializer.stringify(X))}`})({query:u,variables:d,operationName:h,jsonSerializer:(o=f.jsonSerializer)!=null?o:go});const C=g({method:i,headers:v,body:I},f);let P=c,L=C;if(S){const x=yield Promise.resolve(S(_(g({},C),{url:c,operationName:h,variables:d}))),{url:w}=x;P=w,L=Z(x,["url"])}return N&&(P=`${P}?${N}`),yield b(P,L)});class IN{constructor(r,o={}){this.url=r,this.requestConfig=o,this.rawRequest=(...c)=>V(this,null,function*(){const[u,d,h]=c,b=((w,X,O)=>w.query?w:{query:w,variables:X,requestHeaders:O,signal:void 0})(u,d,h),f=this.requestConfig,{headers:S,fetch:v=Li,method:I="POST",requestMiddleware:N,responseMiddleware:C}=f,P=Z(f,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:L}=this;b.signal!==void 0&&(P.signal=b.signal);const{operationName:x}=No(b.query);return Co({url:L,query:b.query,variables:b.variables,headers:g(g({},xn(Oo(S))),xn(b.requestHeaders)),operationName:x,fetch:v,method:I,fetchOptions:P,middleware:N}).then(w=>(C&&C(w),w)).catch(w=>{throw C&&C(w),w})})}request(r,...o){return V(this,null,function*(){const[c,u]=o,d=((x,w,X)=>x.document?x:{document:x,variables:w,requestHeaders:X,signal:void 0})(r,c,u),h=this.requestConfig,{headers:b,fetch:f=Li,method:S="POST",requestMiddleware:v,responseMiddleware:I}=h,N=Z(h,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:C}=this;d.signal!==void 0&&(N.signal=d.signal);const{query:P,operationName:L}=No(d.document);return Co({url:C,query:P,variables:d.variables,headers:g(g({},xn(Oo(b))),xn(d.requestHeaders)),operationName:L,fetch:f,method:S,fetchOptions:N,middleware:v}).then(x=>(I&&I(x),x.data)).catch(x=>{throw I&&I(x),x})})}batchRequests(r,o){var c;const u=((v,I)=>v.documents?v:{documents:v,requestHeaders:I,signal:void 0})(r,o),d=this.requestConfig,{headers:h}=d,b=Z(d,["headers"]);u.signal!==void 0&&(b.signal=u.signal);const f=u.documents.map(({document:v})=>No(v).query),S=u.documents.map(({variables:v})=>v);return Co({url:this.url,query:f,variables:S,headers:g(g({},xn(Oo(h))),xn(u.requestHeaders)),operationName:void 0,fetch:(c=this.requestConfig.fetch)!=null?c:Li,method:this.requestConfig.method||"POST",fetchOptions:b,middleware:this.requestConfig.requestMiddleware}).then(v=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(v),v.data)).catch(v=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(v),v})}setHeaders(r){return this.requestConfig.headers=r,this}setHeader(r,o){const{headers:c}=this.requestConfig;return c?c[r]=o:this.requestConfig.headers={[r]:o},this}setEndpoint(r){return this.url=r,this}}const Co=i=>V(this,null,function*(){var r,o;const{query:c,variables:u,fetchOptions:d}=i,h=EN(((r=i.method)!=null?r:"post").toUpperCase()),b=Array.isArray(i.query),f=yield h(i),S=yield NN(f,(o=d.jsonSerializer)!=null?o:go),v=Array.isArray(S)?!S.some(({data:N})=>!N):!!S.data,I=Array.isArray(S)||!S.errors||Array.isArray(S.errors)&&!S.errors.length||d.errorPolicy==="all"||d.errorPolicy==="ignore";if(f.ok&&I&&v){const N=S,C=Z(N,["errors"]),P=d.errorPolicy==="ignore"?C:S;return _(g({},b?{data:P}:P),{headers:f.headers,status:f.status})}throw new Mn(_(g({},typeof S=="string"?{error:S}:S),{status:f.status,headers:f.headers}),{query:c,variables:u})}),RN=(i,r,o,c)=>{const u=c!=null?c:go;if(!Array.isArray(i))return u.stringify({query:i,variables:r,operationName:o});if(r!==void 0&&!Array.isArray(r))throw new Error("Cannot create request body with given variable type, array expected");const d=i.reduce((h,b,f)=>(h.push({query:b,variables:r?r[f]:void 0}),h),[]);return u.stringify(d)},NN=(i,r)=>V(this,null,function*(){let o;return i.headers.forEach((c,u)=>{u.toLowerCase()==="content-type"&&(o=c)}),o&&(o.toLowerCase().startsWith("application/json")||o.toLowerCase().startsWith("application/graphql+json")||o.toLowerCase().startsWith("application/graphql-response+json"))?r.parse(yield i.text()):i.text()}),Oo=i=>typeof i=="function"?i():i;var Vi=function(){return Vi=Object.assign||function(i){for(var r,o=1,c=arguments.length;o<c;o++)for(var u in r=arguments[o])Object.prototype.hasOwnProperty.call(r,u)&&(i[u]=r[u]);return i},Vi.apply(this,arguments)},Xi=new Map,wo=new Map,Gu=!0,Wi=!1;function Lu(i){return i.replace(/[\s,]+/g," ").trim()}function ZN(i){var r=new Set,o=[];return i.definitions.forEach(function(c){if(c.kind==="FragmentDefinition"){var u=c.name.value,d=Lu((b=c.loc).source.body.substring(b.start,b.end)),h=wo.get(u);h&&!h.has(d)?Gu&&console.warn("Warning: fragment with name "+u+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):h||wo.set(u,h=new Set),h.add(d),r.has(d)||(r.add(d),o.push(c))}else o.push(c);var b}),Vi(Vi({},i),{definitions:o})}function CN(i){var r=Lu(i);if(!Xi.has(r)){var o=Ru(i,{experimentalFragmentVariables:Wi,allowLegacyFragmentVariables:Wi});if(!o||o.kind!=="Document")throw new Error("Not a valid GraphQL document.");Xi.set(r,function(c){var u=new Set(c.definitions);u.forEach(function(h){h.loc&&delete h.loc,Object.keys(h).forEach(function(b){var f=h[b];f&&typeof f=="object"&&u.add(f)})});var d=c.loc;return d&&(delete d.startToken,delete d.endToken),c}(ZN(o)))}return Xi.get(r)}function ot(i){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];typeof i=="string"&&(i=[i]);var c=i[0];return r.forEach(function(u,d){u&&u.kind==="Document"?c+=u.loc.source.body:c+=u,c+=i[d+1]}),CN(c)}var _r,ON=ot,wN=function(){Xi.clear(),wo.clear()},GN=function(){Gu=!1},LN=function(){Wi=!0},VN=function(){Wi=!1};(_r=ot||(ot={})).gql=ON,_r.resetCaches=wN,_r.disableFragmentWarnings=GN,_r.enableExperimentalFragmentVariables=LN,_r.disableExperimentalFragmentVariables=VN,ot.default=ot;const Vu=ot`
	mutation PushPayload(
		$session_secure_id: String!
		$payload_id: ID!
		$events: ReplayEventsInput!
		$messages: String!
		$resources: String!
		$web_socket_events: String!
		$errors: [ErrorObjectInput]!
		$is_beacon: Boolean
		$has_session_unloaded: Boolean
		$highlight_logs: String
	) {
		pushPayload(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			events: $events
			messages: $messages
			resources: $resources
			web_socket_events: $web_socket_events
			errors: $errors
			is_beacon: $is_beacon
			has_session_unloaded: $has_session_unloaded
			highlight_logs: $highlight_logs
		)
	}
`,XN=ot`
	mutation PushPayloadCompressed(
		$session_secure_id: String!
		$payload_id: ID!
		$data: String!
	) {
		pushPayloadCompressed(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			data: $data
		)
	}
`,WN=ot`
	mutation identifySession(
		$session_secure_id: String!
		$user_identifier: String!
		$user_object: Any
	) {
		identifySession(
			session_secure_id: $session_secure_id
			user_identifier: $user_identifier
			user_object: $user_object
		)
	}
`,kN=ot`
	mutation addSessionProperties(
		$session_secure_id: String!
		$properties_object: Any
	) {
		addSessionProperties(
			session_secure_id: $session_secure_id
			properties_object: $properties_object
		)
	}
`,PN=ot`
	mutation pushMetrics($metrics: [MetricInput]!) {
		pushMetrics(metrics: $metrics)
	}
`,AN=ot`
	mutation addSessionFeedback(
		$session_secure_id: String!
		$user_name: String
		$user_email: String
		$verbatim: String!
		$timestamp: Timestamp!
	) {
		addSessionFeedback(
			session_secure_id: $session_secure_id
			user_name: $user_name
			user_email: $user_email
			verbatim: $verbatim
			timestamp: $timestamp
		)
	}
`,MN=ot`
	mutation initializeSession(
		$session_secure_id: String!
		$organization_verbose_id: String!
		$enable_strict_privacy: Boolean!
		$privacy_setting: String!
		$enable_recording_network_contents: Boolean!
		$clientVersion: String!
		$firstloadVersion: String!
		$clientConfig: String!
		$environment: String!
		$id: String!
		$appVersion: String
		$serviceName: String!
		$client_id: String!
		$network_recording_domains: [String!]
		$disable_session_recording: Boolean
	) {
		initializeSession(
			session_secure_id: $session_secure_id
			organization_verbose_id: $organization_verbose_id
			enable_strict_privacy: $enable_strict_privacy
			enable_recording_network_contents: $enable_recording_network_contents
			clientVersion: $clientVersion
			firstloadVersion: $firstloadVersion
			clientConfig: $clientConfig
			environment: $environment
			appVersion: $appVersion
			serviceName: $serviceName
			fingerprint: $id
			client_id: $client_id
			network_recording_domains: $network_recording_domains
			disable_session_recording: $disable_session_recording
			privacy_setting: $privacy_setting
		) {
			secure_id
			project_id
		}
	}
`,xN=ot`
	query Ignore($id: ID!) {
		ignore(id: $id)
	}
`,UN=(i,r,o,c)=>i(),DN=i=>{i(window.location.href);var r=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(d){setTimeout(()=>{var h,b;try{b=JSON.parse((h=d==null?void 0:d.toString())!=null?h:"")}catch(f){return}b.type!=="track"&&b.type!=="identify"||Go(b)&&i(b)},100),r.call(this,d)};const o=d=>{if(d.key==="ajs_user_id"||d.key==="ajs_anonymous_id"||d.key==="ajs_user_traits"){const{userId:h,userTraits:b}=Xu();if(h){let f={};b&&(f=JSON.parse(b));const S={type:"identify",userId:h.toString(),traits:f};Go(S)&&i(S)}}},{userId:c,userTraits:u}=Xu();if(c){let d={};u&&(d=JSON.parse(u));const h={type:"identify",userId:c.toString(),traits:d};Go(h)&&i(h)}return window.addEventListener("storage",o),AR(({keyName:d})=>{o({key:d})}),()=>{window.removeEventListener("storage",o),XMLHttpRequest.prototype.send=r}},Xu=()=>({userId:st("ajs_user_id"),userTraits:st("ajs_user_traits"),anonymousId:st("ajs_anonymous_id")}),Go=i=>{if(!i)return!1;let r="";try{r=JSON.stringify(i)}catch(u){return!1}const o=FN(r),c=st(Ue.SEGMENT_LAST_SENT_HASH_KEY);return(c===void 0||o!==c)&&(gt(Ue.SEGMENT_LAST_SENT_HASH_KEY,o),!0)},FN=i=>{var r=0,o=i.length,c=0;if(o>0)for(;c<o;)r=(r<<5)-r+i.charCodeAt(c++)|0;return r.toString()};function Wu(i,r){return YN(i)}function ku(i){if(i.id.length)return`#${i.id}`;if(i.classList.length){let r=[];for(const o of i.classList)r.push(`.${o}`);return`${i.nodeName.toLowerCase()}${r.join(",")}`}return i.nodeName.toLowerCase()}const YN=i=>{let r="";const o=i.getAttribute("class"),c=i.getAttribute("id");return c&&(r=r.concat(Pu(c,"#"))),o&&(r=r.concat(Pu(o,"."))),r===""&&(r=r.concat(i.tagName.toLowerCase())),r},Pu=(i,r)=>`${r}${i.trim().split(" ").join(r)}`,HN=(i,r)=>{const o=function(b){typeof b!="string"&&(b="");const f=(b=b.replace(/\s/g,"")).split(",");let S=f.lastIndexOf("");for(;S>=0;)f[S-1]+=",",f.splice(S,1),S=f.lastIndexOf("");return f}(i);let c=[];for(let b=0;b<o.length;b++){let f=o[b].split("+");c=[],f.length>1&&(c=BN(Mu,f)),f=f[f.length-1],f=f==="*"?"*":KN(f),f in Zt||(Zt[f]=[]),Zt[f].push({mods:c,shortcut:o[b],key:o[b],method:r,keyup:!1,keydown:!0,scope:"all",splitKey:"+"})}var u,d,h;u=document,d="keydown",h=b=>{(function(f){const S=Zt["*"];let v=f.keyCode||f.which||f.charCode;if(v!==93&&v!==224||(v=91),et.indexOf(v)===-1&&v!==229&&et.push(v),["ctrlKey","altKey","shiftKey","metaKey"].forEach(I=>{const N=Au[I];f[I]&&et.indexOf(N)===-1?et.push(N):!f[I]&&et.indexOf(N)>-1?et.splice(et.indexOf(N),1):I==="metaKey"&&f[I]&&et.length===3&&(f.ctrlKey||f.shiftKey||f.altKey||(et=et.slice(et.indexOf(N))))}),!(v in tt)||(tt[v]=!0,S)){for(const I in tt)Object.prototype.hasOwnProperty.call(tt,I)&&(tt[I]=f[Au[I]]);if(f.getModifierState&&(!f.altKey||f.ctrlKey)&&f.getModifierState("AltGraph")&&(et.indexOf(17)===-1&&et.push(17),et.indexOf(18)===-1&&et.push(18),tt[17]=!0,tt[18]=!0),v in Zt){for(let I=0;I<Zt[v].length;I++)if((f.type==="keydown"&&Zt[v][I].keydown||f.type==="keyup"&&Zt[v][I].keyup)&&Zt[v][I].key){const N=Zt[v][I];zN(f,N,"all")}}}})(b)},u.addEventListener?u.addEventListener(d,h,!1):u.attachEvent&&u.attachEvent(`on${d}`,()=>{h(window.event)})};let et=[];const Zt={},Lo=typeof navigator!="undefined"&&navigator.userAgent.toLowerCase().indexOf("firefox")>0,JN={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":Lo?173:189,"=":Lo?61:187,";":Lo?59:186,"'":222,"[":219,"]":221,"\\":220},Au={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},tt={16:!1,18:!1,17:!1,91:!1},Mu={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},KN=i=>JN[i.toLowerCase()]||Mu[i.toLowerCase()]||i.toUpperCase().charCodeAt(0);function BN(i,r){const o=r.slice(0,r.length-1);for(let c=0;c<o.length;c++)o[c]=i[o[c].toLowerCase()];return o}function zN(i,r,o){let c;if(r.scope===o||r.scope==="all"){c=r.mods.length>0;for(const u in tt)Object.prototype.hasOwnProperty.call(tt,u)&&(!tt[u]&&r.mods.indexOf(+u)>-1||tt[u]&&r.mods.indexOf(+u)===-1)&&(c=!1);(r.mods.length!==0||tt[16]||tt[18]||tt[17]||tt[91])&&!c&&r.shortcut!=="*"||r.method(i,r)===!1&&(i.preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation&&i.stopPropagation(),i.cancelBubble&&(i.cancelBubble=!0))}}var zt,Er,xu,ki,Vo,Uu=-1,pn=function(i){addEventListener("pageshow",function(r){r.persisted&&(Uu=r.timeStamp,i(r))},!0)},Xo=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Pi=function(){var i=Xo();return i&&i.activationStart||0},dt=function(i,r){var o=Xo(),c="navigate";return Uu>=0?c="back-forward-cache":o&&(document.prerendering||Pi()>0?c="prerender":document.wasDiscarded?c="restore":o.type&&(c=o.type.replace(/_/g,"-"))),{name:i,value:r===void 0?-1:r,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:c}},Un=function(i,r,o){try{if(PerformanceObserver.supportedEntryTypes.includes(i)){var c=new PerformanceObserver(function(u){Promise.resolve().then(function(){r(u.getEntries())})});return c.observe(Object.assign({type:i,buffered:!0},o||{})),c}}catch(u){}},pt=function(i,r,o,c){var u,d;return function(h){var b,f;r.value>=0&&(h||c)&&((d=r.value-(u||0))||u===void 0)&&(u=r.value,r.delta=d,r.rating=(b=r.value)>(f=o)[1]?"poor":b>f[0]?"needs-improvement":"good",i(r))}},Wo=function(i){requestAnimationFrame(function(){return requestAnimationFrame(function(){return i()})})},Ai=function(i){var r=function(o){o.type!=="pagehide"&&document.visibilityState!=="hidden"||i(o)};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},ko=function(i){var r=!1;return function(o){r||(i(o),r=!0)}},Dn=-1,Du=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Mi=function(i){document.visibilityState==="hidden"&&Dn>-1&&(Dn=i.type==="visibilitychange"?i.timeStamp:0,jN())},Fu=function(){addEventListener("visibilitychange",Mi,!0),addEventListener("prerenderingchange",Mi,!0)},jN=function(){removeEventListener("visibilitychange",Mi,!0),removeEventListener("prerenderingchange",Mi,!0)},Po=function(){return Dn<0&&(Dn=Du(),Fu(),pn(function(){setTimeout(function(){Dn=Du(),Fu()},0)})),{get firstHiddenTime(){return Dn}}},Ir=function(i){document.prerendering?addEventListener("prerenderingchange",function(){return i()},!0):i()},Yu=[1800,3e3],Hu=function(i,r){r=r||{},Ir(function(){var o,c=Po(),u=dt("FCP"),d=Un("paint",function(h){h.forEach(function(b){b.name==="first-contentful-paint"&&(d.disconnect(),b.startTime<c.firstHiddenTime&&(u.value=Math.max(b.startTime-Pi(),0),u.entries.push(b),o(!0)))})});d&&(o=pt(i,u,Yu,r.reportAllChanges),pn(function(h){u=dt("FCP"),o=pt(i,u,Yu,r.reportAllChanges),Wo(function(){u.value=performance.now()-h.timeStamp,o(!0)})}))})},Ju=[.1,.25],Rr={passive:!0,capture:!0},QN=new Date,Ku=function(i,r){zt||(zt=r,Er=i,xu=new Date,zu(removeEventListener),Bu())},Bu=function(){if(Er>=0&&Er<xu-QN){var i={entryType:"first-input",name:zt.type,target:zt.target,cancelable:zt.cancelable,startTime:zt.timeStamp,processingStart:zt.timeStamp+Er};ki.forEach(function(r){r(i)}),ki=[]}},$N=function(i){if(i.cancelable){var r=(i.timeStamp>1e12?new Date:performance.now())-i.timeStamp;i.type=="pointerdown"?function(o,c){var u=function(){Ku(o,c),h()},d=function(){h()},h=function(){removeEventListener("pointerup",u,Rr),removeEventListener("pointercancel",d,Rr)};addEventListener("pointerup",u,Rr),addEventListener("pointercancel",d,Rr)}(r,i):Ku(r,i)}},zu=function(i){["mousedown","keydown","touchstart","pointerdown"].forEach(function(r){return i(r,$N,Rr)})},ju=[100,300],Qu=0,Ao=1/0,xi=0,qN=function(i){i.forEach(function(r){r.interactionId&&(Ao=Math.min(Ao,r.interactionId),xi=Math.max(xi,r.interactionId),Qu=xi?(xi-Ao)/7+1:0)})},$u=function(){return Vo?Qu:performance.interactionCount||0},qu=[200,500],ed=0,td=function(){return $u()-ed},Ct=[],Mo={},nd=function(i){var r=Ct[Ct.length-1],o=Mo[i.interactionId];if(o||Ct.length<10||i.duration>r.latency){if(o)o.entries.push(i),o.latency=Math.max(o.latency,i.duration);else{var c={id:i.interactionId,latency:i.duration,entries:[i]};Mo[c.id]=c,Ct.push(c)}Ct.sort(function(u,d){return d.latency-u.latency}),Ct.splice(10).forEach(function(u){delete Mo[u.id]})}},eZ=function(i,r){r=r||{},Ir(function(){var o;"interactionCount"in performance||Vo||(Vo=Un("event",qN,{type:"event",buffered:!0,durationThreshold:0}));var c,u=dt("INP"),d=function(b){b.forEach(function(v){v.interactionId&&nd(v),v.entryType==="first-input"&&!Ct.some(function(I){return I.entries.some(function(N){return v.duration===N.duration&&v.startTime===N.startTime})})&&nd(v)});var f,S=(f=Math.min(Ct.length-1,Math.floor(td()/50)),Ct[f]);S&&S.latency!==u.value&&(u.value=S.latency,u.entries=S.entries,c())},h=Un("event",d,{durationThreshold:(o=r.durationThreshold)!==null&&o!==void 0?o:40});c=pt(i,u,qu,r.reportAllChanges),h&&("interactionId"in PerformanceEventTiming.prototype&&h.observe({type:"first-input",buffered:!0}),Ai(function(){d(h.takeRecords()),u.value<0&&td()>0&&(u.value=0,u.entries=[]),c(!0)}),pn(function(){Ct=[],ed=$u(),u=dt("INP"),c=pt(i,u,qu,r.reportAllChanges)}))})},rd=[2500,4e3],xo={},id=[800,1800],tZ=function i(r){document.prerendering?Ir(function(){return i(r)}):document.readyState!=="complete"?addEventListener("load",function(){return i(r)},!0):setTimeout(r,0)},nZ=function(i,r){r=r||{};var o=dt("TTFB"),c=pt(i,o,id,r.reportAllChanges);tZ(function(){var u=Xo();if(u){var d=u.responseStart;if(d<=0||d>performance.now())return;o.value=Math.max(d-Pi(),0),o.entries=[u],c(!0),pn(function(){o=dt("TTFB",0),(c=pt(i,o,id,r.reportAllChanges))(!0)})}})};const rZ=i=>{var r,o;return r=i,o=o||{},Hu(ko(function(){var c,u=dt("CLS",0),d=0,h=[],b=function(S){S.forEach(function(v){if(!v.hadRecentInput){var I=h[0],N=h[h.length-1];d&&v.startTime-N.startTime<1e3&&v.startTime-I.startTime<5e3?(d+=v.value,h.push(v)):(d=v.value,h=[v])}}),d>u.value&&(u.value=d,u.entries=h,c())},f=Un("layout-shift",b);f&&(c=pt(r,u,Ju,o.reportAllChanges),Ai(function(){b(f.takeRecords()),c(!0)}),pn(function(){d=0,u=dt("CLS",0),c=pt(r,u,Ju,o.reportAllChanges),Wo(function(){return c()})}),setTimeout(c,0))})),Hu(i),function(c,u){u=u||{},Ir(function(){var d,h=Po(),b=dt("FID"),f=function(I){I.startTime<h.firstHiddenTime&&(b.value=I.processingStart-I.startTime,b.entries.push(I),d(!0))},S=function(I){I.forEach(f)},v=Un("first-input",S);d=pt(c,b,ju,u.reportAllChanges),v&&Ai(ko(function(){S(v.takeRecords()),v.disconnect()})),v&&pn(function(){var I;b=dt("FID"),d=pt(c,b,ju,u.reportAllChanges),ki=[],Er=-1,zt=null,zu(addEventListener),I=f,ki.push(I),Bu()})})}(i),function(c,u){u=u||{},Ir(function(){var d,h=Po(),b=dt("LCP"),f=function(I){var N=I[I.length-1];N&&N.startTime<h.firstHiddenTime&&(b.value=Math.max(N.startTime-Pi(),0),b.entries=[N],d())},S=Un("largest-contentful-paint",f);if(S){d=pt(c,b,rd,u.reportAllChanges);var v=ko(function(){xo[b.id]||(f(S.takeRecords()),S.disconnect(),xo[b.id]=!0,d(!0))});["keydown","click"].forEach(function(I){addEventListener(I,function(){return setTimeout(v,0)},!0)}),Ai(v),pn(function(I){b=dt("LCP"),d=pt(c,b,rd,u.reportAllChanges),Wo(function(){b.value=performance.now()-I.timeStamp,xo[b.id]=!0,d(!0)})})}})}(i),nZ(i),eZ(i),()=>{}},Uo=i=>i/Math.pow(1e3,2),iZ=i=>1024*i,sd=typeof window!="undefined"&&"performance"in window&&"memory"in performance?performance:{memory:{}},Nr="highlightLogs",sZ=i=>{if(!i)return;let r=st(Nr)||"";r&&(r.startsWith(i)?(r=r.slice(i.length),gt(Nr,r)):(o=>{let c=st(Nr)||"";c=c+"["+new Date().getTime()+"] "+o+`
`,gt(Nr,c)})("Unable to clear logs "+i.replace(`
`," ")+" from "+r.replace(`
`," ")))},Ui=()=>{var i;const r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var o="";const c=typeof window!="undefined"&&((i=window.crypto)==null?void 0:i.getRandomValues),u=new Uint32Array(28);c&&window.crypto.getRandomValues(u);for(let d=0;d<28;d++)o+=r.charAt(c?u[d]%62:Math.floor(62*Math.random()));return o},od="dmFyIF9fZGVmUHJvcD1PYmplY3QuZGVmaW5lUHJvcGVydHksX19kZWZQcm9wcz1PYmplY3QuZGVmaW5lUHJvcGVydGllcyxfX2dldE93blByb3BEZXNjcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyxfX2dldE93blByb3BTeW1ib2xzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsX19oYXNPd25Qcm9wPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksX19wcm9wSXNFbnVtPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsX19kZWZOb3JtYWxQcm9wPShlLHQsbik9PnQgaW4gZT9fX2RlZlByb3AoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpufSk6ZVt0XT1uLF9fc3ByZWFkVmFsdWVzPShlLHQpPT57Zm9yKHZhciBuIGluIHR8fCh0PXt9KSlfX2hhc093blByb3AuY2FsbCh0LG4pJiZfX2RlZk5vcm1hbFByb3AoZSxuLHRbbl0pO2lmKF9fZ2V0T3duUHJvcFN5bWJvbHMpZm9yKHZhciBuIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHModCkpX19wcm9wSXNFbnVtLmNhbGwodCxuKSYmX19kZWZOb3JtYWxQcm9wKGUsbix0W25dKTtyZXR1cm4gZX0sX19zcHJlYWRQcm9wcz0oZSx0KT0+X19kZWZQcm9wcyhlLF9fZ2V0T3duUHJvcERlc2NzKHQpKSxfX29ialJlc3Q9KGUsdCk9Pnt2YXIgbj17fTtmb3IodmFyIHIgaW4gZSlfX2hhc093blByb3AuY2FsbChlLHIpJiZ0LmluZGV4T2Yocik8MCYmKG5bcl09ZVtyXSk7aWYobnVsbCE9ZSYmX19nZXRPd25Qcm9wU3ltYm9scylmb3IodmFyIHIgb2YgX19nZXRPd25Qcm9wU3ltYm9scyhlKSl0LmluZGV4T2Yocik8MCYmX19wcm9wSXNFbnVtLmNhbGwoZSxyKSYmKG5bcl09ZVtyXSk7cmV0dXJuIG59LF9fcHVibGljRmllbGQ9KGUsdCxuKT0+KF9fZGVmTm9ybWFsUHJvcChlLCJzeW1ib2wiIT10eXBlb2YgdD90KyIiOnQsbiksbiksX19hc3luYz0oZSx0LG4pPT5uZXcgUHJvbWlzZSgoKHIsaSk9Pnt2YXIgcz1lPT57dHJ5e2Eobi5uZXh0KGUpKX1jYXRjaCh0KXtpKHQpfX0sbz1lPT57dHJ5e2Eobi50aHJvdyhlKSl9Y2F0Y2godCl7aSh0KX19LGE9ZT0+ZS5kb25lP3IoZS52YWx1ZSk6UHJvbWlzZS5yZXNvbHZlKGUudmFsdWUpLnRoZW4ocyxvKTthKChuPW4uYXBwbHkoZSx0KSkubmV4dCgpKX0pKTshZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQpe3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3QmJiJzdHJpbmciIT10eXBlb2YgdCYmIUFycmF5LmlzQXJyYXkodCkmJk9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKG4pe2lmKCJkZWZhdWx0IiE9PW4mJiEobiBpbiBlKSl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4sci5nZXQ/cjp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX19KSl9KSksT2JqZWN0LmZyZWV6ZShlKX12YXIgdD0oZT0+KGVbZS5Jbml0aWFsaXplPTBdPSJJbml0aWFsaXplIixlW2UuQXN5bmNFdmVudHM9MV09IkFzeW5jRXZlbnRzIixlW2UuSWRlbnRpZnk9Ml09IklkZW50aWZ5IixlW2UuUHJvcGVydGllcz0zXT0iUHJvcGVydGllcyIsZVtlLk1ldHJpY3M9NF09Ik1ldHJpY3MiLGVbZS5GZWVkYmFjaz01XT0iRmVlZGJhY2siLGVbZS5DdXN0b21FdmVudD02XT0iQ3VzdG9tRXZlbnQiLGUpKSh0fHx7fSksbj0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHQiKT9lLmRlZmF1bHQ6ZX12YXIgaT17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuPVtdLHI9W107cmV0dXJuIG51bGw9PXQmJih0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5bMF09PT10PyJbQ2lyY3VsYXIgfl0iOiJbQ2lyY3VsYXIgfi4iK3Iuc2xpY2UoMCxuLmluZGV4T2YodCkpLmpvaW4oIi4iKSsiXSJ9KSxmdW5jdGlvbihpLHMpe2lmKG4ubGVuZ3RoPjApe3ZhciBvPW4uaW5kZXhPZih0aGlzKTt+bz9uLnNwbGljZShvKzEpOm4ucHVzaCh0aGlzKSx+bz9yLnNwbGljZShvLDEvMCxpKTpyLnB1c2goaSksfm4uaW5kZXhPZihzKSYmKHM9dC5jYWxsKHRoaXMsaSxzKSl9ZWxzZSBuLnB1c2gocyk7cmV0dXJuIG51bGw9PWU/czplLmNhbGwodGhpcyxpLHMpfX0oZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiBKU09OLnN0cmluZ2lmeShlLG4odCxpKSxyKX0pLmdldFNlcmlhbGl6ZT1ufShpKTt2YXIgcz1yKGkuZXhwb3J0cyksbz1mdW5jdGlvbigpe3JldHVybiBvPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEscj1hcmd1bWVudHMubGVuZ3RoO248cjtuKyspZm9yKHZhciBpIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGkpJiYoZVtpXT10W2ldKTtyZXR1cm4gZX0sby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIGEoZSx0KXtpZighQm9vbGVhbihlKSl0aHJvdyBuZXcgRXJyb3IodCl9ZnVuY3Rpb24gYyhlLHQpe2lmKCFCb29sZWFuKGUpKXRocm93IG5ldyBFcnJvcihudWxsIT10P3Q6IlVuZXhwZWN0ZWQgaW52YXJpYW50IHRyaWdnZXJlZC4iKX1jb25zdCBsPS9cclxufFtcblxyXS9nO2Z1bmN0aW9uIHUoZSx0KXtsZXQgbj0wLHI9MTtmb3IoY29uc3QgaSBvZiBlLmJvZHkubWF0Y2hBbGwobCkpe2lmKCJudW1iZXIiPT10eXBlb2YgaS5pbmRleHx8YyghMSksaS5pbmRleD49dClicmVhaztuPWkuaW5kZXgraVswXS5sZW5ndGgscis9MX1yZXR1cm57bGluZTpyLGNvbHVtbjp0KzEtbn19ZnVuY3Rpb24gZChlLHQpe2NvbnN0IG49ZS5sb2NhdGlvbk9mZnNldC5jb2x1bW4tMSxyPSIiLnBhZFN0YXJ0KG4pK2UuYm9keSxpPXQubGluZS0xLHM9ZS5sb2NhdGlvbk9mZnNldC5saW5lLTEsbz10LmxpbmUrcyxhPTE9PT10LmxpbmU/bjowLGM9dC5jb2x1bW4rYSxsPWAke2UubmFtZX06JHtvfToke2N9XG5gLHU9ci5zcGxpdCgvXHJcbnxbXG5ccl0vZyksZD11W2ldO2lmKGQubGVuZ3RoPjEyMCl7Y29uc3QgZT1NYXRoLmZsb29yKGMvODApLHQ9YyU4MCxuPVtdO2ZvcihsZXQgcj0wO3I8ZC5sZW5ndGg7cis9ODApbi5wdXNoKGQuc2xpY2UocixyKzgwKSk7cmV0dXJuIGwrcChbW2Ake299IHxgLG5bMF1dLC4uLm4uc2xpY2UoMSxlKzEpLm1hcCgoZT0+WyJ8IixlXSkpLFsifCIsIl4iLnBhZFN0YXJ0KHQpXSxbInwiLG5bZSsxXV1dKX1yZXR1cm4gbCtwKFtbby0xKyIgfCIsdVtpLTFdXSxbYCR7b30gfGAsZF0sWyJ8IiwiXiIucGFkU3RhcnQoYyldLFtgJHtvKzF9IHxgLHVbaSsxXV1dKX1mdW5jdGlvbiBwKGUpe2NvbnN0IHQ9ZS5maWx0ZXIoKChbZSx0XSk9PnZvaWQgMCE9PXQpKSxuPU1hdGgubWF4KC4uLnQubWFwKCgoW2VdKT0+ZS5sZW5ndGgpKSk7cmV0dXJuIHQubWFwKCgoW2UsdF0pPT5lLnBhZFN0YXJ0KG4pKyh0PyIgIit0OiIiKSkpLmpvaW4oIlxuIil9Y2xhc3MgaCBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUsLi4udCl7dmFyIG4scixpO2NvbnN0e25vZGVzOnMsc291cmNlOm8scG9zaXRpb25zOmEscGF0aDpjLG9yaWdpbmFsRXJyb3I6bCxleHRlbnNpb25zOmR9PWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZVswXTtyZXR1cm4gbnVsbD09dHx8ImtpbmQiaW4gdHx8Imxlbmd0aCJpbiB0P3tub2Rlczp0LHNvdXJjZTplWzFdLHBvc2l0aW9uczplWzJdLHBhdGg6ZVszXSxvcmlnaW5hbEVycm9yOmVbNF0sZXh0ZW5zaW9uczplWzVdfTp0fSh0KTtzdXBlcihlKSx0aGlzLm5hbWU9IkdyYXBoUUxFcnJvciIsdGhpcy5wYXRoPW51bGwhPWM/Yzp2b2lkIDAsdGhpcy5vcmlnaW5hbEVycm9yPW51bGwhPWw/bDp2b2lkIDAsdGhpcy5ub2Rlcz1mKEFycmF5LmlzQXJyYXkocyk/czpzP1tzXTp2b2lkIDApO2NvbnN0IHA9ZihudWxsPT09KG49dGhpcy5ub2Rlcyl8fHZvaWQgMD09PW4/dm9pZCAwOm4ubWFwKChlPT5lLmxvYykpLmZpbHRlcigoZT0+bnVsbCE9ZSkpKTt0aGlzLnNvdXJjZT1udWxsIT1vP286bnVsbD09cHx8bnVsbD09PShyPXBbMF0pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnNvdXJjZSx0aGlzLnBvc2l0aW9ucz1udWxsIT1hP2E6bnVsbD09cD92b2lkIDA6cC5tYXAoKGU9PmUuc3RhcnQpKSx0aGlzLmxvY2F0aW9ucz1hJiZvP2EubWFwKChlPT51KG8sZSkpKTpudWxsPT1wP3ZvaWQgMDpwLm1hcCgoZT0+dShlLnNvdXJjZSxlLnN0YXJ0KSkpO2NvbnN0IHk9Im9iamVjdCI9PXR5cGVvZihtPW51bGw9PWw/dm9pZCAwOmwuZXh0ZW5zaW9ucykmJm51bGwhPT1tP251bGw9PWw/dm9pZCAwOmwuZXh0ZW5zaW9uczp2b2lkIDA7dmFyIG07dGhpcy5leHRlbnNpb25zPW51bGwhPT0oaT1udWxsIT1kP2Q6eSkmJnZvaWQgMCE9PWk/aTpPYmplY3QuY3JlYXRlKG51bGwpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse21lc3NhZ2U6e3dyaXRhYmxlOiEwLGVudW1lcmFibGU6ITB9LG5hbWU6e2VudW1lcmFibGU6ITF9LG5vZGVzOntlbnVtZXJhYmxlOiExfSxzb3VyY2U6e2VudW1lcmFibGU6ITF9LHBvc2l0aW9uczp7ZW51bWVyYWJsZTohMX0sb3JpZ2luYWxFcnJvcjp7ZW51bWVyYWJsZTohMX19KSxudWxsIT1sJiZsLnN0YWNrP09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJzdGFjayIse3ZhbHVlOmwuc3RhY2ssd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSk6RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxoKTpPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZTpFcnJvcigpLnN0YWNrLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIkdyYXBoUUxFcnJvciJ9dG9TdHJpbmcoKXtsZXQgZT10aGlzLm1lc3NhZ2U7aWYodGhpcy5ub2Rlcylmb3IoY29uc3QgbiBvZiB0aGlzLm5vZGVzKW4ubG9jJiYoZSs9IlxuXG4iK2QoKHQ9bi5sb2MpLnNvdXJjZSx1KHQuc291cmNlLHQuc3RhcnQpKSk7ZWxzZSBpZih0aGlzLnNvdXJjZSYmdGhpcy5sb2NhdGlvbnMpZm9yKGNvbnN0IG4gb2YgdGhpcy5sb2NhdGlvbnMpZSs9IlxuXG4iK2QodGhpcy5zb3VyY2Usbik7dmFyIHQ7cmV0dXJuIGV9dG9KU09OKCl7Y29uc3QgZT17bWVzc2FnZTp0aGlzLm1lc3NhZ2V9O3JldHVybiBudWxsIT10aGlzLmxvY2F0aW9ucyYmKGUubG9jYXRpb25zPXRoaXMubG9jYXRpb25zKSxudWxsIT10aGlzLnBhdGgmJihlLnBhdGg9dGhpcy5wYXRoKSxudWxsIT10aGlzLmV4dGVuc2lvbnMmJk9iamVjdC5rZXlzKHRoaXMuZXh0ZW5zaW9ucykubGVuZ3RoPjAmJihlLmV4dGVuc2lvbnM9dGhpcy5leHRlbnNpb25zKSxlfX1mdW5jdGlvbiBmKGUpe3JldHVybiB2b2lkIDA9PT1lfHwwPT09ZS5sZW5ndGg/dm9pZCAwOmV9ZnVuY3Rpb24geShlLHQsbil7cmV0dXJuIG5ldyBoKGBTeW50YXggRXJyb3I6ICR7bn1gLHtzb3VyY2U6ZSxwb3NpdGlvbnM6W3RdfSl9Y2xhc3MgbXtjb25zdHJ1Y3RvcihlLHQsbil7dGhpcy5zdGFydD1lLnN0YXJ0LHRoaXMuZW5kPXQuZW5kLHRoaXMuc3RhcnRUb2tlbj1lLHRoaXMuZW5kVG9rZW49dCx0aGlzLnNvdXJjZT1ufWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIkxvY2F0aW9uIn10b0pTT04oKXtyZXR1cm57c3RhcnQ6dGhpcy5zdGFydCxlbmQ6dGhpcy5lbmR9fX1jbGFzcyB2e2NvbnN0cnVjdG9yKGUsdCxuLHIsaSxzKXt0aGlzLmtpbmQ9ZSx0aGlzLnN0YXJ0PXQsdGhpcy5lbmQ9bix0aGlzLmxpbmU9cix0aGlzLmNvbHVtbj1pLHRoaXMudmFsdWU9cyx0aGlzLnByZXY9bnVsbCx0aGlzLm5leHQ9bnVsbH1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJUb2tlbiJ9dG9KU09OKCl7cmV0dXJue2tpbmQ6dGhpcy5raW5kLHZhbHVlOnRoaXMudmFsdWUsbGluZTp0aGlzLmxpbmUsY29sdW1uOnRoaXMuY29sdW1ufX19Y29uc3QgXz17TmFtZTpbXSxEb2N1bWVudDpbImRlZmluaXRpb25zIl0sT3BlcmF0aW9uRGVmaW5pdGlvbjpbIm5hbWUiLCJ2YXJpYWJsZURlZmluaXRpb25zIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLFZhcmlhYmxlRGVmaW5pdGlvbjpbInZhcmlhYmxlIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsImRpcmVjdGl2ZXMiXSxWYXJpYWJsZTpbIm5hbWUiXSxTZWxlY3Rpb25TZXQ6WyJzZWxlY3Rpb25zIl0sRmllbGQ6WyJhbGlhcyIsIm5hbWUiLCJhcmd1bWVudHMiLCJkaXJlY3RpdmVzIiwic2VsZWN0aW9uU2V0Il0sQXJndW1lbnQ6WyJuYW1lIiwidmFsdWUiXSxGcmFnbWVudFNwcmVhZDpbIm5hbWUiLCJkaXJlY3RpdmVzIl0sSW5saW5lRnJhZ21lbnQ6WyJ0eXBlQ29uZGl0aW9uIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLEZyYWdtZW50RGVmaW5pdGlvbjpbIm5hbWUiLCJ2YXJpYWJsZURlZmluaXRpb25zIiwidHlwZUNvbmRpdGlvbiIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxJbnRWYWx1ZTpbXSxGbG9hdFZhbHVlOltdLFN0cmluZ1ZhbHVlOltdLEJvb2xlYW5WYWx1ZTpbXSxOdWxsVmFsdWU6W10sRW51bVZhbHVlOltdLExpc3RWYWx1ZTpbInZhbHVlcyJdLE9iamVjdFZhbHVlOlsiZmllbGRzIl0sT2JqZWN0RmllbGQ6WyJuYW1lIiwidmFsdWUiXSxEaXJlY3RpdmU6WyJuYW1lIiwiYXJndW1lbnRzIl0sTmFtZWRUeXBlOlsibmFtZSJdLExpc3RUeXBlOlsidHlwZSJdLE5vbk51bGxUeXBlOlsidHlwZSJdLFNjaGVtYURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsImRpcmVjdGl2ZXMiLCJvcGVyYXRpb25UeXBlcyJdLE9wZXJhdGlvblR5cGVEZWZpbml0aW9uOlsidHlwZSJdLFNjYWxhclR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyJdLE9iamVjdFR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiaW50ZXJmYWNlcyIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXSxGaWVsZERlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJhcmd1bWVudHMiLCJ0eXBlIiwiZGlyZWN0aXZlcyJdLElucHV0VmFsdWVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsImRpcmVjdGl2ZXMiXSxJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sVW5pb25UeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiLCJ0eXBlcyJdLEVudW1UeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiLCJ2YWx1ZXMiXSxFbnVtVmFsdWVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyJdLElucHV0T2JqZWN0VHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sRGlyZWN0aXZlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImFyZ3VtZW50cyIsImxvY2F0aW9ucyJdLFNjaGVtYUV4dGVuc2lvbjpbImRpcmVjdGl2ZXMiLCJvcGVyYXRpb25UeXBlcyJdLFNjYWxhclR5cGVFeHRlbnNpb246WyJuYW1lIiwiZGlyZWN0aXZlcyJdLE9iamVjdFR5cGVFeHRlbnNpb246WyJuYW1lIiwiaW50ZXJmYWNlcyIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXSxJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sVW5pb25UeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiLCJ0eXBlcyJdLEVudW1UeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiLCJ2YWx1ZXMiXSxJbnB1dE9iamVjdFR5cGVFeHRlbnNpb246WyJuYW1lIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdfSxnPW5ldyBTZXQoT2JqZWN0LmtleXMoXykpO2Z1bmN0aW9uIEUoZSl7Y29uc3QgdD1udWxsPT1lP3ZvaWQgMDplLmtpbmQ7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiZnLmhhcyh0KX12YXIgVCxiLE4sSSxPLEEseCxTO2Z1bmN0aW9uIEQoZSl7cmV0dXJuIDk9PT1lfHwzMj09PWV9ZnVuY3Rpb24gdyhlKXtyZXR1cm4gZT49NDgmJmU8PTU3fWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGU+PTk3JiZlPD0xMjJ8fGU+PTY1JiZlPD05MH1mdW5jdGlvbiBDKGUpe3JldHVybiBrKGUpfHw5NT09PWV9ZnVuY3Rpb24gUChlKXtyZXR1cm4gayhlKXx8dyhlKXx8OTU9PT1lfWZ1bmN0aW9uIFIoZSl7dmFyIHQ7bGV0IG49TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIscj1udWxsLGk9LTE7Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDsrK28pe3ZhciBzO2NvbnN0IHQ9ZVtvXSxhPUwodCk7YSE9PXQubGVuZ3RoJiYocj1udWxsIT09KHM9cikmJnZvaWQgMCE9PXM/czpvLGk9bywwIT09byYmYTxuJiYobj1hKSl9cmV0dXJuIGUubWFwKCgoZSx0KT0+MD09PXQ/ZTplLnNsaWNlKG4pKSkuc2xpY2UobnVsbCE9PSh0PXIpJiZ2b2lkIDAhPT10P3Q6MCxpKzEpfWZ1bmN0aW9uIEwoZSl7bGV0IHQ9MDtmb3IoO3Q8ZS5sZW5ndGgmJkQoZS5jaGFyQ29kZUF0KHQpKTspKyt0O3JldHVybiB0fShiPVR8fChUPXt9KSkuUVVFUlk9InF1ZXJ5IixiLk1VVEFUSU9OPSJtdXRhdGlvbiIsYi5TVUJTQ1JJUFRJT049InN1YnNjcmlwdGlvbiIsKEk9Tnx8KE49e30pKS5RVUVSWT0iUVVFUlkiLEkuTVVUQVRJT049Ik1VVEFUSU9OIixJLlNVQlNDUklQVElPTj0iU1VCU0NSSVBUSU9OIixJLkZJRUxEPSJGSUVMRCIsSS5GUkFHTUVOVF9ERUZJTklUSU9OPSJGUkFHTUVOVF9ERUZJTklUSU9OIixJLkZSQUdNRU5UX1NQUkVBRD0iRlJBR01FTlRfU1BSRUFEIixJLklOTElORV9GUkFHTUVOVD0iSU5MSU5FX0ZSQUdNRU5UIixJLlZBUklBQkxFX0RFRklOSVRJT049IlZBUklBQkxFX0RFRklOSVRJT04iLEkuU0NIRU1BPSJTQ0hFTUEiLEkuU0NBTEFSPSJTQ0FMQVIiLEkuT0JKRUNUPSJPQkpFQ1QiLEkuRklFTERfREVGSU5JVElPTj0iRklFTERfREVGSU5JVElPTiIsSS5BUkdVTUVOVF9ERUZJTklUSU9OPSJBUkdVTUVOVF9ERUZJTklUSU9OIixJLklOVEVSRkFDRT0iSU5URVJGQUNFIixJLlVOSU9OPSJVTklPTiIsSS5FTlVNPSJFTlVNIixJLkVOVU1fVkFMVUU9IkVOVU1fVkFMVUUiLEkuSU5QVVRfT0JKRUNUPSJJTlBVVF9PQkpFQ1QiLEkuSU5QVVRfRklFTERfREVGSU5JVElPTj0iSU5QVVRfRklFTERfREVGSU5JVElPTiIsKEE9T3x8KE89e30pKS5OQU1FPSJOYW1lIixBLkRPQ1VNRU5UPSJEb2N1bWVudCIsQS5PUEVSQVRJT05fREVGSU5JVElPTj0iT3BlcmF0aW9uRGVmaW5pdGlvbiIsQS5WQVJJQUJMRV9ERUZJTklUSU9OPSJWYXJpYWJsZURlZmluaXRpb24iLEEuU0VMRUNUSU9OX1NFVD0iU2VsZWN0aW9uU2V0IixBLkZJRUxEPSJGaWVsZCIsQS5BUkdVTUVOVD0iQXJndW1lbnQiLEEuRlJBR01FTlRfU1BSRUFEPSJGcmFnbWVudFNwcmVhZCIsQS5JTkxJTkVfRlJBR01FTlQ9IklubGluZUZyYWdtZW50IixBLkZSQUdNRU5UX0RFRklOSVRJT049IkZyYWdtZW50RGVmaW5pdGlvbiIsQS5WQVJJQUJMRT0iVmFyaWFibGUiLEEuSU5UPSJJbnRWYWx1ZSIsQS5GTE9BVD0iRmxvYXRWYWx1ZSIsQS5TVFJJTkc9IlN0cmluZ1ZhbHVlIixBLkJPT0xFQU49IkJvb2xlYW5WYWx1ZSIsQS5OVUxMPSJOdWxsVmFsdWUiLEEuRU5VTT0iRW51bVZhbHVlIixBLkxJU1Q9Ikxpc3RWYWx1ZSIsQS5PQkpFQ1Q9Ik9iamVjdFZhbHVlIixBLk9CSkVDVF9GSUVMRD0iT2JqZWN0RmllbGQiLEEuRElSRUNUSVZFPSJEaXJlY3RpdmUiLEEuTkFNRURfVFlQRT0iTmFtZWRUeXBlIixBLkxJU1RfVFlQRT0iTGlzdFR5cGUiLEEuTk9OX05VTExfVFlQRT0iTm9uTnVsbFR5cGUiLEEuU0NIRU1BX0RFRklOSVRJT049IlNjaGVtYURlZmluaXRpb24iLEEuT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTj0iT3BlcmF0aW9uVHlwZURlZmluaXRpb24iLEEuU0NBTEFSX1RZUEVfREVGSU5JVElPTj0iU2NhbGFyVHlwZURlZmluaXRpb24iLEEuT0JKRUNUX1RZUEVfREVGSU5JVElPTj0iT2JqZWN0VHlwZURlZmluaXRpb24iLEEuRklFTERfREVGSU5JVElPTj0iRmllbGREZWZpbml0aW9uIixBLklOUFVUX1ZBTFVFX0RFRklOSVRJT049IklucHV0VmFsdWVEZWZpbml0aW9uIixBLklOVEVSRkFDRV9UWVBFX0RFRklOSVRJT049IkludGVyZmFjZVR5cGVEZWZpbml0aW9uIixBLlVOSU9OX1RZUEVfREVGSU5JVElPTj0iVW5pb25UeXBlRGVmaW5pdGlvbiIsQS5FTlVNX1RZUEVfREVGSU5JVElPTj0iRW51bVR5cGVEZWZpbml0aW9uIixBLkVOVU1fVkFMVUVfREVGSU5JVElPTj0iRW51bVZhbHVlRGVmaW5pdGlvbiIsQS5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OPSJJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uIixBLkRJUkVDVElWRV9ERUZJTklUSU9OPSJEaXJlY3RpdmVEZWZpbml0aW9uIixBLlNDSEVNQV9FWFRFTlNJT049IlNjaGVtYUV4dGVuc2lvbiIsQS5TQ0FMQVJfVFlQRV9FWFRFTlNJT049IlNjYWxhclR5cGVFeHRlbnNpb24iLEEuT0JKRUNUX1RZUEVfRVhURU5TSU9OPSJPYmplY3RUeXBlRXh0ZW5zaW9uIixBLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTj0iSW50ZXJmYWNlVHlwZUV4dGVuc2lvbiIsQS5VTklPTl9UWVBFX0VYVEVOU0lPTj0iVW5pb25UeXBlRXh0ZW5zaW9uIixBLkVOVU1fVFlQRV9FWFRFTlNJT049IkVudW1UeXBlRXh0ZW5zaW9uIixBLklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTj0iSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uIiwoUz14fHwoeD17fSkpLlNPRj0iPFNPRj4iLFMuRU9GPSI8RU9GPiIsUy5CQU5HPSIhIixTLkRPTExBUj0iJCIsUy5BTVA9IiYiLFMuUEFSRU5fTD0iKCIsUy5QQVJFTl9SPSIpIixTLlNQUkVBRD0iLi4uIixTLkNPTE9OPSI6IixTLkVRVUFMUz0iPSIsUy5BVD0iQCIsUy5CUkFDS0VUX0w9IlsiLFMuQlJBQ0tFVF9SPSJdIixTLkJSQUNFX0w9InsiLFMuUElQRT0ifCIsUy5CUkFDRV9SPSJ9IixTLk5BTUU9Ik5hbWUiLFMuSU5UPSJJbnQiLFMuRkxPQVQ9IkZsb2F0IixTLlNUUklORz0iU3RyaW5nIixTLkJMT0NLX1NUUklORz0iQmxvY2tTdHJpbmciLFMuQ09NTUVOVD0iQ29tbWVudCI7Y2xhc3MgRntjb25zdHJ1Y3RvcihlKXtjb25zdCB0PW5ldyB2KHguU09GLDAsMCwwLDApO3RoaXMuc291cmNlPWUsdGhpcy5sYXN0VG9rZW49dCx0aGlzLnRva2VuPXQsdGhpcy5saW5lPTEsdGhpcy5saW5lU3RhcnQ9MH1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJMZXhlciJ9YWR2YW5jZSgpe3RoaXMubGFzdFRva2VuPXRoaXMudG9rZW47cmV0dXJuIHRoaXMudG9rZW49dGhpcy5sb29rYWhlYWQoKX1sb29rYWhlYWQoKXtsZXQgZT10aGlzLnRva2VuO2lmKGUua2luZCE9PXguRU9GKWRve2lmKGUubmV4dCllPWUubmV4dDtlbHNle2NvbnN0IHQ9cSh0aGlzLGUuZW5kKTtlLm5leHQ9dCx0LnByZXY9ZSxlPXR9fXdoaWxlKGUua2luZD09PXguQ09NTUVOVCk7cmV0dXJuIGV9fWZ1bmN0aW9uICQoZSl7cmV0dXJuIGU+PTAmJmU8PTU1Mjk1fHxlPj01NzM0NCYmZTw9MTExNDExMX1mdW5jdGlvbiBNKGUsdCl7cmV0dXJuIFYoZS5jaGFyQ29kZUF0KHQpKSYmQihlLmNoYXJDb2RlQXQodCsxKSl9ZnVuY3Rpb24gVihlKXtyZXR1cm4gZT49NTUyOTYmJmU8PTU2MzE5fWZ1bmN0aW9uIEIoZSl7cmV0dXJuIGU+PTU2MzIwJiZlPD01NzM0M31mdW5jdGlvbiBqKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LmNvZGVQb2ludEF0KHQpO2lmKHZvaWQgMD09PW4pcmV0dXJuIHguRU9GO2lmKG4+PTMyJiZuPD0xMjYpe2NvbnN0IGU9U3RyaW5nLmZyb21Db2RlUG9pbnQobik7cmV0dXJuJyInPT09ZT8iJ1wiJyI6YCIke2V9ImB9cmV0dXJuIlUrIituLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLnBhZFN0YXJ0KDQsIjAiKX1mdW5jdGlvbiBVKGUsdCxuLHIsaSl7Y29uc3Qgcz1lLmxpbmUsbz0xK24tZS5saW5lU3RhcnQ7cmV0dXJuIG5ldyB2KHQsbixyLHMsbyxpKX1mdW5jdGlvbiBxKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dDtmb3IoO2k8cjspe2NvbnN0IHQ9bi5jaGFyQ29kZUF0KGkpO3N3aXRjaCh0KXtjYXNlIDY1Mjc5OmNhc2UgOTpjYXNlIDMyOmNhc2UgNDQ6KytpO2NvbnRpbnVlO2Nhc2UgMTA6KytpLCsrZS5saW5lLGUubGluZVN0YXJ0PWk7Y29udGludWU7Y2FzZSAxMzoxMD09PW4uY2hhckNvZGVBdChpKzEpP2krPTI6KytpLCsrZS5saW5lLGUubGluZVN0YXJ0PWk7Y29udGludWU7Y2FzZSAzNTpyZXR1cm4gSyhlLGkpO2Nhc2UgMzM6cmV0dXJuIFUoZSx4LkJBTkcsaSxpKzEpO2Nhc2UgMzY6cmV0dXJuIFUoZSx4LkRPTExBUixpLGkrMSk7Y2FzZSAzODpyZXR1cm4gVShlLHguQU1QLGksaSsxKTtjYXNlIDQwOnJldHVybiBVKGUseC5QQVJFTl9MLGksaSsxKTtjYXNlIDQxOnJldHVybiBVKGUseC5QQVJFTl9SLGksaSsxKTtjYXNlIDQ2OmlmKDQ2PT09bi5jaGFyQ29kZUF0KGkrMSkmJjQ2PT09bi5jaGFyQ29kZUF0KGkrMikpcmV0dXJuIFUoZSx4LlNQUkVBRCxpLGkrMyk7YnJlYWs7Y2FzZSA1ODpyZXR1cm4gVShlLHguQ09MT04saSxpKzEpO2Nhc2UgNjE6cmV0dXJuIFUoZSx4LkVRVUFMUyxpLGkrMSk7Y2FzZSA2NDpyZXR1cm4gVShlLHguQVQsaSxpKzEpO2Nhc2UgOTE6cmV0dXJuIFUoZSx4LkJSQUNLRVRfTCxpLGkrMSk7Y2FzZSA5MzpyZXR1cm4gVShlLHguQlJBQ0tFVF9SLGksaSsxKTtjYXNlIDEyMzpyZXR1cm4gVShlLHguQlJBQ0VfTCxpLGkrMSk7Y2FzZSAxMjQ6cmV0dXJuIFUoZSx4LlBJUEUsaSxpKzEpO2Nhc2UgMTI1OnJldHVybiBVKGUseC5CUkFDRV9SLGksaSsxKTtjYXNlIDM0OnJldHVybiAzND09PW4uY2hhckNvZGVBdChpKzEpJiYzND09PW4uY2hhckNvZGVBdChpKzIpP1ooZSxpKTpZKGUsaSl9aWYodyh0KXx8NDU9PT10KXJldHVybiBHKGUsaSx0KTtpZihDKHQpKXJldHVybiBlZShlLGkpO3Rocm93IHkoZS5zb3VyY2UsaSwzOT09PXQ/IlVuZXhwZWN0ZWQgc2luZ2xlIHF1b3RlIGNoYXJhY3RlciAoJyksIGRpZCB5b3UgbWVhbiB0byB1c2UgYSBkb3VibGUgcXVvdGUgKFwiKT8iOiQodCl8fE0obixpKT9gVW5leHBlY3RlZCBjaGFyYWN0ZXI6ICR7aihlLGkpfS5gOmBJbnZhbGlkIGNoYXJhY3RlcjogJHtqKGUsaSl9LmApfXJldHVybiBVKGUseC5FT0YscixyKX1mdW5jdGlvbiBLKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dCsxO2Zvcig7aTxyOyl7Y29uc3QgZT1uLmNoYXJDb2RlQXQoaSk7aWYoMTA9PT1lfHwxMz09PWUpYnJlYWs7aWYoJChlKSkrK2k7ZWxzZXtpZighTShuLGkpKWJyZWFrO2krPTJ9fXJldHVybiBVKGUseC5DT01NRU5ULHQsaSxuLnNsaWNlKHQrMSxpKSl9ZnVuY3Rpb24gRyhlLHQsbil7Y29uc3Qgcj1lLnNvdXJjZS5ib2R5O2xldCBpPXQscz1uLG89ITE7aWYoNDU9PT1zJiYocz1yLmNoYXJDb2RlQXQoKytpKSksNDg9PT1zKXtpZihzPXIuY2hhckNvZGVBdCgrK2kpLHcocykpdGhyb3cgeShlLnNvdXJjZSxpLGBJbnZhbGlkIG51bWJlciwgdW5leHBlY3RlZCBkaWdpdCBhZnRlciAwOiAke2ooZSxpKX0uYCl9ZWxzZSBpPXooZSxpLHMpLHM9ci5jaGFyQ29kZUF0KGkpO2lmKDQ2PT09cyYmKG89ITAscz1yLmNoYXJDb2RlQXQoKytpKSxpPXooZSxpLHMpLHM9ci5jaGFyQ29kZUF0KGkpKSw2OSE9PXMmJjEwMSE9PXN8fChvPSEwLHM9ci5jaGFyQ29kZUF0KCsraSksNDMhPT1zJiY0NSE9PXN8fChzPXIuY2hhckNvZGVBdCgrK2kpKSxpPXooZSxpLHMpLHM9ci5jaGFyQ29kZUF0KGkpKSw0Nj09PXN8fEMocykpdGhyb3cgeShlLnNvdXJjZSxpLGBJbnZhbGlkIG51bWJlciwgZXhwZWN0ZWQgZGlnaXQgYnV0IGdvdDogJHtqKGUsaSl9LmApO3JldHVybiBVKGUsbz94LkZMT0FUOnguSU5ULHQsaSxyLnNsaWNlKHQsaSkpfWZ1bmN0aW9uIHooZSx0LG4pe2lmKCF3KG4pKXRocm93IHkoZS5zb3VyY2UsdCxgSW52YWxpZCBudW1iZXIsIGV4cGVjdGVkIGRpZ2l0IGJ1dCBnb3Q6ICR7aihlLHQpfS5gKTtjb25zdCByPWUuc291cmNlLmJvZHk7bGV0IGk9dCsxO2Zvcig7dyhyLmNoYXJDb2RlQXQoaSkpOykrK2k7cmV0dXJuIGl9ZnVuY3Rpb24gWShlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxyPW4ubGVuZ3RoO2xldCBpPXQrMSxzPWksbz0iIjtmb3IoO2k8cjspe2NvbnN0IHI9bi5jaGFyQ29kZUF0KGkpO2lmKDM0PT09cilyZXR1cm4gbys9bi5zbGljZShzLGkpLFUoZSx4LlNUUklORyx0LGkrMSxvKTtpZig5MiE9PXIpe2lmKDEwPT09cnx8MTM9PT1yKWJyZWFrO2lmKCQocikpKytpO2Vsc2V7aWYoIU0obixpKSl0aHJvdyB5KGUuc291cmNlLGksYEludmFsaWQgY2hhcmFjdGVyIHdpdGhpbiBTdHJpbmc6ICR7aihlLGkpfS5gKTtpKz0yfX1lbHNle28rPW4uc2xpY2UocyxpKTtjb25zdCB0PTExNz09PW4uY2hhckNvZGVBdChpKzEpPzEyMz09PW4uY2hhckNvZGVBdChpKzIpP0goZSxpKTpKKGUsaSk6VyhlLGkpO28rPXQudmFsdWUsaSs9dC5zaXplLHM9aX19dGhyb3cgeShlLnNvdXJjZSxpLCJVbnRlcm1pbmF0ZWQgc3RyaW5nLiIpfWZ1bmN0aW9uIEgoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7bGV0IHI9MCxpPTM7Zm9yKDtpPDEyOyl7Y29uc3QgZT1uLmNoYXJDb2RlQXQodCtpKyspO2lmKDEyNT09PWUpe2lmKGk8NXx8ISQocikpYnJlYWs7cmV0dXJue3ZhbHVlOlN0cmluZy5mcm9tQ29kZVBvaW50KHIpLHNpemU6aX19aWYocj1yPDw0fFgoZSkscjwwKWJyZWFrfXRocm93IHkoZS5zb3VyY2UsdCxgSW52YWxpZCBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZTogIiR7bi5zbGljZSh0LHQraSl9Ii5gKX1mdW5jdGlvbiBKKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9UShuLHQrMik7aWYoJChyKSlyZXR1cm57dmFsdWU6U3RyaW5nLmZyb21Db2RlUG9pbnQociksc2l6ZTo2fTtpZihWKHIpJiY5Mj09PW4uY2hhckNvZGVBdCh0KzYpJiYxMTc9PT1uLmNoYXJDb2RlQXQodCs3KSl7Y29uc3QgZT1RKG4sdCs4KTtpZihCKGUpKXJldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChyLGUpLHNpemU6MTJ9fXRocm93IHkoZS5zb3VyY2UsdCxgSW52YWxpZCBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZTogIiR7bi5zbGljZSh0LHQrNil9Ii5gKX1mdW5jdGlvbiBRKGUsdCl7cmV0dXJuIFgoZS5jaGFyQ29kZUF0KHQpKTw8MTJ8WChlLmNoYXJDb2RlQXQodCsxKSk8PDh8WChlLmNoYXJDb2RlQXQodCsyKSk8PDR8WChlLmNoYXJDb2RlQXQodCszKSl9ZnVuY3Rpb24gWChlKXtyZXR1cm4gZT49NDgmJmU8PTU3P2UtNDg6ZT49NjUmJmU8PTcwP2UtNTU6ZT49OTcmJmU8PTEwMj9lLTg3Oi0xfWZ1bmN0aW9uIFcoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7c3dpdGNoKG4uY2hhckNvZGVBdCh0KzEpKXtjYXNlIDM0OnJldHVybnt2YWx1ZTonIicsc2l6ZToyfTtjYXNlIDkyOnJldHVybnt2YWx1ZToiXFwiLHNpemU6Mn07Y2FzZSA0NzpyZXR1cm57dmFsdWU6Ii8iLHNpemU6Mn07Y2FzZSA5ODpyZXR1cm57dmFsdWU6IlxiIixzaXplOjJ9O2Nhc2UgMTAyOnJldHVybnt2YWx1ZToiXGYiLHNpemU6Mn07Y2FzZSAxMTA6cmV0dXJue3ZhbHVlOiJcbiIsc2l6ZToyfTtjYXNlIDExNDpyZXR1cm57dmFsdWU6IlxyIixzaXplOjJ9O2Nhc2UgMTE2OnJldHVybnt2YWx1ZToiXHQiLHNpemU6Mn19dGhyb3cgeShlLnNvdXJjZSx0LGBJbnZhbGlkIGNoYXJhY3RlciBlc2NhcGUgc2VxdWVuY2U6ICIke24uc2xpY2UodCx0KzIpfSIuYCl9ZnVuY3Rpb24gWihlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxyPW4ubGVuZ3RoO2xldCBpPWUubGluZVN0YXJ0LHM9dCszLG89cyxhPSIiO2NvbnN0IGM9W107Zm9yKDtzPHI7KXtjb25zdCByPW4uY2hhckNvZGVBdChzKTtpZigzND09PXImJjM0PT09bi5jaGFyQ29kZUF0KHMrMSkmJjM0PT09bi5jaGFyQ29kZUF0KHMrMikpe2ErPW4uc2xpY2UobyxzKSxjLnB1c2goYSk7Y29uc3Qgcj1VKGUseC5CTE9DS19TVFJJTkcsdCxzKzMsUihjKS5qb2luKCJcbiIpKTtyZXR1cm4gZS5saW5lKz1jLmxlbmd0aC0xLGUubGluZVN0YXJ0PWkscn1pZig5MiE9PXJ8fDM0IT09bi5jaGFyQ29kZUF0KHMrMSl8fDM0IT09bi5jaGFyQ29kZUF0KHMrMil8fDM0IT09bi5jaGFyQ29kZUF0KHMrMykpaWYoMTAhPT1yJiYxMyE9PXIpaWYoJChyKSkrK3M7ZWxzZXtpZighTShuLHMpKXRocm93IHkoZS5zb3VyY2UscyxgSW52YWxpZCBjaGFyYWN0ZXIgd2l0aGluIFN0cmluZzogJHtqKGUscyl9LmApO3MrPTJ9ZWxzZSBhKz1uLnNsaWNlKG8scyksYy5wdXNoKGEpLDEzPT09ciYmMTA9PT1uLmNoYXJDb2RlQXQocysxKT9zKz0yOisrcyxhPSIiLG89cyxpPXM7ZWxzZSBhKz1uLnNsaWNlKG8scyksbz1zKzEscys9NH10aHJvdyB5KGUuc291cmNlLHMsIlVudGVybWluYXRlZCBzdHJpbmcuIil9ZnVuY3Rpb24gZWUoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHkscj1uLmxlbmd0aDtsZXQgaT10KzE7Zm9yKDtpPHI7KXtpZighUChuLmNoYXJDb2RlQXQoaSkpKWJyZWFrOysraX1yZXR1cm4gVShlLHguTkFNRSx0LGksbi5zbGljZSh0LGkpKX1jb25zdCB0ZT0xMCxuZT0yO2Z1bmN0aW9uIHJlKGUpe3JldHVybiBpZShlLFtdKX1mdW5jdGlvbiBpZShlLHQpe3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJzdHJpbmciOnJldHVybiBKU09OLnN0cmluZ2lmeShlKTtjYXNlImZ1bmN0aW9uIjpyZXR1cm4gZS5uYW1lP2BbZnVuY3Rpb24gJHtlLm5hbWV9XWA6IltmdW5jdGlvbl0iO2Nhc2Uib2JqZWN0IjpyZXR1cm4gZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZSlyZXR1cm4ibnVsbCI7aWYodC5pbmNsdWRlcyhlKSlyZXR1cm4iW0NpcmN1bGFyXSI7Y29uc3Qgbj1bLi4udCxlXTtpZihmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZS50b0pTT059KGUpKXtjb25zdCB0PWUudG9KU09OKCk7aWYodCE9PWUpcmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3Q6aWUodCxuKX1lbHNlIGlmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoMD09PWUubGVuZ3RoKXJldHVybiJbXSI7aWYodC5sZW5ndGg+bmUpcmV0dXJuIltBcnJheV0iO2NvbnN0IG49TWF0aC5taW4odGUsZS5sZW5ndGgpLHI9ZS5sZW5ndGgtbixpPVtdO2ZvcihsZXQgcz0wO3M8bjsrK3MpaS5wdXNoKGllKGVbc10sdCkpOzE9PT1yP2kucHVzaCgiLi4uIDEgbW9yZSBpdGVtIik6cj4xJiZpLnB1c2goYC4uLiAke3J9IG1vcmUgaXRlbXNgKTtyZXR1cm4iWyIraS5qb2luKCIsICIpKyJdIn0oZSxuKTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtjb25zdCBuPU9iamVjdC5lbnRyaWVzKGUpO2lmKDA9PT1uLmxlbmd0aClyZXR1cm4ie30iO2lmKHQubGVuZ3RoPm5lKXJldHVybiJbIitmdW5jdGlvbihlKXtjb25zdCB0PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5yZXBsYWNlKC9eXFtvYmplY3QgLywiIikucmVwbGFjZSgvXSQvLCIiKTtpZigiT2JqZWN0Ij09PXQmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yKXtjb25zdCB0PWUuY29uc3RydWN0b3IubmFtZTtpZigic3RyaW5nIj09dHlwZW9mIHQmJiIiIT09dClyZXR1cm4gdH1yZXR1cm4gdH0oZSkrIl0iO2NvbnN0IHI9bi5tYXAoKChbZSxuXSk9PmUrIjogIitpZShuLHQpKSk7cmV0dXJuInsgIityLmpvaW4oIiwgIikrIiB9In0oZSxuKX0oZSx0KTtkZWZhdWx0OnJldHVybiBTdHJpbmcoZSl9fWNvbnN0IHNlPWdsb2JhbFRoaXMucHJvY2VzcyYmInByb2R1Y3Rpb24iPT09Z2xvYmFsVGhpcy5wcm9jZXNzLmVudi5OT0RFX0VOVj9mdW5jdGlvbihlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgdH06ZnVuY3Rpb24oZSx0KXtpZihlIGluc3RhbmNlb2YgdClyZXR1cm4hMDtpZigib2JqZWN0Ij09dHlwZW9mIGUmJm51bGwhPT1lKXt2YXIgbjtjb25zdCByPXQucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ107aWYocj09PShTeW1ib2wudG9TdHJpbmdUYWcgaW4gZT9lW1N5bWJvbC50b1N0cmluZ1RhZ106bnVsbD09PShuPWUuY29uc3RydWN0b3IpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm5hbWUpKXtjb25zdCB0PXJlKGUpO3Rocm93IG5ldyBFcnJvcihgQ2Fubm90IHVzZSAke3J9ICIke3R9IiBmcm9tIGFub3RoZXIgbW9kdWxlIG9yIHJlYWxtLlxuXG5FbnN1cmUgdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBpbnN0YW5jZSBvZiAiZ3JhcGhxbCIgaW4gdGhlIG5vZGVfbW9kdWxlc1xuZGlyZWN0b3J5LiBJZiBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgImdyYXBocWwiIGFyZSB0aGUgZGVwZW5kZW5jaWVzIG9mIG90aGVyXG5yZWxpZWQgb24gbW9kdWxlcywgdXNlICJyZXNvbHV0aW9ucyIgdG8gZW5zdXJlIG9ubHkgb25lIHZlcnNpb24gaXMgaW5zdGFsbGVkLlxuXG5odHRwczovL3lhcm5wa2cuY29tL2VuL2RvY3Mvc2VsZWN0aXZlLXZlcnNpb24tcmVzb2x1dGlvbnNcblxuRHVwbGljYXRlICJncmFwaHFsIiBtb2R1bGVzIGNhbm5vdCBiZSB1c2VkIGF0IHRoZSBzYW1lIHRpbWUgc2luY2UgZGlmZmVyZW50XG52ZXJzaW9ucyBtYXkgaGF2ZSBkaWZmZXJlbnQgY2FwYWJpbGl0aWVzIGFuZCBiZWhhdmlvci4gVGhlIGRhdGEgZnJvbSBvbmVcbnZlcnNpb24gdXNlZCBpbiB0aGUgZnVuY3Rpb24gZnJvbSBhbm90aGVyIGNvdWxkIHByb2R1Y2UgY29uZnVzaW5nIGFuZFxuc3B1cmlvdXMgcmVzdWx0cy5gKX19cmV0dXJuITF9O2NsYXNzIG9le2NvbnN0cnVjdG9yKGUsdD0iR3JhcGhRTCByZXF1ZXN0IixuPXtsaW5lOjEsY29sdW1uOjF9KXsic3RyaW5nIj09dHlwZW9mIGV8fGEoITEsYEJvZHkgbXVzdCBiZSBhIHN0cmluZy4gUmVjZWl2ZWQ6ICR7cmUoZSl9LmApLHRoaXMuYm9keT1lLHRoaXMubmFtZT10LHRoaXMubG9jYXRpb25PZmZzZXQ9bix0aGlzLmxvY2F0aW9uT2Zmc2V0LmxpbmU+MHx8YSghMSwibGluZSBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuIiksdGhpcy5sb2NhdGlvbk9mZnNldC5jb2x1bW4+MHx8YSghMSwiY29sdW1uIGluIGxvY2F0aW9uT2Zmc2V0IGlzIDEtaW5kZXhlZCBhbmQgbXVzdCBiZSBwb3NpdGl2ZS4iKX1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJTb3VyY2UifX1mdW5jdGlvbiBhZShlLHQpe3JldHVybiBuZXcgY2UoZSx0KS5wYXJzZURvY3VtZW50KCl9Y2xhc3MgY2V7Y29uc3RydWN0b3IoZSx0PXt9KXtjb25zdCBuPWZ1bmN0aW9uKGUpe3JldHVybiBzZShlLG9lKX0oZSk/ZTpuZXcgb2UoZSk7dGhpcy5fbGV4ZXI9bmV3IEYobiksdGhpcy5fb3B0aW9ucz10LHRoaXMuX3Rva2VuQ291bnRlcj0wfXBhcnNlTmFtZSgpe2NvbnN0IGU9dGhpcy5leHBlY3RUb2tlbih4Lk5BTUUpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk5BTUUsdmFsdWU6ZS52YWx1ZX0pfXBhcnNlRG9jdW1lbnQoKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOk8uRE9DVU1FTlQsZGVmaW5pdGlvbnM6dGhpcy5tYW55KHguU09GLHRoaXMucGFyc2VEZWZpbml0aW9uLHguRU9GKX0pfXBhcnNlRGVmaW5pdGlvbigpe2lmKHRoaXMucGVlayh4LkJSQUNFX0wpKXJldHVybiB0aGlzLnBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbigpO2NvbnN0IGU9dGhpcy5wZWVrRGVzY3JpcHRpb24oKSx0PWU/dGhpcy5fbGV4ZXIubG9va2FoZWFkKCk6dGhpcy5fbGV4ZXIudG9rZW47aWYodC5raW5kPT09eC5OQU1FKXtzd2l0Y2godC52YWx1ZSl7Y2FzZSJzY2hlbWEiOnJldHVybiB0aGlzLnBhcnNlU2NoZW1hRGVmaW5pdGlvbigpO2Nhc2Uic2NhbGFyIjpyZXR1cm4gdGhpcy5wYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCk7Y2FzZSJ0eXBlIjpyZXR1cm4gdGhpcy5wYXJzZU9iamVjdFR5cGVEZWZpbml0aW9uKCk7Y2FzZSJpbnRlcmZhY2UiOnJldHVybiB0aGlzLnBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKTtjYXNlInVuaW9uIjpyZXR1cm4gdGhpcy5wYXJzZVVuaW9uVHlwZURlZmluaXRpb24oKTtjYXNlImVudW0iOnJldHVybiB0aGlzLnBhcnNlRW51bVR5cGVEZWZpbml0aW9uKCk7Y2FzZSJpbnB1dCI6cmV0dXJuIHRoaXMucGFyc2VJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uKCk7Y2FzZSJkaXJlY3RpdmUiOnJldHVybiB0aGlzLnBhcnNlRGlyZWN0aXZlRGVmaW5pdGlvbigpfWlmKGUpdGhyb3cgeSh0aGlzLl9sZXhlci5zb3VyY2UsdGhpcy5fbGV4ZXIudG9rZW4uc3RhcnQsIlVuZXhwZWN0ZWQgZGVzY3JpcHRpb24sIGRlc2NyaXB0aW9ucyBhcmUgc3VwcG9ydGVkIG9ubHkgb24gdHlwZSBkZWZpbml0aW9ucy4iKTtzd2l0Y2godC52YWx1ZSl7Y2FzZSJxdWVyeSI6Y2FzZSJtdXRhdGlvbiI6Y2FzZSJzdWJzY3JpcHRpb24iOnJldHVybiB0aGlzLnBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbigpO2Nhc2UiZnJhZ21lbnQiOnJldHVybiB0aGlzLnBhcnNlRnJhZ21lbnREZWZpbml0aW9uKCk7Y2FzZSJleHRlbmQiOnJldHVybiB0aGlzLnBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpfX10aHJvdyB0aGlzLnVuZXhwZWN0ZWQodCl9cGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtpZih0aGlzLnBlZWsoeC5CUkFDRV9MKSlyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5PUEVSQVRJT05fREVGSU5JVElPTixvcGVyYXRpb246VC5RVUVSWSxuYW1lOnZvaWQgMCx2YXJpYWJsZURlZmluaXRpb25zOltdLGRpcmVjdGl2ZXM6W10sc2VsZWN0aW9uU2V0OnRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKX0pO2NvbnN0IHQ9dGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTtsZXQgbjtyZXR1cm4gdGhpcy5wZWVrKHguTkFNRSkmJihuPXRoaXMucGFyc2VOYW1lKCkpLHRoaXMubm9kZShlLHtraW5kOk8uT1BFUkFUSU9OX0RFRklOSVRJT04sb3BlcmF0aW9uOnQsbmFtZTpuLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VPcGVyYXRpb25UeXBlKCl7Y29uc3QgZT10aGlzLmV4cGVjdFRva2VuKHguTkFNRSk7c3dpdGNoKGUudmFsdWUpe2Nhc2UicXVlcnkiOnJldHVybiBULlFVRVJZO2Nhc2UibXV0YXRpb24iOnJldHVybiBULk1VVEFUSU9OO2Nhc2Uic3Vic2NyaXB0aW9uIjpyZXR1cm4gVC5TVUJTQ1JJUFRJT059dGhyb3cgdGhpcy51bmV4cGVjdGVkKGUpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpe3JldHVybiB0aGlzLm9wdGlvbmFsTWFueSh4LlBBUkVOX0wsdGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbix4LlBBUkVOX1IpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbix7a2luZDpPLlZBUklBQkxFX0RFRklOSVRJT04sdmFyaWFibGU6dGhpcy5wYXJzZVZhcmlhYmxlKCksdHlwZToodGhpcy5leHBlY3RUb2tlbih4LkNPTE9OKSx0aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpKSxkZWZhdWx0VmFsdWU6dGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguRVFVQUxTKT90aGlzLnBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKTp2b2lkIDAsZGlyZWN0aXZlczp0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCl9KX1wYXJzZVZhcmlhYmxlKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbih4LkRPTExBUiksdGhpcy5ub2RlKGUse2tpbmQ6Ty5WQVJJQUJMRSxuYW1lOnRoaXMucGFyc2VOYW1lKCl9KX1wYXJzZVNlbGVjdGlvblNldCgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6Ty5TRUxFQ1RJT05fU0VULHNlbGVjdGlvbnM6dGhpcy5tYW55KHguQlJBQ0VfTCx0aGlzLnBhcnNlU2VsZWN0aW9uLHguQlJBQ0VfUil9KX1wYXJzZVNlbGVjdGlvbigpe3JldHVybiB0aGlzLnBlZWsoeC5TUFJFQUQpP3RoaXMucGFyc2VGcmFnbWVudCgpOnRoaXMucGFyc2VGaWVsZCgpfXBhcnNlRmllbGQoKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZU5hbWUoKTtsZXQgbixyO3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oeC5DT0xPTik/KG49dCxyPXRoaXMucGFyc2VOYW1lKCkpOnI9dCx0aGlzLm5vZGUoZSx7a2luZDpPLkZJRUxELGFsaWFzOm4sbmFtZTpyLGFyZ3VtZW50czp0aGlzLnBhcnNlQXJndW1lbnRzKCExKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wZWVrKHguQlJBQ0VfTCk/dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpOnZvaWQgMH0pfXBhcnNlQXJndW1lbnRzKGUpe2NvbnN0IHQ9ZT90aGlzLnBhcnNlQ29uc3RBcmd1bWVudDp0aGlzLnBhcnNlQXJndW1lbnQ7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguUEFSRU5fTCx0LHguUEFSRU5fUil9cGFyc2VBcmd1bWVudChlPSExKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZU5hbWUoKTtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbih4LkNPTE9OKSx0aGlzLm5vZGUodCx7a2luZDpPLkFSR1VNRU5ULG5hbWU6bix2YWx1ZTp0aGlzLnBhcnNlVmFsdWVMaXRlcmFsKGUpfSl9cGFyc2VDb25zdEFyZ3VtZW50KCl7cmV0dXJuIHRoaXMucGFyc2VBcmd1bWVudCghMCl9cGFyc2VGcmFnbWVudCgpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RUb2tlbih4LlNQUkVBRCk7Y29uc3QgdD10aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgib24iKTtyZXR1cm4hdCYmdGhpcy5wZWVrKHguTkFNRSk/dGhpcy5ub2RlKGUse2tpbmQ6Ty5GUkFHTUVOVF9TUFJFQUQsbmFtZTp0aGlzLnBhcnNlRnJhZ21lbnROYW1lKCksZGlyZWN0aXZlczp0aGlzLnBhcnNlRGlyZWN0aXZlcyghMSl9KTp0aGlzLm5vZGUoZSx7a2luZDpPLklOTElORV9GUkFHTUVOVCx0eXBlQ29uZGl0aW9uOnQ/dGhpcy5wYXJzZU5hbWVkVHlwZSgpOnZvaWQgMCxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VGcmFnbWVudERlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdEtleXdvcmQoImZyYWdtZW50IiksITA9PT10aGlzLl9vcHRpb25zLmFsbG93TGVnYWN5RnJhZ21lbnRWYXJpYWJsZXM/dGhpcy5ub2RlKGUse2tpbmQ6Ty5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSx0eXBlQ29uZGl0aW9uOih0aGlzLmV4cGVjdEtleXdvcmQoIm9uIiksdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSk6dGhpcy5ub2RlKGUse2tpbmQ6Ty5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHR5cGVDb25kaXRpb246KHRoaXMuZXhwZWN0S2V5d29yZCgib24iKSx0aGlzLnBhcnNlTmFtZWRUeXBlKCkpLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpLHNlbGVjdGlvblNldDp0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCl9KX1wYXJzZUZyYWdtZW50TmFtZSgpe2lmKCJvbiI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZSl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZVZhbHVlTGl0ZXJhbChlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3N3aXRjaCh0LmtpbmQpe2Nhc2UgeC5CUkFDS0VUX0w6cmV0dXJuIHRoaXMucGFyc2VMaXN0KGUpO2Nhc2UgeC5CUkFDRV9MOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0KGUpO2Nhc2UgeC5JTlQ6cmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdGhpcy5ub2RlKHQse2tpbmQ6Ty5JTlQsdmFsdWU6dC52YWx1ZX0pO2Nhc2UgeC5GTE9BVDpyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSx0aGlzLm5vZGUodCx7a2luZDpPLkZMT0FULHZhbHVlOnQudmFsdWV9KTtjYXNlIHguU1RSSU5HOmNhc2UgeC5CTE9DS19TVFJJTkc6cmV0dXJuIHRoaXMucGFyc2VTdHJpbmdMaXRlcmFsKCk7Y2FzZSB4Lk5BTUU6c3dpdGNoKHRoaXMuYWR2YW5jZUxleGVyKCksdC52YWx1ZSl7Y2FzZSJ0cnVlIjpyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6Ty5CT09MRUFOLHZhbHVlOiEwfSk7Y2FzZSJmYWxzZSI6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOk8uQk9PTEVBTix2YWx1ZTohMX0pO2Nhc2UibnVsbCI6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOk8uTlVMTH0pO2RlZmF1bHQ6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOk8uRU5VTSx2YWx1ZTp0LnZhbHVlfSl9Y2FzZSB4LkRPTExBUjppZihlKXtpZih0aGlzLmV4cGVjdFRva2VuKHguRE9MTEFSKSx0aGlzLl9sZXhlci50b2tlbi5raW5kPT09eC5OQU1FKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLnZhbHVlO3Rocm93IHkodGhpcy5fbGV4ZXIuc291cmNlLHQuc3RhcnQsYFVuZXhwZWN0ZWQgdmFyaWFibGUgIiQke2V9IiBpbiBjb25zdGFudCB2YWx1ZS5gKX10aHJvdyB0aGlzLnVuZXhwZWN0ZWQodCl9cmV0dXJuIHRoaXMucGFyc2VWYXJpYWJsZSgpO2RlZmF1bHQ6dGhyb3cgdGhpcy51bmV4cGVjdGVkKCl9fXBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKXtyZXR1cm4gdGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCghMCl9cGFyc2VTdHJpbmdMaXRlcmFsKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSx0aGlzLm5vZGUoZSx7a2luZDpPLlNUUklORyx2YWx1ZTplLnZhbHVlLGJsb2NrOmUua2luZD09PXguQkxPQ0tfU1RSSU5HfSl9cGFyc2VMaXN0KGUpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6Ty5MSVNULHZhbHVlczp0aGlzLmFueSh4LkJSQUNLRVRfTCwoKCk9PnRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoZSkpLHguQlJBQ0tFVF9SKX0pfXBhcnNlT2JqZWN0KGUpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6Ty5PQkpFQ1QsZmllbGRzOnRoaXMuYW55KHguQlJBQ0VfTCwoKCk9PnRoaXMucGFyc2VPYmplY3RGaWVsZChlKSkseC5CUkFDRV9SKX0pfXBhcnNlT2JqZWN0RmllbGQoZSl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VOYW1lKCk7cmV0dXJuIHRoaXMuZXhwZWN0VG9rZW4oeC5DT0xPTiksdGhpcy5ub2RlKHQse2tpbmQ6Ty5PQkpFQ1RfRklFTEQsbmFtZTpuLHZhbHVlOnRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoZSl9KX1wYXJzZURpcmVjdGl2ZXMoZSl7Y29uc3QgdD1bXTtmb3IoO3RoaXMucGVlayh4LkFUKTspdC5wdXNoKHRoaXMucGFyc2VEaXJlY3RpdmUoZSkpO3JldHVybiB0fXBhcnNlQ29uc3REaXJlY3RpdmVzKCl7cmV0dXJuIHRoaXMucGFyc2VEaXJlY3RpdmVzKCEwKX1wYXJzZURpcmVjdGl2ZShlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdFRva2VuKHguQVQpLHRoaXMubm9kZSh0LHtraW5kOk8uRElSRUNUSVZFLG5hbWU6dGhpcy5wYXJzZU5hbWUoKSxhcmd1bWVudHM6dGhpcy5wYXJzZUFyZ3VtZW50cyhlKX0pfXBhcnNlVHlwZVJlZmVyZW5jZSgpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47bGV0IHQ7aWYodGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguQlJBQ0tFVF9MKSl7Y29uc3Qgbj10aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpO3RoaXMuZXhwZWN0VG9rZW4oeC5CUkFDS0VUX1IpLHQ9dGhpcy5ub2RlKGUse2tpbmQ6Ty5MSVNUX1RZUEUsdHlwZTpufSl9ZWxzZSB0PXRoaXMucGFyc2VOYW1lZFR5cGUoKTtyZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguQkFORyk/dGhpcy5ub2RlKGUse2tpbmQ6Ty5OT05fTlVMTF9UWVBFLHR5cGU6dH0pOnR9cGFyc2VOYW1lZFR5cGUoKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOk8uTkFNRURfVFlQRSxuYW1lOnRoaXMucGFyc2VOYW1lKCl9KX1wZWVrRGVzY3JpcHRpb24oKXtyZXR1cm4gdGhpcy5wZWVrKHguU1RSSU5HKXx8dGhpcy5wZWVrKHguQkxPQ0tfU1RSSU5HKX1wYXJzZURlc2NyaXB0aW9uKCl7aWYodGhpcy5wZWVrRGVzY3JpcHRpb24oKSlyZXR1cm4gdGhpcy5wYXJzZVN0cmluZ0xpdGVyYWwoKX1wYXJzZVNjaGVtYURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJzY2hlbWEiKTtjb25zdCBuPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxyPXRoaXMubWFueSh4LkJSQUNFX0wsdGhpcy5wYXJzZU9wZXJhdGlvblR5cGVEZWZpbml0aW9uLHguQlJBQ0VfUik7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uU0NIRU1BX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxkaXJlY3RpdmVzOm4sb3BlcmF0aW9uVHlwZXM6cn0pfXBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTt0aGlzLmV4cGVjdFRva2VuKHguQ09MT04pO2NvbnN0IG49dGhpcy5wYXJzZU5hbWVkVHlwZSgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk9QRVJBVElPTl9UWVBFX0RFRklOSVRJT04sb3BlcmF0aW9uOnQsdHlwZTpufSl9cGFyc2VTY2FsYXJUeXBlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInNjYWxhciIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5TQ0FMQVJfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOnQsbmFtZTpuLGRpcmVjdGl2ZXM6cn0pfXBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJ0eXBlIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCksaT10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk9CSkVDVF9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4saW50ZXJmYWNlczpyLGRpcmVjdGl2ZXM6aSxmaWVsZHM6c30pfXBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKXtyZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoImltcGxlbWVudHMiKT90aGlzLmRlbGltaXRlZE1hbnkoeC5BTVAsdGhpcy5wYXJzZU5hbWVkVHlwZSk6W119cGFyc2VGaWVsZHNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguQlJBQ0VfTCx0aGlzLnBhcnNlRmllbGREZWZpbml0aW9uLHguQlJBQ0VfUil9cGFyc2VGaWVsZERlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCksbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUFyZ3VtZW50RGVmcygpO3RoaXMuZXhwZWN0VG9rZW4oeC5DT0xPTik7Y29uc3QgaT10aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpLHM9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLkZJRUxEX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sYXJndW1lbnRzOnIsdHlwZTppLGRpcmVjdGl2ZXM6c30pfXBhcnNlQXJndW1lbnREZWZzKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguUEFSRU5fTCx0aGlzLnBhcnNlSW5wdXRWYWx1ZURlZix4LlBBUkVOX1IpfXBhcnNlSW5wdXRWYWx1ZURlZigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxuPXRoaXMucGFyc2VOYW1lKCk7dGhpcy5leHBlY3RUb2tlbih4LkNPTE9OKTtjb25zdCByPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7bGV0IGk7dGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguRVFVQUxTKSYmKGk9dGhpcy5wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCkpO2NvbnN0IHM9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLklOUFVUX1ZBTFVFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sdHlwZTpyLGRlZmF1bHRWYWx1ZTppLGRpcmVjdGl2ZXM6c30pfXBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJpbnRlcmZhY2UiKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxzPXRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uSU5URVJGQUNFX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixpbnRlcmZhY2VzOnIsZGlyZWN0aXZlczppLGZpZWxkczpzfSl9cGFyc2VVbmlvblR5cGVEZWZpbml0aW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbix0PXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgidW5pb24iKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksaT10aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlVOSU9OX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixkaXJlY3RpdmVzOnIsdHlwZXM6aX0pfXBhcnNlVW5pb25NZW1iZXJUeXBlcygpe3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oeC5FUVVBTFMpP3RoaXMuZGVsaW1pdGVkTWFueSh4LlBJUEUsdGhpcy5wYXJzZU5hbWVkVHlwZSk6W119cGFyc2VFbnVtVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJlbnVtIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uRU5VTV9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sZGlyZWN0aXZlczpyLHZhbHVlczppfSl9cGFyc2VFbnVtVmFsdWVzRGVmaW5pdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbmFsTWFueSh4LkJSQUNFX0wsdGhpcy5wYXJzZUVudW1WYWx1ZURlZmluaXRpb24seC5CUkFDRV9SKX1wYXJzZUVudW1WYWx1ZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCksbj10aGlzLnBhcnNlRW51bVZhbHVlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLkVOVU1fVkFMVUVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixkaXJlY3RpdmVzOnJ9KX1wYXJzZUVudW1WYWx1ZU5hbWUoKXtpZigidHJ1ZSI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZXx8ImZhbHNlIj09PXRoaXMuX2xleGVyLnRva2VuLnZhbHVlfHwibnVsbCI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZSl0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0aGlzLl9sZXhlci50b2tlbi5zdGFydCxgJHtsZSh0aGlzLl9sZXhlci50b2tlbil9IGlzIHJlc2VydmVkIGFuZCBjYW5ub3QgYmUgdXNlZCBmb3IgYW4gZW51bSB2YWx1ZS5gKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJpbnB1dCIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxpPXRoaXMucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOnQsbmFtZTpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlSW5wdXRGaWVsZHNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguQlJBQ0VfTCx0aGlzLnBhcnNlSW5wdXRWYWx1ZURlZix4LkJSQUNFX1IpfXBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIubG9va2FoZWFkKCk7aWYoZS5raW5kPT09eC5OQU1FKXN3aXRjaChlLnZhbHVlKXtjYXNlInNjaGVtYSI6cmV0dXJuIHRoaXMucGFyc2VTY2hlbWFFeHRlbnNpb24oKTtjYXNlInNjYWxhciI6cmV0dXJuIHRoaXMucGFyc2VTY2FsYXJUeXBlRXh0ZW5zaW9uKCk7Y2FzZSJ0eXBlIjpyZXR1cm4gdGhpcy5wYXJzZU9iamVjdFR5cGVFeHRlbnNpb24oKTtjYXNlImludGVyZmFjZSI6cmV0dXJuIHRoaXMucGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uKCk7Y2FzZSJ1bmlvbiI6cmV0dXJuIHRoaXMucGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKTtjYXNlImVudW0iOnJldHVybiB0aGlzLnBhcnNlRW51bVR5cGVFeHRlbnNpb24oKTtjYXNlImlucHV0IjpyZXR1cm4gdGhpcy5wYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpfXRocm93IHRoaXMudW5leHBlY3RlZChlKX1wYXJzZVNjaGVtYUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoInNjaGVtYSIpO2NvbnN0IHQ9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLG49dGhpcy5vcHRpb25hbE1hbnkoeC5CUkFDRV9MLHRoaXMucGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbix4LkJSQUNFX1IpO2lmKDA9PT10Lmxlbmd0aCYmMD09PW4ubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlNDSEVNQV9FWFRFTlNJT04sZGlyZWN0aXZlczp0LG9wZXJhdGlvblR5cGVzOm59KX1wYXJzZVNjYWxhclR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJzY2FsYXIiKTtjb25zdCB0PXRoaXMucGFyc2VOYW1lKCksbj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7aWYoMD09PW4ubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlNDQUxBUl9UWVBFX0VYVEVOU0lPTixuYW1lOnQsZGlyZWN0aXZlczpufSl9cGFyc2VPYmplY3RUeXBlRXh0ZW5zaW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgidHlwZSIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCYmMD09PWkubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk9CSkVDVF9UWVBFX0VYVEVOU0lPTixuYW1lOnQsaW50ZXJmYWNlczpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlSW50ZXJmYWNlVHlwZUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImludGVyZmFjZSIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCYmMD09PWkubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTixuYW1lOnQsaW50ZXJmYWNlczpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlVW5pb25UeXBlRXh0ZW5zaW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgidW5pb24iKTtjb25zdCB0PXRoaXMucGFyc2VOYW1lKCksbj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscj10aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO2lmKDA9PT1uLmxlbmd0aCYmMD09PXIubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlVOSU9OX1RZUEVfRVhURU5TSU9OLG5hbWU6dCxkaXJlY3RpdmVzOm4sdHlwZXM6cn0pfXBhcnNlRW51bVR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJlbnVtIik7Y29uc3QgdD10aGlzLnBhcnNlTmFtZSgpLG49dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7aWYoMD09PW4ubGVuZ3RoJiYwPT09ci5sZW5ndGgpdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uRU5VTV9UWVBFX0VYVEVOU0lPTixuYW1lOnQsZGlyZWN0aXZlczpuLHZhbHVlczpyfSl9cGFyc2VJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJpbnB1dCIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxyPXRoaXMucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5JTlBVVF9PQkpFQ1RfVFlQRV9FWFRFTlNJT04sbmFtZTp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pfXBhcnNlRGlyZWN0aXZlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImRpcmVjdGl2ZSIpLHRoaXMuZXhwZWN0VG9rZW4oeC5BVCk7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUFyZ3VtZW50RGVmcygpLGk9dGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoInJlcGVhdGFibGUiKTt0aGlzLmV4cGVjdEtleXdvcmQoIm9uIik7Y29uc3Qgcz10aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb25zKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uRElSRUNUSVZFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sYXJndW1lbnRzOnIscmVwZWF0YWJsZTppLGxvY2F0aW9uczpzfSl9cGFyc2VEaXJlY3RpdmVMb2NhdGlvbnMoKXtyZXR1cm4gdGhpcy5kZWxpbWl0ZWRNYW55KHguUElQRSx0aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb24pfXBhcnNlRGlyZWN0aXZlTG9jYXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZU5hbWUoKTtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoTix0LnZhbHVlKSlyZXR1cm4gdDt0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoZSl9bm9kZShlLHQpe3JldHVybiEwIT09dGhpcy5fb3B0aW9ucy5ub0xvY2F0aW9uJiYodC5sb2M9bmV3IG0oZSx0aGlzLl9sZXhlci5sYXN0VG9rZW4sdGhpcy5fbGV4ZXIuc291cmNlKSksdH1wZWVrKGUpe3JldHVybiB0aGlzLl9sZXhlci50b2tlbi5raW5kPT09ZX1leHBlY3RUb2tlbihlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO2lmKHQua2luZD09PWUpcmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdDt0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0LnN0YXJ0LGBFeHBlY3RlZCAke3VlKGUpfSwgZm91bmQgJHtsZSh0KX0uYCl9ZXhwZWN0T3B0aW9uYWxUb2tlbihlKXtyZXR1cm4gdGhpcy5fbGV4ZXIudG9rZW4ua2luZD09PWUmJih0aGlzLmFkdmFuY2VMZXhlcigpLCEwKX1leHBlY3RLZXl3b3JkKGUpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47aWYodC5raW5kIT09eC5OQU1FfHx0LnZhbHVlIT09ZSl0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0LnN0YXJ0LGBFeHBlY3RlZCAiJHtlfSIsIGZvdW5kICR7bGUodCl9LmApO3RoaXMuYWR2YW5jZUxleGVyKCl9ZXhwZWN0T3B0aW9uYWxLZXl3b3JkKGUpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHQua2luZD09PXguTkFNRSYmdC52YWx1ZT09PWUmJih0aGlzLmFkdmFuY2VMZXhlcigpLCEwKX11bmV4cGVjdGVkKGUpe2NvbnN0IHQ9bnVsbCE9ZT9lOnRoaXMuX2xleGVyLnRva2VuO3JldHVybiB5KHRoaXMuX2xleGVyLnNvdXJjZSx0LnN0YXJ0LGBVbmV4cGVjdGVkICR7bGUodCl9LmApfWFueShlLHQsbil7dGhpcy5leHBlY3RUb2tlbihlKTtjb25zdCByPVtdO2Zvcig7IXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihuKTspci5wdXNoKHQuY2FsbCh0aGlzKSk7cmV0dXJuIHJ9b3B0aW9uYWxNYW55KGUsdCxuKXtpZih0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZSkpe2NvbnN0IGU9W107ZG97ZS5wdXNoKHQuY2FsbCh0aGlzKSl9d2hpbGUoIXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihuKSk7cmV0dXJuIGV9cmV0dXJuW119bWFueShlLHQsbil7dGhpcy5leHBlY3RUb2tlbihlKTtjb25zdCByPVtdO2Rve3IucHVzaCh0LmNhbGwodGhpcykpfXdoaWxlKCF0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obikpO3JldHVybiByfWRlbGltaXRlZE1hbnkoZSx0KXt0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZSk7Y29uc3Qgbj1bXTtkb3tuLnB1c2godC5jYWxsKHRoaXMpKX13aGlsZSh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZSkpO3JldHVybiBufWFkdmFuY2VMZXhlcigpe2NvbnN0e21heFRva2VuczplfT10aGlzLl9vcHRpb25zLHQ9dGhpcy5fbGV4ZXIuYWR2YW5jZSgpO2lmKHZvaWQgMCE9PWUmJnQua2luZCE9PXguRU9GJiYoKyt0aGlzLl90b2tlbkNvdW50ZXIsdGhpcy5fdG9rZW5Db3VudGVyPmUpKXRocm93IHkodGhpcy5fbGV4ZXIuc291cmNlLHQuc3RhcnQsYERvY3VtZW50IGNvbnRhaW5zIG1vcmUgdGhhdCAke2V9IHRva2Vucy4gUGFyc2luZyBhYm9ydGVkLmApfX1mdW5jdGlvbiBsZShlKXtjb25zdCB0PWUudmFsdWU7cmV0dXJuIHVlKGUua2luZCkrKG51bGwhPXQ/YCAiJHt0fSJgOiIiKX1mdW5jdGlvbiB1ZShlKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT14LkJBTkd8fGU9PT14LkRPTExBUnx8ZT09PXguQU1QfHxlPT09eC5QQVJFTl9MfHxlPT09eC5QQVJFTl9SfHxlPT09eC5TUFJFQUR8fGU9PT14LkNPTE9OfHxlPT09eC5FUVVBTFN8fGU9PT14LkFUfHxlPT09eC5CUkFDS0VUX0x8fGU9PT14LkJSQUNLRVRfUnx8ZT09PXguQlJBQ0VfTHx8ZT09PXguUElQRXx8ZT09PXguQlJBQ0VfUn0oZSk/YCIke2V9ImA6ZX1jb25zdCBkZT0vW1x4MDAtXHgxZlx4MjJceDVjXHg3Zi1ceDlmXS9nO2Z1bmN0aW9uIHBlKGUpe3JldHVybiBoZVtlLmNoYXJDb2RlQXQoMCldfWNvbnN0IGhlPVsiXFx1MDAwMCIsIlxcdTAwMDEiLCJcXHUwMDAyIiwiXFx1MDAwMyIsIlxcdTAwMDQiLCJcXHUwMDA1IiwiXFx1MDAwNiIsIlxcdTAwMDciLCJcXGIiLCJcXHQiLCJcXG4iLCJcXHUwMDBCIiwiXFxmIiwiXFxyIiwiXFx1MDAwRSIsIlxcdTAwMEYiLCJcXHUwMDEwIiwiXFx1MDAxMSIsIlxcdTAwMTIiLCJcXHUwMDEzIiwiXFx1MDAxNCIsIlxcdTAwMTUiLCJcXHUwMDE2IiwiXFx1MDAxNyIsIlxcdTAwMTgiLCJcXHUwMDE5IiwiXFx1MDAxQSIsIlxcdTAwMUIiLCJcXHUwMDFDIiwiXFx1MDAxRCIsIlxcdTAwMUUiLCJcXHUwMDFGIiwiIiwiIiwnXFwiJywiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiXFxcXCIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIlxcdTAwN0YiLCJcXHUwMDgwIiwiXFx1MDA4MSIsIlxcdTAwODIiLCJcXHUwMDgzIiwiXFx1MDA4NCIsIlxcdTAwODUiLCJcXHUwMDg2IiwiXFx1MDA4NyIsIlxcdTAwODgiLCJcXHUwMDg5IiwiXFx1MDA4QSIsIlxcdTAwOEIiLCJcXHUwMDhDIiwiXFx1MDA4RCIsIlxcdTAwOEUiLCJcXHUwMDhGIiwiXFx1MDA5MCIsIlxcdTAwOTEiLCJcXHUwMDkyIiwiXFx1MDA5MyIsIlxcdTAwOTQiLCJcXHUwMDk1IiwiXFx1MDA5NiIsIlxcdTAwOTciLCJcXHUwMDk4IiwiXFx1MDA5OSIsIlxcdTAwOUEiLCJcXHUwMDlCIiwiXFx1MDA5QyIsIlxcdTAwOUQiLCJcXHUwMDlFIiwiXFx1MDA5RiJdLGZlPU9iamVjdC5mcmVlemUoe30pO2Z1bmN0aW9uIHllKGUsdCl7Y29uc3Qgbj1lW3RdO3JldHVybiJvYmplY3QiPT10eXBlb2Ygbj9uOiJmdW5jdGlvbiI9PXR5cGVvZiBuP3tlbnRlcjpuLGxlYXZlOnZvaWQgMH06e2VudGVyOmUuZW50ZXIsbGVhdmU6ZS5sZWF2ZX19ZnVuY3Rpb24gbWUoZSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuPV8pe2NvbnN0IHI9bmV3IE1hcDtmb3IoY29uc3QgYSBvZiBPYmplY3QudmFsdWVzKE8pKXIuc2V0KGEseWUodCxhKSk7bGV0IGkscyxvLGM9QXJyYXkuaXNBcnJheShlKSxsPVtlXSx1PS0xLGQ9W10scD1lO2NvbnN0IGg9W10sZj1bXTtkb3t1Kys7Y29uc3QgZT11PT09bC5sZW5ndGgsXz1lJiYwIT09ZC5sZW5ndGg7aWYoZSl7aWYocz0wPT09Zi5sZW5ndGg/dm9pZCAwOmhbaC5sZW5ndGgtMV0scD1vLG89Zi5wb3AoKSxfKWlmKGMpe3A9cC5zbGljZSgpO2xldCBlPTA7Zm9yKGNvbnN0W3Qsbl1vZiBkKXtjb25zdCByPXQtZTtudWxsPT09bj8ocC5zcGxpY2UociwxKSxlKyspOnBbcl09bn19ZWxzZXtwPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHt9LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHApKTtmb3IoY29uc3RbZSx0XW9mIGQpcFtlXT10fXU9aS5pbmRleCxsPWkua2V5cyxkPWkuZWRpdHMsYz1pLmluQXJyYXksaT1pLnByZXZ9ZWxzZSBpZihvKXtpZihzPWM/dTpsW3VdLHA9b1tzXSxudWxsPT1wKWNvbnRpbnVlO2gucHVzaChzKX1sZXQgZztpZighQXJyYXkuaXNBcnJheShwKSl7dmFyIHksbTtFKHApfHxhKCExLGBJbnZhbGlkIEFTVCBOb2RlOiAke3JlKHApfS5gKTtjb25zdCBuPWU/bnVsbD09PSh5PXIuZ2V0KHAua2luZCkpfHx2b2lkIDA9PT15P3ZvaWQgMDp5LmxlYXZlOm51bGw9PT0obT1yLmdldChwLmtpbmQpKXx8dm9pZCAwPT09bT92b2lkIDA6bS5lbnRlcjtpZihnPW51bGw9PW4/dm9pZCAwOm4uY2FsbCh0LHAscyxvLGgsZiksZz09PWZlKWJyZWFrO2lmKCExPT09Zyl7aWYoIWUpe2gucG9wKCk7Y29udGludWV9fWVsc2UgaWYodm9pZCAwIT09ZyYmKGQucHVzaChbcyxnXSksIWUpKXtpZighRShnKSl7aC5wb3AoKTtjb250aW51ZX1wPWd9fXZhciB2O3ZvaWQgMD09PWcmJl8mJmQucHVzaChbcyxwXSksZT9oLnBvcCgpOihpPXtpbkFycmF5OmMsaW5kZXg6dSxrZXlzOmwsZWRpdHM6ZCxwcmV2Oml9LGM9QXJyYXkuaXNBcnJheShwKSxsPWM/cDpudWxsIT09KHY9bltwLmtpbmRdKSYmdm9pZCAwIT09dj92OltdLHU9LTEsZD1bXSxvJiZmLnB1c2gobyksbz1wKX13aGlsZSh2b2lkIDAhPT1pKTtyZXR1cm4gMCE9PWQubGVuZ3RoP2RbZC5sZW5ndGgtMV1bMV06ZX0oZSx2ZSl9Y29uc3QgdmU9e05hbWU6e2xlYXZlOmU9PmUudmFsdWV9LFZhcmlhYmxlOntsZWF2ZTplPT4iJCIrZS5uYW1lfSxEb2N1bWVudDp7bGVhdmU6ZT0+X2UoZS5kZWZpbml0aW9ucywiXG5cbiIpfSxPcGVyYXRpb25EZWZpbml0aW9uOntsZWF2ZShlKXtjb25zdCB0PUVlKCIoIixfZShlLnZhcmlhYmxlRGVmaW5pdGlvbnMsIiwgIiksIikiKSxuPV9lKFtlLm9wZXJhdGlvbixfZShbZS5uYW1lLHRdKSxfZShlLmRpcmVjdGl2ZXMsIiAiKV0sIiAiKTtyZXR1cm4oInF1ZXJ5Ij09PW4/IiI6bisiICIpK2Uuc2VsZWN0aW9uU2V0fX0sVmFyaWFibGVEZWZpbml0aW9uOntsZWF2ZTooe3ZhcmlhYmxlOmUsdHlwZTp0LGRlZmF1bHRWYWx1ZTpuLGRpcmVjdGl2ZXM6cn0pPT5lKyI6ICIrdCtFZSgiID0gIixuKStFZSgiICIsX2UociwiICIpKX0sU2VsZWN0aW9uU2V0OntsZWF2ZTooe3NlbGVjdGlvbnM6ZX0pPT5nZShlKX0sRmllbGQ6e2xlYXZlKHthbGlhczplLG5hbWU6dCxhcmd1bWVudHM6bixkaXJlY3RpdmVzOnIsc2VsZWN0aW9uU2V0Oml9KXtjb25zdCBzPUVlKCIiLGUsIjogIikrdDtsZXQgbz1zK0VlKCIoIixfZShuLCIsICIpLCIpIik7cmV0dXJuIG8ubGVuZ3RoPjgwJiYobz1zK0VlKCIoXG4iLFRlKF9lKG4sIlxuIikpLCJcbikiKSksX2UoW28sX2UociwiICIpLGldLCIgIil9fSxBcmd1bWVudDp7bGVhdmU6KHtuYW1lOmUsdmFsdWU6dH0pPT5lKyI6ICIrdH0sRnJhZ21lbnRTcHJlYWQ6e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dH0pPT4iLi4uIitlK0VlKCIgIixfZSh0LCIgIikpfSxJbmxpbmVGcmFnbWVudDp7bGVhdmU6KHt0eXBlQ29uZGl0aW9uOmUsZGlyZWN0aXZlczp0LHNlbGVjdGlvblNldDpufSk9Pl9lKFsiLi4uIixFZSgib24gIixlKSxfZSh0LCIgIiksbl0sIiAiKX0sRnJhZ21lbnREZWZpbml0aW9uOntsZWF2ZTooe25hbWU6ZSx0eXBlQ29uZGl0aW9uOnQsdmFyaWFibGVEZWZpbml0aW9uczpuLGRpcmVjdGl2ZXM6cixzZWxlY3Rpb25TZXQ6aX0pPT5gZnJhZ21lbnQgJHtlfSR7RWUoIigiLF9lKG4sIiwgIiksIikiKX0gb24gJHt0fSAke0VlKCIiLF9lKHIsIiAiKSwiICIpfWAraX0sSW50VmFsdWU6e2xlYXZlOih7dmFsdWU6ZX0pPT5lfSxGbG9hdFZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sU3RyaW5nVmFsdWU6e2xlYXZlOih7dmFsdWU6ZSxibG9jazp0fSk9PnQ/ZnVuY3Rpb24oZSx0KXtjb25zdCBuPWUucmVwbGFjZSgvIiIiL2csJ1xcIiIiJykscj1uLnNwbGl0KC9cclxufFtcblxyXS9nKSxpPTE9PT1yLmxlbmd0aCxzPXIubGVuZ3RoPjEmJnIuc2xpY2UoMSkuZXZlcnkoKGU9PjA9PT1lLmxlbmd0aHx8RChlLmNoYXJDb2RlQXQoMCkpKSksbz1uLmVuZHNXaXRoKCdcXCIiIicpLGE9ZS5lbmRzV2l0aCgnIicpJiYhbyxjPWUuZW5kc1dpdGgoIlxcIiksbD1hfHxjLHU9IShudWxsIT10JiZ0Lm1pbmltaXplKSYmKCFpfHxlLmxlbmd0aD43MHx8bHx8c3x8byk7bGV0IGQ9IiI7Y29uc3QgcD1pJiZEKGUuY2hhckNvZGVBdCgwKSk7cmV0dXJuKHUmJiFwfHxzKSYmKGQrPSJcbiIpLGQrPW4sKHV8fGwpJiYoZCs9IlxuIiksJyIiIicrZCsnIiIiJ30oZSk6YCIke2UucmVwbGFjZShkZSxwZSl9ImB9LEJvb2xlYW5WYWx1ZTp7bGVhdmU6KHt2YWx1ZTplfSk9PmU/InRydWUiOiJmYWxzZSJ9LE51bGxWYWx1ZTp7bGVhdmU6KCk9PiJudWxsIn0sRW51bVZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sTGlzdFZhbHVlOntsZWF2ZTooe3ZhbHVlczplfSk9PiJbIitfZShlLCIsICIpKyJdIn0sT2JqZWN0VmFsdWU6e2xlYXZlOih7ZmllbGRzOmV9KT0+InsiK19lKGUsIiwgIikrIn0ifSxPYmplY3RGaWVsZDp7bGVhdmU6KHtuYW1lOmUsdmFsdWU6dH0pPT5lKyI6ICIrdH0sRGlyZWN0aXZlOntsZWF2ZTooe25hbWU6ZSxhcmd1bWVudHM6dH0pPT4iQCIrZStFZSgiKCIsX2UodCwiLCAiKSwiKSIpfSxOYW1lZFR5cGU6e2xlYXZlOih7bmFtZTplfSk9PmV9LExpc3RUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT4iWyIrZSsiXSJ9LE5vbk51bGxUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT5lKyIhIn0sU2NoZW1hRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLGRpcmVjdGl2ZXM6dCxvcGVyYXRpb25UeXBlczpufSk9PkVlKCIiLGUsIlxuIikrX2UoWyJzY2hlbWEiLF9lKHQsIiAiKSxnZShuKV0sIiAiKX0sT3BlcmF0aW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7b3BlcmF0aW9uOmUsdHlwZTp0fSk9PmUrIjogIit0fSxTY2FsYXJUeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxkaXJlY3RpdmVzOm59KT0+RWUoIiIsZSwiXG4iKStfZShbInNjYWxhciIsdCxfZShuLCIgIildLCIgIil9LE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOnIsZmllbGRzOml9KT0+RWUoIiIsZSwiXG4iKStfZShbInR5cGUiLHQsRWUoImltcGxlbWVudHMgIixfZShuLCIgJiAiKSksX2UociwiICIpLGdlKGkpXSwiICIpfSxGaWVsZERlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsYXJndW1lbnRzOm4sdHlwZTpyLGRpcmVjdGl2ZXM6aX0pPT5FZSgiIixlLCJcbiIpK3QrKGJlKG4pP0VlKCIoXG4iLFRlKF9lKG4sIlxuIikpLCJcbikiKTpFZSgiKCIsX2UobiwiLCAiKSwiKSIpKSsiOiAiK3IrRWUoIiAiLF9lKGksIiAiKSl9LElucHV0VmFsdWVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LHR5cGU6bixkZWZhdWx0VmFsdWU6cixkaXJlY3RpdmVzOml9KT0+RWUoIiIsZSwiXG4iKStfZShbdCsiOiAiK24sRWUoIj0gIixyKSxfZShpLCIgIildLCIgIil9LEludGVyZmFjZVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOnIsZmllbGRzOml9KT0+RWUoIiIsZSwiXG4iKStfZShbImludGVyZmFjZSIsdCxFZSgiaW1wbGVtZW50cyAiLF9lKG4sIiAmICIpKSxfZShyLCIgIiksZ2UoaSldLCIgIil9LFVuaW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpuLHR5cGVzOnJ9KT0+RWUoIiIsZSwiXG4iKStfZShbInVuaW9uIix0LF9lKG4sIiAiKSxFZSgiPSAiLF9lKHIsIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bix2YWx1ZXM6cn0pPT5FZSgiIixlLCJcbiIpK19lKFsiZW51bSIsdCxfZShuLCIgIiksZ2UocildLCIgIil9LEVudW1WYWx1ZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpufSk9PkVlKCIiLGUsIlxuIikrX2UoW3QsX2UobiwiICIpXSwiICIpfSxJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5FZSgiIixlLCJcbiIpK19lKFsiaW5wdXQiLHQsX2UobiwiICIpLGdlKHIpXSwiICIpfSxEaXJlY3RpdmVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGFyZ3VtZW50czpuLHJlcGVhdGFibGU6cixsb2NhdGlvbnM6aX0pPT5FZSgiIixlLCJcbiIpKyJkaXJlY3RpdmUgQCIrdCsoYmUobik/RWUoIihcbiIsVGUoX2UobiwiXG4iKSksIlxuKSIpOkVlKCIoIixfZShuLCIsICIpLCIpIikpKyhyPyIgcmVwZWF0YWJsZSI6IiIpKyIgb24gIitfZShpLCIgfCAiKX0sU2NoZW1hRXh0ZW5zaW9uOntsZWF2ZTooe2RpcmVjdGl2ZXM6ZSxvcGVyYXRpb25UeXBlczp0fSk9Pl9lKFsiZXh0ZW5kIHNjaGVtYSIsX2UoZSwiICIpLGdlKHQpXSwiICIpfSxTY2FsYXJUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnR9KT0+X2UoWyJleHRlbmQgc2NhbGFyIixlLF9lKHQsIiAiKV0sIiAiKX0sT2JqZWN0VHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5fZShbImV4dGVuZCB0eXBlIixlLEVlKCJpbXBsZW1lbnRzICIsX2UodCwiICYgIikpLF9lKG4sIiAiKSxnZShyKV0sIiAiKX0sSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5fZShbImV4dGVuZCBpbnRlcmZhY2UiLGUsRWUoImltcGxlbWVudHMgIixfZSh0LCIgJiAiKSksX2UobiwiICIpLGdlKHIpXSwiICIpfSxVbmlvblR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCx0eXBlczpufSk9Pl9lKFsiZXh0ZW5kIHVuaW9uIixlLF9lKHQsIiAiKSxFZSgiPSAiLF9lKG4sIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCx2YWx1ZXM6bn0pPT5fZShbImV4dGVuZCBlbnVtIixlLF9lKHQsIiAiKSxnZShuKV0sIiAiKX0sSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnQsZmllbGRzOm59KT0+X2UoWyJleHRlbmQgaW5wdXQiLGUsX2UodCwiICIpLGdlKG4pXSwiICIpfX07ZnVuY3Rpb24gX2UoZSx0PSIiKXt2YXIgbjtyZXR1cm4gbnVsbCE9PShuPW51bGw9PWU/dm9pZCAwOmUuZmlsdGVyKChlPT5lKSkuam9pbih0KSkmJnZvaWQgMCE9PW4/bjoiIn1mdW5jdGlvbiBnZShlKXtyZXR1cm4gRWUoIntcbiIsVGUoX2UoZSwiXG4iKSksIlxufSIpfWZ1bmN0aW9uIEVlKGUsdCxuPSIiKXtyZXR1cm4gbnVsbCE9dCYmIiIhPT10P2UrdCtuOiIifWZ1bmN0aW9uIFRlKGUpe3JldHVybiBFZSgiICAiLGUucmVwbGFjZSgvXG4vZywiXG4gICIpKX1mdW5jdGlvbiBiZShlKXt2YXIgdDtyZXR1cm4gbnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUuc29tZSgoZT0+ZS5pbmNsdWRlcygiXG4iKSkpKSYmdm9pZCAwIT09dCYmdH12YXIgTmU9bmV3IE1hcCxJZT1uZXcgTWFwLE9lPSEwLEFlPSExO2Z1bmN0aW9uIHhlKGUpe3JldHVybiBlLnJlcGxhY2UoL1tccyxdKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIFNlKGUpe3ZhciB0PW5ldyBTZXQsbj1bXTtyZXR1cm4gZS5kZWZpbml0aW9ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZigiRnJhZ21lbnREZWZpbml0aW9uIj09PWUua2luZCl7dmFyIHI9ZS5uYW1lLnZhbHVlLGk9eGUoKG89ZS5sb2MpLnNvdXJjZS5ib2R5LnN1YnN0cmluZyhvLnN0YXJ0LG8uZW5kKSkscz1JZS5nZXQocik7cyYmIXMuaGFzKGkpP09lJiZjb25zb2xlLndhcm4oIldhcm5pbmc6IGZyYWdtZW50IHdpdGggbmFtZSAiK3IrIiBhbHJlYWR5IGV4aXN0cy5cbmdyYXBocWwtdGFnIGVuZm9yY2VzIGFsbCBmcmFnbWVudCBuYW1lcyBhY3Jvc3MgeW91ciBhcHBsaWNhdGlvbiB0byBiZSB1bmlxdWU7IHJlYWQgbW9yZSBhYm91dFxudGhpcyBpbiB0aGUgZG9jczogaHR0cDovL2Rldi5hcG9sbG9kYXRhLmNvbS9jb3JlL2ZyYWdtZW50cy5odG1sI3VuaXF1ZS1uYW1lcyIpOnN8fEllLnNldChyLHM9bmV3IFNldCkscy5hZGQoaSksdC5oYXMoaSl8fCh0LmFkZChpKSxuLnB1c2goZSkpfWVsc2Ugbi5wdXNoKGUpO3ZhciBvfSkpLG8obyh7fSxlKSx7ZGVmaW5pdGlvbnM6bn0pfWZ1bmN0aW9uIERlKGUpe3ZhciB0PXhlKGUpO2lmKCFOZS5oYXModCkpe3ZhciBuPWFlKGUse2V4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzOkFlLGFsbG93TGVnYWN5RnJhZ21lbnRWYXJpYWJsZXM6QWV9KTtpZighbnx8IkRvY3VtZW50IiE9PW4ua2luZCl0aHJvdyBuZXcgRXJyb3IoIk5vdCBhIHZhbGlkIEdyYXBoUUwgZG9jdW1lbnQuIik7TmUuc2V0KHQsZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFNldChlLmRlZmluaXRpb25zKTt0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UubG9jJiZkZWxldGUgZS5sb2MsT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7dmFyIHI9ZVtuXTtyJiYib2JqZWN0Ij09dHlwZW9mIHImJnQuYWRkKHIpfSkpfSkpO3ZhciBuPWUubG9jO3JldHVybiBuJiYoZGVsZXRlIG4uc3RhcnRUb2tlbixkZWxldGUgbi5lbmRUb2tlbiksZX0oU2UobikpKX1yZXR1cm4gTmUuZ2V0KHQpfWZ1bmN0aW9uIHdlKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dOyJzdHJpbmciPT10eXBlb2YgZSYmKGU9W2VdKTt2YXIgcj1lWzBdO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dCYmIkRvY3VtZW50Ij09PXQua2luZD9yKz10LmxvYy5zb3VyY2UuYm9keTpyKz10LHIrPWVbbisxXX0pKSxEZShyKX12YXIga2UsQ2U9d2UsUGU9ZnVuY3Rpb24oKXtOZS5jbGVhcigpLEllLmNsZWFyKCl9LFJlPWZ1bmN0aW9uKCl7T2U9ITF9LExlPWZ1bmN0aW9uKCl7QWU9ITB9LEZlPWZ1bmN0aW9uKCl7QWU9ITF9OyhrZT13ZXx8KHdlPXt9KSkuZ3FsPUNlLGtlLnJlc2V0Q2FjaGVzPVBlLGtlLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzPVJlLGtlLmVuYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzPUxlLGtlLmRpc2FibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcz1GZSx3ZS5kZWZhdWx0PXdlO2NvbnN0ICRlPXdlYAoJbXV0YXRpb24gUHVzaFBheWxvYWQoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHBheWxvYWRfaWQ6IElEIQoJCSRldmVudHM6IFJlcGxheUV2ZW50c0lucHV0IQoJCSRtZXNzYWdlczogU3RyaW5nIQoJCSRyZXNvdXJjZXM6IFN0cmluZyEKCQkkd2ViX3NvY2tldF9ldmVudHM6IFN0cmluZyEKCQkkZXJyb3JzOiBbRXJyb3JPYmplY3RJbnB1dF0hCgkJJGlzX2JlYWNvbjogQm9vbGVhbgoJCSRoYXNfc2Vzc2lvbl91bmxvYWRlZDogQm9vbGVhbgoJCSRoaWdobGlnaHRfbG9nczogU3RyaW5nCgkpIHsKCQlwdXNoUGF5bG9hZCgKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwYXlsb2FkX2lkOiAkcGF5bG9hZF9pZAoJCQlldmVudHM6ICRldmVudHMKCQkJbWVzc2FnZXM6ICRtZXNzYWdlcwoJCQlyZXNvdXJjZXM6ICRyZXNvdXJjZXMKCQkJd2ViX3NvY2tldF9ldmVudHM6ICR3ZWJfc29ja2V0X2V2ZW50cwoJCQllcnJvcnM6ICRlcnJvcnMKCQkJaXNfYmVhY29uOiAkaXNfYmVhY29uCgkJCWhhc19zZXNzaW9uX3VubG9hZGVkOiAkaGFzX3Nlc3Npb25fdW5sb2FkZWQKCQkJaGlnaGxpZ2h0X2xvZ3M6ICRoaWdobGlnaHRfbG9ncwoJCSkKCX0KYCxNZT13ZWAKCW11dGF0aW9uIFB1c2hQYXlsb2FkQ29tcHJlc3NlZCgKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkcGF5bG9hZF9pZDogSUQhCgkJJGRhdGE6IFN0cmluZyEKCSkgewoJCXB1c2hQYXlsb2FkQ29tcHJlc3NlZCgKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwYXlsb2FkX2lkOiAkcGF5bG9hZF9pZAoJCQlkYXRhOiAkZGF0YQoJCSkKCX0KYCxWZT13ZWAKCW11dGF0aW9uIGlkZW50aWZ5U2Vzc2lvbigKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkdXNlcl9pZGVudGlmaWVyOiBTdHJpbmchCgkJJHVzZXJfb2JqZWN0OiBBbnkKCSkgewoJCWlkZW50aWZ5U2Vzc2lvbigKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQl1c2VyX2lkZW50aWZpZXI6ICR1c2VyX2lkZW50aWZpZXIKCQkJdXNlcl9vYmplY3Q6ICR1c2VyX29iamVjdAoJCSkKCX0KYCxCZT13ZWAKCW11dGF0aW9uIGFkZFNlc3Npb25Qcm9wZXJ0aWVzKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSRwcm9wZXJ0aWVzX29iamVjdDogQW55CgkpIHsKCQlhZGRTZXNzaW9uUHJvcGVydGllcygKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwcm9wZXJ0aWVzX29iamVjdDogJHByb3BlcnRpZXNfb2JqZWN0CgkJKQoJfQpgLGplPXdlYAoJbXV0YXRpb24gcHVzaE1ldHJpY3MoJG1ldHJpY3M6IFtNZXRyaWNJbnB1dF0hKSB7CgkJcHVzaE1ldHJpY3MobWV0cmljczogJG1ldHJpY3MpCgl9CmAsVWU9d2VgCgltdXRhdGlvbiBhZGRTZXNzaW9uRmVlZGJhY2soCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHVzZXJfbmFtZTogU3RyaW5nCgkJJHVzZXJfZW1haWw6IFN0cmluZwoJCSR2ZXJiYXRpbTogU3RyaW5nIQoJCSR0aW1lc3RhbXA6IFRpbWVzdGFtcCEKCSkgewoJCWFkZFNlc3Npb25GZWVkYmFjaygKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQl1c2VyX25hbWU6ICR1c2VyX25hbWUKCQkJdXNlcl9lbWFpbDogJHVzZXJfZW1haWwKCQkJdmVyYmF0aW06ICR2ZXJiYXRpbQoJCQl0aW1lc3RhbXA6ICR0aW1lc3RhbXAKCQkpCgl9CmAscWU9d2VgCgltdXRhdGlvbiBpbml0aWFsaXplU2Vzc2lvbigKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkb3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQ6IFN0cmluZyEKCQkkZW5hYmxlX3N0cmljdF9wcml2YWN5OiBCb29sZWFuIQoJCSRwcml2YWN5X3NldHRpbmc6IFN0cmluZyEKCQkkZW5hYmxlX3JlY29yZGluZ19uZXR3b3JrX2NvbnRlbnRzOiBCb29sZWFuIQoJCSRjbGllbnRWZXJzaW9uOiBTdHJpbmchCgkJJGZpcnN0bG9hZFZlcnNpb246IFN0cmluZyEKCQkkY2xpZW50Q29uZmlnOiBTdHJpbmchCgkJJGVudmlyb25tZW50OiBTdHJpbmchCgkJJGlkOiBTdHJpbmchCgkJJGFwcFZlcnNpb246IFN0cmluZwoJCSRzZXJ2aWNlTmFtZTogU3RyaW5nIQoJCSRjbGllbnRfaWQ6IFN0cmluZyEKCQkkbmV0d29ya19yZWNvcmRpbmdfZG9tYWluczogW1N0cmluZyFdCgkJJGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmc6IEJvb2xlYW4KCSkgewoJCWluaXRpYWxpemVTZXNzaW9uKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCW9yZ2FuaXphdGlvbl92ZXJib3NlX2lkOiAkb3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQKCQkJZW5hYmxlX3N0cmljdF9wcml2YWN5OiAkZW5hYmxlX3N0cmljdF9wcml2YWN5CgkJCWVuYWJsZV9yZWNvcmRpbmdfbmV0d29ya19jb250ZW50czogJGVuYWJsZV9yZWNvcmRpbmdfbmV0d29ya19jb250ZW50cwoJCQljbGllbnRWZXJzaW9uOiAkY2xpZW50VmVyc2lvbgoJCQlmaXJzdGxvYWRWZXJzaW9uOiAkZmlyc3Rsb2FkVmVyc2lvbgoJCQljbGllbnRDb25maWc6ICRjbGllbnRDb25maWcKCQkJZW52aXJvbm1lbnQ6ICRlbnZpcm9ubWVudAoJCQlhcHBWZXJzaW9uOiAkYXBwVmVyc2lvbgoJCQlzZXJ2aWNlTmFtZTogJHNlcnZpY2VOYW1lCgkJCWZpbmdlcnByaW50OiAkaWQKCQkJY2xpZW50X2lkOiAkY2xpZW50X2lkCgkJCW5ldHdvcmtfcmVjb3JkaW5nX2RvbWFpbnM6ICRuZXR3b3JrX3JlY29yZGluZ19kb21haW5zCgkJCWRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmc6ICRkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nCgkJCXByaXZhY3lfc2V0dGluZzogJHByaXZhY3lfc2V0dGluZwoJCSkgewoJCQlzZWN1cmVfaWQKCQkJcHJvamVjdF9pZAoJCX0KCX0KYCxLZT13ZWAKCXF1ZXJ5IElnbm9yZSgkaWQ6IElEISkgewoJCWlnbm9yZShpZDogJGlkKQoJfQpgLEdlPShlLHQsbixyKT0+ZSgpO2NvbnN0IHplPUpTT04sWWU9ZT0+e3ZhciB0LG47bGV0IHI7Y29uc3QgaT1lLmRlZmluaXRpb25zLmZpbHRlcigoZT0+Ik9wZXJhdGlvbkRlZmluaXRpb24iPT09ZS5raW5kKSk7cmV0dXJuIDE9PT1pLmxlbmd0aCYmKHI9bnVsbD09KG49bnVsbD09KHQ9aVswXSk/dm9pZCAwOnQubmFtZSk/dm9pZCAwOm4udmFsdWUpLHJ9LEhlPWU9PntpZigic3RyaW5nIj09dHlwZW9mIGUpe2xldCB0O3RyeXtjb25zdCBuPWFlKGUpO3Q9WWUobil9Y2F0Y2gobil7fXJldHVybntxdWVyeTplLG9wZXJhdGlvbk5hbWU6dH19Y29uc3QgdD1ZZShlKTtyZXR1cm57cXVlcnk6bWUoZSksb3BlcmF0aW9uTmFtZTp0fX07Y2xhc3MgSmUgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGAke0plLmV4dHJhY3RNZXNzYWdlKGUpfTogJHtKU09OLnN0cmluZ2lmeSh7cmVzcG9uc2U6ZSxyZXF1ZXN0OnR9KX1gKSxPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxKZS5wcm90b3R5cGUpLHRoaXMucmVzcG9uc2U9ZSx0aGlzLnJlcXVlc3Q9dCwiZnVuY3Rpb24iPT10eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJkVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsSmUpfXN0YXRpYyBleHRyYWN0TWVzc2FnZShlKXt2YXIgdCxuLHI7cmV0dXJuIG51bGwhPShyPW51bGw9PShuPW51bGw9PSh0PWUuZXJyb3JzKT92b2lkIDA6dFswXSk/dm9pZCAwOm4ubWVzc2FnZSk/cjpgR3JhcGhRTCBFcnJvciAoQ29kZTogJHtlLnN0YXR1c30pYH19dmFyIFFlPXtleHBvcnRzOnt9fTshZnVuY3Rpb24oZSx0KXt2YXIgcixpPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOm4scz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmZldGNoPSExLHRoaXMuRE9NRXhjZXB0aW9uPWkuRE9NRXhjZXB0aW9ufXJldHVybiBlLnByb3RvdHlwZT1pLG5ldyBlfSgpO3I9cyxmdW5jdGlvbihlKXt2YXIgdD0iVVJMU2VhcmNoUGFyYW1zImluIHIsbj0iU3ltYm9sImluIHImJiJpdGVyYXRvciJpbiBTeW1ib2wsaT0iRmlsZVJlYWRlciJpbiByJiYiQmxvYiJpbiByJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEJsb2IsITB9Y2F0Y2goZSl7cmV0dXJuITF9fSgpLHM9IkZvcm1EYXRhImluIHIsbz0iQXJyYXlCdWZmZXIiaW4gcjtpZihvKXZhciBhPVsiW29iamVjdCBJbnQ4QXJyYXldIiwiW29iamVjdCBVaW50OEFycmF5XSIsIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIiwiW29iamVjdCBJbnQxNkFycmF5XSIsIltvYmplY3QgVWludDE2QXJyYXldIiwiW29iamVjdCBJbnQzMkFycmF5XSIsIltvYmplY3QgVWludDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDY0QXJyYXldIl0sYz1BcnJheUJ1ZmZlci5pc1ZpZXd8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZhLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKT4tMX07ZnVuY3Rpb24gbChlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJihlPVN0cmluZyhlKSksL1teYS16MC05XC0jJCUmJyorLl5fYHx+XS9pLnRlc3QoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUiKTtyZXR1cm4gZS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYoZT1TdHJpbmcoZSkpLGV9ZnVuY3Rpb24gZChlKXt2YXIgdD17bmV4dDpmdW5jdGlvbigpe3ZhciB0PWUuc2hpZnQoKTtyZXR1cm57ZG9uZTp2b2lkIDA9PT10LHZhbHVlOnR9fX07cmV0dXJuIG4mJih0W1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdH0pLHR9ZnVuY3Rpb24gcChlKXt0aGlzLm1hcD17fSxlIGluc3RhbmNlb2YgcD9lLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7dGhpcy5hcHBlbmQodCxlKX0pLHRoaXMpOkFycmF5LmlzQXJyYXkoZSk/ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0aGlzLmFwcGVuZChlWzBdLGVbMV0pfSksdGhpcyk6ZSYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7dGhpcy5hcHBlbmQodCxlW3RdKX0pLHRoaXMpfWZ1bmN0aW9uIGgoZSl7aWYoZS5ib2R5VXNlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcigiQWxyZWFkeSByZWFkIikpO2UuYm9keVVzZWQ9ITB9ZnVuY3Rpb24gZihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7ZS5vbmxvYWQ9ZnVuY3Rpb24oKXt0KGUucmVzdWx0KX0sZS5vbmVycm9yPWZ1bmN0aW9uKCl7bihlLmVycm9yKX19KSl9ZnVuY3Rpb24geShlKXt2YXIgdD1uZXcgRmlsZVJlYWRlcixuPWYodCk7cmV0dXJuIHQucmVhZEFzQXJyYXlCdWZmZXIoZSksbn1mdW5jdGlvbiBtKGUpe2lmKGUuc2xpY2UpcmV0dXJuIGUuc2xpY2UoMCk7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZS5ieXRlTGVuZ3RoKTtyZXR1cm4gdC5zZXQobmV3IFVpbnQ4QXJyYXkoZSkpLHQuYnVmZmVyfWZ1bmN0aW9uIHYoKXtyZXR1cm4gdGhpcy5ib2R5VXNlZD0hMSx0aGlzLl9pbml0Qm9keT1mdW5jdGlvbihlKXt2YXIgbjt0aGlzLl9ib2R5SW5pdD1lLGU/InN0cmluZyI9PXR5cGVvZiBlP3RoaXMuX2JvZHlUZXh0PWU6aSYmQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihlKT90aGlzLl9ib2R5QmxvYj1lOnMmJkZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpP3RoaXMuX2JvZHlGb3JtRGF0YT1lOnQmJlVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihlKT90aGlzLl9ib2R5VGV4dD1lLnRvU3RyaW5nKCk6byYmaSYmKG49ZSkmJkRhdGFWaWV3LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG4pPyh0aGlzLl9ib2R5QXJyYXlCdWZmZXI9bShlLmJ1ZmZlciksdGhpcy5fYm9keUluaXQ9bmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pKTpvJiYoQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZSl8fGMoZSkpP3RoaXMuX2JvZHlBcnJheUJ1ZmZlcj1tKGUpOnRoaXMuX2JvZHlUZXh0PWU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpOnRoaXMuX2JvZHlUZXh0PSIiLHRoaXMuaGVhZGVycy5nZXQoImNvbnRlbnQtdHlwZSIpfHwoInN0cmluZyI9PXR5cGVvZiBlP3RoaXMuaGVhZGVycy5zZXQoImNvbnRlbnQtdHlwZSIsInRleHQvcGxhaW47Y2hhcnNldD1VVEYtOCIpOnRoaXMuX2JvZHlCbG9iJiZ0aGlzLl9ib2R5QmxvYi50eXBlP3RoaXMuaGVhZGVycy5zZXQoImNvbnRlbnQtdHlwZSIsdGhpcy5fYm9keUJsb2IudHlwZSk6dCYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpJiZ0aGlzLmhlYWRlcnMuc2V0KCJjb250ZW50LXR5cGUiLCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCIpKX0saSYmKHRoaXMuYmxvYj1mdW5jdGlvbigpe3ZhciBlPWgodGhpcyk7aWYoZSlyZXR1cm4gZTtpZih0aGlzLl9ib2R5QmxvYilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKTtpZih0aGlzLl9ib2R5QXJyYXlCdWZmZXIpcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpO2lmKHRoaXMuX2JvZHlGb3JtRGF0YSl0aHJvdyBuZXcgRXJyb3IoImNvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYiIpO3JldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpfSx0aGlzLmFycmF5QnVmZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvZHlBcnJheUJ1ZmZlcj9oKHRoaXMpfHxQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUFycmF5QnVmZmVyKTp0aGlzLmJsb2IoKS50aGVuKHkpfSksdGhpcy50ZXh0PWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHI9aCh0aGlzKTtpZihyKXJldHVybiByO2lmKHRoaXMuX2JvZHlCbG9iKXJldHVybiBlPXRoaXMuX2JvZHlCbG9iLHQ9bmV3IEZpbGVSZWFkZXIsbj1mKHQpLHQucmVhZEFzVGV4dChlKSxuO2lmKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgVWludDhBcnJheShlKSxuPW5ldyBBcnJheSh0Lmxlbmd0aCkscj0wO3I8dC5sZW5ndGg7cisrKW5bcl09U3RyaW5nLmZyb21DaGFyQ29kZSh0W3JdKTtyZXR1cm4gbi5qb2luKCIiKX0odGhpcy5fYm9keUFycmF5QnVmZmVyKSk7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcigiY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0Iik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dCl9LHMmJih0aGlzLmZvcm1EYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oRSl9KSx0aGlzLmpzb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKX0sdGhpc31wLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24oZSx0KXtlPWwoZSksdD11KHQpO3ZhciBuPXRoaXMubWFwW2VdO3RoaXMubWFwW2VdPW4/bisiLCAiK3Q6dH0scC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLm1hcFtsKGUpXX0scC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBlPWwoZSksdGhpcy5oYXMoZSk/dGhpcy5tYXBbZV06bnVsbH0scC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShsKGUpKX0scC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy5tYXBbbChlKV09dSh0KX0scC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0aGlzLm1hcCl0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuKSYmZS5jYWxsKHQsdGhpcy5tYXBbbl0sbix0aGlzKX0scC5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7ZS5wdXNoKG4pfSkpLGQoZSl9LHAucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UucHVzaCh0KX0pKSxkKGUpfSxwLnByb3RvdHlwZS5lbnRyaWVzPWZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIHRoaXMuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXtlLnB1c2goW24sdF0pfSkpLGQoZSl9LG4mJihwLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPXAucHJvdG90eXBlLmVudHJpZXMpO3ZhciBfPVsiREVMRVRFIiwiR0VUIiwiSEVBRCIsIk9QVElPTlMiLCJQT1NUIiwiUFVUIl07ZnVuY3Rpb24gZyhlLHQpe3ZhciBuLHIsaT0odD10fHx7fSkuYm9keTtpZihlIGluc3RhbmNlb2YgZyl7aWYoZS5ib2R5VXNlZCl0aHJvdyBuZXcgVHlwZUVycm9yKCJBbHJlYWR5IHJlYWQiKTt0aGlzLnVybD1lLnVybCx0aGlzLmNyZWRlbnRpYWxzPWUuY3JlZGVudGlhbHMsdC5oZWFkZXJzfHwodGhpcy5oZWFkZXJzPW5ldyBwKGUuaGVhZGVycykpLHRoaXMubWV0aG9kPWUubWV0aG9kLHRoaXMubW9kZT1lLm1vZGUsdGhpcy5zaWduYWw9ZS5zaWduYWwsaXx8bnVsbD09ZS5fYm9keUluaXR8fChpPWUuX2JvZHlJbml0LGUuYm9keVVzZWQ9ITApfWVsc2UgdGhpcy51cmw9U3RyaW5nKGUpO2lmKHRoaXMuY3JlZGVudGlhbHM9dC5jcmVkZW50aWFsc3x8dGhpcy5jcmVkZW50aWFsc3x8InNhbWUtb3JpZ2luIiwhdC5oZWFkZXJzJiZ0aGlzLmhlYWRlcnN8fCh0aGlzLmhlYWRlcnM9bmV3IHAodC5oZWFkZXJzKSksdGhpcy5tZXRob2Q9KG49dC5tZXRob2R8fHRoaXMubWV0aG9kfHwiR0VUIixyPW4udG9VcHBlckNhc2UoKSxfLmluZGV4T2Yocik+LTE/cjpuKSx0aGlzLm1vZGU9dC5tb2RlfHx0aGlzLm1vZGV8fG51bGwsdGhpcy5zaWduYWw9dC5zaWduYWx8fHRoaXMuc2lnbmFsLHRoaXMucmVmZXJyZXI9bnVsbCwoIkdFVCI9PT10aGlzLm1ldGhvZHx8IkhFQUQiPT09dGhpcy5tZXRob2QpJiZpKXRocm93IG5ldyBUeXBlRXJyb3IoIkJvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzIik7dGhpcy5faW5pdEJvZHkoaSl9ZnVuY3Rpb24gRShlKXt2YXIgdD1uZXcgRm9ybURhdGE7cmV0dXJuIGUudHJpbSgpLnNwbGl0KCImIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZSl7dmFyIG49ZS5zcGxpdCgiPSIpLHI9bi5zaGlmdCgpLnJlcGxhY2UoL1wrL2csIiAiKSxpPW4uam9pbigiPSIpLnJlcGxhY2UoL1wrL2csIiAiKTt0LmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQociksZGVjb2RlVVJJQ29tcG9uZW50KGkpKX19KSksdH1mdW5jdGlvbiBUKGUsdCl7dHx8KHQ9e30pLHRoaXMudHlwZT0iZGVmYXVsdCIsdGhpcy5zdGF0dXM9dm9pZCAwPT09dC5zdGF0dXM/MjAwOnQuc3RhdHVzLHRoaXMub2s9dGhpcy5zdGF0dXM+PTIwMCYmdGhpcy5zdGF0dXM8MzAwLHRoaXMuc3RhdHVzVGV4dD0ic3RhdHVzVGV4dCJpbiB0P3Quc3RhdHVzVGV4dDoiT0siLHRoaXMuaGVhZGVycz1uZXcgcCh0LmhlYWRlcnMpLHRoaXMudXJsPXQudXJsfHwiIix0aGlzLl9pbml0Qm9keShlKX1nLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZyh0aGlzLHtib2R5OnRoaXMuX2JvZHlJbml0fSl9LHYuY2FsbChnLnByb3RvdHlwZSksdi5jYWxsKFQucHJvdG90eXBlKSxULnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgVCh0aGlzLl9ib2R5SW5pdCx7c3RhdHVzOnRoaXMuc3RhdHVzLHN0YXR1c1RleHQ6dGhpcy5zdGF0dXNUZXh0LGhlYWRlcnM6bmV3IHAodGhpcy5oZWFkZXJzKSx1cmw6dGhpcy51cmx9KX0sVC5lcnJvcj1mdW5jdGlvbigpe3ZhciBlPW5ldyBUKG51bGwse3N0YXR1czowLHN0YXR1c1RleHQ6IiJ9KTtyZXR1cm4gZS50eXBlPSJlcnJvciIsZX07dmFyIGI9WzMwMSwzMDIsMzAzLDMwNywzMDhdO1QucmVkaXJlY3Q9ZnVuY3Rpb24oZSx0KXtpZigtMT09PWIuaW5kZXhPZih0KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBzdGF0dXMgY29kZSIpO3JldHVybiBuZXcgVChudWxsLHtzdGF0dXM6dCxoZWFkZXJzOntsb2NhdGlvbjplfX0pfSxlLkRPTUV4Y2VwdGlvbj1yLkRPTUV4Y2VwdGlvbjt0cnl7bmV3IGUuRE9NRXhjZXB0aW9ufWNhdGNoKEkpe2UuRE9NRXhjZXB0aW9uPWZ1bmN0aW9uKGUsdCl7dGhpcy5tZXNzYWdlPWUsdGhpcy5uYW1lPXQ7dmFyIG49RXJyb3IoZSk7dGhpcy5zdGFjaz1uLnN0YWNrfSxlLkRPTUV4Y2VwdGlvbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLGUuRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLkRPTUV4Y2VwdGlvbn1mdW5jdGlvbiBOKHQsbil7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihyLHMpe3ZhciBvPW5ldyBnKHQsbik7aWYoby5zaWduYWwmJm8uc2lnbmFsLmFib3J0ZWQpcmV0dXJuIHMobmV3IGUuRE9NRXhjZXB0aW9uKCJBYm9ydGVkIiwiQWJvcnRFcnJvciIpKTt2YXIgYT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZnVuY3Rpb24gYygpe2EuYWJvcnQoKX1hLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBlLHQsbj17c3RhdHVzOmEuc3RhdHVzLHN0YXR1c1RleHQ6YS5zdGF0dXNUZXh0LGhlYWRlcnM6KGU9YS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKXx8IiIsdD1uZXcgcCxlLnJlcGxhY2UoL1xyP1xuW1x0IF0rL2csIiAiKS5zcGxpdCgvXHI/XG4vKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnNwbGl0KCI6Iikscj1uLnNoaWZ0KCkudHJpbSgpO2lmKHIpe3ZhciBpPW4uam9pbigiOiIpLnRyaW0oKTt0LmFwcGVuZChyLGkpfX0pKSx0KX07bi51cmw9InJlc3BvbnNlVVJMImluIGE/YS5yZXNwb25zZVVSTDpuLmhlYWRlcnMuZ2V0KCJYLVJlcXVlc3QtVVJMIik7dmFyIGk9InJlc3BvbnNlImluIGE/YS5yZXNwb25zZTphLnJlc3BvbnNlVGV4dDtyKG5ldyBUKGksbikpfSxhLm9uZXJyb3I9ZnVuY3Rpb24oKXtzKG5ldyBUeXBlRXJyb3IoIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQiKSl9LGEub250aW1lb3V0PWZ1bmN0aW9uKCl7cyhuZXcgVHlwZUVycm9yKCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkIikpfSxhLm9uYWJvcnQ9ZnVuY3Rpb24oKXtzKG5ldyBlLkRPTUV4Y2VwdGlvbigiQWJvcnRlZCIsIkFib3J0RXJyb3IiKSl9LGEub3BlbihvLm1ldGhvZCxvLnVybCwhMCksImluY2x1ZGUiPT09by5jcmVkZW50aWFscz9hLndpdGhDcmVkZW50aWFscz0hMDoib21pdCI9PT1vLmNyZWRlbnRpYWxzJiYoYS53aXRoQ3JlZGVudGlhbHM9ITEpLCJyZXNwb25zZVR5cGUiaW4gYSYmaSYmKGEucmVzcG9uc2VUeXBlPSJibG9iIiksby5oZWFkZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7YS5zZXRSZXF1ZXN0SGVhZGVyKHQsZSl9KSksby5zaWduYWwmJihvLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsYyksYS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09YS5yZWFkeVN0YXRlJiZvLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCJhYm9ydCIsYyl9KSxhLnNlbmQodm9pZCAwPT09by5fYm9keUluaXQ/bnVsbDpvLl9ib2R5SW5pdCl9KSl9Ti5wb2x5ZmlsbD0hMCxyLmZldGNofHwoci5mZXRjaD1OLHIuSGVhZGVycz1wLHIuUmVxdWVzdD1nLHIuUmVzcG9uc2U9VCksZS5IZWFkZXJzPXAsZS5SZXF1ZXN0PWcsZS5SZXNwb25zZT1ULGUuZmV0Y2g9TixPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9KHt9KSxzLmZldGNoLnBvbnlmaWxsPSEwLGRlbGV0ZSBzLmZldGNoLnBvbHlmaWxsO3ZhciBvPXM7KHQ9by5mZXRjaCkuZGVmYXVsdD1vLmZldGNoLHQuZmV0Y2g9by5mZXRjaCx0LkhlYWRlcnM9by5IZWFkZXJzLHQuUmVxdWVzdD1vLlJlcXVlc3QsdC5SZXNwb25zZT1vLlJlc3BvbnNlLGUuZXhwb3J0cz10fShRZSxRZS5leHBvcnRzKTt2YXIgWGU9UWUuZXhwb3J0cyxXZT1yKFhlKSxaZT1lKHtfX3Byb3RvX186bnVsbCxkZWZhdWx0OldlfSxbWGVdKTtjb25zdCBldD1lPT57bGV0IHQ9e307cmV0dXJuIGUmJigidW5kZWZpbmVkIiE9dHlwZW9mIEhlYWRlcnMmJmUgaW5zdGFuY2VvZiBIZWFkZXJzfHxaZSYmWGUuSGVhZGVycyYmZSBpbnN0YW5jZW9mIFhlLkhlYWRlcnM/dD0oZT0+e2NvbnN0IHQ9e307cmV0dXJuIGUuZm9yRWFjaCgoKGUsbik9Pnt0W25dPWV9KSksdH0pKGUpOkFycmF5LmlzQXJyYXkoZSk/ZS5mb3JFYWNoKCgoW2Usbl0pPT57ZSYmdm9pZCAwIT09biYmKHRbZV09bil9KSk6dD1lKSx0fSx0dD1lPT5lLnJlcGxhY2UoLyhbXHMsXXwjW15cblxyXSspKy9nLCIgIikudHJpbSgpLG50PWU9PnQ9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgbjtjb25zdHt1cmw6cixxdWVyeTppLHZhcmlhYmxlczpzLG9wZXJhdGlvbk5hbWU6byxmZXRjaDphLGZldGNoT3B0aW9uczpjLG1pZGRsZXdhcmU6bH09dCx1PV9fc3ByZWFkVmFsdWVzKHt9LHQuaGVhZGVycyk7bGV0IGQscD0iIjsiUE9TVCI9PT1lPyhkPXN0KGkscyxvLGMuanNvblNlcmlhbGl6ZXIpLCJzdHJpbmciPT10eXBlb2YgZCYmKHVbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi9qc29uIikpOnA9KGU9PntpZighQXJyYXkuaXNBcnJheShlLnF1ZXJ5KSl7Y29uc3QgdD1lLG49W2BxdWVyeT0ke2VuY29kZVVSSUNvbXBvbmVudCh0dCh0LnF1ZXJ5KSl9YF07cmV0dXJuIGUudmFyaWFibGVzJiZuLnB1c2goYHZhcmlhYmxlcz0ke2VuY29kZVVSSUNvbXBvbmVudCh0Lmpzb25TZXJpYWxpemVyLnN0cmluZ2lmeSh0LnZhcmlhYmxlcykpfWApLHQub3BlcmF0aW9uTmFtZSYmbi5wdXNoKGBvcGVyYXRpb25OYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHQub3BlcmF0aW9uTmFtZSl9YCksbi5qb2luKCImIil9aWYodm9pZCAwIT09ZS52YXJpYWJsZXMmJiFBcnJheS5pc0FycmF5KGUudmFyaWFibGVzKSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjcmVhdGUgcXVlcnkgd2l0aCBnaXZlbiB2YXJpYWJsZSB0eXBlLCBhcnJheSBleHBlY3RlZCIpO2NvbnN0IHQ9ZSxuPWUucXVlcnkucmVkdWNlKCgoZSxuLHIpPT4oZS5wdXNoKHtxdWVyeTp0dChuKSx2YXJpYWJsZXM6dC52YXJpYWJsZXM/dC5qc29uU2VyaWFsaXplci5zdHJpbmdpZnkodC52YXJpYWJsZXNbcl0pOnZvaWQgMH0pLGUpKSxbXSk7cmV0dXJuYHF1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHQuanNvblNlcmlhbGl6ZXIuc3RyaW5naWZ5KG4pKX1gfSkoe3F1ZXJ5OmksdmFyaWFibGVzOnMsb3BlcmF0aW9uTmFtZTpvLGpzb25TZXJpYWxpemVyOm51bGwhPShuPWMuanNvblNlcmlhbGl6ZXIpP246emV9KTtjb25zdCBoPV9fc3ByZWFkVmFsdWVzKHttZXRob2Q6ZSxoZWFkZXJzOnUsYm9keTpkfSxjKTtsZXQgZj1yLHk9aDtpZihsKXtjb25zdCBlPXlpZWxkIFByb21pc2UucmVzb2x2ZShsKF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30saCkse3VybDpyLG9wZXJhdGlvbk5hbWU6byx2YXJpYWJsZXM6c30pKSkse3VybDp0fT1lO2Y9dCx5PV9fb2JqUmVzdChlLFsidXJsIl0pfXJldHVybiBwJiYoZj1gJHtmfT8ke3B9YCkseWllbGQgYShmLHkpfSkpO2NsYXNzIHJ0e2NvbnN0cnVjdG9yKGUsdD17fSl7dGhpcy51cmw9ZSx0aGlzLnJlcXVlc3RDb25maWc9dCx0aGlzLnJhd1JlcXVlc3Q9KC4uLmUpPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3RbdCxuLHJdPWUsaT0oKGUsdCxuKT0+ZS5xdWVyeT9lOntxdWVyeTplLHZhcmlhYmxlczp0LHJlcXVlc3RIZWFkZXJzOm4sc2lnbmFsOnZvaWQgMH0pKHQsbixyKSxzPXRoaXMucmVxdWVzdENvbmZpZyx7aGVhZGVyczpvLGZldGNoOmE9V2UsbWV0aG9kOmM9IlBPU1QiLHJlcXVlc3RNaWRkbGV3YXJlOmwscmVzcG9uc2VNaWRkbGV3YXJlOnV9PXMsZD1fX29ialJlc3QocyxbImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInJlcXVlc3RNaWRkbGV3YXJlIiwicmVzcG9uc2VNaWRkbGV3YXJlIl0pLHt1cmw6cH09dGhpczt2b2lkIDAhPT1pLnNpZ25hbCYmKGQuc2lnbmFsPWkuc2lnbmFsKTtjb25zdHtvcGVyYXRpb25OYW1lOmh9PUhlKGkucXVlcnkpO3JldHVybiBpdCh7dXJsOnAscXVlcnk6aS5xdWVyeSx2YXJpYWJsZXM6aS52YXJpYWJsZXMsaGVhZGVyczpfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxldChhdChvKSkpLGV0KGkucmVxdWVzdEhlYWRlcnMpKSxvcGVyYXRpb25OYW1lOmgsZmV0Y2g6YSxtZXRob2Q6YyxmZXRjaE9wdGlvbnM6ZCxtaWRkbGV3YXJlOmx9KS50aGVuKChlPT4odSYmdShlKSxlKSkpLmNhdGNoKChlPT57dGhyb3cgdSYmdShlKSxlfSkpfSkpfXJlcXVlc3QoZSwuLi50KXtyZXR1cm4gX19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0W24scl09dCxpPSgoZSx0LG4pPT5lLmRvY3VtZW50P2U6e2RvY3VtZW50OmUsdmFyaWFibGVzOnQscmVxdWVzdEhlYWRlcnM6bixzaWduYWw6dm9pZCAwfSkoZSxuLHIpLHM9dGhpcy5yZXF1ZXN0Q29uZmlnLHtoZWFkZXJzOm8sZmV0Y2g6YT1XZSxtZXRob2Q6Yz0iUE9TVCIscmVxdWVzdE1pZGRsZXdhcmU6bCxyZXNwb25zZU1pZGRsZXdhcmU6dX09cyxkPV9fb2JqUmVzdChzLFsiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwicmVxdWVzdE1pZGRsZXdhcmUiLCJyZXNwb25zZU1pZGRsZXdhcmUiXSkse3VybDpwfT10aGlzO3ZvaWQgMCE9PWkuc2lnbmFsJiYoZC5zaWduYWw9aS5zaWduYWwpO2NvbnN0e3F1ZXJ5Omgsb3BlcmF0aW9uTmFtZTpmfT1IZShpLmRvY3VtZW50KTtyZXR1cm4gaXQoe3VybDpwLHF1ZXJ5OmgsdmFyaWFibGVzOmkudmFyaWFibGVzLGhlYWRlcnM6X19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sZXQoYXQobykpKSxldChpLnJlcXVlc3RIZWFkZXJzKSksb3BlcmF0aW9uTmFtZTpmLGZldGNoOmEsbWV0aG9kOmMsZmV0Y2hPcHRpb25zOmQsbWlkZGxld2FyZTpsfSkudGhlbigoZT0+KHUmJnUoZSksZS5kYXRhKSkpLmNhdGNoKChlPT57dGhyb3cgdSYmdShlKSxlfSkpfSkpfWJhdGNoUmVxdWVzdHMoZSx0KXt2YXIgbjtjb25zdCByPSgoZSx0KT0+ZS5kb2N1bWVudHM/ZTp7ZG9jdW1lbnRzOmUscmVxdWVzdEhlYWRlcnM6dCxzaWduYWw6dm9pZCAwfSkoZSx0KSxpPXRoaXMucmVxdWVzdENvbmZpZyx7aGVhZGVyczpzfT1pLG89X19vYmpSZXN0KGksWyJoZWFkZXJzIl0pO3ZvaWQgMCE9PXIuc2lnbmFsJiYoby5zaWduYWw9ci5zaWduYWwpO2NvbnN0IGE9ci5kb2N1bWVudHMubWFwKCgoe2RvY3VtZW50OmV9KT0+SGUoZSkucXVlcnkpKSxjPXIuZG9jdW1lbnRzLm1hcCgoKHt2YXJpYWJsZXM6ZX0pPT5lKSk7cmV0dXJuIGl0KHt1cmw6dGhpcy51cmwscXVlcnk6YSx2YXJpYWJsZXM6YyxoZWFkZXJzOl9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LGV0KGF0KHMpKSksZXQoci5yZXF1ZXN0SGVhZGVycykpLG9wZXJhdGlvbk5hbWU6dm9pZCAwLGZldGNoOm51bGwhPShuPXRoaXMucmVxdWVzdENvbmZpZy5mZXRjaCk/bjpXZSxtZXRob2Q6dGhpcy5yZXF1ZXN0Q29uZmlnLm1ldGhvZHx8IlBPU1QiLGZldGNoT3B0aW9uczpvLG1pZGRsZXdhcmU6dGhpcy5yZXF1ZXN0Q29uZmlnLnJlcXVlc3RNaWRkbGV3YXJlfSkudGhlbigoZT0+KHRoaXMucmVxdWVzdENvbmZpZy5yZXNwb25zZU1pZGRsZXdhcmUmJnRoaXMucmVxdWVzdENvbmZpZy5yZXNwb25zZU1pZGRsZXdhcmUoZSksZS5kYXRhKSkpLmNhdGNoKChlPT57dGhyb3cgdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSYmdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZShlKSxlfSkpfXNldEhlYWRlcnMoZSl7cmV0dXJuIHRoaXMucmVxdWVzdENvbmZpZy5oZWFkZXJzPWUsdGhpc31zZXRIZWFkZXIoZSx0KXtjb25zdHtoZWFkZXJzOm59PXRoaXMucmVxdWVzdENvbmZpZztyZXR1cm4gbj9uW2VdPXQ6dGhpcy5yZXF1ZXN0Q29uZmlnLmhlYWRlcnM9e1tlXTp0fSx0aGlzfXNldEVuZHBvaW50KGUpe3JldHVybiB0aGlzLnVybD1lLHRoaXN9fWNvbnN0IGl0PWU9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgdCxuO2NvbnN0e3F1ZXJ5OnIsdmFyaWFibGVzOmksZmV0Y2hPcHRpb25zOnN9PWUsbz1udCgobnVsbCE9KHQ9ZS5tZXRob2QpP3Q6InBvc3QiKS50b1VwcGVyQ2FzZSgpKTtjb25zdCBhPUFycmF5LmlzQXJyYXkoZS5xdWVyeSksYz15aWVsZCBvKGUpLGw9eWllbGQgb3QoYyxudWxsIT0obj1zLmpzb25TZXJpYWxpemVyKT9uOnplKSx1PUFycmF5LmlzQXJyYXkobCk/IWwuc29tZSgoKHtkYXRhOmV9KT0+IWUpKTpCb29sZWFuKGwuZGF0YSksZD1BcnJheS5pc0FycmF5KGwpfHwhbC5lcnJvcnN8fEFycmF5LmlzQXJyYXkobC5lcnJvcnMpJiYhbC5lcnJvcnMubGVuZ3RofHwiYWxsIj09PXMuZXJyb3JQb2xpY3l8fCJpZ25vcmUiPT09cy5lcnJvclBvbGljeTtpZihjLm9rJiZkJiZ1KXtjb25zdCBlPShBcnJheS5pc0FycmF5KGwpLGwpLHtlcnJvcnM6dH09ZSxuPV9fb2JqUmVzdChlLFsiZXJyb3JzIl0pLHI9Imlnbm9yZSI9PT1zLmVycm9yUG9saWN5P246bDtyZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSxhP3tkYXRhOnJ9OnIpLHtoZWFkZXJzOmMuaGVhZGVycyxzdGF0dXM6Yy5zdGF0dXN9KX10aHJvdyBuZXcgSmUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwic3RyaW5nIj09dHlwZW9mIGw/e2Vycm9yOmx9OmwpLHtzdGF0dXM6Yy5zdGF0dXMsaGVhZGVyczpjLmhlYWRlcnN9KSx7cXVlcnk6cix2YXJpYWJsZXM6aX0pfSkpLHN0PShlLHQsbixyKT0+e2NvbnN0IGk9bnVsbCE9cj9yOnplO2lmKCFBcnJheS5pc0FycmF5KGUpKXJldHVybiBpLnN0cmluZ2lmeSh7cXVlcnk6ZSx2YXJpYWJsZXM6dCxvcGVyYXRpb25OYW1lOm59KTtpZih2b2lkIDAhPT10JiYhQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjcmVhdGUgcmVxdWVzdCBib2R5IHdpdGggZ2l2ZW4gdmFyaWFibGUgdHlwZSwgYXJyYXkgZXhwZWN0ZWQiKTtjb25zdCBzPWUucmVkdWNlKCgoZSxuLHIpPT4oZS5wdXNoKHtxdWVyeTpuLHZhcmlhYmxlczp0P3Rbcl06dm9pZCAwfSksZSkpLFtdKTtyZXR1cm4gaS5zdHJpbmdpZnkocyl9LG90PShlLHQpPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7bGV0IG47cmV0dXJuIGUuaGVhZGVycy5mb3JFYWNoKCgoZSx0KT0+eyJjb250ZW50LXR5cGUiPT09dC50b0xvd2VyQ2FzZSgpJiYobj1lKX0pKSxuJiYobi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2pzb24iKXx8bi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2dyYXBocWwranNvbiIpfHxuLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vZ3JhcGhxbC1yZXNwb25zZStqc29uIikpP3QucGFyc2UoeWllbGQgZS50ZXh0KCkpOmUudGV4dCgpfSkpLGF0PWU9PiJmdW5jdGlvbiI9PXR5cGVvZiBlP2UoKTplO3ZhciBjdD0oZT0+KGUuQmlsbGluZ1F1b3RhRXhjZWVkZWQ9IkJpbGxpbmdRdW90YUV4Y2VlZGVkIixlKSkoY3R8fHt9KTtjb25zdCBsdD1bY3QuQmlsbGluZ1F1b3RhRXhjZWVkZWQudG9TdHJpbmcoKV0sdXQ9ZT0+e2NvbnN0IHQ9KG4scixpLHMsbz0wKT0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3RyeXtyZXR1cm4geWllbGQgbigpfWNhdGNoKGEpe2lmKGEgaW5zdGFuY2VvZiBKZSYmIShlPT57dmFyIHQ7cmV0dXJuIHZvaWQgMD09PShudWxsPT0odD1lLnJlc3BvbnNlLmVycm9ycyk/dm9pZCAwOnQuZmluZCgoZT0+bHQuaW5jbHVkZXMoZS5tZXNzYWdlKSkpKX0pKGEpKXRocm93IGE7aWYobzwxMClyZXR1cm4geWllbGQgbmV3IFByb21pc2UoKGU9PnNldFRpbWVvdXQoZSwxZTMrNTAwKk1hdGgucG93KDIsbykpKSkseWllbGQgdChuLHIsaSxzLG8rMSk7dGhyb3cgY29uc29sZS5lcnJvcihgaGlnaGxpZ2h0LmlvOiBbJHtlfHxlfV0gZGF0YSByZXF1ZXN0IGZhaWxlZCBhZnRlciAke299IHJldHJpZXNgKSxhfX0pKTtyZXR1cm4gdH0sZHQ9WyJudW1iZXIiLCJzdHJpbmciLCJib29sZWFuIl07Y2xhc3MgcHR7Y29uc3RydWN0b3IoZSx0KXtfX3B1YmxpY0ZpZWxkKHRoaXMsImRlYnVnIiksX19wdWJsaWNGaWVsZCh0aGlzLCJuYW1lIiksdGhpcy5kZWJ1Zz1lLHRoaXMubmFtZT10fWxvZyguLi5lKXtpZih0aGlzLmRlYnVnKXtsZXQgdD1gWyR7RGF0ZS5ub3coKX1dYDt0aGlzLm5hbWUmJih0Kz1gIC0gJHt0aGlzLm5hbWV9YCksY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxbdCwuLi5lXSl9fX12YXIgaHQ9VWludDhBcnJheSxmdD1VaW50MTZBcnJheSx5dD1JbnQzMkFycmF5LG10PW5ldyBodChbMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwLDAsMCwwXSksdnQ9bmV3IGh0KFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzLDAsMF0pLF90PW5ldyBodChbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pLGd0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPW5ldyBmdCgzMSkscj0wO3I8MzE7KytyKW5bcl09dCs9MTw8ZVtyLTFdO3ZhciBpPW5ldyB5dChuWzMwXSk7Zm9yKHI9MTtyPDMwOysrcilmb3IodmFyIHM9bltyXTtzPG5bcisxXTsrK3MpaVtzXT1zLW5bcl08PDV8cjtyZXR1cm57YjpuLHI6aX19LEV0PWd0KG10LDIpLFR0PUV0LmIsYnQ9RXQucjtUdFsyOF09MjU4LGJ0WzI1OF09Mjg7Zm9yKHZhciBOdD1ndCh2dCwwKS5yLEl0PW5ldyBmdCgzMjc2OCksT3Q9MDtPdDwzMjc2ODsrK090KXt2YXIgQXQ9KDQzNjkwJk90KT4+MXwoMjE4NDUmT3QpPDwxO0F0PSg2MTY4MCYoQXQ9KDUyNDI4JkF0KT4+MnwoMTMxMDcmQXQpPDwyKSk+PjR8KDM4NTUmQXQpPDw0LEl0W090XT0oKDY1MjgwJkF0KT4+OHwoMjU1JkF0KTw8OCk+PjF9dmFyIHh0PWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9ZS5sZW5ndGgsaT0wLHM9bmV3IGZ0KHQpO2k8cjsrK2kpZVtpXSYmKytzW2VbaV0tMV07dmFyIG8sYT1uZXcgZnQodCk7Zm9yKGk9MTtpPHQ7KytpKWFbaV09YVtpLTFdK3NbaS0xXTw8MTtpZihuKXtvPW5ldyBmdCgxPDx0KTt2YXIgYz0xNS10O2ZvcihpPTA7aTxyOysraSlpZihlW2ldKWZvcih2YXIgbD1pPDw0fGVbaV0sdT10LWVbaV0sZD1hW2VbaV0tMV0rKzw8dSxwPWR8KDE8PHUpLTE7ZDw9cDsrK2Qpb1tJdFtkXT4+Y109bH1lbHNlIGZvcihvPW5ldyBmdChyKSxpPTA7aTxyOysraSllW2ldJiYob1tpXT1JdFthW2VbaV0tMV0rK10+PjE1LWVbaV0pO3JldHVybiBvfSxTdD1uZXcgaHQoMjg4KTtmb3IoT3Q9MDtPdDwxNDQ7KytPdClTdFtPdF09ODtmb3IoT3Q9MTQ0O090PDI1NjsrK090KVN0W090XT05O2ZvcihPdD0yNTY7T3Q8MjgwOysrT3QpU3RbT3RdPTc7Zm9yKE90PTI4MDtPdDwyODg7KytPdClTdFtPdF09ODt2YXIgRHQ9bmV3IGh0KDMyKTtmb3IoT3Q9MDtPdDwzMjsrK090KUR0W090XT01O3ZhciB3dD14dChTdCw5LDApLGt0PXh0KER0LDUsMCksQ3Q9ZnVuY3Rpb24oZSl7cmV0dXJuKGUrNykvOHwwfSxQdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuKG51bGw9PXR8fHQ8MCkmJih0PTApLChudWxsPT1ufHxuPmUubGVuZ3RoKSYmKG49ZS5sZW5ndGgpLG5ldyBodChlLnN1YmFycmF5KHQsbikpfSxSdD1mdW5jdGlvbihlLHQsbil7bjw8PTcmdDt2YXIgcj10Lzh8MDtlW3JdfD1uLGVbcisxXXw9bj4+OH0sTHQ9ZnVuY3Rpb24oZSx0LG4pe248PD03JnQ7dmFyIHI9dC84fDA7ZVtyXXw9bixlW3IrMV18PW4+PjgsZVtyKzJdfD1uPj4xNn0sRnQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7KytyKWVbcl0mJm4ucHVzaCh7czpyLGY6ZVtyXX0pO3ZhciBpPW4ubGVuZ3RoLHM9bi5zbGljZSgpO2lmKCFpKXJldHVybnt0OnF0LGw6MH07aWYoMT09aSl7dmFyIG89bmV3IGh0KG5bMF0ucysxKTtyZXR1cm4gb1tuWzBdLnNdPTEse3Q6byxsOjF9fW4uc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5mLXQuZn0pKSxuLnB1c2goe3M6LTEsZjoyNTAwMX0pO3ZhciBhPW5bMF0sYz1uWzFdLGw9MCx1PTEsZD0yO2ZvcihuWzBdPXtzOi0xLGY6YS5mK2MuZixsOmEscjpjfTt1IT1pLTE7KWE9bltuW2xdLmY8bltkXS5mP2wrKzpkKytdLGM9bltsIT11JiZuW2xdLmY8bltkXS5mP2wrKzpkKytdLG5bdSsrXT17czotMSxmOmEuZitjLmYsbDphLHI6Y307dmFyIHA9c1swXS5zO2ZvcihyPTE7cjxpOysrcilzW3JdLnM+cCYmKHA9c1tyXS5zKTt2YXIgaD1uZXcgZnQocCsxKSxmPSR0KG5bdS0xXSxoLDApO2lmKGY+dCl7cj0wO3ZhciB5PTAsbT1mLXQsdj0xPDxtO2ZvcihzLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGhbdC5zXS1oW2Uuc118fGUuZi10LmZ9KSk7cjxpOysrcil7dmFyIF89c1tyXS5zO2lmKCEoaFtfXT50KSlicmVhazt5Kz12LSgxPDxmLWhbX10pLGhbX109dH1mb3IoeT4+PW07eT4wOyl7dmFyIGc9c1tyXS5zO2hbZ108dD95LT0xPDx0LWhbZ10rKy0xOisrcn1mb3IoO3I+PTAmJnk7LS1yKXt2YXIgRT1zW3JdLnM7aFtFXT09dCYmKC0taFtFXSwrK3kpfWY9dH1yZXR1cm57dDpuZXcgaHQoaCksbDpmfX0sJHQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybi0xPT1lLnM/TWF0aC5tYXgoJHQoZS5sLHQsbisxKSwkdChlLnIsdCxuKzEpKTp0W2Uuc109bn0sTXQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoO3QmJiFlWy0tdF07KTtmb3IodmFyIG49bmV3IGZ0KCsrdCkscj0wLGk9ZVswXSxzPTEsbz1mdW5jdGlvbihlKXtuW3IrK109ZX0sYT0xO2E8PXQ7KythKWlmKGVbYV09PWkmJmEhPXQpKytzO2Vsc2V7aWYoIWkmJnM+Mil7Zm9yKDtzPjEzODtzLT0xMzgpbygzMjc1NCk7cz4yJiYobyhzPjEwP3MtMTE8PDV8Mjg2OTA6cy0zPDw1fDEyMzA1KSxzPTApfWVsc2UgaWYocz4zKXtmb3IobyhpKSwtLXM7cz42O3MtPTYpbyg4MzA0KTtzPjImJihvKHMtMzw8NXw4MjA4KSxzPTApfWZvcig7cy0tOylvKGkpO3M9MSxpPWVbYV19cmV0dXJue2M6bi5zdWJhcnJheSgwLHIpLG46dH19LFZ0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTAscj0wO3I8dC5sZW5ndGg7KytyKW4rPWVbcl0qdFtyXTtyZXR1cm4gbn0sQnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4ubGVuZ3RoLGk9Q3QodCsyKTtlW2ldPTI1NSZyLGVbaSsxXT1yPj44LGVbaSsyXT0yNTVeZVtpXSxlW2krM109MjU1XmVbaSsxXTtmb3IodmFyIHM9MDtzPHI7KytzKWVbaStzKzRdPW5bc107cmV0dXJuIDgqKGkrNCtyKX0sanQ9ZnVuY3Rpb24oZSx0LG4scixpLHMsbyxhLGMsbCx1KXtSdCh0LHUrKyxuKSwrK2lbMjU2XTtmb3IodmFyIGQ9RnQoaSwxNSkscD1kLnQsaD1kLmwsZj1GdChzLDE1KSx5PWYudCxtPWYubCx2PU10KHApLF89di5jLGc9di5uLEU9TXQoeSksVD1FLmMsYj1FLm4sTj1uZXcgZnQoMTkpLEk9MDtJPF8ubGVuZ3RoOysrSSkrK05bMzEmX1tJXV07Zm9yKEk9MDtJPFQubGVuZ3RoOysrSSkrK05bMzEmVFtJXV07Zm9yKHZhciBPPUZ0KE4sNyksQT1PLnQseD1PLmwsUz0xOTtTPjQmJiFBW190W1MtMV1dOy0tUyk7dmFyIEQsdyxrLEMsUD1sKzU8PDMsUj1WdChpLFN0KStWdChzLER0KStvLEw9VnQoaSxwKStWdChzLHkpK28rMTQrMypTK1Z0KE4sQSkrMipOWzE2XSszKk5bMTddKzcqTlsxOF07aWYoYz49MCYmUDw9UiYmUDw9TClyZXR1cm4gQnQodCx1LGUuc3ViYXJyYXkoYyxjK2wpKTtpZihSdCh0LHUsMSsoTDxSKSksdSs9MixMPFIpe0Q9eHQocCxoLDApLHc9cCxrPXh0KHksbSwwKSxDPXk7dmFyIEY9eHQoQSx4LDApO1J0KHQsdSxnLTI1NyksUnQodCx1KzUsYi0xKSxSdCh0LHUrMTAsUy00KSx1Kz0xNDtmb3IoST0wO0k8UzsrK0kpUnQodCx1KzMqSSxBW190W0ldXSk7dSs9MypTO2Zvcih2YXIgJD1bXyxUXSxNPTA7TTwyOysrTSl7dmFyIFY9JFtNXTtmb3IoST0wO0k8Vi5sZW5ndGg7KytJKXt2YXIgQj0zMSZWW0ldO1J0KHQsdSxGW0JdKSx1Kz1BW0JdLEI+MTUmJihSdCh0LHUsVltJXT4+NSYxMjcpLHUrPVZbSV0+PjEyKX19fWVsc2UgRD13dCx3PVN0LGs9a3QsQz1EdDtmb3IoST0wO0k8YTsrK0kpe3ZhciBqPXJbSV07aWYoaj4yNTUpe0x0KHQsdSxEWyhCPWo+PjE4JjMxKSsyNTddKSx1Kz13W0IrMjU3XSxCPjcmJihSdCh0LHUsaj4+MjMmMzEpLHUrPW10W0JdKTt2YXIgVT0zMSZqO0x0KHQsdSxrW1VdKSx1Kz1DW1VdLFU+MyYmKEx0KHQsdSxqPj41JjgxOTEpLHUrPXZ0W1VdKX1lbHNlIEx0KHQsdSxEW2pdKSx1Kz13W2pdfXJldHVybiBMdCh0LHUsRFsyNTZdKSx1K3dbMjU2XX0sVXQ9bmV3IHl0KFs2NTU0MCwxMzEwODAsMTMxMDg4LDEzMTEwNCwyNjIxNzYsMTA0ODcwNCwxMDQ4ODMyLDIxMTQ1NjAsMjExNzYzMl0pLHF0PW5ldyBodCgwKSxLdD1mdW5jdGlvbigpe2Zvcih2YXIgZT1uZXcgSW50MzJBcnJheSgyNTYpLHQ9MDt0PDI1NjsrK3Qpe2Zvcih2YXIgbj10LHI9OTstLXI7KW49KDEmbiYmLTMwNjY3NDkxMilebj4+PjE7ZVt0XT1ufXJldHVybiBlfSgpLEd0PWZ1bmN0aW9uKGUsdCxuLHIsaSl7aWYoIWkmJihpPXtsOjF9LHQuZGljdGlvbmFyeSkpe3ZhciBzPXQuZGljdGlvbmFyeS5zdWJhcnJheSgtMzI3NjgpLG89bmV3IGh0KHMubGVuZ3RoK2UubGVuZ3RoKTtvLnNldChzKSxvLnNldChlLHMubGVuZ3RoKSxlPW8saS53PXMubGVuZ3RofXJldHVybiBmdW5jdGlvbihlLHQsbixyLGkscyl7dmFyIG89cy56fHxlLmxlbmd0aCxhPW5ldyBodChyK28rNSooMStNYXRoLmNlaWwoby83ZTMpKStpKSxjPWEuc3ViYXJyYXkocixhLmxlbmd0aC1pKSxsPXMubCx1PTcmKHMucnx8MCk7aWYodCl7dSYmKGNbMF09cy5yPj4zKTtmb3IodmFyIGQ9VXRbdC0xXSxwPWQ+PjEzLGg9ODE5MSZkLGY9KDE8PG4pLTEseT1zLnB8fG5ldyBmdCgzMjc2OCksbT1zLmh8fG5ldyBmdChmKzEpLHY9TWF0aC5jZWlsKG4vMyksXz0yKnYsZz1mdW5jdGlvbih0KXtyZXR1cm4oZVt0XV5lW3QrMV08PHZeZVt0KzJdPDxfKSZmfSxFPW5ldyB5dCgyNWUzKSxUPW5ldyBmdCgyODgpLGI9bmV3IGZ0KDMyKSxOPTAsST0wLE89cy5pfHwwLEE9MCx4PXMud3x8MCxTPTA7TysyPG87KytPKXt2YXIgRD1nKE8pLHc9MzI3NjcmTyxrPW1bRF07aWYoeVt3XT1rLG1bRF09dyx4PD1PKXt2YXIgQz1vLU87aWYoKE4+N2UzfHxBPjI0NTc2KSYmKEM+NDIzfHwhbCkpe3U9anQoZSxjLDAsRSxULGIsSSxBLFMsTy1TLHUpLEE9Tj1JPTAsUz1PO2Zvcih2YXIgUD0wO1A8Mjg2OysrUClUW1BdPTA7Zm9yKFA9MDtQPDMwOysrUCliW1BdPTB9dmFyIFI9MixMPTAsRj1oLCQ9dy1rJjMyNzY3O2lmKEM+MiYmRD09ZyhPLSQpKWZvcih2YXIgTT1NYXRoLm1pbihwLEMpLTEsVj1NYXRoLm1pbigzMjc2NyxPKSxCPU1hdGgubWluKDI1OCxDKTskPD1WJiYtLUYmJnchPWs7KXtpZihlW08rUl09PWVbTytSLSRdKXtmb3IodmFyIGo9MDtqPEImJmVbTytqXT09ZVtPK2otJF07KytqKTtpZihqPlIpe2lmKFI9aixMPSQsaj5NKWJyZWFrO3ZhciBVPU1hdGgubWluKCQsai0yKSxxPTA7Zm9yKFA9MDtQPFU7KytQKXt2YXIgSz1PLSQrUCYzMjc2NyxHPUsteVtLXSYzMjc2NztHPnEmJihxPUcsaz1LKX19fSQrPSh3PWspLShrPXlbd10pJjMyNzY3fWlmKEwpe0VbQSsrXT0yNjg0MzU0NTZ8YnRbUl08PDE4fE50W0xdO3ZhciB6PTMxJmJ0W1JdLFk9MzEmTnRbTF07SSs9bXRbel0rdnRbWV0sKytUWzI1Nyt6XSwrK2JbWV0seD1PK1IsKytOfWVsc2UgRVtBKytdPWVbT10sKytUW2VbT11dfX1mb3IoTz1NYXRoLm1heChPLHgpO088bzsrK08pRVtBKytdPWVbT10sKytUW2VbT11dO3U9anQoZSxjLGwsRSxULGIsSSxBLFMsTy1TLHUpLGx8fChzLnI9NyZ1fGNbdS84fDBdPDwzLHUtPTcscy5oPW0scy5wPXkscy5pPU8scy53PXgpfWVsc2V7Zm9yKE89cy53fHwwO088bytsO08rPTY1NTM1KXt2YXIgSD1PKzY1NTM1O0g+PW8mJihjW3UvOHwwXT1sLEg9byksdT1CdChjLHUrMSxlLnN1YmFycmF5KE8sSCkpfXMuaT1vfXJldHVybiBQdChhLDAscitDdCh1KStpKX0oZSxudWxsPT10LmxldmVsPzY6dC5sZXZlbCxudWxsPT10Lm1lbT9NYXRoLmNlaWwoMS41Kk1hdGgubWF4KDgsTWF0aC5taW4oMTMsTWF0aC5sb2coZS5sZW5ndGgpKSkpOjEyK3QubWVtLG4scixpKX0senQ9ZnVuY3Rpb24oZSx0LG4pe2Zvcig7bjsrK3QpZVt0XT1uLG4+Pj49OH07ZnVuY3Rpb24gWXQoZSx0KXt0fHwodD17fSk7dmFyIG49ZnVuY3Rpb24oKXt2YXIgZT0tMTtyZXR1cm57cDpmdW5jdGlvbih0KXtmb3IodmFyIG49ZSxyPTA7cjx0Lmxlbmd0aDsrK3Ipbj1LdFsyNTUmbl50W3JdXV5uPj4+ODtlPW59LGQ6ZnVuY3Rpb24oKXtyZXR1cm5+ZX19fSgpLHI9ZS5sZW5ndGg7bi5wKGUpO3ZhciBpLHM9R3QoZSx0LDEwKygoaT10KS5maWxlbmFtZT9pLmZpbGVuYW1lLmxlbmd0aCsxOjApLDgpLG89cy5sZW5ndGg7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIG49dC5maWxlbmFtZTtpZihlWzBdPTMxLGVbMV09MTM5LGVbMl09OCxlWzhdPXQubGV2ZWw8Mj80Ojk9PXQubGV2ZWw/MjowLGVbOV09MywwIT10Lm10aW1lJiZ6dChlLDQsTWF0aC5mbG9vcihuZXcgRGF0ZSh0Lm10aW1lfHxEYXRlLm5vdygpKS8xZTMpKSxuKXtlWzNdPTg7Zm9yKHZhciByPTA7cjw9bi5sZW5ndGg7KytyKWVbcisxMF09bi5jaGFyQ29kZUF0KHIpfX0ocyx0KSx6dChzLG8tOCxuLmQoKSksenQocyxvLTQsciksc312YXIgSHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBUZXh0RW5jb2RlciYmbmV3IFRleHRFbmNvZGVyLEp0PSJ1bmRlZmluZWQiIT10eXBlb2YgVGV4dERlY29kZXImJm5ldyBUZXh0RGVjb2Rlcjt0cnl7SnQuZGVjb2RlKHF0LHtzdHJlYW06ITB9KSwxfWNhdGNoKFd0KXt9Y29uc3QgUXQ9c2VsZjtmdW5jdGlvbiBYdChlLHQpe2NvbnN0IG49e30scj1bXSxpPVtdO2Zvcihjb25zdFtvLGFdb2YgT2JqZWN0LmVudHJpZXMoZSkpe2lmKG51bGw9PWEpY29udGludWU7bGV0IGU7ZHQuaW5jbHVkZXModHlwZW9mIGEpfHxyLnB1c2goe1tvXTphfSksZT0ic3RyaW5nIj09dHlwZW9mIGE/YTpzKGEpLGUubGVuZ3RoPjJlMyYmKGkucHVzaCh7W29dOmF9KSxlPWUuc3Vic3RyaW5nKDAsMmUzKSksbltvXT1lfXJldHVybiJzZXNzaW9uIiE9PXQmJihyLmxlbmd0aD4wJiZjb25zb2xlLndhcm4oYEhpZ2hsaWdodCB3YXMgcGFzc2VkIG9uZSBvciBtb3JlICR7dH0gcHJvcGVydGllcyBub3Qgb2YgdHlwZSBzdHJpbmcsIG51bWJlciwgb3IgYm9vbGVhbi5gLHIpLGkubGVuZ3RoPjAmJmNvbnNvbGUud2FybihgSGlnaGxpZ2h0IHdhcyBwYXNzZWQgb25lIG9yIG1vcmUgJHt0fSBwcm9wZXJ0aWVzIGV4Y2VlZGluZyAyMDAwIGNoYXJhY3RlcnMsIHdoaWNoIHdpbGwgYmUgdHJ1bmNhdGVkLmAsaSkpLG59e2xldCBlLG4scixpPTAsbz0hMSxhPTAsYz1uZXcgcHQoITEsIlt3b3JrZXJdIik7Y29uc3QgbD1bXSx1PSgpPT4wIT09YSYmaTw1JiYhIShudWxsPT1yP3ZvaWQgMDpyLmxlbmd0aCksZD0oZSxuKT0+e1F0LnBvc3RNZXNzYWdlKHtyZXNwb25zZTp7dHlwZTp0LkN1c3RvbUV2ZW50LHRhZzplLHBheWxvYWQ6bn19KX0scD1uPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7aWQ6aSxldmVudHM6byxtZXNzYWdlczphLGVycm9yczp1LHJlc291cmNlc1N0cmluZzpkLHdlYlNvY2tldEV2ZW50c1N0cmluZzpwLGhhc1Nlc3Npb25VbmxvYWRlZDpoLGhpZ2hsaWdodExvZ3M6Zn09bix5PXMoe21lc3NhZ2VzOmF9KTtsZXQgbT17c2Vzc2lvbl9zZWN1cmVfaWQ6cixwYXlsb2FkX2lkOmkudG9TdHJpbmcoKSxldmVudHM6e2V2ZW50czpvfSxtZXNzYWdlczp5LHJlc291cmNlczpkLHdlYl9zb2NrZXRfZXZlbnRzOnAsZXJyb3JzOnUsaXNfYmVhY29uOiExLGhhc19zZXNzaW9uX3VubG9hZGVkOmh9O2YmJihtLmhpZ2hsaWdodF9sb2dzPWYpO2NvbnN0IHY9ZnVuY3Rpb24oZSx0KXtpZih0KXtmb3IodmFyIG49bmV3IGh0KGUubGVuZ3RoKSxyPTA7cjxlLmxlbmd0aDsrK3IpbltyXT1lLmNoYXJDb2RlQXQocik7cmV0dXJuIG59aWYoSHQpcmV0dXJuIEh0LmVuY29kZShlKTt2YXIgaT1lLmxlbmd0aCxzPW5ldyBodChlLmxlbmd0aCsoZS5sZW5ndGg+PjEpKSxvPTAsYT1mdW5jdGlvbihlKXtzW28rK109ZX07Zm9yKHI9MDtyPGk7KytyKXtpZihvKzU+cy5sZW5ndGgpe3ZhciBjPW5ldyBodChvKzgrKGktcjw8MSkpO2Muc2V0KHMpLHM9Y312YXIgbD1lLmNoYXJDb2RlQXQocik7bDwxMjh8fHQ/YShsKTpsPDIwNDg/KGEoMTkyfGw+PjYpLGEoMTI4fDYzJmwpKTpsPjU1Mjk1JiZsPDU3MzQ0PyhhKDI0MHwobD02NTUzNisoMTA0NzU1MiZsKXwxMDIzJmUuY2hhckNvZGVBdCgrK3IpKT4+MTgpLGEoMTI4fGw+PjEyJjYzKSxhKDEyOHxsPj42JjYzKSxhKDEyOHw2MyZsKSk6KGEoMjI0fGw+PjEyKSxhKDEyOHxsPj42JjYzKSxhKDEyOHw2MyZsKSl9cmV0dXJuIFB0KHMsMCxvKX0oSlNPTi5zdHJpbmdpZnkobSkpLF89WXQodiksZz15aWVsZCBmdW5jdGlvbihlKXtyZXR1cm4gX19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgbmV3IFByb21pc2UoKHQ9Pntjb25zdCBuPW5ldyBGaWxlUmVhZGVyO24ub25sb2FkPSgpPT50KG4ucmVzdWx0KSxuLnJlYWRBc0RhdGFVUkwobmV3IEJsb2IoW2VdKSl9KSk7cmV0dXJuIHQuc2xpY2UodC5pbmRleE9mKCIsIikrMSl9KSl9KF8pO2MubG9nKGBQdXNoaW5nIHBheWxvYWQ6ICR7SlNPTi5zdHJpbmdpZnkoe3Nlc3Npb25TZWN1cmVJRDpyLGlkOmksZmlyc3RTSUQ6TWF0aC5taW4oLi4ubS5ldmVudHMuZXZlbnRzLm1hcCgoZT0+bnVsbD09ZT92b2lkIDA6ZS5fc2lkKSkuZmlsdGVyKChlPT4hIWUpKSksZXZlbnRzTGVuZ3RoOm0uZXZlbnRzLmV2ZW50cy5sZW5ndGgsbWVzc2FnZXNMZW5ndGg6YS5sZW5ndGgscmVzb3VyY2VzTGVuZ3RoOmQubGVuZ3RoLHdlYlNvY2tldExlbmd0aDpwLmxlbmd0aCxlcnJvcnNMZW5ndGg6dS5sZW5ndGgsYnVmTGVuZ3RoOnYubGVuZ3RoLGNvbXByZXNzZWRMZW5ndGg6Xy5sZW5ndGgsY29tcHJlc3NlZEJhc2U2NExlbmd0aDpnLmxlbmd0aH0sdm9pZCAwLDIpfWApO2NvbnN0IEU9ZS5QdXNoUGF5bG9hZENvbXByZXNzZWQoe3Nlc3Npb25fc2VjdXJlX2lkOnIscGF5bG9hZF9pZDppLnRvU3RyaW5nKCksZGF0YTpnfSk7bGV0IFQ9UHJvbWlzZS5yZXNvbHZlKCk7bC5sZW5ndGgmJihUPWUucHVzaE1ldHJpY3Moe21ldHJpY3M6bH0pLGwuc3BsaWNlKDApKSx5aWVsZCBQcm9taXNlLmFsbChbRSxUXSksUXQucG9zdE1lc3NhZ2Uoe3Jlc3BvbnNlOnt0eXBlOnQuQXN5bmNFdmVudHMsaWQ6aSxldmVudHNTaXplOnYubGVuZ3RoLGNvbXByZXNzZWRTaXplOmcubGVuZ3RofX0pfSkpLGg9dD0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e3VzZXJPYmplY3Q6aSx1c2VySWRlbnRpZmllcjpvLHNvdXJjZTphfT10O2QoInNlZ21lbnQiPT09YT8iU2VnbWVudCBJZGVudGlmeSI6IklkZW50aWZ5IixzKF9fc3ByZWFkVmFsdWVzKHt1c2VySWRlbnRpZmllcjpvfSxpKSkpLHlpZWxkIGUuaWRlbnRpZnlTZXNzaW9uKHtzZXNzaW9uX3NlY3VyZV9pZDpyLHVzZXJfaWRlbnRpZmllcjpvLHVzZXJfb2JqZWN0Olh0KGksInVzZXIiKX0pO2NvbnN0IGw9InNlZ21lbnQiPT09YT9hOiJkZWZhdWx0IjtjLmxvZyhgSWRlbnRpZnkgKCR7b30sIHNvdXJjZTogJHtsfSkgdy8gb2JqOiAke3MoaSl9IEAgJHtufWApfSkpLGY9dD0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e3Byb3BlcnRpZXNPYmplY3Q6aSxwcm9wZXJ0eVR5cGU6b309dDtsZXQgYTt2b2lkIDAhPT0obnVsbD09aT92b2lkIDA6aS5jbGlja1RleHRDb250ZW50KT8oYT0iQ2xpY2tUZXh0Q29udGVudCIseWllbGQgZS5hZGRTZXNzaW9uUHJvcGVydGllcyh7c2Vzc2lvbl9zZWN1cmVfaWQ6cixwcm9wZXJ0aWVzX29iamVjdDpYdChpLCJzZXNzaW9uIil9KSk6InNlc3Npb24iPT09KG51bGw9PW8/dm9pZCAwOm8udHlwZSk/KGE9IlNlc3Npb24iLHlpZWxkIGUuYWRkU2Vzc2lvblByb3BlcnRpZXMoe3Nlc3Npb25fc2VjdXJlX2lkOnIscHJvcGVydGllc19vYmplY3Q6WHQoaSwic2Vzc2lvbiIpfSkpOiJzZWdtZW50Ij09PShudWxsPT1vP3ZvaWQgMDpvLnNvdXJjZSk/KGE9IlNlZ21lbnQiLGQoIlNlZ21lbnQgVHJhY2siLHMoaSkpKTooYT0iVHJhY2siLGQoYSxzKGkpKSksYy5sb2coYEFkZGluZyAke2F9IFByb3BlcnRpZXMgdG8gc2Vzc2lvbiAoJHtyfSkgdy8gb2JqOiAke0pTT04uc3RyaW5naWZ5KGkpfSBAICR7bn1gKX0pKSx5PWU9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXtsLnB1c2goLi4uZS5tZXRyaWNzLm1hcCgoZT0+KHtuYW1lOmUubmFtZSx2YWx1ZTplLnZhbHVlLHNlc3Npb25fc2VjdXJlX2lkOnIsY2F0ZWdvcnk6ZS5jYXRlZ29yeSxncm91cDplLmdyb3VwLHRpbWVzdGFtcDplLnRpbWVzdGFtcC50b0lTT1N0cmluZygpLHRhZ3M6ZS50YWdzfSkpKSl9KSksbT10PT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7dGltZXN0YW1wOm4sdmVyYmF0aW06aSx1c2VyRW1haWw6cyx1c2VyTmFtZTpvfT10O3lpZWxkIGUuYWRkU2Vzc2lvbkZlZWRiYWNrKHtzZXNzaW9uX3NlY3VyZV9pZDpyLHRpbWVzdGFtcDpuLHZlcmJhdGltOmksdXNlcl9lbWFpbDpzLHVzZXJfbmFtZTpvfSl9KSk7UXQub25tZXNzYWdlPWZ1bmN0aW9uKHMpe3JldHVybiBfX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7aWYocy5kYXRhLm1lc3NhZ2UudHlwZT09PXQuSW5pdGlhbGl6ZSlyZXR1cm4gbj1zLmRhdGEubWVzc2FnZS5iYWNrZW5kLHI9cy5kYXRhLm1lc3NhZ2Uuc2Vzc2lvblNlY3VyZUlELG89cy5kYXRhLm1lc3NhZ2UuZGVidWcsYT1zLmRhdGEubWVzc2FnZS5yZWNvcmRpbmdTdGFydFRpbWUsYy5kZWJ1Zz1vLHZvaWQoZT1mdW5jdGlvbihlLHQ9R2Upe3JldHVybntQdXNoUGF5bG9hZDoobixyKT0+dCgodD0+ZS5yZXF1ZXN0KCRlLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwiUHVzaFBheWxvYWQiLCJtdXRhdGlvbiIsbiksUHVzaFBheWxvYWRDb21wcmVzc2VkOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoTWUsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJQdXNoUGF5bG9hZENvbXByZXNzZWQiLCJtdXRhdGlvbiIsbiksaWRlbnRpZnlTZXNzaW9uOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoVmUsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJpZGVudGlmeVNlc3Npb24iLCJtdXRhdGlvbiIsbiksYWRkU2Vzc2lvblByb3BlcnRpZXM6KG4scik9PnQoKHQ9PmUucmVxdWVzdChCZSxuLF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LHIpLHQpKSksImFkZFNlc3Npb25Qcm9wZXJ0aWVzIiwibXV0YXRpb24iLG4pLHB1c2hNZXRyaWNzOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoamUsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJwdXNoTWV0cmljcyIsIm11dGF0aW9uIixuKSxhZGRTZXNzaW9uRmVlZGJhY2s6KG4scik9PnQoKHQ9PmUucmVxdWVzdChVZSxuLF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LHIpLHQpKSksImFkZFNlc3Npb25GZWVkYmFjayIsIm11dGF0aW9uIixuKSxpbml0aWFsaXplU2Vzc2lvbjoobixyKT0+dCgodD0+ZS5yZXF1ZXN0KHFlLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwiaW5pdGlhbGl6ZVNlc3Npb24iLCJtdXRhdGlvbiIsbiksSWdub3JlOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoS2UsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJJZ25vcmUiLCJxdWVyeSIsbil9fShuZXcgcnQobix7aGVhZGVyczp7fX0pLHV0KHIpKSk7aWYodSgpKXRyeXtzLmRhdGEubWVzc2FnZS50eXBlPT09dC5Bc3luY0V2ZW50cz95aWVsZCBwKHMuZGF0YS5tZXNzYWdlKTpzLmRhdGEubWVzc2FnZS50eXBlPT09dC5JZGVudGlmeT95aWVsZCBoKHMuZGF0YS5tZXNzYWdlKTpzLmRhdGEubWVzc2FnZS50eXBlPT09dC5Qcm9wZXJ0aWVzP3lpZWxkIGYocy5kYXRhLm1lc3NhZ2UpOnMuZGF0YS5tZXNzYWdlLnR5cGU9PT10Lk1ldHJpY3M/eWllbGQgeShzLmRhdGEubWVzc2FnZSk6cy5kYXRhLm1lc3NhZ2UudHlwZT09PXQuRmVlZGJhY2smJih5aWVsZCBtKHMuZGF0YS5tZXNzYWdlKSksaT0wfWNhdGNoKGwpe28mJmNvbnNvbGUuZXJyb3IobCksaSs9MX19KSl9fX0oKTsK",ad=typeof window!="undefined"&&window.Blob&&new Blob([(i=>Uint8Array.from(atob(i),r=>r.charCodeAt(0)))(od)],{type:"text/javascript;charset=utf-8"});function oZ(i){let r;try{if(r=ad&&(window.URL||window.webkitURL).createObjectURL(ad),!r)throw"";const o=new Worker(r,{name:i==null?void 0:i.name});return o.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(r)}),o}catch(o){return new Worker("data:text/javascript;base64,"+od,{name:i==null?void 0:i.name})}finally{r&&(window.URL||window.webkitURL).revokeObjectURL(r)}}var ld=(i=>(i.BillingQuotaExceeded="BillingQuotaExceeded",i))(ld||{});const aZ=[ld.BillingQuotaExceeded.toString()],lZ=i=>{const r=(o,c,u,d,h=0)=>V(this,null,function*(){try{return yield o()}catch(b){if(b instanceof Mn&&!(f=>{var S;return((S=f.response.errors)==null?void 0:S.find(v=>aZ.includes(v.message)))===void 0})(b))throw b;if(h<10)return yield new Promise(f=>setTimeout(f,1e3+500*Math.pow(2,h))),yield r(o,c,u,d,h+1);throw console.error(`highlight.io: [${i||i}] data request failed after ${h} retries`),b}});return r};var Dt=(i=>(i[i.Initialize=0]="Initialize",i[i.AsyncEvents=1]="AsyncEvents",i[i.Identify=2]="Identify",i[i.Properties=3]="Properties",i[i.Metrics=4]="Metrics",i[i.Feedback=5]="Feedback",i[i.CustomEvent=6]="CustomEvent",i))(Dt||{});class cZ{constructor(r,o){R(this,"debug"),R(this,"name"),this.debug=r,this.name=o}log(...r){if(this.debug){let o=`[${Date.now()}]`;this.name&&(o+=` - ${this.name}`),console.log.apply(console,[o,...r])}}}const uZ=()=>V(this,null,function*(){const i=[];for(let r=0;r<30;r++)i.push(yield new Promise(o=>requestAnimationFrame(c=>requestAnimationFrame(u=>o(u-c)))));return i.reduce((r,o)=>r+o,0)/i.length}),cd="iframe parent ready",ud="iframe ok",Zr=(i,r)=>{console.warn(`Highlight Warning: (${i}): `,{output:r})},dd="app.highlight.run";class Do{constructor(r,o){var c,u,d,h,b,f;R(this,"options"),R(this,"isRunningOnHighlight"),R(this,"organizationID"),R(this,"graphqlSDK"),R(this,"events"),R(this,"sessionData"),R(this,"ready"),R(this,"manualStopped"),R(this,"state"),R(this,"logger"),R(this,"enableSegmentIntegration"),R(this,"privacySetting"),R(this,"enableCanvasRecording"),R(this,"enablePerformanceRecording"),R(this,"samplingStrategy"),R(this,"inlineImages"),R(this,"inlineStylesheet"),R(this,"debugOptions"),R(this,"listeners"),R(this,"firstloadVersion"),R(this,"environment"),R(this,"sessionShortcut"),R(this,"appVersion"),R(this,"serviceName"),R(this,"_worker"),R(this,"_optionsInternal"),R(this,"_backendUrl"),R(this,"_recordingStartTime"),R(this,"_isOnLocalHost"),R(this,"_onToggleFeedbackFormVisibility"),R(this,"_firstLoadListeners"),R(this,"_isCrossOriginIframe"),R(this,"_eventBytesSinceSnapshot"),R(this,"_lastSnapshotTime"),R(this,"_lastVisibilityChangeTime"),R(this,"pushPayloadTimerId"),R(this,"hasSessionUnloaded"),R(this,"hasPushedData"),R(this,"reloaded"),R(this,"_hasPreviouslyInitialized"),R(this,"_payloadId"),R(this,"_recordStop"),r.sessionSecureID||(r.sessionSecureID=Ui()),this.options=r,typeof((c=this.options)==null?void 0:c.debug)=="boolean"?this.debugOptions=this.options.debug?{clientInteractions:!0}:{}:this.debugOptions=(d=(u=this.options)==null?void 0:u.debug)!=null?d:{},this.logger=new cZ(this.debugOptions.clientInteractions),r.storageMode&&(this.logger.log(`initializing in ${r.storageMode} session mode`),f=r.storageMode,po=f),this._worker=new oZ,this._worker.onmessage=v=>{var I,N;((I=v.data.response)==null?void 0:I.type)===Dt.AsyncEvents?(this._eventBytesSinceSnapshot+=v.data.response.eventsSize,this.logger.log(`Web worker sent payloadID ${v.data.response.id} size ${v.data.response.eventsSize} bytes, compression ratio ${v.data.response.eventsSize/v.data.response.compressedSize}.
                Total since snapshot: ${(this._eventBytesSinceSnapshot/1e6).toFixed(1)}MB`)):((N=v.data.response)==null?void 0:N.type)===Dt.CustomEvent&&this.addCustomEvent(v.data.response.tag,v.data.response.payload)};let S=iu();if(this.reloaded=!1,!((h=this.sessionData)!=null&&h.sessionSecureID)&&(S==null?void 0:S.sessionSecureID))this.sessionData=S,this.options.sessionSecureID=S.sessionSecureID,this.reloaded=!0,this.logger.log(`Tab reloaded, continuing previous session: ${this.sessionData.sessionSecureID}`);else{for(const v of Object.values(Ue))mo(v);this.sessionData={sessionSecureID:this.options.sessionSecureID,projectID:0,sessionStartTime:Date.now()}}this._hasPreviouslyInitialized=!1,this._firstLoadListeners=o||new Ut(this.options);try{window.parent.document&&(this._isCrossOriginIframe=!1)}catch(v){this._isCrossOriginIframe=(b=this.options.recordCrossOriginIframe)==null||b}this._initMembers(this.options)}static create(r){return new Do(r)}_reset(r){return V(this,arguments,function*({forceNew:o}){let c,u;if(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),!o)try{c=st(Ue.USER_IDENTIFIER);const d=st(Ue.USER_OBJECT);d&&(u=JSON.parse(d))}catch(d){}for(const d of Object.values(Ue))mo(d);this.sessionData.sessionSecureID=Ui(),this.sessionData.sessionStartTime=Date.now(),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._payloadId=0,this.stopRecording(),this._firstLoadListeners=new Ut(this.options),yield this.initialize(),c&&u&&this.identify(c,u)})}_initMembers(r){var o,c,u,d,h,b,f,S,v,I,N,C;this.sessionShortcut=!1,this._recordingStartTime=0,this._isOnLocalHost=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="",this.ready=!1,this.state="NotRecording",this.manualStopped=!1,this.enableSegmentIntegration=!!r.enableSegmentIntegration,this.privacySetting=(o=r.privacySetting)!=null?o:"default",this.enableCanvasRecording=(c=r.enableCanvasRecording)!=null&&c,this.enablePerformanceRecording=(u=r.enablePerformanceRecording)==null||u,this.inlineImages=(d=r.inlineImages)!=null?d:this._isOnLocalHost,this.inlineStylesheet=(h=r.inlineStylesheet)==null||h,this.samplingStrategy=g({canvasFactor:.5,canvasMaxSnapshotDimension:360,canvasClearWebGLBuffer:!0,dataUrlOptions:ZR()},(b=r.samplingStrategy)!=null?b:{canvas:2}),this._backendUrl=(f=r==null?void 0:r.backendUrl)!=null?f:"https://pub.highlight.io",this._backendUrl[0]==="/"&&(this._backendUrl=new URL(this._backendUrl,document.baseURI).href);const P=new IN(`${this._backendUrl}`,{headers:{}});this.graphqlSDK=function(w,X=UN){return{PushPayload:(O,W)=>X(Y=>w.request(Vu,O,g(g({},W),Y)),"PushPayload","mutation",O),PushPayloadCompressed:(O,W)=>X(Y=>w.request(XN,O,g(g({},W),Y)),"PushPayloadCompressed","mutation",O),identifySession:(O,W)=>X(Y=>w.request(WN,O,g(g({},W),Y)),"identifySession","mutation",O),addSessionProperties:(O,W)=>X(Y=>w.request(kN,O,g(g({},W),Y)),"addSessionProperties","mutation",O),pushMetrics:(O,W)=>X(Y=>w.request(PN,O,g(g({},W),Y)),"pushMetrics","mutation",O),addSessionFeedback:(O,W)=>X(Y=>w.request(AN,O,g(g({},W),Y)),"addSessionFeedback","mutation",O),initializeSession:(O,W)=>X(Y=>w.request(MN,O,g(g({},W),Y)),"initializeSession","mutation",O),Ignore:(O,W)=>X(Y=>w.request(xN,O,g(g({},W),Y)),"Ignore","query",O)}}(P,lZ(((S=this.sessionData)==null?void 0:S.sessionSecureID)||((v=this.options)==null?void 0:v.sessionSecureID))),this.environment=(I=r.environment)!=null?I:"production",this.appVersion=r.appVersion,this.serviceName=(N=r.serviceName)!=null?N:"",typeof r.organizationID=="string"?this.organizationID=r.organizationID:this.organizationID=r.organizationID.toString(),this.isRunningOnHighlight=this.organizationID==="1"||this.organizationID==="1jdkoe52",this.firstloadVersion=r.firstloadVersion||"unknown",this.sessionShortcut=r.sessionShortcut||!1,this._onToggleFeedbackFormVisibility=()=>{};const L=r,x=Z(L,["firstloadVersion"]);this._optionsInternal=x,this.listeners=[],this.events=[],this.hasSessionUnloaded=!1,this.hasPushedData=!1,window.Intercom&&window.Intercom("onShow",()=>{window.Intercom("update",{highlightSessionURL:this.getCurrentSessionURLWithTimestamp()}),this.addProperties({event:"Intercom onShow"})}),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime(),this._lastVisibilityChangeTime=new Date().getTime(),this._payloadId=(C=Number(st(Ue.PAYLOAD_ID)))!=null?C:1,gt(Ue.PAYLOAD_ID,this._payloadId.toString())}identify(r,o={},c){r&&r!==""?(this.sessionData.userIdentifier=r.toString(),this.sessionData.userObject=o,gt(Ue.USER_IDENTIFIER,r.toString()),gt(Ue.USER_OBJECT,JSON.stringify(o)),this._worker.postMessage({message:{type:Dt.Identify,userIdentifier:r,userObject:o,source:c}})):console.warn("Highlight's identify() call was passed an empty identifier.",{user_identifier:r,user_object:o})}pushCustomError(r,o){return this.consumeCustomError(new Error(r),void 0,o)}consumeCustomError(r,o,c){let u={};if(c)try{u=g(g({},JSON.parse(c)),u)}catch(d){}return this.consumeError(r,{message:o,payload:u})}consumeError(r,{message:o,payload:c,source:u,type:d}){var h,b,f,S;r.cause&&(c=_(g({},c),{"exception.cause":r.cause}));let v=o?o+":"+r.message:r.message;d==="React.ErrorBoundary"&&(v="ErrorBoundary: "+v);const I=Sr.parse(r);this._firstLoadListeners.errors.push({event:v,type:d!=null?d:"custom",url:window.location.href,source:u!=null?u:"",lineNumber:(h=I[0])!=null&&h.lineNumber?(b=I[0])==null?void 0:b.lineNumber:0,columnNumber:(f=I[0])!=null&&f.columnNumber?(S=I[0])==null?void 0:S.columnNumber:0,stackTrace:I,timestamp:new Date().toISOString(),payload:JSON.stringify(c)})}addProperties(r={},o){const c=g({},r);Object.entries(c).forEach(([u,d])=>{try{structuredClone(d)}catch(h){delete c[u]}}),this._worker.postMessage({message:{type:Dt.Properties,propertiesObject:c,propertyType:o}})}initialize(r){return V(this,null,function*(){var o,c,u,d,h,b;if(this.logger.log("Initializing...",r,this.sessionData,this.options),(navigator==null?void 0:navigator.webdriver)&&!window.Cypress||((o=navigator==null?void 0:navigator.userAgent)==null?void 0:o.includes("Googlebot"))||((c=navigator==null?void 0:navigator.userAgent)==null?void 0:c.includes("AdsBot")))(u=this._firstLoadListeners)==null||u.stopListening();else try{if(r!=null&&r.forceNew)return void(yield this._reset(r));const f=st(Ue.RECORDING_START_TIME);f?this._recordingStartTime=parseInt(f,10):(this._recordingStartTime=new Date().getTime(),gt(Ue.RECORDING_START_TIME,this._recordingStartTime.toString()));let S,v=st("highlightClientID");v||(v=Ui(),gt("highlightClientID",v)),fo(null),S=!this.options.disableSessionRecording&&this.options.disableNetworkRecording===void 0&&typeof this.options.networkRecording!="boolean"&&(((d=this.options.networkRecording)==null?void 0:d.recordHeadersAndBody)||!1);let I=[];if(typeof this.options.networkRecording=="object"&&((h=this.options.networkRecording.destinationDomains)!=null&&h.length)&&(I=this.options.networkRecording.destinationDomains),this._isCrossOriginIframe)yield this._setupCrossOriginIframe();else{const w=yield this.graphqlSDK.initializeSession({organization_verbose_id:this.organizationID,enable_strict_privacy:this.privacySetting==="strict",privacy_setting:this.privacySetting,enable_recording_network_contents:S,clientVersion:this.firstloadVersion,firstloadVersion:this.firstloadVersion,clientConfig:JSON.stringify(this._optionsInternal),environment:this.environment,id:v,appVersion:this.appVersion,serviceName:this.serviceName,session_secure_id:this.sessionData.sessionSecureID,client_id:v,network_recording_domains:I,disable_session_recording:this.options.disableSessionRecording});if(w.initializeSession.secure_id!==this.sessionData.sessionSecureID&&this.logger.log(`Unexpected secure id returned by initializeSession: ${w.initializeSession.secure_id}, expected ${this.sessionData.sessionSecureID}`),this.sessionData.sessionSecureID=w.initializeSession.secure_id,this.sessionData.projectID=parseInt(((b=w==null?void 0:w.initializeSession)==null?void 0:b.project_id)||"0"),!this.sessionData.projectID||!this.sessionData.sessionSecureID)return void console.error("Failed to initialize Highlight; an error occurred on our end.",this.sessionData)}if(this.logger.log(`Loaded Highlight
Remote: ${this._backendUrl}
Project ID: ${this.sessionData.projectID}
SessionSecureID: ${this.sessionData.sessionSecureID}`),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._worker.postMessage({message:{type:Dt.Initialize,sessionSecureID:this.sessionData.sessionSecureID,backend:this._backendUrl,debug:!!this.debugOptions.clientInteractions,recordingStartTime:this._recordingStartTime}}),su(this.sessionData.sessionSecureID),this.sessionData.userIdentifier&&this.identify(this.sessionData.userIdentifier,this.sessionData.userObject),this._firstLoadListeners.isListening()?this._firstLoadListeners.hasNetworkRecording||Ut.setupNetworkListener(this._firstLoadListeners,this.options):this._firstLoadListeners.startListening(),this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this._isCrossOriginIframe||(this.pushPayloadTimerId=setTimeout(()=>{this._save()},1e3)),this.options.disableSessionRecording)return this.logger.log("Highlight is NOT RECORDING a session replay per H.init setting."),this.ready=!0,this.state="Recording",void(this.manualStopped=!1);const{getDeviceDetails:N}=(()=>{if(!("performance"in window)||!("memory"in performance))return{getDeviceDetails:void 0,getCurrentDeviceDetails:void 0};const w=window.performance;return{getDeviceDetails:()=>({deviceMemory:iZ(navigator.deviceMemory||0)}),getCurrentDeviceDetails:()=>({jsHeapSizeLimit:Uo(w.memory.jsHeapSizeLimit),totalJSHeapSize:Uo(w.memory.totalJSHeapSize),usedJSHeapSize:Uo(w.memory.usedJSHeapSize)})}})();N&&this.recordMetric([{name:cn.DeviceMemory,value:N().deviceMemory,category:ut.Device,group:window.location.href}]);const C=w=>{this.events.push(w)};C.bind(this);const P=!!this._recordStop;this._recordStop&&(this._recordStop(),this._recordStop=void 0);const[L,x]=(w=>{switch(w){case"strict":case"default":return[!0,void 0];case"none":return[!1,{password:!0}]}})(this.privacySetting);this._recordStop=xt({ignoreClass:"highlight-ignore",blockClass:"highlight-block",emit:C,recordCrossOriginIframes:this.options.recordCrossOriginIframe,privacySetting:this.privacySetting,maskAllInputs:L,maskInputOptions:x,recordCanvas:this.enableCanvasRecording,sampling:{canvas:{fps:this.samplingStrategy.canvas,fpsManual:this.samplingStrategy.canvasManualSnapshot,resizeFactor:this.samplingStrategy.canvasFactor,clearWebGLBuffer:this.samplingStrategy.canvasClearWebGLBuffer,initialSnapshotDelay:this.samplingStrategy.canvasInitialSnapshotDelay,dataURLOptions:this.samplingStrategy.dataUrlOptions,maxSnapshotDimension:this.samplingStrategy.canvasMaxSnapshotDimension}},keepIframeSrcFn:w=>!this.options.recordCrossOriginIframe,inlineImages:this.inlineImages,inlineStylesheet:this.inlineStylesheet,plugins:[RR()],logger:typeof this.options.debug=="boolean"&&this.options.debug||typeof this.options.debug=="object"&&this.options.debug.domRecording?{debug:this.logger.log,warn:Zr}:void 0}),P||this.options.recordCrossOriginIframe&&this._setupCrossOriginIframeParent(),document.referrer&&(window&&document.referrer.includes(window.location.origin)||(this.addCustomEvent("Referrer",document.referrer),this.addProperties({referrer:document.referrer},{type:"session"}))),this._setupWindowListeners(),this.ready=!0,this.state="Recording",this.manualStopped=!1}catch(f){this._isOnLocalHost&&(console.error(f),Zr("initializeSession",f))}})}_visibilityHandler(r){return V(this,null,function*(){this.manualStopped?this.logger.log("Ignoring visibility event due to manual stop."):new Date().getTime()-this._lastVisibilityChangeTime<100||(this._lastVisibilityChangeTime=new Date().getTime(),this.logger.log(`Detected window ${r?"hidden":"visible"}.`),r?(this.addCustomEvent("TabHidden",!0),this.options.disableBackgroundRecording&&this.stopRecording()):(this.options.disableBackgroundRecording&&(yield this.initialize()),this.addCustomEvent("TabHidden",!1)))})}_setupCrossOriginIframe(){return V(this,null,function*(){this.logger.log("highlight in cross-origin iframe is waiting "),yield new Promise(r=>{const o=c=>{if(c.data.highlight===cd){const u=c.data;this.logger.log("highlight got window message ",u),this.sessionData.projectID=u.projectID,this.sessionData.sessionSecureID=u.sessionSecureID,window.parent.postMessage({highlight:ud},"*"),window.removeEventListener("message",o),r()}};window.addEventListener("message",o)})})}_setupCrossOriginIframeParent(){this.logger.log("highlight setting up cross origin iframe parent notification"),setInterval(()=>{window.document.querySelectorAll("iframe").forEach(r=>{var o;(o=r.contentWindow)==null||o.postMessage({highlight:cd,projectID:this.sessionData.projectID,sessionSecureID:this.sessionData.sessionSecureID},"*")})},1e3),window.addEventListener("message",r=>{r.data.highlight===ud&&this.logger.log("highlight got response from initialized iframe")})}_setupWindowListeners(){var r;try{const c=this;this.enableSegmentIntegration&&this.listeners.push(DN(d=>{if(d.type==="track"){const h={};h["segment-event"]=d.event,c.addProperties(h,{type:"track",source:"segment"})}else if(d.type==="identify"){const h=d.userId.replace(/^"(.*)"$/,"$1");c.identify(h,d.traits,"segment")}})),this.listeners.push(zR(d=>{this.reloaded?(this.addCustomEvent("Reload",d),this.reloaded=!1,c.addProperties({reload:!0},{type:"session"})):this.addCustomEvent("Navigate",d),c.addProperties({"visited-url":d},{type:"session"})})),this.listeners.push((d=>{let h;const b=()=>{clearTimeout(h),h=setTimeout(()=>{d({height:window.innerHeight,width:window.innerWidth,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth,orientation:window.screen.orientation.angle})},500)};return window.addEventListener("resize",b),b(),()=>window.removeEventListener("resize",b)})(d=>{this.addCustomEvent("Viewport",d),this.submitViewportMetrics(d)})),this.listeners.push((d=>{const h=b=>{if(b.target){const f=Wu(b.target);d(f,b)}};return window.addEventListener("click",h),()=>window.removeEventListener("click",h)})((d,h)=>{d&&this.addCustomEvent("Click",d);let b=null,f=null;if(h&&h.target){const S=h.target;b=ku(S),f=S.textContent,f&&f.length>2e3&&(f=f.substring(0,2e3))}c.addProperties({clickTextContent:f,clickSelector:b},{type:"session"})})),this.listeners.push((d=>{const h=b=>{if(b.target){const f=Wu(b.target);d(f)}};return window.addEventListener("focusin",h),()=>window.removeEventListener("focusin",h)})(d=>{d&&this.addCustomEvent("Focus",d)})),this.listeners.push(rZ(d=>{const{name:h,value:b}=d;this.recordMetric([{name:h,value:b,group:window.location.href,category:ut.WebVital}])})),this.sessionShortcut&&HN(this.sessionShortcut,()=>{window.open(this.getCurrentSessionURLWithTimestamp(),"_blank")}),this.enablePerformanceRecording&&(this.listeners.push(((d,h)=>{let b=0,f=0;const S=()=>{const P=(new Date().getTime()-h)/1e3,L=sd.memory.jsHeapSizeLimit||0,x=sd.memory.usedJSHeapSize||0;d({jsHeapSizeLimit:L,usedJSHeapSize:x,relativeTimestamp:P,fps:b})};let v;S(),v=setInterval(()=>{S()},5e3);let I=0,N=Date.now();const C=function(){var P=Date.now();I++,P>1e3+N&&(b=Math.round(1e3*I/(P-N)),I=0,N=P),f=requestAnimationFrame(C)};return C(),()=>{clearInterval(v),cancelAnimationFrame(f)}})(d=>{this.addCustomEvent("Performance",ln(d)),this.recordMetric(Object.entries(d).map(([h,b])=>b?{name:h,value:b,category:ut.Performance,group:window.location.href}:void 0).filter(h=>h))},this._recordingStartTime)),this.listeners.push(((d,h)=>{let b={},f=16.666666666666668;uZ().then(C=>f=C);const S=C=>{var P;b!=null&&b.event||(b={event:C,location:window.location.href,timerStart:(P=window.performance)==null?void 0:P.now()},window.requestAnimationFrame(v))},v=()=>{if(!(b!=null&&b.timerStart))return;const C=window.performance.now()-b.timerStart-f;I(C),b={}},I=C=>{const P=(new Date().getTime()-h)/1e3;d({relativeTimestamp:P,jankAmount:C,querySelector:N(),newLocation:window.location.href!=b.location?window.location.href:void 0})},N=()=>{var C;return(C=b==null?void 0:b.event)!=null&&C.target?ku(b.event.target):""};return window.addEventListener("click",S,!0),window.addEventListener("keydown",S,!0),()=>{window.removeEventListener("keydown",S,!0),window.removeEventListener("click",S,!0)}})(d=>{this.addCustomEvent("Jank",ln(d)),this.recordMetric([{name:"Jank",value:d.jankAmount,category:ut.WebVital,group:d.querySelector}])},this._recordingStartTime))),this._hasPreviouslyInitialized||((r=window.electron)!=null&&r.ipcRenderer?(window.electron.ipcRenderer.on("highlight.run",({visible:d})=>{this._visibilityHandler(!d)}),this.logger.log("Set up Electron highlight.run events.")):((d=>{let h,b;if(document.hidden!==void 0?(h="hidden",b="visibilitychange"):document.msHidden!==void 0?(h="msHidden",b="msvisibilitychange"):document.webkitHidden!==void 0&&(h="webkitHidden",b="webkitvisibilitychange"),b===void 0)return()=>{};if(h===void 0)return()=>{};const f=h,S=()=>{const v=document[f];d(!!v)};document.addEventListener(b,S)})(d=>this._visibilityHandler(d)),this.logger.log("Set up document visibility listener.")),this._hasPreviouslyInitialized=!0);const u=()=>{this.hasSessionUnloaded=!0,this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0)};window.addEventListener("beforeunload",u),this.listeners.push(()=>window.removeEventListener("beforeunload",u))}catch(c){this._isOnLocalHost&&(console.error(c),Zr("initializeSession _setupWindowListeners",c))}const o=()=>{this.addCustomEvent("Page Unload",""),fo(this.sessionData)};if(window.addEventListener("beforeunload",o),this.listeners.push(()=>window.removeEventListener("beforeunload",o)),navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)){const c=()=>{this.addCustomEvent("Page Unload",""),fo(this.sessionData)};window.addEventListener("pagehide",c),this.listeners.push(()=>window.removeEventListener("beforeunload",c))}}submitViewportMetrics({height:r,width:o,availHeight:c,availWidth:u}){this.recordMetric([{name:cn.ViewportHeight,value:r,category:ut.Device,group:window.location.href},{name:cn.ViewportWidth,value:o,category:ut.Device,group:window.location.href},{name:cn.ScreenHeight,value:c,category:ut.Device,group:window.location.href},{name:cn.ScreenWidth,value:u,category:ut.Device,group:window.location.href},{name:cn.ViewportArea,value:r*o,category:ut.Device,group:window.location.href}])}recordMetric(r){this._worker.postMessage({message:{type:Dt.Metrics,metrics:r.map(o=>_(g({},o),{tags:o.tags||[],group:o.group||window.location.href,category:o.category||ut.Frontend,timestamp:new Date}))}})}stopRecording(r){this.manualStopped=!!r,this.manualStopped&&this.addCustomEvent("Stop","H.stop() was called which stops Highlight from recording."),this.state="NotRecording",r&&this._recordStop&&(this._recordStop(),this._recordStop=void 0),this.listeners.forEach(o=>o()),this.listeners=[]}getCurrentSessionTimestamp(){return this._recordingStartTime}getCurrentSessionURLWithTimestamp(){const r=new Date().getTime(),{projectID:o,sessionSecureID:c}=this.sessionData,u=(r-this._recordingStartTime)/1e3;return`https://${dd}/${o}/sessions/${c}?ts=${u}`}getCurrentSessionURL(){const r=this.sessionData.projectID,o=this.sessionData.sessionSecureID;return r&&o?`https://${dd}/${r}/sessions/${o}`:null}snapshot(r){return V(this,null,function*(){yield xt.snapshotCanvas(r)})}addSessionFeedback({timestamp:r,verbatim:o,user_email:c,user_name:u}){var d;this._worker.postMessage({message:{type:Dt.Feedback,verbatim:o,timestamp:r,userName:u||this.sessionData.userIdentifier,userEmail:c||((d=this.sessionData.userObject)==null?void 0:d.name)}})}_save(){return V(this,null,function*(){var r;try{let o;this.state==="Recording"&&this.listeners&&this.sessionData.sessionStartTime&&Date.now()-this.sessionData.sessionStartTime>144e5&&(this.logger.log("Resetting session",{start:this.sessionData.sessionStartTime}),yield this._reset({})),((r=this.options)==null?void 0:r.sendMode)==="local"&&(o=c=>V(this,null,function*(){let u=new Blob([JSON.stringify({query:Zu(Vu),variables:c})],{type:"application/json"});return yield window.fetch(`${this._backendUrl}`,{method:"POST",body:u}),0})),yield this._sendPayload({sendFn:o}),this.hasPushedData=!0,this.sessionData.lastPushTime=Date.now()}catch(o){this._isOnLocalHost&&(console.error(o),Zr("_save",o))}this.state==="Recording"&&(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this.pushPayloadTimerId=setTimeout(()=>{this._save()},2e3))})}addCustomEvent(r,o){if(this.state==="NotRecording"){let c;const u=()=>{clearInterval(c),this.state==="Recording"&&this.events.length>0?Hc(r,o):c=setTimeout(u,500)};c=setTimeout(u,500)}else this.state==="Recording"&&(this.events.length>0||this.hasPushedData)&&Hc(r,o)}_sendPayload(r){return V(this,arguments,function*({sendFn:o}){const c=Ut.getRecordedNetworkResources(this._firstLoadListeners,this._recordingStartTime),u=Ut.getRecordedWebSocketEvents(this._firstLoadListeners),d=[...this.events],h=[...this._firstLoadListeners.messages],b=[...this._firstLoadListeners.errors],{bytes:f,time:S}=this.enableCanvasRecording?ru.canvas:ru.normal;this._eventBytesSinceSnapshot>=f&&new Date().getTime()-this._lastSnapshotTime>=S&&this.takeFullSnapshot(),this.logger.log(`Sending: ${d.length} events, ${h.length} messages, ${c.length} network resources, ${b.length} errors 
To: ${this._backendUrl}
Org: ${this.organizationID}
SessionSecureID: ${this.sessionData.sessionSecureID}`);const v=st(Nr)||"";o?yield o({session_secure_id:this.sessionData.sessionSecureID,payload_id:this._payloadId.toString(),events:{events:d},messages:ln({messages:h}),resources:JSON.stringify({resources:c}),web_socket_events:JSON.stringify({webSocketEvents:u}),errors:b,is_beacon:!1,has_session_unloaded:this.hasSessionUnloaded}):this._worker.postMessage({message:{type:Dt.AsyncEvents,id:this._payloadId,events:d,messages:h,errors:b,resourcesString:JSON.stringify({resources:c}),webSocketEventsString:JSON.stringify({webSocketEvents:u}),hasSessionUnloaded:this.hasSessionUnloaded,highlightLogs:v}}),this._payloadId++,gt(Ue.PAYLOAD_ID,this._payloadId.toString()),Ut.clearRecordedNetworkResources(this._firstLoadListeners),this.events=this.events.slice(d.length),this._firstLoadListeners.messages=this._firstLoadListeners.messages.slice(h.length),this._firstLoadListeners.errors=this._firstLoadListeners.errors.slice(b.length),sZ(v)})}takeFullSnapshot(){xt.takeFullSnapshot(),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime()}}const dZ=Object.freeze(Object.defineProperty({__proto__:null,shutdown:()=>V(this,null,function*(){})},Symbol.toStringTag,{value:"Module"}));n.FirstLoadListeners=Ut,n.GenerateSecureID=Ui,n.Highlight=Do,n.HighlightWarning=Zr,n.MetricCategory=ut,n.getPreviousSessionData=iu,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})})(Ds,Ds.exports);var jI=Ds.exports;const QI=Ne({__proto__:null},[jI]);Se.H=ke,Se.HighlightSegmentMiddleware=Fd,Se.configureElectronHighlight=Yd,Object.defineProperty(Se,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.cjs.map
