var In = Object.defineProperty;
var Cn = (e, t, r) => t in e ? In(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r;
var $ = (e, t, r) => (Cn(e, typeof t != "symbol" ? t + "" : t, r), r);
var ut = (e, t, r) => new Promise((n, i) => {
  var a = (u) => {
    try {
      s(r.next(u));
    } catch (_) {
      i(_);
    }
  }, o = (u) => {
    try {
      s(r.throw(u));
    } catch (_) {
      i(_);
    }
  }, s = (u) => u.done ? n(u.value) : Promise.resolve(u.value).then(a, o);
  s((r = r.apply(e, t)).next());
});
import { g as Ln, a as bn, s as Dn, b as wn, c as xn, D as Un } from "./index-bWmur_Kt.js";
var Bn = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {}, te = "1.8.0", Kt = /^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;
function Gn(e) {
  var t = /* @__PURE__ */ new Set([e]), r = /* @__PURE__ */ new Set(), n = e.match(Kt);
  if (!n)
    return function() {
      return !1;
    };
  var i = {
    major: +n[1],
    minor: +n[2],
    patch: +n[3],
    prerelease: n[4]
  };
  if (i.prerelease != null)
    return function(u) {
      return u === e;
    };
  function a(s) {
    return r.add(s), !1;
  }
  function o(s) {
    return t.add(s), !0;
  }
  return function(u) {
    if (t.has(u))
      return !0;
    if (r.has(u))
      return !1;
    var _ = u.match(Kt);
    if (!_)
      return a(u);
    var c = {
      major: +_[1],
      minor: +_[2],
      patch: +_[3],
      prerelease: _[4]
    };
    return c.prerelease != null || i.major !== c.major ? a(u) : i.major === 0 ? i.minor === c.minor && i.patch <= c.patch ? o(u) : a(u) : i.minor <= c.minor ? o(u) : a(u);
  };
}
var kn = Gn(te), $n = te.split(".")[0], Re = Symbol.for("opentelemetry.js.api." + $n), Me = Bn;
function Le(e, t, r, n) {
  var i;
  n === void 0 && (n = !1);
  var a = Me[Re] = (i = Me[Re]) !== null && i !== void 0 ? i : {
    version: te
  };
  if (!n && a[e]) {
    var o = new Error("@opentelemetry/api: Attempted duplicate registration of API: " + e);
    return r.error(o.stack || o.message), !1;
  }
  if (a.version !== te) {
    var o = new Error("@opentelemetry/api: Registration of version v" + a.version + " for " + e + " does not match previously registered API v" + te);
    return r.error(o.stack || o.message), !1;
  }
  return a[e] = t, r.debug("@opentelemetry/api: Registered a global for " + e + " v" + te + "."), !0;
}
function ie(e) {
  var t, r, n = (t = Me[Re]) === null || t === void 0 ? void 0 : t.version;
  if (!(!n || !kn(n)))
    return (r = Me[Re]) === null || r === void 0 ? void 0 : r[e];
}
function be(e, t) {
  t.debug("@opentelemetry/api: Unregistering a global for " + e + " v" + te + ".");
  var r = Me[Re];
  r && delete r[e];
}
var Fn = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, Vn = function(e, t, r) {
  if (r || arguments.length === 2)
    for (var n = 0, i = t.length, a; n < i; n++)
      (a || !(n in t)) && (a || (a = Array.prototype.slice.call(t, 0, n)), a[n] = t[n]);
  return e.concat(a || Array.prototype.slice.call(t));
}, Hn = (
  /** @class */
  function() {
    function e(t) {
      this._namespace = t.namespace || "DiagComponentLogger";
    }
    return e.prototype.debug = function() {
      for (var t = [], r = 0; r < arguments.length; r++)
        t[r] = arguments[r];
      return he("debug", this._namespace, t);
    }, e.prototype.error = function() {
      for (var t = [], r = 0; r < arguments.length; r++)
        t[r] = arguments[r];
      return he("error", this._namespace, t);
    }, e.prototype.info = function() {
      for (var t = [], r = 0; r < arguments.length; r++)
        t[r] = arguments[r];
      return he("info", this._namespace, t);
    }, e.prototype.warn = function() {
      for (var t = [], r = 0; r < arguments.length; r++)
        t[r] = arguments[r];
      return he("warn", this._namespace, t);
    }, e.prototype.verbose = function() {
      for (var t = [], r = 0; r < arguments.length; r++)
        t[r] = arguments[r];
      return he("verbose", this._namespace, t);
    }, e;
  }()
);
function he(e, t, r) {
  var n = ie("diag");
  if (n)
    return r.unshift(t), n[e].apply(n, Vn([], Fn(r), !1));
}
var y;
(function(e) {
  e[e.NONE = 0] = "NONE", e[e.ERROR = 30] = "ERROR", e[e.WARN = 50] = "WARN", e[e.INFO = 60] = "INFO", e[e.DEBUG = 70] = "DEBUG", e[e.VERBOSE = 80] = "VERBOSE", e[e.ALL = 9999] = "ALL";
})(y || (y = {}));
function Yn(e, t) {
  e < y.NONE ? e = y.NONE : e > y.ALL && (e = y.ALL), t = t || {};
  function r(n, i) {
    var a = t[n];
    return typeof a == "function" && e >= i ? a.bind(t) : function() {
    };
  }
  return {
    error: r("error", y.ERROR),
    warn: r("warn", y.WARN),
    info: r("info", y.INFO),
    debug: r("debug", y.DEBUG),
    verbose: r("verbose", y.VERBOSE)
  };
}
var jn = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, Xn = function(e, t, r) {
  if (r || arguments.length === 2)
    for (var n = 0, i = t.length, a; n < i; n++)
      (a || !(n in t)) && (a || (a = Array.prototype.slice.call(t, 0, n)), a[n] = t[n]);
  return e.concat(a || Array.prototype.slice.call(t));
}, Wn = "diag", B = (
  /** @class */
  function() {
    function e() {
      function t(i) {
        return function() {
          for (var a = [], o = 0; o < arguments.length; o++)
            a[o] = arguments[o];
          var s = ie("diag");
          if (s)
            return s[i].apply(s, Xn([], jn(a), !1));
        };
      }
      var r = this, n = function(i, a) {
        var o, s, u;
        if (a === void 0 && (a = { logLevel: y.INFO }), i === r) {
          var _ = new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");
          return r.error((o = _.stack) !== null && o !== void 0 ? o : _.message), !1;
        }
        typeof a == "number" && (a = {
          logLevel: a
        });
        var c = ie("diag"), E = Yn((s = a.logLevel) !== null && s !== void 0 ? s : y.INFO, i);
        if (c && !a.suppressOverrideMessage) {
          var f = (u = new Error().stack) !== null && u !== void 0 ? u : "<failed to generate stacktrace>";
          c.warn("Current logger will be overwritten from " + f), E.warn("Current logger will overwrite one already registered from " + f);
        }
        return Le("diag", E, r, !0);
      };
      r.setLogger = n, r.disable = function() {
        be(Wn, r);
      }, r.createComponentLogger = function(i) {
        return new Hn(i);
      }, r.verbose = t("verbose"), r.debug = t("debug"), r.info = t("info"), r.warn = t("warn"), r.error = t("error");
    }
    return e.instance = function() {
      return this._instance || (this._instance = new e()), this._instance;
    }, e;
  }()
), Kn = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, qn = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r)
    return r.call(e);
  if (e && typeof e.length == "number")
    return {
      next: function() {
        return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
      }
    };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, zn = (
  /** @class */
  function() {
    function e(t) {
      this._entries = t ? new Map(t) : /* @__PURE__ */ new Map();
    }
    return e.prototype.getEntry = function(t) {
      var r = this._entries.get(t);
      if (r)
        return Object.assign({}, r);
    }, e.prototype.getAllEntries = function() {
      return Array.from(this._entries.entries()).map(function(t) {
        var r = Kn(t, 2), n = r[0], i = r[1];
        return [n, i];
      });
    }, e.prototype.setEntry = function(t, r) {
      var n = new e(this._entries);
      return n._entries.set(t, r), n;
    }, e.prototype.removeEntry = function(t) {
      var r = new e(this._entries);
      return r._entries.delete(t), r;
    }, e.prototype.removeEntries = function() {
      for (var t, r, n = [], i = 0; i < arguments.length; i++)
        n[i] = arguments[i];
      var a = new e(this._entries);
      try {
        for (var o = qn(n), s = o.next(); !s.done; s = o.next()) {
          var u = s.value;
          a._entries.delete(u);
        }
      } catch (_) {
        t = { error: _ };
      } finally {
        try {
          s && !s.done && (r = o.return) && r.call(o);
        } finally {
          if (t)
            throw t.error;
        }
      }
      return a;
    }, e.prototype.clear = function() {
      return new e();
    }, e;
  }()
), Jn = Symbol("BaggageEntryMetadata"), Qn = B.instance();
function Zn(e) {
  return e === void 0 && (e = {}), new zn(new Map(Object.entries(e)));
}
function ei(e) {
  return typeof e != "string" && (Qn.error("Cannot create baggage metadata from unknown type: " + typeof e), e = ""), {
    __TYPE__: Jn,
    toString: function() {
      return e;
    }
  };
}
function wt(e) {
  return Symbol.for(e);
}
var ti = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t) {
      var r = this;
      r._currentContext = t ? new Map(t) : /* @__PURE__ */ new Map(), r.getValue = function(n) {
        return r._currentContext.get(n);
      }, r.setValue = function(n, i) {
        var a = new e(r._currentContext);
        return a._currentContext.set(n, i), a;
      }, r.deleteValue = function(n) {
        var i = new e(r._currentContext);
        return i._currentContext.delete(n), i;
      };
    }
    return e;
  }()
), Q = new ti(), le = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), ri = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.createHistogram = function(t, r) {
      return di;
    }, e.prototype.createCounter = function(t, r) {
      return ci;
    }, e.prototype.createUpDownCounter = function(t, r) {
      return Ei;
    }, e.prototype.createObservableGauge = function(t, r) {
      return pi;
    }, e.prototype.createObservableCounter = function(t, r) {
      return fi;
    }, e.prototype.createObservableUpDownCounter = function(t, r) {
      return li;
    }, e.prototype.addBatchObservableCallback = function(t, r) {
    }, e.prototype.removeBatchObservableCallback = function(t) {
    }, e;
  }()
), xt = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
    }
    return e;
  }()
), ni = (
  /** @class */
  function(e) {
    le(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.add = function(r, n) {
    }, t;
  }(xt)
), ii = (
  /** @class */
  function(e) {
    le(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.add = function(r, n) {
    }, t;
  }(xt)
), ai = (
  /** @class */
  function(e) {
    le(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.record = function(r, n) {
    }, t;
  }(xt)
), Ut = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.addCallback = function(t) {
    }, e.prototype.removeCallback = function(t) {
    }, e;
  }()
), oi = (
  /** @class */
  function(e) {
    le(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t;
  }(Ut)
), si = (
  /** @class */
  function(e) {
    le(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t;
  }(Ut)
), ui = (
  /** @class */
  function(e) {
    le(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t;
  }(Ut)
), _i = new ri(), ci = new ni(), di = new ai(), Ei = new ii(), fi = new oi(), pi = new si(), li = new ui(), Ti = {
  get: function(e, t) {
    if (e != null)
      return e[t];
  },
  keys: function(e) {
    return e == null ? [] : Object.keys(e);
  }
}, hi = {
  set: function(e, t, r) {
    e != null && (e[t] = r);
  }
}, vi = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, Si = function(e, t, r) {
  if (r || arguments.length === 2)
    for (var n = 0, i = t.length, a; n < i; n++)
      (a || !(n in t)) && (a || (a = Array.prototype.slice.call(t, 0, n)), a[n] = t[n]);
  return e.concat(a || Array.prototype.slice.call(t));
}, Ai = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.active = function() {
      return Q;
    }, e.prototype.with = function(t, r, n) {
      for (var i = [], a = 3; a < arguments.length; a++)
        i[a - 3] = arguments[a];
      return r.call.apply(r, Si([n], vi(i), !1));
    }, e.prototype.bind = function(t, r) {
      return r;
    }, e.prototype.enable = function() {
      return this;
    }, e.prototype.disable = function() {
      return this;
    }, e;
  }()
), Oi = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, mi = function(e, t, r) {
  if (r || arguments.length === 2)
    for (var n = 0, i = t.length, a; n < i; n++)
      (a || !(n in t)) && (a || (a = Array.prototype.slice.call(t, 0, n)), a[n] = t[n]);
  return e.concat(a || Array.prototype.slice.call(t));
}, _t = "context", Ni = new Ai(), tt = (
  /** @class */
  function() {
    function e() {
    }
    return e.getInstance = function() {
      return this._instance || (this._instance = new e()), this._instance;
    }, e.prototype.setGlobalContextManager = function(t) {
      return Le(_t, t, B.instance());
    }, e.prototype.active = function() {
      return this._getContextManager().active();
    }, e.prototype.with = function(t, r, n) {
      for (var i, a = [], o = 3; o < arguments.length; o++)
        a[o - 3] = arguments[o];
      return (i = this._getContextManager()).with.apply(i, mi([t, r, n], Oi(a), !1));
    }, e.prototype.bind = function(t, r) {
      return this._getContextManager().bind(t, r);
    }, e.prototype._getContextManager = function() {
      return ie(_t) || Ni;
    }, e.prototype.disable = function() {
      this._getContextManager().disable(), be(_t, B.instance());
    }, e;
  }()
), G;
(function(e) {
  e[e.NONE = 0] = "NONE", e[e.SAMPLED = 1] = "SAMPLED";
})(G || (G = {}));
var Or = "0000000000000000", mr = "00000000000000000000000000000000", Nr = {
  traceId: mr,
  spanId: Or,
  traceFlags: G.NONE
}, Ne = (
  /** @class */
  function() {
    function e(t) {
      t === void 0 && (t = Nr), this._spanContext = t;
    }
    return e.prototype.spanContext = function() {
      return this._spanContext;
    }, e.prototype.setAttribute = function(t, r) {
      return this;
    }, e.prototype.setAttributes = function(t) {
      return this;
    }, e.prototype.addEvent = function(t, r) {
      return this;
    }, e.prototype.setStatus = function(t) {
      return this;
    }, e.prototype.updateName = function(t) {
      return this;
    }, e.prototype.end = function(t) {
    }, e.prototype.isRecording = function() {
      return !1;
    }, e.prototype.recordException = function(t, r) {
    }, e;
  }()
), Bt = wt("OpenTelemetry Context Key SPAN");
function Gt(e) {
  return e.getValue(Bt) || void 0;
}
function Pi() {
  return Gt(tt.getInstance().active());
}
function kt(e, t) {
  return e.setValue(Bt, t);
}
function yi(e) {
  return e.deleteValue(Bt);
}
function gi(e, t) {
  return kt(e, new Ne(t));
}
function Pr(e) {
  var t;
  return (t = Gt(e)) === null || t === void 0 ? void 0 : t.spanContext();
}
var Ri = /^([0-9a-f]{32})$/i, Mi = /^[0-9a-f]{16}$/i;
function yr(e) {
  return Ri.test(e) && e !== mr;
}
function Ii(e) {
  return Mi.test(e) && e !== Or;
}
function rt(e) {
  return yr(e.traceId) && Ii(e.spanId);
}
function Ci(e) {
  return new Ne(e);
}
var ct = tt.getInstance(), gr = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.startSpan = function(t, r, n) {
      n === void 0 && (n = ct.active());
      var i = !!(r != null && r.root);
      if (i)
        return new Ne();
      var a = n && Pr(n);
      return Li(a) && rt(a) ? new Ne(a) : new Ne();
    }, e.prototype.startActiveSpan = function(t, r, n, i) {
      var a, o, s;
      if (!(arguments.length < 2)) {
        arguments.length === 2 ? s = r : arguments.length === 3 ? (a = r, s = n) : (a = r, o = n, s = i);
        var u = o != null ? o : ct.active(), _ = this.startSpan(t, a, u), c = kt(u, _);
        return ct.with(c, s, void 0, _);
      }
    }, e;
  }()
);
function Li(e) {
  return typeof e == "object" && typeof e.spanId == "string" && typeof e.traceId == "string" && typeof e.traceFlags == "number";
}
var bi = new gr(), Di = (
  /** @class */
  function() {
    function e(t, r, n, i) {
      this._provider = t, this.name = r, this.version = n, this.options = i;
    }
    return e.prototype.startSpan = function(t, r, n) {
      return this._getTracer().startSpan(t, r, n);
    }, e.prototype.startActiveSpan = function(t, r, n, i) {
      var a = this._getTracer();
      return Reflect.apply(a.startActiveSpan, a, arguments);
    }, e.prototype._getTracer = function() {
      if (this._delegate)
        return this._delegate;
      var t = this._provider.getDelegateTracer(this.name, this.version, this.options);
      return t ? (this._delegate = t, this._delegate) : bi;
    }, e;
  }()
), wi = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getTracer = function(t, r, n) {
      return new gr();
    }, e;
  }()
), xi = new wi(), qt = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getTracer = function(t, r, n) {
      var i;
      return (i = this.getDelegateTracer(t, r, n)) !== null && i !== void 0 ? i : new Di(this, t, r, n);
    }, e.prototype.getDelegate = function() {
      var t;
      return (t = this._delegate) !== null && t !== void 0 ? t : xi;
    }, e.prototype.setDelegate = function(t) {
      this._delegate = t;
    }, e.prototype.getDelegateTracer = function(t, r, n) {
      var i;
      return (i = this._delegate) === null || i === void 0 ? void 0 : i.getTracer(t, r, n);
    }, e;
  }()
), je;
(function(e) {
  e[e.NOT_RECORD = 0] = "NOT_RECORD", e[e.RECORD = 1] = "RECORD", e[e.RECORD_AND_SAMPLED = 2] = "RECORD_AND_SAMPLED";
})(je || (je = {}));
var Ie;
(function(e) {
  e[e.INTERNAL = 0] = "INTERNAL", e[e.SERVER = 1] = "SERVER", e[e.CLIENT = 2] = "CLIENT", e[e.PRODUCER = 3] = "PRODUCER", e[e.CONSUMER = 4] = "CONSUMER";
})(Ie || (Ie = {}));
var Pt;
(function(e) {
  e[e.UNSET = 0] = "UNSET", e[e.OK = 1] = "OK", e[e.ERROR = 2] = "ERROR";
})(Pt || (Pt = {}));
var O = tt.getInstance(), S = B.instance(), Ui = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getMeter = function(t, r, n) {
      return _i;
    }, e;
  }()
), Bi = new Ui(), dt = "metrics", Gi = (
  /** @class */
  function() {
    function e() {
    }
    return e.getInstance = function() {
      return this._instance || (this._instance = new e()), this._instance;
    }, e.prototype.setGlobalMeterProvider = function(t) {
      return Le(dt, t, B.instance());
    }, e.prototype.getMeterProvider = function() {
      return ie(dt) || Bi;
    }, e.prototype.getMeter = function(t, r, n) {
      return this.getMeterProvider().getMeter(t, r, n);
    }, e.prototype.disable = function() {
      be(dt, B.instance());
    }, e;
  }()
), Rr = Gi.getInstance(), ki = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.inject = function(t, r) {
    }, e.prototype.extract = function(t, r) {
      return t;
    }, e.prototype.fields = function() {
      return [];
    }, e;
  }()
), $t = wt("OpenTelemetry Baggage Key");
function Mr(e) {
  return e.getValue($t) || void 0;
}
function $i() {
  return Mr(tt.getInstance().active());
}
function Fi(e, t) {
  return e.setValue($t, t);
}
function Vi(e) {
  return e.deleteValue($t);
}
var Et = "propagation", Hi = new ki(), Yi = (
  /** @class */
  function() {
    function e() {
      this.createBaggage = Zn, this.getBaggage = Mr, this.getActiveBaggage = $i, this.setBaggage = Fi, this.deleteBaggage = Vi;
    }
    return e.getInstance = function() {
      return this._instance || (this._instance = new e()), this._instance;
    }, e.prototype.setGlobalPropagator = function(t) {
      return Le(Et, t, B.instance());
    }, e.prototype.inject = function(t, r, n) {
      return n === void 0 && (n = hi), this._getGlobalPropagator().inject(t, r, n);
    }, e.prototype.extract = function(t, r, n) {
      return n === void 0 && (n = Ti), this._getGlobalPropagator().extract(t, r, n);
    }, e.prototype.fields = function() {
      return this._getGlobalPropagator().fields();
    }, e.prototype.disable = function() {
      be(Et, B.instance());
    }, e.prototype._getGlobalPropagator = function() {
      return ie(Et) || Hi;
    }, e;
  }()
), b = Yi.getInstance(), ft = "trace", ji = (
  /** @class */
  function() {
    function e() {
      this._proxyTracerProvider = new qt(), this.wrapSpanContext = Ci, this.isSpanContextValid = rt, this.deleteSpan = yi, this.getSpan = Gt, this.getActiveSpan = Pi, this.getSpanContext = Pr, this.setSpan = kt, this.setSpanContext = gi;
    }
    return e.getInstance = function() {
      return this._instance || (this._instance = new e()), this._instance;
    }, e.prototype.setGlobalTracerProvider = function(t) {
      var r = Le(ft, this._proxyTracerProvider, B.instance());
      return r && this._proxyTracerProvider.setDelegate(t), r;
    }, e.prototype.getTracerProvider = function() {
      return ie(ft) || this._proxyTracerProvider;
    }, e.prototype.getTracer = function(t, r) {
      return this.getTracerProvider().getTracer(t, r);
    }, e.prototype.disable = function() {
      be(ft, B.instance()), this._proxyTracerProvider = new qt();
    }, e;
  }()
), P = ji.getInstance(), Ir = wt("OpenTelemetry SDK Context Key SUPPRESS_TRACING");
function Cr(e) {
  return e.setValue(Ir, !0);
}
function Ft(e) {
  return e.getValue(Ir) === !0;
}
var Xi = "=", yt = ";", Xe = ",", pt = "baggage", Wi = 180, Ki = 4096, qi = 8192, zi = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
};
function Ji(e) {
  return e.reduce(function(t, r) {
    var n = "" + t + (t !== "" ? Xe : "") + r;
    return n.length > qi ? t : n;
  }, "");
}
function Qi(e) {
  return e.getAllEntries().map(function(t) {
    var r = zi(t, 2), n = r[0], i = r[1], a = encodeURIComponent(n) + "=" + encodeURIComponent(i.value);
    return i.metadata !== void 0 && (a += yt + i.metadata.toString()), a;
  });
}
function Lr(e) {
  var t = e.split(yt);
  if (!(t.length <= 0)) {
    var r = t.shift();
    if (r) {
      var n = r.indexOf(Xi);
      if (!(n <= 0)) {
        var i = decodeURIComponent(r.substring(0, n).trim()), a = decodeURIComponent(r.substring(n + 1).trim()), o;
        return t.length > 0 && (o = ei(t.join(yt))), { key: i, value: a, metadata: o };
      }
    }
  }
}
function br(e) {
  return typeof e != "string" || e.length === 0 ? {} : e.split(Xe).map(function(t) {
    return Lr(t);
  }).filter(function(t) {
    return t !== void 0 && t.value.length > 0;
  }).reduce(function(t, r) {
    return t[r.key] = r.value, t;
  }, {});
}
var Dr = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.inject = function(t, r, n) {
      var i = b.getBaggage(t);
      if (!(!i || Ft(t))) {
        var a = Qi(i).filter(function(s) {
          return s.length <= Ki;
        }).slice(0, Wi), o = Ji(a);
        o.length > 0 && n.set(r, pt, o);
      }
    }, e.prototype.extract = function(t, r, n) {
      var i = n.get(r, pt), a = Array.isArray(i) ? i.join(Xe) : i;
      if (!a)
        return t;
      var o = {};
      if (a.length === 0)
        return t;
      var s = a.split(Xe);
      return s.forEach(function(u) {
        var _ = Lr(u);
        if (_) {
          var c = { value: _.value };
          _.metadata && (c.metadata = _.metadata), o[_.key] = c;
        }
      }), Object.entries(o).length === 0 ? t : b.setBaggage(t, b.createBaggage(o));
    }, e.prototype.fields = function() {
      return [pt];
    }, e;
  }()
), wr = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r)
    return r.call(e);
  if (e && typeof e.length == "number")
    return {
      next: function() {
        return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
      }
    };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Zi = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
};
function $e(e) {
  var t, r, n = {};
  if (typeof e != "object" || e == null)
    return n;
  try {
    for (var i = wr(Object.entries(e)), a = i.next(); !a.done; a = i.next()) {
      var o = Zi(a.value, 2), s = o[0], u = o[1];
      if (!ea(s)) {
        S.warn("Invalid attribute key: " + s);
        continue;
      }
      if (!xr(u)) {
        S.warn("Invalid attribute value set for key: " + s);
        continue;
      }
      Array.isArray(u) ? n[s] = u.slice() : n[s] = u;
    }
  } catch (_) {
    t = { error: _ };
  } finally {
    try {
      a && !a.done && (r = i.return) && r.call(i);
    } finally {
      if (t)
        throw t.error;
    }
  }
  return n;
}
function ea(e) {
  return typeof e == "string" && e.length > 0;
}
function xr(e) {
  return e == null ? !0 : Array.isArray(e) ? ta(e) : Ur(e);
}
function ta(e) {
  var t, r, n;
  try {
    for (var i = wr(e), a = i.next(); !a.done; a = i.next()) {
      var o = a.value;
      if (o != null) {
        if (!n) {
          if (Ur(o)) {
            n = typeof o;
            continue;
          }
          return !1;
        }
        if (typeof o !== n)
          return !1;
      }
    }
  } catch (s) {
    t = { error: s };
  } finally {
    try {
      a && !a.done && (r = i.return) && r.call(i);
    } finally {
      if (t)
        throw t.error;
    }
  }
  return !0;
}
function Ur(e) {
  switch (typeof e) {
    case "number":
    case "boolean":
    case "string":
      return !0;
  }
  return !1;
}
function ra() {
  return function(e) {
    S.error(na(e));
  };
}
function na(e) {
  return typeof e == "string" ? e : JSON.stringify(ia(e));
}
function ia(e) {
  for (var t = {}, r = e; r !== null; )
    Object.getOwnPropertyNames(r).forEach(function(n) {
      if (!t[n]) {
        var i = r[n];
        i && (t[n] = String(i));
      }
    }), r = Object.getPrototypeOf(r);
  return t;
}
var aa = ra();
function ne(e) {
  try {
    aa(e);
  } catch (t) {
  }
}
var U;
(function(e) {
  e.AlwaysOff = "always_off", e.AlwaysOn = "always_on", e.ParentBasedAlwaysOff = "parentbased_always_off", e.ParentBasedAlwaysOn = "parentbased_always_on", e.ParentBasedTraceIdRatio = "parentbased_traceidratio", e.TraceIdRatio = "traceidratio";
})(U || (U = {}));
var Pe = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {}, oa = ",", sa = ["OTEL_SDK_DISABLED"];
function ua(e) {
  return sa.indexOf(e) > -1;
}
var _a = [
  "OTEL_BSP_EXPORT_TIMEOUT",
  "OTEL_BSP_MAX_EXPORT_BATCH_SIZE",
  "OTEL_BSP_MAX_QUEUE_SIZE",
  "OTEL_BSP_SCHEDULE_DELAY",
  "OTEL_BLRP_EXPORT_TIMEOUT",
  "OTEL_BLRP_MAX_EXPORT_BATCH_SIZE",
  "OTEL_BLRP_MAX_QUEUE_SIZE",
  "OTEL_BLRP_SCHEDULE_DELAY",
  "OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT",
  "OTEL_ATTRIBUTE_COUNT_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT",
  "OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT",
  "OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT",
  "OTEL_SPAN_EVENT_COUNT_LIMIT",
  "OTEL_SPAN_LINK_COUNT_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT",
  "OTEL_EXPORTER_OTLP_TIMEOUT",
  "OTEL_EXPORTER_OTLP_TRACES_TIMEOUT",
  "OTEL_EXPORTER_OTLP_METRICS_TIMEOUT",
  "OTEL_EXPORTER_OTLP_LOGS_TIMEOUT",
  "OTEL_EXPORTER_JAEGER_AGENT_PORT"
];
function ca(e) {
  return _a.indexOf(e) > -1;
}
var da = [
  "OTEL_NO_PATCH_MODULES",
  "OTEL_PROPAGATORS"
];
function Ea(e) {
  return da.indexOf(e) > -1;
}
var Fe = 1 / 0, Ve = 128, fa = 128, pa = 128, Br = {
  OTEL_SDK_DISABLED: !1,
  CONTAINER_NAME: "",
  ECS_CONTAINER_METADATA_URI_V4: "",
  ECS_CONTAINER_METADATA_URI: "",
  HOSTNAME: "",
  KUBERNETES_SERVICE_HOST: "",
  NAMESPACE: "",
  OTEL_BSP_EXPORT_TIMEOUT: 3e4,
  OTEL_BSP_MAX_EXPORT_BATCH_SIZE: 512,
  OTEL_BSP_MAX_QUEUE_SIZE: 2048,
  OTEL_BSP_SCHEDULE_DELAY: 5e3,
  OTEL_BLRP_EXPORT_TIMEOUT: 3e4,
  OTEL_BLRP_MAX_EXPORT_BATCH_SIZE: 512,
  OTEL_BLRP_MAX_QUEUE_SIZE: 2048,
  OTEL_BLRP_SCHEDULE_DELAY: 5e3,
  OTEL_EXPORTER_JAEGER_AGENT_HOST: "",
  OTEL_EXPORTER_JAEGER_AGENT_PORT: 6832,
  OTEL_EXPORTER_JAEGER_ENDPOINT: "",
  OTEL_EXPORTER_JAEGER_PASSWORD: "",
  OTEL_EXPORTER_JAEGER_USER: "",
  OTEL_EXPORTER_OTLP_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_TRACES_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_METRICS_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_LOGS_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_HEADERS: "",
  OTEL_EXPORTER_OTLP_TRACES_HEADERS: "",
  OTEL_EXPORTER_OTLP_METRICS_HEADERS: "",
  OTEL_EXPORTER_OTLP_LOGS_HEADERS: "",
  OTEL_EXPORTER_OTLP_TIMEOUT: 1e4,
  OTEL_EXPORTER_OTLP_TRACES_TIMEOUT: 1e4,
  OTEL_EXPORTER_OTLP_METRICS_TIMEOUT: 1e4,
  OTEL_EXPORTER_OTLP_LOGS_TIMEOUT: 1e4,
  OTEL_EXPORTER_ZIPKIN_ENDPOINT: "http://localhost:9411/api/v2/spans",
  OTEL_LOG_LEVEL: y.INFO,
  OTEL_NO_PATCH_MODULES: [],
  OTEL_PROPAGATORS: ["tracecontext", "baggage"],
  OTEL_RESOURCE_ATTRIBUTES: "",
  OTEL_SERVICE_NAME: "",
  OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT: Fe,
  OTEL_ATTRIBUTE_COUNT_LIMIT: Ve,
  OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT: Fe,
  OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT: Ve,
  OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT: Fe,
  OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT: Ve,
  OTEL_SPAN_EVENT_COUNT_LIMIT: 128,
  OTEL_SPAN_LINK_COUNT_LIMIT: 128,
  OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT: fa,
  OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT: pa,
  OTEL_TRACES_EXPORTER: "",
  OTEL_TRACES_SAMPLER: U.ParentBasedAlwaysOn,
  OTEL_TRACES_SAMPLER_ARG: "",
  OTEL_LOGS_EXPORTER: "",
  OTEL_EXPORTER_OTLP_INSECURE: "",
  OTEL_EXPORTER_OTLP_TRACES_INSECURE: "",
  OTEL_EXPORTER_OTLP_METRICS_INSECURE: "",
  OTEL_EXPORTER_OTLP_LOGS_INSECURE: "",
  OTEL_EXPORTER_OTLP_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_TRACES_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_METRICS_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_LOGS_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_TRACES_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_METRICS_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_LOGS_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE: "cumulative"
};
function la(e, t, r) {
  if (typeof r[e] != "undefined") {
    var n = String(r[e]);
    t[e] = n.toLowerCase() === "true";
  }
}
function Ta(e, t, r, n, i) {
  if (n === void 0 && (n = -1 / 0), i === void 0 && (i = 1 / 0), typeof r[e] != "undefined") {
    var a = Number(r[e]);
    isNaN(a) || (a < n ? t[e] = n : a > i ? t[e] = i : t[e] = a);
  }
}
function ha(e, t, r, n) {
  n === void 0 && (n = oa);
  var i = r[e];
  typeof i == "string" && (t[e] = i.split(n).map(function(a) {
    return a.trim();
  }));
}
var va = {
  ALL: y.ALL,
  VERBOSE: y.VERBOSE,
  DEBUG: y.DEBUG,
  INFO: y.INFO,
  WARN: y.WARN,
  ERROR: y.ERROR,
  NONE: y.NONE
};
function Sa(e, t, r) {
  var n = r[e];
  if (typeof n == "string") {
    var i = va[n.toUpperCase()];
    i != null && (t[e] = i);
  }
}
function gt(e) {
  var t = {};
  for (var r in Br) {
    var n = r;
    switch (n) {
      case "OTEL_LOG_LEVEL":
        Sa(n, t, e);
        break;
      default:
        if (ua(n))
          la(n, t, e);
        else if (ca(n))
          Ta(n, t, e);
        else if (Ea(n))
          ha(n, t, e);
        else {
          var i = e[n];
          typeof i != "undefined" && i !== null && (t[n] = String(i));
        }
    }
  }
  return t;
}
function Aa() {
  return typeof process != "undefined" && process && process.env ? gt(process.env) : gt(Pe);
}
function g() {
  var e = gt(Pe);
  return Object.assign({}, Br, e);
}
function zt(e) {
  return e >= 48 && e <= 57 ? e - 48 : e >= 97 && e <= 102 ? e - 87 : e - 55;
}
function Vt(e) {
  for (var t = new Uint8Array(e.length / 2), r = 0, n = 0; n < e.length; n += 2) {
    var i = zt(e.charCodeAt(n)), a = zt(e.charCodeAt(n + 1));
    t[r++] = i << 4 | a;
  }
  return t;
}
var D = performance, Oa = "1.22.0";
// @__NO_SIDE_EFFECTS__
function Gr(e) {
  for (var t = {}, r = e.length, n = 0; n < r; n++) {
    var i = e[n];
    i && (t[String(i).toUpperCase().replace(/[-.]/g, "_")] = i);
  }
  return t;
}
var ma = "http.url", Na = "http.user_agent", lt = ma, Pa = Na, ya = "cloud.provider", ga = "cloud.account.id", Ra = "cloud.region", Ma = "cloud.availability_zone", Ia = "cloud.platform", Ca = "aws.ecs.container.arn", La = "aws.ecs.cluster.arn", ba = "aws.ecs.launchtype", Da = "aws.ecs.task.arn", wa = "aws.ecs.task.family", xa = "aws.ecs.task.revision", Ua = "aws.eks.cluster.arn", Ba = "aws.log.group.names", Ga = "aws.log.group.arns", ka = "aws.log.stream.names", $a = "aws.log.stream.arns", Fa = "container.name", Va = "container.id", Ha = "container.runtime", Ya = "container.image.name", ja = "container.image.tag", Xa = "deployment.environment", Wa = "device.id", Ka = "device.model.identifier", qa = "device.model.name", za = "faas.name", Ja = "faas.id", Qa = "faas.version", Za = "faas.instance", eo = "faas.max_memory", to = "host.id", ro = "host.name", no = "host.type", io = "host.arch", ao = "host.image.name", oo = "host.image.id", so = "host.image.version", uo = "k8s.cluster.name", _o = "k8s.node.name", co = "k8s.node.uid", Eo = "k8s.namespace.name", fo = "k8s.pod.uid", po = "k8s.pod.name", lo = "k8s.container.name", To = "k8s.replicaset.uid", ho = "k8s.replicaset.name", vo = "k8s.deployment.uid", So = "k8s.deployment.name", Ao = "k8s.statefulset.uid", Oo = "k8s.statefulset.name", mo = "k8s.daemonset.uid", No = "k8s.daemonset.name", Po = "k8s.job.uid", yo = "k8s.job.name", go = "k8s.cronjob.uid", Ro = "k8s.cronjob.name", Mo = "os.type", Io = "os.description", Co = "os.name", Lo = "os.version", bo = "process.pid", Do = "process.executable.name", wo = "process.executable.path", xo = "process.command", Uo = "process.command_line", Bo = "process.command_args", Go = "process.owner", ko = "process.runtime.name", $o = "process.runtime.version", Fo = "process.runtime.description", Vo = "service.name", Ho = "service.namespace", Yo = "service.instance.id", jo = "service.version", Xo = "telemetry.sdk.name", Wo = "telemetry.sdk.language", Ko = "telemetry.sdk.version", qo = "telemetry.auto.version", zo = "webengine.name", Jo = "webengine.version", Qo = "webengine.description", x = /* @__PURE__ */ Gr([
  ya,
  ga,
  Ra,
  Ma,
  Ia,
  Ca,
  La,
  ba,
  Da,
  wa,
  xa,
  Ua,
  Ba,
  Ga,
  ka,
  $a,
  Fa,
  Va,
  Ha,
  Ya,
  ja,
  Xa,
  Wa,
  Ka,
  qa,
  za,
  Ja,
  Qa,
  Za,
  eo,
  to,
  ro,
  no,
  io,
  ao,
  oo,
  so,
  uo,
  _o,
  co,
  Eo,
  fo,
  po,
  lo,
  To,
  ho,
  vo,
  So,
  Ao,
  Oo,
  mo,
  No,
  Po,
  yo,
  go,
  Ro,
  Mo,
  Io,
  Co,
  Lo,
  bo,
  Do,
  wo,
  xo,
  Uo,
  Bo,
  Go,
  ko,
  $o,
  Fo,
  Vo,
  Ho,
  Yo,
  jo,
  Xo,
  Wo,
  Ko,
  qo,
  zo,
  Jo,
  Qo
]), Zo = "cpp", es = "dotnet", ts = "erlang", rs = "go", ns = "java", is = "nodejs", as = "php", os = "python", ss = "ruby", us = "webjs", _s = /* @__PURE__ */ Gr([
  Zo,
  es,
  ts,
  rs,
  ns,
  is,
  as,
  os,
  ss,
  us
]), oe, Tt = (oe = {}, oe[x.TELEMETRY_SDK_NAME] = "opentelemetry", oe[x.PROCESS_RUNTIME_NAME] = "browser", oe[x.TELEMETRY_SDK_LANGUAGE] = _s.WEBJS, oe[x.TELEMETRY_SDK_VERSION] = Oa, oe), cs = 9, ds = 6, Es = Math.pow(10, ds), We = Math.pow(10, cs);
function j(e) {
  var t = e / 1e3, r = Math.trunc(t), n = Math.round(e % 1e3 * Es);
  return [r, n];
}
function Ht() {
  var e = D.timeOrigin;
  if (typeof e != "number") {
    var t = D;
    e = t.timing && t.timing.fetchStart;
  }
  return e;
}
function Ee(e) {
  var t = j(Ht()), r = j(typeof e == "number" ? e : D.now());
  return kr(t, r);
}
function ye(e) {
  if (Yt(e))
    return e;
  if (typeof e == "number")
    return e < Ht() ? Ee(e) : j(e);
  if (e instanceof Date)
    return j(e.getTime());
  throw TypeError("Invalid input type");
}
function fs(e, t) {
  var r = t[0] - e[0], n = t[1] - e[1];
  return n < 0 && (r -= 1, n += We), [r, n];
}
function X(e) {
  return e[0] * We + e[1];
}
function Jt(e) {
  return e[0] * 1e6 + e[1] / 1e3;
}
function Yt(e) {
  return Array.isArray(e) && e.length === 2 && typeof e[0] == "number" && typeof e[1] == "number";
}
function Qt(e) {
  return Yt(e) || typeof e == "number" || e instanceof Date;
}
function kr(e, t) {
  var r = [e[0] + t[0], e[1] + t[1]];
  return r[1] >= We && (r[1] -= We, r[0] += 1), r;
}
var W;
(function(e) {
  e[e.SUCCESS = 0] = "SUCCESS", e[e.FAILED = 1] = "FAILED";
})(W || (W = {}));
var ps = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r)
    return r.call(e);
  if (e && typeof e.length == "number")
    return {
      next: function() {
        return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
      }
    };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, $r = (
  /** @class */
  function() {
    function e(t) {
      t === void 0 && (t = {});
      var r;
      this._propagators = (r = t.propagators) !== null && r !== void 0 ? r : [], this._fields = Array.from(new Set(this._propagators.map(function(n) {
        return typeof n.fields == "function" ? n.fields() : [];
      }).reduce(function(n, i) {
        return n.concat(i);
      }, [])));
    }
    return e.prototype.inject = function(t, r, n) {
      var i, a;
      try {
        for (var o = ps(this._propagators), s = o.next(); !s.done; s = o.next()) {
          var u = s.value;
          try {
            u.inject(t, r, n);
          } catch (_) {
            S.warn("Failed to inject with " + u.constructor.name + ". Err: " + _.message);
          }
        }
      } catch (_) {
        i = { error: _ };
      } finally {
        try {
          s && !s.done && (a = o.return) && a.call(o);
        } finally {
          if (i)
            throw i.error;
        }
      }
    }, e.prototype.extract = function(t, r, n) {
      return this._propagators.reduce(function(i, a) {
        try {
          return a.extract(i, r, n);
        } catch (o) {
          S.warn("Failed to inject with " + a.constructor.name + ". Err: " + o.message);
        }
        return i;
      }, t);
    }, e.prototype.fields = function() {
      return this._fields.slice();
    }, e;
  }()
), Rt = "[_0-9a-z-*/]", ls = "[a-z]" + Rt + "{0,255}", Ts = "[a-z0-9]" + Rt + "{0,240}@[a-z]" + Rt + "{0,13}", hs = new RegExp("^(?:" + ls + "|" + Ts + ")$"), vs = /^[ -~]{0,255}[!-~]$/, Ss = /,|=/;
function As(e) {
  return hs.test(e);
}
function Os(e) {
  return vs.test(e) && !Ss.test(e);
}
var Zt = 32, ms = 512, er = ",", tr = "=", Ns = (
  /** @class */
  function() {
    function e(t) {
      this._internalState = /* @__PURE__ */ new Map(), t && this._parse(t);
    }
    return e.prototype.set = function(t, r) {
      var n = this._clone();
      return n._internalState.has(t) && n._internalState.delete(t), n._internalState.set(t, r), n;
    }, e.prototype.unset = function(t) {
      var r = this._clone();
      return r._internalState.delete(t), r;
    }, e.prototype.get = function(t) {
      return this._internalState.get(t);
    }, e.prototype.serialize = function() {
      var t = this;
      return this._keys().reduce(function(r, n) {
        return r.push(n + tr + t.get(n)), r;
      }, []).join(er);
    }, e.prototype._parse = function(t) {
      t.length > ms || (this._internalState = t.split(er).reverse().reduce(function(r, n) {
        var i = n.trim(), a = i.indexOf(tr);
        if (a !== -1) {
          var o = i.slice(0, a), s = i.slice(a + 1, n.length);
          As(o) && Os(s) && r.set(o, s);
        }
        return r;
      }, /* @__PURE__ */ new Map()), this._internalState.size > Zt && (this._internalState = new Map(Array.from(this._internalState.entries()).reverse().slice(0, Zt))));
    }, e.prototype._keys = function() {
      return Array.from(this._internalState.keys()).reverse();
    }, e.prototype._clone = function() {
      var t = new e();
      return t._internalState = new Map(this._internalState), t;
    }, e;
  }()
), He = "traceparent", ht = "tracestate", Ps = "00", ys = "(?!ff)[\\da-f]{2}", gs = "(?![0]{32})[\\da-f]{32}", Rs = "(?![0]{16})[\\da-f]{16}", Ms = "[\\da-f]{2}", Is = new RegExp("^\\s?(" + ys + ")-(" + gs + ")-(" + Rs + ")-(" + Ms + ")(-.*)?\\s?$");
function Cs(e) {
  var t = Is.exec(e);
  return !t || t[1] === "00" && t[5] ? null : {
    traceId: t[2],
    spanId: t[3],
    traceFlags: parseInt(t[4], 16)
  };
}
var Fr = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.inject = function(t, r, n) {
      var i = P.getSpanContext(t);
      if (!(!i || Ft(t) || !rt(i))) {
        var a = Ps + "-" + i.traceId + "-" + i.spanId + "-0" + Number(i.traceFlags || G.NONE).toString(16);
        n.set(r, He, a), i.traceState && n.set(r, ht, i.traceState.serialize());
      }
    }, e.prototype.extract = function(t, r, n) {
      var i = n.get(r, He);
      if (!i)
        return t;
      var a = Array.isArray(i) ? i[0] : i;
      if (typeof a != "string")
        return t;
      var o = Cs(a);
      if (!o)
        return t;
      o.isRemote = !0;
      var s = n.get(r, ht);
      if (s) {
        var u = Array.isArray(s) ? s.join(",") : s;
        o.traceState = new Ns(typeof u == "string" ? u : void 0);
      }
      return P.setSpanContext(t, o);
    }, e.prototype.fields = function() {
      return [He, ht];
    }, e;
  }()
), Ls = "[object Object]", bs = "[object Null]", Ds = "[object Undefined]", ws = Function.prototype, Vr = ws.toString, xs = Vr.call(Object), Us = Bs(Object.getPrototypeOf, Object), Hr = Object.prototype, Yr = Hr.hasOwnProperty, Z = Symbol ? Symbol.toStringTag : void 0, jr = Hr.toString;
function Bs(e, t) {
  return function(r) {
    return e(t(r));
  };
}
function rr(e) {
  if (!Gs(e) || ks(e) !== Ls)
    return !1;
  var t = Us(e);
  if (t === null)
    return !0;
  var r = Yr.call(t, "constructor") && t.constructor;
  return typeof r == "function" && r instanceof r && Vr.call(r) === xs;
}
function Gs(e) {
  return e != null && typeof e == "object";
}
function ks(e) {
  return e == null ? e === void 0 ? Ds : bs : Z && Z in Object(e) ? $s(e) : Fs(e);
}
function $s(e) {
  var t = Yr.call(e, Z), r = e[Z], n = !1;
  try {
    e[Z] = void 0, n = !0;
  } catch (a) {
  }
  var i = jr.call(e);
  return n && (t ? e[Z] = r : delete e[Z]), i;
}
function Fs(e) {
  return jr.call(e);
}
var Vs = 20;
function Hs() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e[t] = arguments[t];
  for (var r = e.shift(), n = /* @__PURE__ */ new WeakMap(); e.length > 0; )
    r = Xr(r, e.shift(), 0, n);
  return r;
}
function vt(e) {
  return Ke(e) ? e.slice() : e;
}
function Xr(e, t, r, n) {
  r === void 0 && (r = 0);
  var i;
  if (!(r > Vs)) {
    if (r++, Ye(e) || Ye(t) || Wr(t))
      i = vt(t);
    else if (Ke(e)) {
      if (i = e.slice(), Ke(t))
        for (var a = 0, o = t.length; a < o; a++)
          i.push(vt(t[a]));
      else if (ve(t))
        for (var s = Object.keys(t), a = 0, o = s.length; a < o; a++) {
          var u = s[a];
          i[u] = vt(t[u]);
        }
    } else if (ve(e))
      if (ve(t)) {
        if (!Ys(e, t))
          return t;
        i = Object.assign({}, e);
        for (var s = Object.keys(t), a = 0, o = s.length; a < o; a++) {
          var u = s[a], _ = t[u];
          if (Ye(_))
            typeof _ == "undefined" ? delete i[u] : i[u] = _;
          else {
            var c = i[u], E = _;
            if (nr(e, u, n) || nr(t, u, n))
              delete i[u];
            else {
              if (ve(c) && ve(E)) {
                var f = n.get(c) || [], h = n.get(E) || [];
                f.push({ obj: e, key: u }), h.push({ obj: t, key: u }), n.set(c, f), n.set(E, h);
              }
              i[u] = Xr(i[u], _, r, n);
            }
          }
        }
      } else
        i = t;
    return i;
  }
}
function nr(e, t, r) {
  for (var n = r.get(e[t]) || [], i = 0, a = n.length; i < a; i++) {
    var o = n[i];
    if (o.key === t && o.obj === e)
      return !0;
  }
  return !1;
}
function Ke(e) {
  return Array.isArray(e);
}
function Wr(e) {
  return typeof e == "function";
}
function ve(e) {
  return !Ye(e) && !Ke(e) && !Wr(e) && typeof e == "object";
}
function Ye(e) {
  return typeof e == "string" || typeof e == "number" || typeof e == "boolean" || typeof e == "undefined" || e instanceof Date || e instanceof RegExp || e === null;
}
function Ys(e, t) {
  return !(!rr(e) || !rr(t));
}
var js = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r)
    return r.call(e);
  if (e && typeof e.length == "number")
    return {
      next: function() {
        return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
      }
    };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
function Kr(e, t) {
  return typeof t == "string" ? e === t : !!e.match(t);
}
function qr(e, t) {
  var r, n;
  if (!t)
    return !1;
  try {
    for (var i = js(t), a = i.next(); !a.done; a = i.next()) {
      var o = a.value;
      if (Kr(e, o))
        return !0;
    }
  } catch (s) {
    r = { error: s };
  } finally {
    try {
      a && !a.done && (n = i.return) && n.call(i);
    } finally {
      if (r)
        throw r.error;
    }
  }
  return !1;
}
var Xs = (
  /** @class */
  function() {
    function e() {
      var t = this;
      this._promise = new Promise(function(r, n) {
        t._resolve = r, t._reject = n;
      });
    }
    return Object.defineProperty(e.prototype, "promise", {
      get: function() {
        return this._promise;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.resolve = function(t) {
      this._resolve(t);
    }, e.prototype.reject = function(t) {
      this._reject(t);
    }, e;
  }()
), Ws = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, Ks = function(e, t, r) {
  if (r || arguments.length === 2)
    for (var n = 0, i = t.length, a; n < i; n++)
      (a || !(n in t)) && (a || (a = Array.prototype.slice.call(t, 0, n)), a[n] = t[n]);
  return e.concat(a || Array.prototype.slice.call(t));
}, jt = (
  /** @class */
  function() {
    function e(t, r) {
      this._callback = t, this._that = r, this._isCalled = !1, this._deferred = new Xs();
    }
    return Object.defineProperty(e.prototype, "isCalled", {
      get: function() {
        return this._isCalled;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "promise", {
      get: function() {
        return this._deferred.promise;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.call = function() {
      for (var t, r = this, n = [], i = 0; i < arguments.length; i++)
        n[i] = arguments[i];
      if (!this._isCalled) {
        this._isCalled = !0;
        try {
          Promise.resolve((t = this._callback).call.apply(t, Ks([this._that], Ws(n), !1))).then(function(a) {
            return r._deferred.resolve(a);
          }, function(a) {
            return r._deferred.reject(a);
          });
        } catch (a) {
          this._deferred.reject(a);
        }
      }
      return this._deferred.promise;
    }, e;
  }()
);
function qs(e, t) {
  return new Promise(function(r) {
    O.with(Cr(O.active()), function() {
      e.export(t, function(n) {
        r(n);
      });
    });
  });
}
var zs = {
  _export: qs
};
// @__NO_SIDE_EFFECTS__
function Js(e) {
  for (var t = {}, r = e.length, n = 0; n < r; n++) {
    var i = e[n];
    i && (t[String(i).toUpperCase().replace(/[-.]/g, "_")] = i);
  }
  return t;
}
var Qs = "aws.lambda.invoked_arn", Zs = "db.system", eu = "db.connection_string", tu = "db.user", ru = "db.jdbc.driver_classname", nu = "db.name", iu = "db.statement", au = "db.operation", ou = "db.mssql.instance_name", su = "db.cassandra.keyspace", uu = "db.cassandra.page_size", _u = "db.cassandra.consistency_level", cu = "db.cassandra.table", du = "db.cassandra.idempotence", Eu = "db.cassandra.speculative_execution_count", fu = "db.cassandra.coordinator.id", pu = "db.cassandra.coordinator.dc", lu = "db.hbase.namespace", Tu = "db.redis.database_index", hu = "db.mongodb.collection", vu = "db.sql.table", Su = "exception.type", Au = "exception.message", Ou = "exception.stacktrace", mu = "exception.escaped", Nu = "faas.trigger", Pu = "faas.execution", yu = "faas.document.collection", gu = "faas.document.operation", Ru = "faas.document.time", Mu = "faas.document.name", Iu = "faas.time", Cu = "faas.cron", Lu = "faas.coldstart", bu = "faas.invoked_name", Du = "faas.invoked_provider", wu = "faas.invoked_region", xu = "net.transport", Uu = "net.peer.ip", Bu = "net.peer.port", Gu = "net.peer.name", ku = "net.host.ip", $u = "net.host.port", Fu = "net.host.name", Vu = "net.host.connection.type", Hu = "net.host.connection.subtype", Yu = "net.host.carrier.name", ju = "net.host.carrier.mcc", Xu = "net.host.carrier.mnc", Wu = "net.host.carrier.icc", Ku = "peer.service", qu = "enduser.id", zu = "enduser.role", Ju = "enduser.scope", Qu = "thread.id", Zu = "thread.name", e_ = "code.function", t_ = "code.namespace", r_ = "code.filepath", n_ = "code.lineno", i_ = "http.method", a_ = "http.url", o_ = "http.target", s_ = "http.host", u_ = "http.scheme", __ = "http.status_code", c_ = "http.flavor", d_ = "http.user_agent", E_ = "http.request_content_length", f_ = "http.request_content_length_uncompressed", p_ = "http.response_content_length", l_ = "http.response_content_length_uncompressed", T_ = "http.server_name", h_ = "http.route", v_ = "http.client_ip", S_ = "aws.dynamodb.table_names", A_ = "aws.dynamodb.consumed_capacity", O_ = "aws.dynamodb.item_collection_metrics", m_ = "aws.dynamodb.provisioned_read_capacity", N_ = "aws.dynamodb.provisioned_write_capacity", P_ = "aws.dynamodb.consistent_read", y_ = "aws.dynamodb.projection", g_ = "aws.dynamodb.limit", R_ = "aws.dynamodb.attributes_to_get", M_ = "aws.dynamodb.index_name", I_ = "aws.dynamodb.select", C_ = "aws.dynamodb.global_secondary_indexes", L_ = "aws.dynamodb.local_secondary_indexes", b_ = "aws.dynamodb.exclusive_start_table", D_ = "aws.dynamodb.table_count", w_ = "aws.dynamodb.scan_forward", x_ = "aws.dynamodb.segment", U_ = "aws.dynamodb.total_segments", B_ = "aws.dynamodb.count", G_ = "aws.dynamodb.scanned_count", k_ = "aws.dynamodb.attribute_definitions", $_ = "aws.dynamodb.global_secondary_index_updates", F_ = "messaging.system", V_ = "messaging.destination", H_ = "messaging.destination_kind", Y_ = "messaging.temp_destination", j_ = "messaging.protocol", X_ = "messaging.protocol_version", W_ = "messaging.url", K_ = "messaging.message_id", q_ = "messaging.conversation_id", z_ = "messaging.message_payload_size_bytes", J_ = "messaging.message_payload_compressed_size_bytes", Q_ = "messaging.operation", Z_ = "messaging.consumer_id", ec = "messaging.rabbitmq.routing_key", tc = "messaging.kafka.message_key", rc = "messaging.kafka.consumer_group", nc = "messaging.kafka.client_id", ic = "messaging.kafka.partition", ac = "messaging.kafka.tombstone", oc = "rpc.system", sc = "rpc.service", uc = "rpc.method", _c = "rpc.grpc.status_code", cc = "rpc.jsonrpc.version", dc = "rpc.jsonrpc.request_id", Ec = "rpc.jsonrpc.error_code", fc = "rpc.jsonrpc.error_message", pc = "message.type", lc = "message.id", Tc = "message.compressed_size", hc = "message.uncompressed_size", F = /* @__PURE__ */ Js([
  Qs,
  Zs,
  eu,
  tu,
  ru,
  nu,
  iu,
  au,
  ou,
  su,
  uu,
  _u,
  cu,
  du,
  Eu,
  fu,
  pu,
  lu,
  Tu,
  hu,
  vu,
  Su,
  Au,
  Ou,
  mu,
  Nu,
  Pu,
  yu,
  gu,
  Ru,
  Mu,
  Iu,
  Cu,
  Lu,
  bu,
  Du,
  wu,
  xu,
  Uu,
  Bu,
  Gu,
  ku,
  $u,
  Fu,
  Vu,
  Hu,
  Yu,
  ju,
  Xu,
  Wu,
  Ku,
  qu,
  zu,
  Ju,
  Qu,
  Zu,
  e_,
  t_,
  r_,
  n_,
  i_,
  a_,
  o_,
  s_,
  u_,
  __,
  c_,
  d_,
  E_,
  f_,
  p_,
  l_,
  T_,
  h_,
  v_,
  S_,
  A_,
  O_,
  m_,
  N_,
  P_,
  y_,
  g_,
  R_,
  M_,
  I_,
  C_,
  L_,
  b_,
  D_,
  w_,
  x_,
  U_,
  B_,
  G_,
  k_,
  $_,
  F_,
  V_,
  H_,
  Y_,
  j_,
  X_,
  W_,
  K_,
  q_,
  z_,
  J_,
  Q_,
  Z_,
  ec,
  tc,
  rc,
  nc,
  ic,
  ac,
  oc,
  sc,
  uc,
  _c,
  cc,
  dc,
  Ec,
  fc,
  pc,
  lc,
  Tc,
  hc
]), vc = "exception", Sc = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r)
    return r.call(e);
  if (e && typeof e.length == "number")
    return {
      next: function() {
        return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
      }
    };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Ac = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, Oc = (
  /** @class */
  function() {
    function e(t, r, n, i, a, o, s, u, _, c) {
      s === void 0 && (s = []), this.attributes = {}, this.links = [], this.events = [], this._droppedAttributesCount = 0, this._droppedEventsCount = 0, this._droppedLinksCount = 0, this.status = {
        code: Pt.UNSET
      }, this.endTime = [0, 0], this._ended = !1, this._duration = [-1, -1], this.name = n, this._spanContext = i, this.parentSpanId = o, this.kind = a, this.links = s;
      var E = Date.now();
      this._performanceStartTime = D.now(), this._performanceOffset = E - (this._performanceStartTime + Ht()), this._startTimeProvided = u != null, this.startTime = this._getTime(u != null ? u : E), this.resource = t.resource, this.instrumentationLibrary = t.instrumentationLibrary, this._spanLimits = t.getSpanLimits(), this._attributeValueLengthLimit = this._spanLimits.attributeValueLengthLimit || 0, c != null && this.setAttributes(c), this._spanProcessor = t.getActiveSpanProcessor(), this._spanProcessor.onStart(this, r);
    }
    return e.prototype.spanContext = function() {
      return this._spanContext;
    }, e.prototype.setAttribute = function(t, r) {
      return r == null || this._isSpanEnded() ? this : t.length === 0 ? (S.warn("Invalid attribute key: " + t), this) : xr(r) ? Object.keys(this.attributes).length >= this._spanLimits.attributeCountLimit && !Object.prototype.hasOwnProperty.call(this.attributes, t) ? (this._droppedAttributesCount++, this) : (this.attributes[t] = this._truncateToSize(r), this) : (S.warn("Invalid attribute value set for key: " + t), this);
    }, e.prototype.setAttributes = function(t) {
      var r, n;
      try {
        for (var i = Sc(Object.entries(t)), a = i.next(); !a.done; a = i.next()) {
          var o = Ac(a.value, 2), s = o[0], u = o[1];
          this.setAttribute(s, u);
        }
      } catch (_) {
        r = { error: _ };
      } finally {
        try {
          a && !a.done && (n = i.return) && n.call(i);
        } finally {
          if (r)
            throw r.error;
        }
      }
      return this;
    }, e.prototype.addEvent = function(t, r, n) {
      if (this._isSpanEnded())
        return this;
      if (this._spanLimits.eventCountLimit === 0)
        return S.warn("No events allowed."), this._droppedEventsCount++, this;
      this.events.length >= this._spanLimits.eventCountLimit && (this._droppedEventsCount === 0 && S.debug("Dropping extra events."), this.events.shift(), this._droppedEventsCount++), Qt(r) && (Qt(n) || (n = r), r = void 0);
      var i = $e(r);
      return this.events.push({
        name: t,
        attributes: i,
        time: this._getTime(n),
        droppedAttributesCount: 0
      }), this;
    }, e.prototype.setStatus = function(t) {
      return this._isSpanEnded() ? this : (this.status = t, this);
    }, e.prototype.updateName = function(t) {
      return this._isSpanEnded() ? this : (this.name = t, this);
    }, e.prototype.end = function(t) {
      if (this._isSpanEnded()) {
        S.error(this.name + " " + this._spanContext.traceId + "-" + this._spanContext.spanId + " - You can only call end() on a span once.");
        return;
      }
      this._ended = !0, this.endTime = this._getTime(t), this._duration = fs(this.startTime, this.endTime), this._duration[0] < 0 && (S.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.", this.startTime, this.endTime), this.endTime = this.startTime.slice(), this._duration = [0, 0]), this._droppedEventsCount > 0 && S.warn("Dropped " + this._droppedEventsCount + " events because eventCountLimit reached"), this._spanProcessor.onEnd(this);
    }, e.prototype._getTime = function(t) {
      if (typeof t == "number" && t < D.now())
        return Ee(t + this._performanceOffset);
      if (typeof t == "number")
        return j(t);
      if (t instanceof Date)
        return j(t.getTime());
      if (Yt(t))
        return t;
      if (this._startTimeProvided)
        return j(Date.now());
      var r = D.now() - this._performanceStartTime;
      return kr(this.startTime, j(r));
    }, e.prototype.isRecording = function() {
      return this._ended === !1;
    }, e.prototype.recordException = function(t, r) {
      var n = {};
      typeof t == "string" ? n[F.EXCEPTION_MESSAGE] = t : t && (t.code ? n[F.EXCEPTION_TYPE] = t.code.toString() : t.name && (n[F.EXCEPTION_TYPE] = t.name), t.message && (n[F.EXCEPTION_MESSAGE] = t.message), t.stack && (n[F.EXCEPTION_STACKTRACE] = t.stack)), n[F.EXCEPTION_TYPE] || n[F.EXCEPTION_MESSAGE] ? this.addEvent(vc, n, r) : S.warn("Failed to record an exception " + t);
    }, Object.defineProperty(e.prototype, "duration", {
      get: function() {
        return this._duration;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "ended", {
      get: function() {
        return this._ended;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "droppedAttributesCount", {
      get: function() {
        return this._droppedAttributesCount;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "droppedEventsCount", {
      get: function() {
        return this._droppedEventsCount;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "droppedLinksCount", {
      get: function() {
        return this._droppedLinksCount;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype._isSpanEnded = function() {
      return this._ended && S.warn("Can not execute the operation on ended Span {traceId: " + this._spanContext.traceId + ", spanId: " + this._spanContext.spanId + "}"), this._ended;
    }, e.prototype._truncateToLimitUtil = function(t, r) {
      return t.length <= r ? t : t.substr(0, r);
    }, e.prototype._truncateToSize = function(t) {
      var r = this, n = this._attributeValueLengthLimit;
      return n <= 0 ? (S.warn("Attribute value limit must be positive, got " + n), t) : typeof t == "string" ? this._truncateToLimitUtil(t, n) : Array.isArray(t) ? t.map(function(i) {
        return typeof i == "string" ? r._truncateToLimitUtil(i, n) : i;
      }) : t;
    }, e;
  }()
), fe;
(function(e) {
  e[e.NOT_RECORD = 0] = "NOT_RECORD", e[e.RECORD = 1] = "RECORD", e[e.RECORD_AND_SAMPLED = 2] = "RECORD_AND_SAMPLED";
})(fe || (fe = {}));
var qe = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.shouldSample = function() {
      return {
        decision: fe.NOT_RECORD
      };
    }, e.prototype.toString = function() {
      return "AlwaysOffSampler";
    }, e;
  }()
), de = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.shouldSample = function() {
      return {
        decision: fe.RECORD_AND_SAMPLED
      };
    }, e.prototype.toString = function() {
      return "AlwaysOnSampler";
    }, e;
  }()
), St = (
  /** @class */
  function() {
    function e(t) {
      var r, n, i, a;
      this._root = t.root, this._root || (ne(new Error("ParentBasedSampler must have a root sampler configured")), this._root = new de()), this._remoteParentSampled = (r = t.remoteParentSampled) !== null && r !== void 0 ? r : new de(), this._remoteParentNotSampled = (n = t.remoteParentNotSampled) !== null && n !== void 0 ? n : new qe(), this._localParentSampled = (i = t.localParentSampled) !== null && i !== void 0 ? i : new de(), this._localParentNotSampled = (a = t.localParentNotSampled) !== null && a !== void 0 ? a : new qe();
    }
    return e.prototype.shouldSample = function(t, r, n, i, a, o) {
      var s = P.getSpanContext(t);
      return !s || !rt(s) ? this._root.shouldSample(t, r, n, i, a, o) : s.isRemote ? s.traceFlags & G.SAMPLED ? this._remoteParentSampled.shouldSample(t, r, n, i, a, o) : this._remoteParentNotSampled.shouldSample(t, r, n, i, a, o) : s.traceFlags & G.SAMPLED ? this._localParentSampled.shouldSample(t, r, n, i, a, o) : this._localParentNotSampled.shouldSample(t, r, n, i, a, o);
    }, e.prototype.toString = function() {
      return "ParentBased{root=" + this._root.toString() + ", remoteParentSampled=" + this._remoteParentSampled.toString() + ", remoteParentNotSampled=" + this._remoteParentNotSampled.toString() + ", localParentSampled=" + this._localParentSampled.toString() + ", localParentNotSampled=" + this._localParentNotSampled.toString() + "}";
    }, e;
  }()
), ir = (
  /** @class */
  function() {
    function e(t) {
      t === void 0 && (t = 0), this._ratio = t, this._ratio = this._normalize(t), this._upperBound = Math.floor(this._ratio * 4294967295);
    }
    return e.prototype.shouldSample = function(t, r) {
      return {
        decision: yr(r) && this._accumulate(r) < this._upperBound ? fe.RECORD_AND_SAMPLED : fe.NOT_RECORD
      };
    }, e.prototype.toString = function() {
      return "TraceIdRatioBased{" + this._ratio + "}";
    }, e.prototype._normalize = function(t) {
      return typeof t != "number" || isNaN(t) ? 0 : t >= 1 ? 1 : t <= 0 ? 0 : t;
    }, e.prototype._accumulate = function(t) {
      for (var r = 0, n = 0; n < t.length / 8; n++) {
        var i = n * 8, a = parseInt(t.slice(i, i + 8), 16);
        r = (r ^ a) >>> 0;
      }
      return r;
    }, e;
  }()
), mc = g(), Nc = U.AlwaysOn, se = 1;
function zr() {
  return {
    sampler: Jr(mc),
    forceFlushTimeoutMillis: 3e4,
    generalLimits: {
      attributeValueLengthLimit: g().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,
      attributeCountLimit: g().OTEL_ATTRIBUTE_COUNT_LIMIT
    },
    spanLimits: {
      attributeValueLengthLimit: g().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,
      attributeCountLimit: g().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,
      linkCountLimit: g().OTEL_SPAN_LINK_COUNT_LIMIT,
      eventCountLimit: g().OTEL_SPAN_EVENT_COUNT_LIMIT,
      attributePerEventCountLimit: g().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,
      attributePerLinkCountLimit: g().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT
    }
  };
}
function Jr(e) {
  switch (e === void 0 && (e = g()), e.OTEL_TRACES_SAMPLER) {
    case U.AlwaysOn:
      return new de();
    case U.AlwaysOff:
      return new qe();
    case U.ParentBasedAlwaysOn:
      return new St({
        root: new de()
      });
    case U.ParentBasedAlwaysOff:
      return new St({
        root: new qe()
      });
    case U.TraceIdRatio:
      return new ir(ar(e));
    case U.ParentBasedTraceIdRatio:
      return new St({
        root: new ir(ar(e))
      });
    default:
      return S.error('OTEL_TRACES_SAMPLER value "' + e.OTEL_TRACES_SAMPLER + " invalid, defaulting to " + Nc + '".'), new de();
  }
}
function ar(e) {
  if (e.OTEL_TRACES_SAMPLER_ARG === void 0 || e.OTEL_TRACES_SAMPLER_ARG === "")
    return S.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to " + se + "."), se;
  var t = Number(e.OTEL_TRACES_SAMPLER_ARG);
  return isNaN(t) ? (S.error("OTEL_TRACES_SAMPLER_ARG=" + e.OTEL_TRACES_SAMPLER_ARG + " was given, but it is invalid, defaulting to " + se + "."), se) : t < 0 || t > 1 ? (S.error("OTEL_TRACES_SAMPLER_ARG=" + e.OTEL_TRACES_SAMPLER_ARG + " was given, but it is out of range ([0..1]), defaulting to " + se + "."), se) : t;
}
function Pc(e) {
  var t = {
    sampler: Jr()
  }, r = zr(), n = Object.assign({}, r, t, e);
  return n.generalLimits = Object.assign({}, r.generalLimits, e.generalLimits || {}), n.spanLimits = Object.assign({}, r.spanLimits, e.spanLimits || {}), n;
}
function yc(e) {
  var t, r, n, i, a, o, s, u, _, c, E, f, h = Object.assign({}, e.spanLimits), p = Aa();
  return h.attributeCountLimit = (o = (a = (i = (r = (t = e.spanLimits) === null || t === void 0 ? void 0 : t.attributeCountLimit) !== null && r !== void 0 ? r : (n = e.generalLimits) === null || n === void 0 ? void 0 : n.attributeCountLimit) !== null && i !== void 0 ? i : p.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT) !== null && a !== void 0 ? a : p.OTEL_ATTRIBUTE_COUNT_LIMIT) !== null && o !== void 0 ? o : Ve, h.attributeValueLengthLimit = (f = (E = (c = (u = (s = e.spanLimits) === null || s === void 0 ? void 0 : s.attributeValueLengthLimit) !== null && u !== void 0 ? u : (_ = e.generalLimits) === null || _ === void 0 ? void 0 : _.attributeValueLengthLimit) !== null && c !== void 0 ? c : p.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && E !== void 0 ? E : p.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && f !== void 0 ? f : Fe, Object.assign({}, e, { spanLimits: h });
}
var gc = (
  /** @class */
  function() {
    function e(t, r) {
      this._exporter = t, this._isExporting = !1, this._finishedSpans = [], this._droppedSpansCount = 0;
      var n = g();
      this._maxExportBatchSize = typeof (r == null ? void 0 : r.maxExportBatchSize) == "number" ? r.maxExportBatchSize : n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE, this._maxQueueSize = typeof (r == null ? void 0 : r.maxQueueSize) == "number" ? r.maxQueueSize : n.OTEL_BSP_MAX_QUEUE_SIZE, this._scheduledDelayMillis = typeof (r == null ? void 0 : r.scheduledDelayMillis) == "number" ? r.scheduledDelayMillis : n.OTEL_BSP_SCHEDULE_DELAY, this._exportTimeoutMillis = typeof (r == null ? void 0 : r.exportTimeoutMillis) == "number" ? r.exportTimeoutMillis : n.OTEL_BSP_EXPORT_TIMEOUT, this._shutdownOnce = new jt(this._shutdown, this), this._maxExportBatchSize > this._maxQueueSize && (S.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"), this._maxExportBatchSize = this._maxQueueSize);
    }
    return e.prototype.forceFlush = function() {
      return this._shutdownOnce.isCalled ? this._shutdownOnce.promise : this._flushAll();
    }, e.prototype.onStart = function(t, r) {
    }, e.prototype.onEnd = function(t) {
      this._shutdownOnce.isCalled || t.spanContext().traceFlags & G.SAMPLED && this._addToBuffer(t);
    }, e.prototype.shutdown = function() {
      return this._shutdownOnce.call();
    }, e.prototype._shutdown = function() {
      var t = this;
      return Promise.resolve().then(function() {
        return t.onShutdown();
      }).then(function() {
        return t._flushAll();
      }).then(function() {
        return t._exporter.shutdown();
      });
    }, e.prototype._addToBuffer = function(t) {
      if (this._finishedSpans.length >= this._maxQueueSize) {
        this._droppedSpansCount === 0 && S.debug("maxQueueSize reached, dropping spans"), this._droppedSpansCount++;
        return;
      }
      this._droppedSpansCount > 0 && (S.warn("Dropped " + this._droppedSpansCount + " spans because maxQueueSize reached"), this._droppedSpansCount = 0), this._finishedSpans.push(t), this._maybeStartTimer();
    }, e.prototype._flushAll = function() {
      var t = this;
      return new Promise(function(r, n) {
        for (var i = [], a = Math.ceil(t._finishedSpans.length / t._maxExportBatchSize), o = 0, s = a; o < s; o++)
          i.push(t._flushOneBatch());
        Promise.all(i).then(function() {
          r();
        }).catch(n);
      });
    }, e.prototype._flushOneBatch = function() {
      var t = this;
      return this._clearTimer(), this._finishedSpans.length === 0 ? Promise.resolve() : new Promise(function(r, n) {
        var i = setTimeout(function() {
          n(new Error("Timeout"));
        }, t._exportTimeoutMillis);
        O.with(Cr(O.active()), function() {
          var a;
          t._finishedSpans.length <= t._maxExportBatchSize ? (a = t._finishedSpans, t._finishedSpans = []) : a = t._finishedSpans.splice(0, t._maxExportBatchSize);
          for (var o = function() {
            return t._exporter.export(a, function(E) {
              var f;
              clearTimeout(i), E.code === W.SUCCESS ? r() : n((f = E.error) !== null && f !== void 0 ? f : new Error("BatchSpanProcessor: span export failed"));
            });
          }, s = null, u = 0, _ = a.length; u < _; u++) {
            var c = a[u];
            c.resource.asyncAttributesPending && c.resource.waitForAsyncAttributes && (s != null || (s = []), s.push(c.resource.waitForAsyncAttributes()));
          }
          s === null ? o() : Promise.all(s).then(o, function(E) {
            ne(E), n(E);
          });
        });
      });
    }, e.prototype._maybeStartTimer = function() {
      var t = this;
      if (!this._isExporting) {
        var r = function() {
          t._isExporting = !0, t._flushOneBatch().finally(function() {
            t._isExporting = !1, t._finishedSpans.length > 0 && (t._clearTimer(), t._maybeStartTimer());
          }).catch(function(n) {
            t._isExporting = !1, ne(n);
          });
        };
        if (this._finishedSpans.length >= this._maxExportBatchSize)
          return r();
        this._timer === void 0 && (this._timer = setTimeout(function() {
          return r();
        }, this._scheduledDelayMillis));
      }
    }, e.prototype._clearTimer = function() {
      this._timer !== void 0 && (clearTimeout(this._timer), this._timer = void 0);
    }, e;
  }()
), Rc = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Qr = (
  /** @class */
  function(e) {
    Rc(t, e);
    function t(r, n) {
      var i = e.call(this, r, n) || this;
      return i.onInit(n), i;
    }
    return t.prototype.onInit = function(r) {
      var n = this;
      (r == null ? void 0 : r.disableAutoFlushOnDocumentHide) !== !0 && typeof document != "undefined" && (this._visibilityChangeListener = function() {
        document.visibilityState === "hidden" && n.forceFlush();
      }, this._pageHideListener = function() {
        n.forceFlush();
      }, document.addEventListener("visibilitychange", this._visibilityChangeListener), document.addEventListener("pagehide", this._pageHideListener));
    }, t.prototype.onShutdown = function() {
      typeof document != "undefined" && (this._visibilityChangeListener && document.removeEventListener("visibilitychange", this._visibilityChangeListener), this._pageHideListener && document.removeEventListener("pagehide", this._pageHideListener));
    }, t;
  }(gc)
), Mc = 8, Ic = 16, Cc = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.generateTraceId = or(Ic), this.generateSpanId = or(Mc);
    }
    return e;
  }()
), xe = Array(32);
function or(e) {
  return function() {
    for (var r = 0; r < e * 2; r++)
      xe[r] = Math.floor(Math.random() * 16) + 48, xe[r] >= 58 && (xe[r] += 39);
    return String.fromCharCode.apply(null, xe.slice(0, e * 2));
  };
}
var Lc = (
  /** @class */
  function() {
    function e(t, r, n) {
      this._tracerProvider = n;
      var i = Pc(r);
      this._sampler = i.sampler, this._generalLimits = i.generalLimits, this._spanLimits = i.spanLimits, this._idGenerator = r.idGenerator || new Cc(), this.resource = n.resource, this.instrumentationLibrary = t;
    }
    return e.prototype.startSpan = function(t, r, n) {
      var i, a, o;
      r === void 0 && (r = {}), n === void 0 && (n = O.active()), r.root && (n = P.deleteSpan(n));
      var s = P.getSpan(n);
      if (Ft(n)) {
        S.debug("Instrumentation suppressed, returning Noop Span");
        var u = P.wrapSpanContext(Nr);
        return u;
      }
      var _ = s == null ? void 0 : s.spanContext(), c = this._idGenerator.generateSpanId(), E, f, h;
      !_ || !P.isSpanContextValid(_) ? E = this._idGenerator.generateTraceId() : (E = _.traceId, f = _.traceState, h = _.spanId);
      var p = (i = r.kind) !== null && i !== void 0 ? i : Ie.INTERNAL, v = ((a = r.links) !== null && a !== void 0 ? a : []).map(function(q) {
        return {
          context: q.context,
          attributes: $e(q.attributes)
        };
      }), m = $e(r.attributes), A = this._sampler.shouldSample(n, E, t, p, m, v);
      f = (o = A.traceState) !== null && o !== void 0 ? o : f;
      var N = A.decision === je.RECORD_AND_SAMPLED ? G.SAMPLED : G.NONE, C = { traceId: E, spanId: c, traceFlags: N, traceState: f };
      if (A.decision === je.NOT_RECORD) {
        S.debug("Recording is off, propagating context in a non-recording span");
        var u = P.wrapSpanContext(C);
        return u;
      }
      var K = $e(Object.assign(m, A.attributes)), k = new Oc(this, n, t, C, p, h, v, r.startTime, void 0, K);
      return k;
    }, e.prototype.startActiveSpan = function(t, r, n, i) {
      var a, o, s;
      if (!(arguments.length < 2)) {
        arguments.length === 2 ? s = r : arguments.length === 3 ? (a = r, s = n) : (a = r, o = n, s = i);
        var u = o != null ? o : O.active(), _ = this.startSpan(t, a, u), c = P.setSpan(u, _);
        return O.with(c, s, void 0, _);
      }
    }, e.prototype.getGeneralLimits = function() {
      return this._generalLimits;
    }, e.prototype.getSpanLimits = function() {
      return this._spanLimits;
    }, e.prototype.getActiveSpanProcessor = function() {
      return this._tracerProvider.getActiveSpanProcessor();
    }, e;
  }()
);
function bc() {
  return "unknown_service";
}
var z = function() {
  return z = Object.assign || function(e) {
    for (var t, r = 1, n = arguments.length; r < n; r++) {
      t = arguments[r];
      for (var i in t)
        Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, z.apply(this, arguments);
}, Dc = function(e, t, r, n) {
  function i(a) {
    return a instanceof r ? a : new r(function(o) {
      o(a);
    });
  }
  return new (r || (r = Promise))(function(a, o) {
    function s(c) {
      try {
        _(n.next(c));
      } catch (E) {
        o(E);
      }
    }
    function u(c) {
      try {
        _(n.throw(c));
      } catch (E) {
        o(E);
      }
    }
    function _(c) {
      c.done ? a(c.value) : i(c.value).then(s, u);
    }
    _((n = n.apply(e, t || [])).next());
  });
}, wc = function(e, t) {
  var r = { label: 0, sent: function() {
    if (a[0] & 1)
      throw a[1];
    return a[1];
  }, trys: [], ops: [] }, n, i, a, o;
  return o = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
    return this;
  }), o;
  function s(_) {
    return function(c) {
      return u([_, c]);
    };
  }
  function u(_) {
    if (n)
      throw new TypeError("Generator is already executing.");
    for (; r; )
      try {
        if (n = 1, i && (a = _[0] & 2 ? i.return : _[0] ? i.throw || ((a = i.return) && a.call(i), 0) : i.next) && !(a = a.call(i, _[1])).done)
          return a;
        switch (i = 0, a && (_ = [_[0] & 2, a.value]), _[0]) {
          case 0:
          case 1:
            a = _;
            break;
          case 4:
            return r.label++, { value: _[1], done: !1 };
          case 5:
            r.label++, i = _[1], _ = [0];
            continue;
          case 7:
            _ = r.ops.pop(), r.trys.pop();
            continue;
          default:
            if (a = r.trys, !(a = a.length > 0 && a[a.length - 1]) && (_[0] === 6 || _[0] === 2)) {
              r = 0;
              continue;
            }
            if (_[0] === 3 && (!a || _[1] > a[0] && _[1] < a[3])) {
              r.label = _[1];
              break;
            }
            if (_[0] === 6 && r.label < a[1]) {
              r.label = a[1], a = _;
              break;
            }
            if (a && r.label < a[2]) {
              r.label = a[2], r.ops.push(_);
              break;
            }
            a[2] && r.ops.pop(), r.trys.pop();
            continue;
        }
        _ = t.call(e, r);
      } catch (c) {
        _ = [6, c], i = 0;
      } finally {
        n = a = 0;
      }
    if (_[0] & 5)
      throw _[1];
    return { value: _[0] ? _[1] : void 0, done: !0 };
  }
}, xc = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, Mt = (
  /** @class */
  function() {
    function e(t, r) {
      var n = this, i;
      this._attributes = t, this.asyncAttributesPending = r != null, this._syncAttributes = (i = this._attributes) !== null && i !== void 0 ? i : {}, this._asyncAttributesPromise = r == null ? void 0 : r.then(function(a) {
        return n._attributes = Object.assign({}, n._attributes, a), n.asyncAttributesPending = !1, a;
      }, function(a) {
        return S.debug("a resource's async attributes promise rejected: %s", a), n.asyncAttributesPending = !1, {};
      });
    }
    return e.empty = function() {
      return e.EMPTY;
    }, e.default = function() {
      var t;
      return new e((t = {}, t[x.SERVICE_NAME] = bc(), t[x.TELEMETRY_SDK_LANGUAGE] = Tt[x.TELEMETRY_SDK_LANGUAGE], t[x.TELEMETRY_SDK_NAME] = Tt[x.TELEMETRY_SDK_NAME], t[x.TELEMETRY_SDK_VERSION] = Tt[x.TELEMETRY_SDK_VERSION], t));
    }, Object.defineProperty(e.prototype, "attributes", {
      get: function() {
        var t;
        return this.asyncAttributesPending && S.error("Accessing resource attributes before async attributes settled"), (t = this._attributes) !== null && t !== void 0 ? t : {};
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.waitForAsyncAttributes = function() {
      return Dc(this, void 0, void 0, function() {
        return wc(this, function(t) {
          switch (t.label) {
            case 0:
              return this.asyncAttributesPending ? [4, this._asyncAttributesPromise] : [3, 2];
            case 1:
              t.sent(), t.label = 2;
            case 2:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.merge = function(t) {
      var r = this, n;
      if (!t)
        return this;
      var i = z(z({}, this._syncAttributes), (n = t._syncAttributes) !== null && n !== void 0 ? n : t.attributes);
      if (!this._asyncAttributesPromise && !t._asyncAttributesPromise)
        return new e(i);
      var a = Promise.all([
        this._asyncAttributesPromise,
        t._asyncAttributesPromise
      ]).then(function(o) {
        var s, u = xc(o, 2), _ = u[0], c = u[1];
        return z(z(z(z({}, r._syncAttributes), _), (s = t._syncAttributes) !== null && s !== void 0 ? s : t.attributes), c);
      });
      return new e(i, a);
    }, e.EMPTY = new e({}), e;
  }()
), Ue = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r)
    return r.call(e);
  if (e && typeof e.length == "number")
    return {
      next: function() {
        return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
      }
    };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Uc = (
  /** @class */
  function() {
    function e(t) {
      this._spanProcessors = t;
    }
    return e.prototype.forceFlush = function() {
      var t, r, n = [];
      try {
        for (var i = Ue(this._spanProcessors), a = i.next(); !a.done; a = i.next()) {
          var o = a.value;
          n.push(o.forceFlush());
        }
      } catch (s) {
        t = { error: s };
      } finally {
        try {
          a && !a.done && (r = i.return) && r.call(i);
        } finally {
          if (t)
            throw t.error;
        }
      }
      return new Promise(function(s) {
        Promise.all(n).then(function() {
          s();
        }).catch(function(u) {
          ne(u || new Error("MultiSpanProcessor: forceFlush failed")), s();
        });
      });
    }, e.prototype.onStart = function(t, r) {
      var n, i;
      try {
        for (var a = Ue(this._spanProcessors), o = a.next(); !o.done; o = a.next()) {
          var s = o.value;
          s.onStart(t, r);
        }
      } catch (u) {
        n = { error: u };
      } finally {
        try {
          o && !o.done && (i = a.return) && i.call(a);
        } finally {
          if (n)
            throw n.error;
        }
      }
    }, e.prototype.onEnd = function(t) {
      var r, n;
      try {
        for (var i = Ue(this._spanProcessors), a = i.next(); !a.done; a = i.next()) {
          var o = a.value;
          o.onEnd(t);
        }
      } catch (s) {
        r = { error: s };
      } finally {
        try {
          a && !a.done && (n = i.return) && n.call(i);
        } finally {
          if (r)
            throw r.error;
        }
      }
    }, e.prototype.shutdown = function() {
      var t, r, n = [];
      try {
        for (var i = Ue(this._spanProcessors), a = i.next(); !a.done; a = i.next()) {
          var o = a.value;
          n.push(o.shutdown());
        }
      } catch (s) {
        t = { error: s };
      } finally {
        try {
          a && !a.done && (r = i.return) && r.call(i);
        } finally {
          if (t)
            throw t.error;
        }
      }
      return new Promise(function(s, u) {
        Promise.all(n).then(function() {
          s();
        }, u);
      });
    }, e;
  }()
), Bc = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.onStart = function(t, r) {
    }, e.prototype.onEnd = function(t) {
    }, e.prototype.shutdown = function() {
      return Promise.resolve();
    }, e.prototype.forceFlush = function() {
      return Promise.resolve();
    }, e;
  }()
), ee;
(function(e) {
  e[e.resolved = 0] = "resolved", e[e.timeout = 1] = "timeout", e[e.error = 2] = "error", e[e.unresolved = 3] = "unresolved";
})(ee || (ee = {}));
var Gc = (
  /** @class */
  function() {
    function e(t) {
      t === void 0 && (t = {});
      var r;
      this._registeredSpanProcessors = [], this._tracers = /* @__PURE__ */ new Map();
      var n = Hs({}, zr(), yc(t));
      this.resource = (r = n.resource) !== null && r !== void 0 ? r : Mt.empty(), this.resource = Mt.default().merge(this.resource), this._config = Object.assign({}, n, {
        resource: this.resource
      });
      var i = this._buildExporterFromEnv();
      if (i !== void 0) {
        var a = new Qr(i);
        this.activeSpanProcessor = a;
      } else
        this.activeSpanProcessor = new Bc();
    }
    return e.prototype.getTracer = function(t, r, n) {
      var i = t + "@" + (r || "") + ":" + ((n == null ? void 0 : n.schemaUrl) || "");
      return this._tracers.has(i) || this._tracers.set(i, new Lc({ name: t, version: r, schemaUrl: n == null ? void 0 : n.schemaUrl }, this._config, this)), this._tracers.get(i);
    }, e.prototype.addSpanProcessor = function(t) {
      this._registeredSpanProcessors.length === 0 && this.activeSpanProcessor.shutdown().catch(function(r) {
        return S.error("Error while trying to shutdown current span processor", r);
      }), this._registeredSpanProcessors.push(t), this.activeSpanProcessor = new Uc(this._registeredSpanProcessors);
    }, e.prototype.getActiveSpanProcessor = function() {
      return this.activeSpanProcessor;
    }, e.prototype.register = function(t) {
      t === void 0 && (t = {}), P.setGlobalTracerProvider(this), t.propagator === void 0 && (t.propagator = this._buildPropagatorFromEnv()), t.contextManager && O.setGlobalContextManager(t.contextManager), t.propagator && b.setGlobalPropagator(t.propagator);
    }, e.prototype.forceFlush = function() {
      var t = this._config.forceFlushTimeoutMillis, r = this._registeredSpanProcessors.map(function(n) {
        return new Promise(function(i) {
          var a, o = setTimeout(function() {
            i(new Error("Span processor did not completed within timeout period of " + t + " ms")), a = ee.timeout;
          }, t);
          n.forceFlush().then(function() {
            clearTimeout(o), a !== ee.timeout && (a = ee.resolved, i(a));
          }).catch(function(s) {
            clearTimeout(o), a = ee.error, i(s);
          });
        });
      });
      return new Promise(function(n, i) {
        Promise.all(r).then(function(a) {
          var o = a.filter(function(s) {
            return s !== ee.resolved;
          });
          o.length > 0 ? i(o) : n();
        }).catch(function(a) {
          return i([a]);
        });
      });
    }, e.prototype.shutdown = function() {
      return this.activeSpanProcessor.shutdown();
    }, e.prototype._getPropagator = function(t) {
      var r;
      return (r = this.constructor._registeredPropagators.get(t)) === null || r === void 0 ? void 0 : r();
    }, e.prototype._getSpanExporter = function(t) {
      var r;
      return (r = this.constructor._registeredExporters.get(t)) === null || r === void 0 ? void 0 : r();
    }, e.prototype._buildPropagatorFromEnv = function() {
      var t = this, r = Array.from(new Set(g().OTEL_PROPAGATORS)), n = r.map(function(a) {
        var o = t._getPropagator(a);
        return o || S.warn('Propagator "' + a + '" requested through environment variable is unavailable.'), o;
      }), i = n.reduce(function(a, o) {
        return o && a.push(o), a;
      }, []);
      if (i.length !== 0)
        return r.length === 1 ? i[0] : new $r({
          propagators: i
        });
    }, e.prototype._buildExporterFromEnv = function() {
      var t = g().OTEL_TRACES_EXPORTER;
      if (!(t === "none" || t === "")) {
        var r = this._getSpanExporter(t);
        return r || S.error('Exporter "' + t + '" requested through environment variable is unavailable.'), r;
      }
    }, e._registeredPropagators = /* @__PURE__ */ new Map([
      ["tracecontext", function() {
        return new Fr();
      }],
      ["baggage", function() {
        return new Dr();
      }]
    ]), e._registeredExporters = /* @__PURE__ */ new Map(), e;
  }()
), kc = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r)
    return r.call(e);
  if (e && typeof e.length == "number")
    return {
      next: function() {
        return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
      }
    };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, $c = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.export = function(t, r) {
      return this._sendSpans(t, r);
    }, e.prototype.shutdown = function() {
      return this._sendSpans([]), this.forceFlush();
    }, e.prototype.forceFlush = function() {
      return Promise.resolve();
    }, e.prototype._exportInfo = function(t) {
      var r;
      return {
        resource: {
          attributes: t.resource.attributes
        },
        traceId: t.spanContext().traceId,
        parentId: t.parentSpanId,
        traceState: (r = t.spanContext().traceState) === null || r === void 0 ? void 0 : r.serialize(),
        name: t.name,
        id: t.spanContext().spanId,
        kind: t.kind,
        timestamp: Jt(t.startTime),
        duration: Jt(t.duration),
        attributes: t.attributes,
        status: t.status,
        events: t.events,
        links: t.links
      };
    }, e.prototype._sendSpans = function(t, r) {
      var n, i;
      try {
        for (var a = kc(t), o = a.next(); !o.done; o = a.next()) {
          var s = o.value;
          console.dir(this._exportInfo(s), { depth: 3 });
        }
      } catch (u) {
        n = { error: u };
      } finally {
        try {
          o && !o.done && (i = a.return) && i.call(a);
        } finally {
          if (n)
            throw n.error;
        }
      }
      if (r)
        return r({ code: W.SUCCESS });
    }, e;
  }()
), Fc = function(e, t, r, n) {
  function i(a) {
    return a instanceof r ? a : new r(function(o) {
      o(a);
    });
  }
  return new (r || (r = Promise))(function(a, o) {
    function s(c) {
      try {
        _(n.next(c));
      } catch (E) {
        o(E);
      }
    }
    function u(c) {
      try {
        _(n.throw(c));
      } catch (E) {
        o(E);
      }
    }
    function _(c) {
      c.done ? a(c.value) : i(c.value).then(s, u);
    }
    _((n = n.apply(e, t || [])).next());
  });
}, Vc = function(e, t) {
  var r = { label: 0, sent: function() {
    if (a[0] & 1)
      throw a[1];
    return a[1];
  }, trys: [], ops: [] }, n, i, a, o;
  return o = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
    return this;
  }), o;
  function s(_) {
    return function(c) {
      return u([_, c]);
    };
  }
  function u(_) {
    if (n)
      throw new TypeError("Generator is already executing.");
    for (; r; )
      try {
        if (n = 1, i && (a = _[0] & 2 ? i.return : _[0] ? i.throw || ((a = i.return) && a.call(i), 0) : i.next) && !(a = a.call(i, _[1])).done)
          return a;
        switch (i = 0, a && (_ = [_[0] & 2, a.value]), _[0]) {
          case 0:
          case 1:
            a = _;
            break;
          case 4:
            return r.label++, { value: _[1], done: !1 };
          case 5:
            r.label++, i = _[1], _ = [0];
            continue;
          case 7:
            _ = r.ops.pop(), r.trys.pop();
            continue;
          default:
            if (a = r.trys, !(a = a.length > 0 && a[a.length - 1]) && (_[0] === 6 || _[0] === 2)) {
              r = 0;
              continue;
            }
            if (_[0] === 3 && (!a || _[1] > a[0] && _[1] < a[3])) {
              r.label = _[1];
              break;
            }
            if (_[0] === 6 && r.label < a[1]) {
              r.label = a[1], a = _;
              break;
            }
            if (a && r.label < a[2]) {
              r.label = a[2], r.ops.push(_);
              break;
            }
            a[2] && r.ops.pop(), r.trys.pop();
            continue;
        }
        _ = t.call(e, r);
      } catch (c) {
        _ = [6, c], i = 0;
      } finally {
        n = a = 0;
      }
    if (_[0] & 5)
      throw _[1];
    return { value: _[0] ? _[1] : void 0, done: !0 };
  }
}, Hc = (
  /** @class */
  function() {
    function e(t) {
      this._exporter = t, this._shutdownOnce = new jt(this._shutdown, this), this._unresolvedExports = /* @__PURE__ */ new Set();
    }
    return e.prototype.forceFlush = function() {
      return Fc(this, void 0, void 0, function() {
        return Vc(this, function(t) {
          switch (t.label) {
            case 0:
              return [4, Promise.all(Array.from(this._unresolvedExports))];
            case 1:
              return t.sent(), this._exporter.forceFlush ? [4, this._exporter.forceFlush()] : [3, 3];
            case 2:
              t.sent(), t.label = 3;
            case 3:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.onStart = function(t, r) {
    }, e.prototype.onEnd = function(t) {
      var r = this, n, i;
      if (!this._shutdownOnce.isCalled && t.spanContext().traceFlags & G.SAMPLED) {
        var a = function() {
          return zs._export(r._exporter, [t]).then(function(s) {
            var u;
            s.code !== W.SUCCESS && ne((u = s.error) !== null && u !== void 0 ? u : new Error("SimpleSpanProcessor: span export failed (status " + s + ")"));
          }).catch(function(s) {
            ne(s);
          });
        };
        if (t.resource.asyncAttributesPending) {
          var o = (i = (n = t.resource).waitForAsyncAttributes) === null || i === void 0 ? void 0 : i.call(n).then(function() {
            return o != null && r._unresolvedExports.delete(o), a();
          }, function(s) {
            return ne(s);
          });
          o != null && this._unresolvedExports.add(o);
        } else
          a();
      }
    }, e.prototype.shutdown = function() {
      return this._shutdownOnce.call();
    }, e.prototype._shutdown = function() {
      return this._exporter.shutdown();
    }, e;
  }()
), Yc = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, jc = function(e, t, r) {
  if (r || arguments.length === 2)
    for (var n = 0, i = t.length, a; n < i; n++)
      (a || !(n in t)) && (a || (a = Array.prototype.slice.call(t, 0, n)), a[n] = t[n]);
  return e.concat(a || Array.prototype.slice.call(t));
}, Zr = (
  /** @class */
  function() {
    function e() {
      this._enabled = !1, this._currentContext = Q;
    }
    return e.prototype._bindFunction = function(t, r) {
      t === void 0 && (t = Q);
      var n = this, i = function() {
        for (var a = this, o = [], s = 0; s < arguments.length; s++)
          o[s] = arguments[s];
        return n.with(t, function() {
          return r.apply(a, o);
        });
      };
      return Object.defineProperty(i, "length", {
        enumerable: !1,
        configurable: !0,
        writable: !1,
        value: r.length
      }), i;
    }, e.prototype.active = function() {
      return this._currentContext;
    }, e.prototype.bind = function(t, r) {
      return t === void 0 && (t = this.active()), typeof r == "function" ? this._bindFunction(t, r) : r;
    }, e.prototype.disable = function() {
      return this._currentContext = Q, this._enabled = !1, this;
    }, e.prototype.enable = function() {
      return this._enabled ? this : (this._enabled = !0, this._currentContext = Q, this);
    }, e.prototype.with = function(t, r, n) {
      for (var i = [], a = 3; a < arguments.length; a++)
        i[a - 3] = arguments[a];
      var o = this._currentContext;
      this._currentContext = t || Q;
      try {
        return r.call.apply(r, jc([n], Yc(i), !1));
      } finally {
        this._currentContext = o;
      }
    }, e;
  }()
), Xc = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Wc = (
  /** @class */
  function(e) {
    Xc(t, e);
    function t(r) {
      r === void 0 && (r = {});
      var n = e.call(this, r) || this;
      if (r.contextManager)
        throw "contextManager should be defined in register method not in constructor";
      if (r.propagator)
        throw "propagator should be defined in register method not in constructor";
      return n;
    }
    return t.prototype.register = function(r) {
      r === void 0 && (r = {}), r.contextManager === void 0 && (r.contextManager = new Zr()), r.contextManager && r.contextManager.enable(), e.prototype.register.call(this, r);
    }, t;
  }(Gc)
), T;
(function(e) {
  e.CONNECT_END = "connectEnd", e.CONNECT_START = "connectStart", e.DECODED_BODY_SIZE = "decodedBodySize", e.DOM_COMPLETE = "domComplete", e.DOM_CONTENT_LOADED_EVENT_END = "domContentLoadedEventEnd", e.DOM_CONTENT_LOADED_EVENT_START = "domContentLoadedEventStart", e.DOM_INTERACTIVE = "domInteractive", e.DOMAIN_LOOKUP_END = "domainLookupEnd", e.DOMAIN_LOOKUP_START = "domainLookupStart", e.ENCODED_BODY_SIZE = "encodedBodySize", e.FETCH_START = "fetchStart", e.LOAD_EVENT_END = "loadEventEnd", e.LOAD_EVENT_START = "loadEventStart", e.NAVIGATION_START = "navigationStart", e.REDIRECT_END = "redirectEnd", e.REDIRECT_START = "redirectStart", e.REQUEST_START = "requestStart", e.RESPONSE_END = "responseEnd", e.RESPONSE_START = "responseStart", e.SECURE_CONNECTION_START = "secureConnectionStart", e.UNLOAD_EVENT_END = "unloadEventEnd", e.UNLOAD_EVENT_START = "unloadEventStart";
})(T || (T = {}));
var At;
function Kc() {
  return At || (At = document.createElement("a")), At;
}
function J(e, t) {
  return t in e;
}
function M(e, t, r, n) {
  var i = void 0, a = void 0;
  J(r, t) && typeof r[t] == "number" && (i = r[t]);
  var o = n || T.FETCH_START;
  if (J(r, o) && typeof r[o] == "number" && (a = r[o]), i !== void 0 && a !== void 0 && i >= a)
    return e.addEvent(t, i), e;
}
function pe(e, t) {
  M(e, T.FETCH_START, t), M(e, T.DOMAIN_LOOKUP_START, t), M(e, T.DOMAIN_LOOKUP_END, t), M(e, T.CONNECT_START, t), J(t, "name") && t.name.startsWith("https:") && M(e, T.SECURE_CONNECTION_START, t), M(e, T.CONNECT_END, t), M(e, T.REQUEST_START, t), M(e, T.RESPONSE_START, t), M(e, T.RESPONSE_END, t);
  var r = t[T.ENCODED_BODY_SIZE];
  r !== void 0 && e.setAttribute(F.HTTP_RESPONSE_CONTENT_LENGTH, r);
  var n = t[T.DECODED_BODY_SIZE];
  n !== void 0 && r !== n && e.setAttribute(F.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED, n);
}
function qc(e) {
  return e.slice().sort(function(t, r) {
    var n = t[T.FETCH_START], i = r[T.FETCH_START];
    return n > i ? 1 : n < i ? -1 : 0;
  });
}
function en() {
  return typeof location != "undefined" ? location.origin : void 0;
}
function tn(e, t, r, n, i, a) {
  i === void 0 && (i = /* @__PURE__ */ new WeakSet());
  var o = H(e);
  e = o.toString();
  var s = Jc(e, t, r, n, i, a);
  if (s.length === 0)
    return {
      mainRequest: void 0
    };
  if (s.length === 1)
    return {
      mainRequest: s[0]
    };
  var u = qc(s);
  if (o.origin !== en() && u.length > 1) {
    var _ = u[0], c = zc(u, _[T.RESPONSE_END], r), E = _[T.RESPONSE_END], f = c[T.FETCH_START];
    return f < E && (c = _, _ = void 0), {
      corsPreFlightRequest: _,
      mainRequest: c
    };
  } else
    return {
      mainRequest: s[0]
    };
}
function zc(e, t, r) {
  for (var n = X(r), i = X(ye(t)), a = e[1], o, s = e.length, u = 1; u < s; u++) {
    var _ = e[u], c = X(ye(_[T.FETCH_START])), E = X(ye(_[T.RESPONSE_END])), f = n - E;
    c >= i && (!o || f < o) && (o = f, a = _);
  }
  return a;
}
function Jc(e, t, r, n, i, a) {
  var o = X(t), s = X(r), u = n.filter(function(_) {
    var c = X(ye(_[T.FETCH_START])), E = X(ye(_[T.RESPONSE_END]));
    return _.initiatorType.toLowerCase() === (a || "xmlhttprequest") && _.name === e && c >= o && E <= s;
  });
  return u.length > 0 && (u = u.filter(function(_) {
    return !i.has(_);
  })), u;
}
function H(e) {
  if (typeof URL == "function")
    return new URL(e, typeof document != "undefined" ? document.baseURI : typeof location != "undefined" ? location.href : void 0);
  var t = Kc();
  return t.href = e, t;
}
function rn(e, t) {
  if (e.nodeType === Node.DOCUMENT_NODE)
    return "/";
  var r = Zc(e, t);
  if (t && r.indexOf("@id") > 0)
    return r;
  var n = "";
  return e.parentNode && (n += rn(e.parentNode, !1)), n += r, n;
}
function Qc(e) {
  if (!e.parentNode)
    return 0;
  var t = [e.nodeType];
  e.nodeType === Node.CDATA_SECTION_NODE && t.push(Node.TEXT_NODE);
  var r = Array.from(e.parentNode.childNodes);
  return r = r.filter(function(n) {
    var i = n.localName;
    return t.indexOf(n.nodeType) >= 0 && i === e.localName;
  }), r.length >= 1 ? r.indexOf(e) + 1 : 0;
}
function Zc(e, t) {
  var r = e.nodeType, n = Qc(e), i = "";
  if (r === Node.ELEMENT_NODE) {
    var a = e.getAttribute("id");
    if (t && a)
      return '//*[@id="' + a + '"]';
    i = e.localName;
  } else if (r === Node.TEXT_NODE || r === Node.CDATA_SECTION_NODE)
    i = "text()";
  else if (r === Node.COMMENT_NODE)
    i = "comment()";
  else
    return "";
  return i && n > 1 ? "/" + i + "[" + n + "]" : "/" + i;
}
function nn(e, t) {
  var r = t || [];
  (typeof r == "string" || r instanceof RegExp) && (r = [r]);
  var n = H(e);
  return n.origin === en() ? !0 : r.some(function(i) {
    return Kr(e, i);
  });
}
var ed = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.emit = function(t) {
    }, e;
  }()
), td = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getLogger = function(t, r, n) {
      return new ed();
    }, e;
  }()
), sr = new td(), rd = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {}, Be = Symbol.for("io.opentelemetry.js.api.logs"), Se = rd;
function nd(e, t, r) {
  return function(n) {
    return n === e ? t : r;
  };
}
var ur = 1, id = (
  /** @class */
  function() {
    function e() {
    }
    return e.getInstance = function() {
      return this._instance || (this._instance = new e()), this._instance;
    }, e.prototype.setGlobalLoggerProvider = function(t) {
      return Se[Be] ? this.getLoggerProvider() : (Se[Be] = nd(ur, t, sr), t);
    }, e.prototype.getLoggerProvider = function() {
      var t, r;
      return (r = (t = Se[Be]) === null || t === void 0 ? void 0 : t.call(Se, ur)) !== null && r !== void 0 ? r : sr;
    }, e.prototype.getLogger = function(t, r, n) {
      return this.getLoggerProvider().getLogger(t, r, n);
    }, e.prototype.disable = function() {
      delete Se[Be];
    }, e;
  }()
), an = id.getInstance();
function on(e) {
  e === void 0 && (e = []);
  for (var t = [], r = 0, n = e.length; r < n; r++) {
    var i = e[r];
    if (Array.isArray(i)) {
      var a = on(i);
      t = t.concat(a.instrumentations);
    } else
      typeof i == "function" ? t.push(new i()) : i.instrumentationName && t.push(i);
  }
  return { instrumentations: t };
}
function ad(e, t, r, n) {
  for (var i = 0, a = e.length; i < a; i++) {
    var o = e[i];
    t && o.setTracerProvider(t), r && o.setMeterProvider(r), n && o.setLoggerProvider && o.setLoggerProvider(n), o.getConfig().enabled || o.enable();
  }
}
function od(e) {
  e.forEach(function(t) {
    return t.disable();
  });
}
function sd(e) {
  var t = on(e.instrumentations).instrumentations, r = e.tracerProvider || P.getTracerProvider(), n = e.meterProvider || Rr.getMeterProvider(), i = e.loggerProvider || an.getLoggerProvider();
  return ad(t, r, n, i), function() {
    od(t);
  };
}
function It(e) {
  return typeof e == "function";
}
var L = console.error.bind(console);
function Ae(e, t, r) {
  var n = !!e[t] && e.propertyIsEnumerable(t);
  Object.defineProperty(e, t, {
    configurable: !0,
    enumerable: n,
    writable: !0,
    value: r
  });
}
function De(e) {
  e && e.logger && (It(e.logger) ? L = e.logger : L("new logger isn't a function, not replacing"));
}
function sn(e, t, r) {
  if (!e || !e[t]) {
    L("no original function " + t + " to wrap");
    return;
  }
  if (!r) {
    L("no wrapper function"), L(new Error().stack);
    return;
  }
  if (!It(e[t]) || !It(r)) {
    L("original object and wrapper must be functions");
    return;
  }
  var n = e[t], i = r(n, t);
  return Ae(i, "__original", n), Ae(i, "__unwrap", function() {
    e[t] === i && Ae(e, t, n);
  }), Ae(i, "__wrapped", !0), Ae(e, t, i), i;
}
function ud(e, t, r) {
  if (e)
    Array.isArray(e) || (e = [e]);
  else {
    L("must provide one or more modules to patch"), L(new Error().stack);
    return;
  }
  if (!(t && Array.isArray(t))) {
    L("must provide one or more functions to wrap on modules");
    return;
  }
  e.forEach(function(n) {
    t.forEach(function(i) {
      sn(n, i, r);
    });
  });
}
function un(e, t) {
  if (!e || !e[t]) {
    L("no function to unwrap."), L(new Error().stack);
    return;
  }
  if (!e[t].__unwrap)
    L("no original to unwrap to -- has " + t + " already been unwrapped?");
  else
    return e[t].__unwrap();
}
function _d(e, t) {
  if (e)
    Array.isArray(e) || (e = [e]);
  else {
    L("must provide one or more modules to patch"), L(new Error().stack);
    return;
  }
  if (!(t && Array.isArray(t))) {
    L("must provide one or more functions to unwrap on modules");
    return;
  }
  e.forEach(function(r) {
    t.forEach(function(n) {
      un(r, n);
    });
  });
}
De.wrap = sn;
De.massWrap = ud;
De.unwrap = un;
De.massUnwrap = _d;
var Ge = De, Ct = function() {
  return Ct = Object.assign || function(e) {
    for (var t, r = 1, n = arguments.length; r < n; r++) {
      t = arguments[r];
      for (var i in t)
        Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Ct.apply(this, arguments);
}, cd = (
  /** @class */
  function() {
    function e(t, r, n) {
      n === void 0 && (n = {}), this.instrumentationName = t, this.instrumentationVersion = r, this._wrap = Ge.wrap, this._unwrap = Ge.unwrap, this._massWrap = Ge.massWrap, this._massUnwrap = Ge.massUnwrap, this._config = Ct({ enabled: !0 }, n), this._diag = S.createComponentLogger({
        namespace: t
      }), this._tracer = P.getTracer(t, r), this._meter = Rr.getMeter(t, r), this._logger = an.getLogger(t, r), this._updateMetricInstruments();
    }
    return Object.defineProperty(e.prototype, "meter", {
      /* Returns meter */
      get: function() {
        return this._meter;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.setMeterProvider = function(t) {
      this._meter = t.getMeter(this.instrumentationName, this.instrumentationVersion), this._updateMetricInstruments();
    }, Object.defineProperty(e.prototype, "logger", {
      /* Returns logger */
      get: function() {
        return this._logger;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.setLoggerProvider = function(t) {
      this._logger = t.getLogger(this.instrumentationName, this.instrumentationVersion);
    }, e.prototype.getModuleDefinitions = function() {
      var t, r = (t = this.init()) !== null && t !== void 0 ? t : [];
      return Array.isArray(r) ? r : [r];
    }, e.prototype._updateMetricInstruments = function() {
    }, e.prototype.getConfig = function() {
      return this._config;
    }, e.prototype.setConfig = function(t) {
      t === void 0 && (t = {}), this._config = Object.assign({}, t);
    }, e.prototype.setTracerProvider = function(t) {
      this._tracer = t.getTracer(this.instrumentationName, this.instrumentationVersion);
    }, Object.defineProperty(e.prototype, "tracer", {
      /* Returns tracer */
      get: function() {
        return this._tracer;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }()
), dd = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), nt = (
  /** @class */
  function(e) {
    dd(t, e);
    function t(r, n, i) {
      i === void 0 && (i = {});
      var a = e.call(this, r, n, i) || this;
      return a._config.enabled && a.enable(), a;
    }
    return t;
  }(cd)
);
function ze(e, t, r) {
  var n, i;
  try {
    i = e();
  } catch (a) {
    n = a;
  } finally {
    if (t(n, i), n && !r)
      throw n;
    return i;
  }
}
function re(e) {
  return typeof e == "function" && typeof e.__original == "function" && typeof e.__unwrap == "function" && e.__wrapped === !0;
}
var ge;
(function(e) {
  e.DOCUMENT_LOAD = "documentLoad", e.DOCUMENT_FETCH = "documentFetch", e.RESOURCE_FETCH = "resourceFetch";
})(ge || (ge = {}));
var Ed = "0.38.0", Je;
(function(e) {
  e.FIRST_PAINT = "firstPaint", e.FIRST_CONTENTFUL_PAINT = "firstContentfulPaint";
})(Je || (Je = {}));
var fd = function() {
  var e, t, r = {}, n = (t = (e = D).getEntriesByType) === null || t === void 0 ? void 0 : t.call(e, "navigation")[0];
  if (n) {
    var i = Object.values(T);
    i.forEach(function(s) {
      if (J(n, s)) {
        var u = n[s];
        typeof u == "number" && (r[s] = u);
      }
    });
  } else {
    var a = D, o = a.timing;
    if (o) {
      var i = Object.values(T);
      i.forEach(function(u) {
        if (J(o, u)) {
          var _ = o[u];
          typeof _ == "number" && (r[u] = _);
        }
      });
    }
  }
  return r;
}, _r = {
  "first-paint": Je.FIRST_PAINT,
  "first-contentful-paint": Je.FIRST_CONTENTFUL_PAINT
}, pd = function(e) {
  var t, r, n = (r = (t = D).getEntriesByType) === null || r === void 0 ? void 0 : r.call(t, "paint");
  n && n.forEach(function(i) {
    var a = i.name, o = i.startTime;
    J(_r, a) && e.addEvent(_r[a], o);
  });
}, ld = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Td = (
  /** @class */
  function(e) {
    ld(t, e);
    function t(r) {
      r === void 0 && (r = {});
      var n = e.call(this, "@opentelemetry/instrumentation-document-load", Ed, r) || this;
      return n.component = "document-load", n.version = "1", n.moduleName = n.component, n;
    }
    return t.prototype.init = function() {
    }, t.prototype._onDocumentLoaded = function() {
      var r = this;
      window.setTimeout(function() {
        r._collectPerformance();
      });
    }, t.prototype._addResourcesSpans = function(r) {
      var n = this, i, a, o = (a = (i = D).getEntriesByType) === null || a === void 0 ? void 0 : a.call(i, "resource");
      o && o.forEach(function(s) {
        n._initResourceSpan(s, r);
      });
    }, t.prototype._collectPerformance = function() {
      var r = this, n = Array.from(document.getElementsByTagName("meta")).find(function(o) {
        return o.getAttribute("name") === He;
      }), i = fd(), a = n && n.content || "";
      O.with(b.extract(Q, { traceparent: a }), function() {
        var o, s = r._startSpan(ge.DOCUMENT_LOAD, T.FETCH_START, i);
        s && (O.with(P.setSpan(O.active(), s), function() {
          var u = r._startSpan(ge.DOCUMENT_FETCH, T.FETCH_START, i);
          u && (u.setAttribute(lt, location.href), O.with(P.setSpan(O.active(), u), function() {
            var _;
            pe(u, i), r._addCustomAttributesOnSpan(u, (_ = r._getConfig().applyCustomAttributesOnSpan) === null || _ === void 0 ? void 0 : _.documentFetch), r._endSpan(u, T.RESPONSE_END, i);
          }));
        }), s.setAttribute(lt, location.href), s.setAttribute(Pa, navigator.userAgent), r._addResourcesSpans(s), M(s, T.FETCH_START, i), M(s, T.UNLOAD_EVENT_START, i), M(s, T.UNLOAD_EVENT_END, i), M(s, T.DOM_INTERACTIVE, i), M(s, T.DOM_CONTENT_LOADED_EVENT_START, i), M(s, T.DOM_CONTENT_LOADED_EVENT_END, i), M(s, T.DOM_COMPLETE, i), M(s, T.LOAD_EVENT_START, i), M(s, T.LOAD_EVENT_END, i), pd(s), r._addCustomAttributesOnSpan(s, (o = r._getConfig().applyCustomAttributesOnSpan) === null || o === void 0 ? void 0 : o.documentLoad), r._endSpan(s, T.LOAD_EVENT_END, i));
      });
    }, t.prototype._endSpan = function(r, n, i) {
      r && (J(i, n) ? r.end(i[n]) : r.end());
    }, t.prototype._initResourceSpan = function(r, n) {
      var i, a = this._startSpan(ge.RESOURCE_FETCH, T.FETCH_START, r, n);
      a && (a.setAttribute(lt, r.name), pe(a, r), this._addCustomAttributesOnResourceSpan(a, r, (i = this._getConfig().applyCustomAttributesOnSpan) === null || i === void 0 ? void 0 : i.resourceFetch), this._endSpan(a, T.RESPONSE_END, r));
    }, t.prototype._startSpan = function(r, n, i, a) {
      if (J(i, n) && typeof i[n] == "number") {
        var o = this.tracer.startSpan(r, {
          startTime: i[n]
        }, a ? P.setSpan(O.active(), a) : void 0);
        return o;
      }
    }, t.prototype._waitForPageLoad = function() {
      window.document.readyState === "complete" ? this._onDocumentLoaded() : (this._onDocumentLoaded = this._onDocumentLoaded.bind(this), window.addEventListener("load", this._onDocumentLoaded));
    }, t.prototype._getConfig = function() {
      return this._config;
    }, t.prototype._addCustomAttributesOnSpan = function(r, n) {
      var i = this;
      n && ze(function() {
        return n(r);
      }, function(a) {
        a && i._diag.error("addCustomAttributesOnSpan", a);
      }, !0);
    }, t.prototype._addCustomAttributesOnResourceSpan = function(r, n, i) {
      var a = this;
      i && ze(function() {
        return i(r, n);
      }, function(o) {
        o && a._diag.error("addCustomAttributesOnResourceSpan", o);
      }, !0);
    }, t.prototype.enable = function() {
      window.removeEventListener("load", this._onDocumentLoaded), this._waitForPageLoad();
    }, t.prototype.disable = function() {
      window.removeEventListener("load", this._onDocumentLoaded);
    }, t;
  }(nt)
), Qe;
(function(e) {
  e.COMPONENT = "component", e.HTTP_ERROR_NAME = "http.error_name", e.HTTP_STATUS_TEXT = "http.status_text";
})(Qe || (Qe = {}));
// @__NO_SIDE_EFFECTS__
function hd(e) {
  for (var t = {}, r = e.length, n = 0; n < r; n++) {
    var i = e[n];
    i && (t[String(i).toUpperCase().replace(/[-.]/g, "_")] = i);
  }
  return t;
}
var vd = "aws.lambda.invoked_arn", Sd = "db.system", Ad = "db.connection_string", Od = "db.user", md = "db.jdbc.driver_classname", Nd = "db.name", Pd = "db.statement", yd = "db.operation", gd = "db.mssql.instance_name", Rd = "db.cassandra.keyspace", Md = "db.cassandra.page_size", Id = "db.cassandra.consistency_level", Cd = "db.cassandra.table", Ld = "db.cassandra.idempotence", bd = "db.cassandra.speculative_execution_count", Dd = "db.cassandra.coordinator.id", wd = "db.cassandra.coordinator.dc", xd = "db.hbase.namespace", Ud = "db.redis.database_index", Bd = "db.mongodb.collection", Gd = "db.sql.table", kd = "exception.type", $d = "exception.message", Fd = "exception.stacktrace", Vd = "exception.escaped", Hd = "faas.trigger", Yd = "faas.execution", jd = "faas.document.collection", Xd = "faas.document.operation", Wd = "faas.document.time", Kd = "faas.document.name", qd = "faas.time", zd = "faas.cron", Jd = "faas.coldstart", Qd = "faas.invoked_name", Zd = "faas.invoked_provider", eE = "faas.invoked_region", tE = "net.transport", rE = "net.peer.ip", nE = "net.peer.port", iE = "net.peer.name", aE = "net.host.ip", oE = "net.host.port", sE = "net.host.name", uE = "net.host.connection.type", _E = "net.host.connection.subtype", cE = "net.host.carrier.name", dE = "net.host.carrier.mcc", EE = "net.host.carrier.mnc", fE = "net.host.carrier.icc", pE = "peer.service", lE = "enduser.id", TE = "enduser.role", hE = "enduser.scope", vE = "thread.id", SE = "thread.name", AE = "code.function", OE = "code.namespace", mE = "code.filepath", NE = "code.lineno", PE = "http.method", yE = "http.url", gE = "http.target", RE = "http.host", ME = "http.scheme", IE = "http.status_code", CE = "http.flavor", LE = "http.user_agent", bE = "http.request_content_length", DE = "http.request_content_length_uncompressed", wE = "http.response_content_length", xE = "http.response_content_length_uncompressed", UE = "http.server_name", BE = "http.route", GE = "http.client_ip", kE = "aws.dynamodb.table_names", $E = "aws.dynamodb.consumed_capacity", FE = "aws.dynamodb.item_collection_metrics", VE = "aws.dynamodb.provisioned_read_capacity", HE = "aws.dynamodb.provisioned_write_capacity", YE = "aws.dynamodb.consistent_read", jE = "aws.dynamodb.projection", XE = "aws.dynamodb.limit", WE = "aws.dynamodb.attributes_to_get", KE = "aws.dynamodb.index_name", qE = "aws.dynamodb.select", zE = "aws.dynamodb.global_secondary_indexes", JE = "aws.dynamodb.local_secondary_indexes", QE = "aws.dynamodb.exclusive_start_table", ZE = "aws.dynamodb.table_count", ef = "aws.dynamodb.scan_forward", tf = "aws.dynamodb.segment", rf = "aws.dynamodb.total_segments", nf = "aws.dynamodb.count", af = "aws.dynamodb.scanned_count", of = "aws.dynamodb.attribute_definitions", sf = "aws.dynamodb.global_secondary_index_updates", uf = "messaging.system", _f = "messaging.destination", cf = "messaging.destination_kind", df = "messaging.temp_destination", Ef = "messaging.protocol", ff = "messaging.protocol_version", pf = "messaging.url", lf = "messaging.message_id", Tf = "messaging.conversation_id", hf = "messaging.message_payload_size_bytes", vf = "messaging.message_payload_compressed_size_bytes", Sf = "messaging.operation", Af = "messaging.consumer_id", Of = "messaging.rabbitmq.routing_key", mf = "messaging.kafka.message_key", Nf = "messaging.kafka.consumer_group", Pf = "messaging.kafka.client_id", yf = "messaging.kafka.partition", gf = "messaging.kafka.tombstone", Rf = "rpc.system", Mf = "rpc.service", If = "rpc.method", Cf = "rpc.grpc.status_code", Lf = "rpc.jsonrpc.version", bf = "rpc.jsonrpc.request_id", Df = "rpc.jsonrpc.error_code", wf = "rpc.jsonrpc.error_message", xf = "message.type", Uf = "message.id", Bf = "message.compressed_size", Gf = "message.uncompressed_size", ue = /* @__PURE__ */ hd([
  vd,
  Sd,
  Ad,
  Od,
  md,
  Nd,
  Pd,
  yd,
  gd,
  Rd,
  Md,
  Id,
  Cd,
  Ld,
  bd,
  Dd,
  wd,
  xd,
  Ud,
  Bd,
  Gd,
  kd,
  $d,
  Fd,
  Vd,
  Hd,
  Yd,
  jd,
  Xd,
  Wd,
  Kd,
  qd,
  zd,
  Jd,
  Qd,
  Zd,
  eE,
  tE,
  rE,
  nE,
  iE,
  aE,
  oE,
  sE,
  uE,
  _E,
  cE,
  dE,
  EE,
  fE,
  pE,
  lE,
  TE,
  hE,
  vE,
  SE,
  AE,
  OE,
  mE,
  NE,
  PE,
  yE,
  gE,
  RE,
  ME,
  IE,
  CE,
  LE,
  bE,
  DE,
  wE,
  xE,
  UE,
  BE,
  GE,
  kE,
  $E,
  FE,
  VE,
  HE,
  YE,
  jE,
  XE,
  WE,
  KE,
  qE,
  zE,
  JE,
  QE,
  ZE,
  ef,
  tf,
  rf,
  nf,
  af,
  of,
  sf,
  uf,
  _f,
  cf,
  df,
  Ef,
  ff,
  pf,
  lf,
  Tf,
  hf,
  vf,
  Sf,
  Af,
  Of,
  mf,
  Nf,
  Pf,
  yf,
  gf,
  Rf,
  Mf,
  If,
  Cf,
  Lf,
  bf,
  Df,
  wf,
  xf,
  Uf,
  Bf,
  Gf
]), cr = "0.51.1", kf = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Ot, $f = 300, dr = typeof process == "object" && ((Ot = process.release) === null || Ot === void 0 ? void 0 : Ot.name) === "node", Ff = (
  /** @class */
  function(e) {
    kf(t, e);
    function t(r) {
      var n = e.call(this, "@opentelemetry/instrumentation-fetch", cr, r) || this;
      return n.component = "fetch", n.version = cr, n.moduleName = n.component, n._usedResources = /* @__PURE__ */ new WeakSet(), n._tasksCount = 0, n;
    }
    return t.prototype.init = function() {
    }, t.prototype._getConfig = function() {
      return this._config;
    }, t.prototype._addChildSpan = function(r, n) {
      var i = this.tracer.startSpan("CORS Preflight", {
        startTime: n[T.FETCH_START]
      }, P.setSpan(O.active(), r));
      this._getConfig().ignoreNetworkEvents || pe(i, n), i.end(n[T.RESPONSE_END]);
    }, t.prototype._addFinalSpanAttributes = function(r, n) {
      var i = H(n.url);
      r.setAttribute(ue.HTTP_STATUS_CODE, n.status), n.statusText != null && r.setAttribute(Qe.HTTP_STATUS_TEXT, n.statusText), r.setAttribute(ue.HTTP_HOST, i.host), r.setAttribute(ue.HTTP_SCHEME, i.protocol.replace(":", "")), typeof navigator != "undefined" && r.setAttribute(ue.HTTP_USER_AGENT, navigator.userAgent);
    }, t.prototype._addHeaders = function(r, n) {
      if (!nn(n, this._getConfig().propagateTraceHeaderCorsUrls)) {
        var i = {};
        b.inject(O.active(), i), Object.keys(i).length > 0 && this._diag.debug("headers inject skipped due to CORS policy");
        return;
      }
      if (r instanceof Request)
        b.inject(O.active(), r.headers, {
          set: function(a, o, s) {
            return a.set(o, typeof s == "string" ? s : String(s));
          }
        });
      else if (r.headers instanceof Headers)
        b.inject(O.active(), r.headers, {
          set: function(a, o, s) {
            return a.set(o, typeof s == "string" ? s : String(s));
          }
        });
      else if (r.headers instanceof Map)
        b.inject(O.active(), r.headers, {
          set: function(a, o, s) {
            return a.set(o, typeof s == "string" ? s : String(s));
          }
        });
      else {
        var i = {};
        b.inject(O.active(), i), r.headers = Object.assign({}, i, r.headers || {});
      }
    }, t.prototype._clearResources = function() {
      this._tasksCount === 0 && this._getConfig().clearTimingResources && (performance.clearResourceTimings(), this._usedResources = /* @__PURE__ */ new WeakSet());
    }, t.prototype._createSpan = function(r, n) {
      var i;
      if (n === void 0 && (n = {}), qr(r, this._getConfig().ignoreUrls)) {
        this._diag.debug("ignoring span as url matches ignored url");
        return;
      }
      var a = (n.method || "GET").toUpperCase(), o = "HTTP " + a;
      return this.tracer.startSpan(o, {
        kind: Ie.CLIENT,
        attributes: (i = {}, i[Qe.COMPONENT] = this.moduleName, i[ue.HTTP_METHOD] = a, i[ue.HTTP_URL] = r, i)
      });
    }, t.prototype._findResourceAndAddNetworkEvents = function(r, n, i) {
      var a = n.entries;
      if (!a.length) {
        if (!performance.getEntriesByType)
          return;
        a = performance.getEntriesByType("resource");
      }
      var o = tn(n.spanUrl, n.startTime, i, a, this._usedResources, "fetch");
      if (o.mainRequest) {
        var s = o.mainRequest;
        this._markResourceAsUsed(s);
        var u = o.corsPreFlightRequest;
        u && (this._addChildSpan(r, u), this._markResourceAsUsed(u)), this._getConfig().ignoreNetworkEvents || pe(r, s);
      }
    }, t.prototype._markResourceAsUsed = function(r) {
      this._usedResources.add(r);
    }, t.prototype._endSpan = function(r, n, i) {
      var a = this, o = j(Date.now()), s = Ee();
      this._addFinalSpanAttributes(r, i), setTimeout(function() {
        var u;
        (u = n.observer) === null || u === void 0 || u.disconnect(), a._findResourceAndAddNetworkEvents(r, n, s), a._tasksCount--, a._clearResources(), r.end(o);
      }, $f);
    }, t.prototype._patchConstructor = function() {
      var r = this;
      return function(n) {
        var i = r;
        return function() {
          for (var o = [], s = 0; s < arguments.length; s++)
            o[s] = arguments[s];
          var u = this, _ = H(o[0] instanceof Request ? o[0].url : String(o[0])).href, c = o[0] instanceof Request ? o[0] : o[1] || {}, E = i._createSpan(_, c);
          if (!E)
            return n.apply(this, o);
          var f = i._prepareSpanData(_);
          function h(A, N) {
            i._applyAttributesAfterFetch(A, c, N), i._endSpan(A, f, {
              status: N.status || 0,
              statusText: N.message,
              url: _
            });
          }
          function p(A, N) {
            i._applyAttributesAfterFetch(A, c, N), N.status >= 200 && N.status < 400 ? i._endSpan(A, f, N) : i._endSpan(A, f, {
              status: N.status,
              statusText: N.statusText,
              url: _
            });
          }
          function v(A, N, C) {
            try {
              var K = C.clone(), k = C.clone(), q = K.body;
              if (q) {
                var we = q.getReader(), Wt = function() {
                  we.read().then(function(st) {
                    var Mn = st.done;
                    Mn ? p(A, k) : Wt();
                  }, function(st) {
                    h(A, st);
                  });
                };
                Wt();
              } else
                p(A, C);
            } finally {
              N(C);
            }
          }
          function m(A, N, C) {
            try {
              h(A, C);
            } finally {
              N(C);
            }
          }
          return new Promise(function(A, N) {
            return O.with(P.setSpan(O.active(), E), function() {
              return i._addHeaders(c, _), i._tasksCount++, n.apply(u, c instanceof Request ? [c] : [_, c]).then(v.bind(u, E, A), m.bind(u, E, N));
            });
          });
        };
      };
    }, t.prototype._applyAttributesAfterFetch = function(r, n, i) {
      var a = this, o = this._getConfig().applyCustomAttributesOnSpan;
      o && ze(function() {
        return o(r, n, i);
      }, function(s) {
        s && a._diag.error("applyCustomAttributesOnSpan", s);
      }, !0);
    }, t.prototype._prepareSpanData = function(r) {
      var n = Ee(), i = [];
      if (typeof PerformanceObserver != "function")
        return { entries: i, startTime: n, spanUrl: r };
      var a = new PerformanceObserver(function(o) {
        var s = o.getEntries();
        s.forEach(function(u) {
          u.initiatorType === "fetch" && u.name === r && i.push(u);
        });
      });
      return a.observe({
        entryTypes: ["resource"]
      }), { entries: i, observer: a, startTime: n, spanUrl: r };
    }, t.prototype.enable = function() {
      if (dr) {
        this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");
        return;
      }
      re(fetch) && (this._unwrap(Pe, "fetch"), this._diag.debug("removing previous patch for constructor")), this._wrap(Pe, "fetch", this._patchConstructor());
    }, t.prototype.disable = function() {
      dr || (this._unwrap(Pe, "fetch"), this._usedResources = /* @__PURE__ */ new WeakSet());
    }, t;
  }(nt)
);
// @__NO_SIDE_EFFECTS__
function Vf(e) {
  for (var t = {}, r = e.length, n = 0; n < r; n++) {
    var i = e[n];
    i && (t[String(i).toUpperCase().replace(/[-.]/g, "_")] = i);
  }
  return t;
}
var Hf = "aws.lambda.invoked_arn", Yf = "db.system", jf = "db.connection_string", Xf = "db.user", Wf = "db.jdbc.driver_classname", Kf = "db.name", qf = "db.statement", zf = "db.operation", Jf = "db.mssql.instance_name", Qf = "db.cassandra.keyspace", Zf = "db.cassandra.page_size", ep = "db.cassandra.consistency_level", tp = "db.cassandra.table", rp = "db.cassandra.idempotence", np = "db.cassandra.speculative_execution_count", ip = "db.cassandra.coordinator.id", ap = "db.cassandra.coordinator.dc", op = "db.hbase.namespace", sp = "db.redis.database_index", up = "db.mongodb.collection", _p = "db.sql.table", cp = "exception.type", dp = "exception.message", Ep = "exception.stacktrace", fp = "exception.escaped", pp = "faas.trigger", lp = "faas.execution", Tp = "faas.document.collection", hp = "faas.document.operation", vp = "faas.document.time", Sp = "faas.document.name", Ap = "faas.time", Op = "faas.cron", mp = "faas.coldstart", Np = "faas.invoked_name", Pp = "faas.invoked_provider", yp = "faas.invoked_region", gp = "net.transport", Rp = "net.peer.ip", Mp = "net.peer.port", Ip = "net.peer.name", Cp = "net.host.ip", Lp = "net.host.port", bp = "net.host.name", Dp = "net.host.connection.type", wp = "net.host.connection.subtype", xp = "net.host.carrier.name", Up = "net.host.carrier.mcc", Bp = "net.host.carrier.mnc", Gp = "net.host.carrier.icc", kp = "peer.service", $p = "enduser.id", Fp = "enduser.role", Vp = "enduser.scope", Hp = "thread.id", Yp = "thread.name", jp = "code.function", Xp = "code.namespace", Wp = "code.filepath", Kp = "code.lineno", qp = "http.method", zp = "http.url", Jp = "http.target", Qp = "http.host", Zp = "http.scheme", el = "http.status_code", tl = "http.flavor", rl = "http.user_agent", nl = "http.request_content_length", il = "http.request_content_length_uncompressed", al = "http.response_content_length", ol = "http.response_content_length_uncompressed", sl = "http.server_name", ul = "http.route", _l = "http.client_ip", cl = "aws.dynamodb.table_names", dl = "aws.dynamodb.consumed_capacity", El = "aws.dynamodb.item_collection_metrics", fl = "aws.dynamodb.provisioned_read_capacity", pl = "aws.dynamodb.provisioned_write_capacity", ll = "aws.dynamodb.consistent_read", Tl = "aws.dynamodb.projection", hl = "aws.dynamodb.limit", vl = "aws.dynamodb.attributes_to_get", Sl = "aws.dynamodb.index_name", Al = "aws.dynamodb.select", Ol = "aws.dynamodb.global_secondary_indexes", ml = "aws.dynamodb.local_secondary_indexes", Nl = "aws.dynamodb.exclusive_start_table", Pl = "aws.dynamodb.table_count", yl = "aws.dynamodb.scan_forward", gl = "aws.dynamodb.segment", Rl = "aws.dynamodb.total_segments", Ml = "aws.dynamodb.count", Il = "aws.dynamodb.scanned_count", Cl = "aws.dynamodb.attribute_definitions", Ll = "aws.dynamodb.global_secondary_index_updates", bl = "messaging.system", Dl = "messaging.destination", wl = "messaging.destination_kind", xl = "messaging.temp_destination", Ul = "messaging.protocol", Bl = "messaging.protocol_version", Gl = "messaging.url", kl = "messaging.message_id", $l = "messaging.conversation_id", Fl = "messaging.message_payload_size_bytes", Vl = "messaging.message_payload_compressed_size_bytes", Hl = "messaging.operation", Yl = "messaging.consumer_id", jl = "messaging.rabbitmq.routing_key", Xl = "messaging.kafka.message_key", Wl = "messaging.kafka.consumer_group", Kl = "messaging.kafka.client_id", ql = "messaging.kafka.partition", zl = "messaging.kafka.tombstone", Jl = "rpc.system", Ql = "rpc.service", Zl = "rpc.method", eT = "rpc.grpc.status_code", tT = "rpc.jsonrpc.version", rT = "rpc.jsonrpc.request_id", nT = "rpc.jsonrpc.error_code", iT = "rpc.jsonrpc.error_message", aT = "message.type", oT = "message.id", sT = "message.compressed_size", uT = "message.uncompressed_size", _e = /* @__PURE__ */ Vf([
  Hf,
  Yf,
  jf,
  Xf,
  Wf,
  Kf,
  qf,
  zf,
  Jf,
  Qf,
  Zf,
  ep,
  tp,
  rp,
  np,
  ip,
  ap,
  op,
  sp,
  up,
  _p,
  cp,
  dp,
  Ep,
  fp,
  pp,
  lp,
  Tp,
  hp,
  vp,
  Sp,
  Ap,
  Op,
  mp,
  Np,
  Pp,
  yp,
  gp,
  Rp,
  Mp,
  Ip,
  Cp,
  Lp,
  bp,
  Dp,
  wp,
  xp,
  Up,
  Bp,
  Gp,
  kp,
  $p,
  Fp,
  Vp,
  Hp,
  Yp,
  jp,
  Xp,
  Wp,
  Kp,
  qp,
  zp,
  Jp,
  Qp,
  Zp,
  el,
  tl,
  rl,
  nl,
  il,
  al,
  ol,
  sl,
  ul,
  _l,
  cl,
  dl,
  El,
  fl,
  pl,
  ll,
  Tl,
  hl,
  vl,
  Sl,
  Al,
  Ol,
  ml,
  Nl,
  Pl,
  yl,
  gl,
  Rl,
  Ml,
  Il,
  Cl,
  Ll,
  bl,
  Dl,
  wl,
  xl,
  Ul,
  Bl,
  Gl,
  kl,
  $l,
  Fl,
  Vl,
  Hl,
  Yl,
  jl,
  Xl,
  Wl,
  Kl,
  ql,
  zl,
  Jl,
  Ql,
  Zl,
  eT,
  tT,
  rT,
  nT,
  iT,
  aT,
  oT,
  sT,
  uT
]), V;
(function(e) {
  e.METHOD_OPEN = "open", e.METHOD_SEND = "send", e.EVENT_ABORT = "abort", e.EVENT_ERROR = "error", e.EVENT_LOAD = "loaded", e.EVENT_TIMEOUT = "timeout";
})(V || (V = {}));
var Er = "0.51.1", Lt;
(function(e) {
  e.HTTP_STATUS_TEXT = "http.status_text";
})(Lt || (Lt = {}));
var _T = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), cT = 300, dT = (
  /** @class */
  function(e) {
    _T(t, e);
    function t(r) {
      var n = e.call(this, "@opentelemetry/instrumentation-xml-http-request", Er, r) || this;
      return n.component = "xml-http-request", n.version = Er, n.moduleName = n.component, n._tasksCount = 0, n._xhrMem = /* @__PURE__ */ new WeakMap(), n._usedResources = /* @__PURE__ */ new WeakSet(), n;
    }
    return t.prototype.init = function() {
    }, t.prototype._getConfig = function() {
      return this._config;
    }, t.prototype._addHeaders = function(r, n) {
      var i = H(n).href;
      if (!nn(i, this._getConfig().propagateTraceHeaderCorsUrls)) {
        var a = {};
        b.inject(O.active(), a), Object.keys(a).length > 0 && this._diag.debug("headers inject skipped due to CORS policy");
        return;
      }
      var o = {};
      b.inject(O.active(), o), Object.keys(o).forEach(function(s) {
        r.setRequestHeader(s, String(o[s]));
      });
    }, t.prototype._addChildSpan = function(r, n) {
      var i = this;
      O.with(P.setSpan(O.active(), r), function() {
        var a = i.tracer.startSpan("CORS Preflight", {
          startTime: n[T.FETCH_START]
        });
        i._getConfig().ignoreNetworkEvents || pe(a, n), a.end(n[T.RESPONSE_END]);
      });
    }, t.prototype._addFinalSpanAttributes = function(r, n, i) {
      if (typeof i == "string") {
        var a = H(i);
        n.status !== void 0 && r.setAttribute(_e.HTTP_STATUS_CODE, n.status), n.statusText !== void 0 && r.setAttribute(Lt.HTTP_STATUS_TEXT, n.statusText), r.setAttribute(_e.HTTP_HOST, a.host), r.setAttribute(_e.HTTP_SCHEME, a.protocol.replace(":", "")), r.setAttribute(_e.HTTP_USER_AGENT, navigator.userAgent);
      }
    }, t.prototype._applyAttributesAfterXHR = function(r, n) {
      var i = this, a = this._getConfig().applyCustomAttributesOnSpan;
      typeof a == "function" && ze(function() {
        return a(r, n);
      }, function(o) {
        o && i._diag.error("applyCustomAttributesOnSpan", o);
      }, !0);
    }, t.prototype._addResourceObserver = function(r, n) {
      var i = this._xhrMem.get(r);
      !i || typeof PerformanceObserver != "function" || typeof PerformanceResourceTiming != "function" || (i.createdResources = {
        observer: new PerformanceObserver(function(a) {
          var o = a.getEntries(), s = H(n);
          o.forEach(function(u) {
            u.initiatorType === "xmlhttprequest" && u.name === s.href && i.createdResources && i.createdResources.entries.push(u);
          });
        }),
        entries: []
      }, i.createdResources.observer.observe({
        entryTypes: ["resource"]
      }));
    }, t.prototype._clearResources = function() {
      this._tasksCount === 0 && this._getConfig().clearTimingResources && (D.clearResourceTimings(), this._xhrMem = /* @__PURE__ */ new WeakMap(), this._usedResources = /* @__PURE__ */ new WeakSet());
    }, t.prototype._findResourceAndAddNetworkEvents = function(r, n, i, a, o) {
      if (!(!i || !a || !o || !r.createdResources)) {
        var s = r.createdResources.entries;
        (!s || !s.length) && (s = D.getEntriesByType("resource"));
        var u = tn(H(i).href, a, o, s, this._usedResources);
        if (u.mainRequest) {
          var _ = u.mainRequest;
          this._markResourceAsUsed(_);
          var c = u.corsPreFlightRequest;
          c && (this._addChildSpan(n, c), this._markResourceAsUsed(c)), this._getConfig().ignoreNetworkEvents || pe(n, _);
        }
      }
    }, t.prototype._cleanPreviousSpanInformation = function(r) {
      var n = this._xhrMem.get(r);
      if (n) {
        var i = n.callbackToRemoveEvents;
        i && i(), this._xhrMem.delete(r);
      }
    }, t.prototype._createSpan = function(r, n, i) {
      var a;
      if (qr(n, this._getConfig().ignoreUrls)) {
        this._diag.debug("ignoring span as url matches ignored url");
        return;
      }
      var o = i.toUpperCase(), s = this.tracer.startSpan(o, {
        kind: Ie.CLIENT,
        attributes: (a = {}, a[_e.HTTP_METHOD] = i, a[_e.HTTP_URL] = H(n).toString(), a)
      });
      return s.addEvent(V.METHOD_OPEN), this._cleanPreviousSpanInformation(r), this._xhrMem.set(r, {
        span: s,
        spanUrl: n
      }), s;
    }, t.prototype._markResourceAsUsed = function(r) {
      this._usedResources.add(r);
    }, t.prototype._patchOpen = function() {
      var r = this;
      return function(n) {
        var i = r;
        return function() {
          for (var o = [], s = 0; s < arguments.length; s++)
            o[s] = arguments[s];
          var u = o[0], _ = o[1];
          return i._createSpan(this, _, u), n.apply(this, o);
        };
      };
    }, t.prototype._patchSend = function() {
      var r = this;
      function n(c, E, f, h) {
        var p = E.callbackToRemoveEvents;
        typeof p == "function" && p();
        var v = E.span, m = E.spanUrl, A = E.sendStartTime;
        v && (r._findResourceAndAddNetworkEvents(E, v, m, A, f), v.addEvent(c, h), r._addFinalSpanAttributes(v, E, m), v.end(h), r._tasksCount--), r._clearResources();
      }
      function i(c, E) {
        var f = r._xhrMem.get(E);
        if (f) {
          f.status = E.status, f.statusText = E.statusText, r._xhrMem.delete(E), f.span && r._applyAttributesAfterXHR(f.span, E);
          var h = Ee(), p = Date.now();
          setTimeout(function() {
            n(c, f, h, p);
          }, cT);
        }
      }
      function a() {
        i(V.EVENT_ERROR, this);
      }
      function o() {
        i(V.EVENT_ABORT, this);
      }
      function s() {
        i(V.EVENT_TIMEOUT, this);
      }
      function u() {
        this.status < 299 ? i(V.EVENT_LOAD, this) : i(V.EVENT_ERROR, this);
      }
      function _(c) {
        c.removeEventListener("abort", o), c.removeEventListener("error", a), c.removeEventListener("load", u), c.removeEventListener("timeout", s);
        var E = r._xhrMem.get(c);
        E && (E.callbackToRemoveEvents = void 0);
      }
      return function(c) {
        return function() {
          for (var f = this, h = [], p = 0; p < arguments.length; p++)
            h[p] = arguments[p];
          var v = r._xhrMem.get(this);
          if (!v)
            return c.apply(this, h);
          var m = v.span, A = v.spanUrl;
          return m && A && O.with(P.setSpan(O.active(), m), function() {
            r._tasksCount++, v.sendStartTime = Ee(), m.addEvent(V.METHOD_SEND), f.addEventListener("abort", o), f.addEventListener("error", a), f.addEventListener("load", u), f.addEventListener("timeout", s), v.callbackToRemoveEvents = function() {
              _(f), v.createdResources && v.createdResources.observer.disconnect();
            }, r._addHeaders(f, A), r._addResourceObserver(f, A);
          }), c.apply(this, h);
        };
      };
    }, t.prototype.enable = function() {
      this._diag.debug("applying patch to", this.moduleName, this.version), re(XMLHttpRequest.prototype.open) && (this._unwrap(XMLHttpRequest.prototype, "open"), this._diag.debug("removing previous patch from method open")), re(XMLHttpRequest.prototype.send) && (this._unwrap(XMLHttpRequest.prototype, "send"), this._diag.debug("removing previous patch from method send")), this._wrap(XMLHttpRequest.prototype, "open", this._patchOpen()), this._wrap(XMLHttpRequest.prototype, "send", this._patchSend());
    }, t.prototype.disable = function() {
      this._diag.debug("removing patch from", this.moduleName, this.version), this._unwrap(XMLHttpRequest.prototype, "open"), this._unwrap(XMLHttpRequest.prototype, "send"), this._tasksCount = 0, this._xhrMem = /* @__PURE__ */ new WeakMap(), this._usedResources = /* @__PURE__ */ new WeakSet();
    }, t;
  }(nt)
), ET = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
}, _n = 1e4, fT = 5, pT = 1e3, lT = 5e3, TT = 1.5;
function hT(e) {
  e === void 0 && (e = {});
  var t = {};
  return Object.entries(e).forEach(function(r) {
    var n = ET(r, 2), i = n[0], a = n[1];
    typeof a != "undefined" ? t[i] = String(a) : S.warn('Header "' + i + '" has wrong value and will be ignored');
  }), t;
}
function vT(e, t) {
  return e.endsWith("/") || (e = e + "/"), e + t;
}
function ST(e) {
  try {
    var t = new URL(e);
    return t.pathname === "" && (t.pathname = t.pathname + "/"), t.toString();
  } catch (r) {
    return S.warn("Could not parse export URL: '" + e + "'"), e;
  }
}
function AT(e) {
  return typeof e == "number" ? e <= 0 ? cn(e, _n) : e : OT();
}
function OT() {
  var e, t = Number((e = g().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT) !== null && e !== void 0 ? e : g().OTEL_EXPORTER_OTLP_TIMEOUT);
  return t <= 0 ? cn(t, _n) : t;
}
function cn(e, t) {
  return S.warn("Timeout must be greater than 0", e), t;
}
function mT(e) {
  var t = [429, 502, 503, 504];
  return t.includes(e);
}
function NT(e) {
  if (e == null)
    return -1;
  var t = Number.parseInt(e, 10);
  if (Number.isInteger(t))
    return t > 0 ? t * 1e3 : -1;
  var r = new Date(e).getTime() - Date.now();
  return r >= 0 ? r : 0;
}
var PT = (
  /** @class */
  function() {
    function e(t) {
      t === void 0 && (t = {}), this._sendingPromises = [], this.url = this.getDefaultUrl(t), typeof t.hostname == "string" && (this.hostname = t.hostname), this.shutdown = this.shutdown.bind(this), this._shutdownOnce = new jt(this._shutdown, this), this._concurrencyLimit = typeof t.concurrencyLimit == "number" ? t.concurrencyLimit : 30, this.timeoutMillis = AT(t.timeoutMillis), this.onInit(t);
    }
    return e.prototype.export = function(t, r) {
      if (this._shutdownOnce.isCalled) {
        r({
          code: W.FAILED,
          error: new Error("Exporter has been shutdown")
        });
        return;
      }
      if (this._sendingPromises.length >= this._concurrencyLimit) {
        r({
          code: W.FAILED,
          error: new Error("Concurrent export limit reached")
        });
        return;
      }
      this._export(t).then(function() {
        r({ code: W.SUCCESS });
      }).catch(function(n) {
        r({ code: W.FAILED, error: n });
      });
    }, e.prototype._export = function(t) {
      var r = this;
      return new Promise(function(n, i) {
        try {
          S.debug("items to be sent", t), r.send(t, n, i);
        } catch (a) {
          i(a);
        }
      });
    }, e.prototype.shutdown = function() {
      return this._shutdownOnce.call();
    }, e.prototype.forceFlush = function() {
      return Promise.all(this._sendingPromises).then(function() {
      });
    }, e.prototype._shutdown = function() {
      return S.debug("shutdown started"), this.onShutdown(), this.forceFlush();
    }, e;
  }()
), yT = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Oe = (
  /** @class */
  function(e) {
    yT(t, e);
    function t(r, n, i) {
      var a = e.call(this, r) || this;
      return a.name = "OTLPExporterError", a.data = i, a.code = n, a;
    }
    return t;
  }(Error)
), Ze = function() {
  return Ze = Object.assign || function(e) {
    for (var t, r = 1, n = arguments.length; r < n; r++) {
      t = arguments[r];
      for (var i in t)
        Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Ze.apply(this, arguments);
}, gT = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
};
function RT(e, t, r, n, i) {
  if (navigator.sendBeacon(t, new Blob([e], r)))
    S.debug("sendBeacon - can send", e), n();
  else {
    var a = new Oe("sendBeacon - cannot send " + e);
    i(a);
  }
}
function MT(e, t, r, n, i, a) {
  var o, s, u = !1, _ = setTimeout(function() {
    if (clearTimeout(o), u = !0, s.readyState === XMLHttpRequest.DONE) {
      var E = new Oe("Request Timeout");
      a(E);
    } else
      s.abort();
  }, n), c = function(E, f) {
    E === void 0 && (E = fT), f === void 0 && (f = pT), s = new XMLHttpRequest(), s.open("POST", t);
    var h = {
      Accept: "application/json",
      "Content-Type": "application/json"
    };
    Object.entries(Ze(Ze({}, h), r)).forEach(function(p) {
      var v = gT(p, 2), m = v[0], A = v[1];
      s.setRequestHeader(m, A);
    }), s.send(e), s.onreadystatechange = function() {
      if (s.readyState === XMLHttpRequest.DONE && u === !1)
        if (s.status >= 200 && s.status <= 299)
          S.debug("xhr success", e), i(), clearTimeout(_), clearTimeout(o);
        else if (s.status && mT(s.status) && E > 0) {
          var p = void 0;
          f = TT * f, s.getResponseHeader("Retry-After") ? p = NT(s.getResponseHeader("Retry-After")) : p = Math.round(Math.random() * (lT - f) + f), o = setTimeout(function() {
            c(E - 1, f);
          }, p);
        } else {
          var v = new Oe("Failed to export with XHR (status: " + s.status + ")", s.status);
          a(v), clearTimeout(_), clearTimeout(o);
        }
    }, s.onabort = function() {
      if (u) {
        var p = new Oe("Request Timeout");
        a(p);
      }
      clearTimeout(_), clearTimeout(o);
    }, s.onerror = function() {
      if (u) {
        var p = new Oe("Request Timeout");
        a(p);
      }
      clearTimeout(_), clearTimeout(o);
    };
  };
  c();
}
var IT = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), CT = (
  /** @class */
  function(e) {
    IT(t, e);
    function t(r) {
      r === void 0 && (r = {});
      var n = e.call(this, r) || this;
      return n._useXHR = !1, n._useXHR = !!r.headers || typeof navigator.sendBeacon != "function", n._useXHR ? n._headers = Object.assign({}, hT(r.headers), br(g().OTEL_EXPORTER_OTLP_HEADERS)) : n._headers = {}, n;
    }
    return t.prototype.onInit = function() {
    }, t.prototype.onShutdown = function() {
    }, t.prototype.send = function(r, n, i) {
      var a = this;
      if (this._shutdownOnce.isCalled) {
        S.debug("Shutdown already started. Cannot send objects");
        return;
      }
      var o = this.convert(r), s = JSON.stringify(o), u = new Promise(function(c, E) {
        a._useXHR ? MT(s, a.url, a._headers, a.timeoutMillis, c, E) : RT(s, a.url, { type: "application/json" }, c, E);
      }).then(n, i);
      this._sendingPromises.push(u);
      var _ = function() {
        var c = a._sendingPromises.indexOf(u);
        a._sendingPromises.splice(c, 1);
      };
      u.then(_, _);
    }, t;
  }(PT)
);
function dn(e) {
  var t = BigInt(1e9);
  return BigInt(e[0]) * t + BigInt(e[1]);
}
function LT(e) {
  var t = Number(BigInt.asUintN(32, e)), r = Number(BigInt.asUintN(32, e >> BigInt(32)));
  return { low: t, high: r };
}
function En(e) {
  var t = dn(e);
  return LT(t);
}
function bT(e) {
  var t = dn(e);
  return t.toString();
}
var DT = typeof BigInt != "undefined" ? bT : X;
function fr(e) {
  return e;
}
function fn(e) {
  if (e !== void 0)
    return Vt(e);
}
var wT = {
  encodeHrTime: En,
  encodeSpanContext: Vt,
  encodeOptionalSpanContext: fn
};
function xT(e) {
  var t, r;
  if (e === void 0)
    return wT;
  var n = (t = e.useLongBits) !== null && t !== void 0 ? t : !0, i = (r = e.useHex) !== null && r !== void 0 ? r : !1;
  return {
    encodeHrTime: n ? En : DT,
    encodeSpanContext: i ? fr : Vt,
    encodeOptionalSpanContext: i ? fr : fn
  };
}
var UT = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
};
function it(e) {
  return Object.keys(e).map(function(t) {
    return pn(t, e[t]);
  });
}
function pn(e, t) {
  return {
    key: e,
    value: ln(t)
  };
}
function ln(e) {
  var t = typeof e;
  return t === "string" ? { stringValue: e } : t === "number" ? Number.isInteger(e) ? { intValue: e } : { doubleValue: e } : t === "boolean" ? { boolValue: e } : e instanceof Uint8Array ? { bytesValue: e } : Array.isArray(e) ? { arrayValue: { values: e.map(ln) } } : t === "object" && e != null ? {
    kvlistValue: {
      values: Object.entries(e).map(function(r) {
        var n = UT(r, 2), i = n[0], a = n[1];
        return pn(i, a);
      })
    }
  } : {};
}
function BT(e, t) {
  var r, n = e.spanContext(), i = e.status;
  return {
    traceId: t.encodeSpanContext(n.traceId),
    spanId: t.encodeSpanContext(n.spanId),
    parentSpanId: t.encodeOptionalSpanContext(e.parentSpanId),
    traceState: (r = n.traceState) === null || r === void 0 ? void 0 : r.serialize(),
    name: e.name,
    // Span kind is offset by 1 because the API does not define a value for unset
    kind: e.kind == null ? 0 : e.kind + 1,
    startTimeUnixNano: t.encodeHrTime(e.startTime),
    endTimeUnixNano: t.encodeHrTime(e.endTime),
    attributes: it(e.attributes),
    droppedAttributesCount: e.droppedAttributesCount,
    events: e.events.map(function(a) {
      return kT(a, t);
    }),
    droppedEventsCount: e.droppedEventsCount,
    status: {
      // API and proto enums share the same values
      code: i.code,
      message: i.message
    },
    links: e.links.map(function(a) {
      return GT(a, t);
    }),
    droppedLinksCount: e.droppedLinksCount
  };
}
function GT(e, t) {
  var r;
  return {
    attributes: e.attributes ? it(e.attributes) : [],
    spanId: t.encodeSpanContext(e.context.spanId),
    traceId: t.encodeSpanContext(e.context.traceId),
    traceState: (r = e.context.traceState) === null || r === void 0 ? void 0 : r.serialize(),
    droppedAttributesCount: e.droppedAttributesCount || 0
  };
}
function kT(e, t) {
  return {
    attributes: e.attributes ? it(e.attributes) : [],
    name: e.name,
    timeUnixNano: t.encodeHrTime(e.time),
    droppedAttributesCount: e.droppedAttributesCount || 0
  };
}
var $T = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r)
    return r.call(e);
  if (e && typeof e.length == "number")
    return {
      next: function() {
        return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
      }
    };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, FT = function(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r)
    return e;
  var n = r.call(e), i, a = [], o;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
      a.push(i.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return a;
};
function VT(e, t) {
  var r = xT(t);
  return {
    resourceSpans: YT(e, r)
  };
}
function HT(e) {
  var t, r, n = /* @__PURE__ */ new Map();
  try {
    for (var i = $T(e), a = i.next(); !a.done; a = i.next()) {
      var o = a.value, s = n.get(o.resource);
      s || (s = /* @__PURE__ */ new Map(), n.set(o.resource, s));
      var u = o.instrumentationLibrary.name + "@" + (o.instrumentationLibrary.version || "") + ":" + (o.instrumentationLibrary.schemaUrl || ""), _ = s.get(u);
      _ || (_ = [], s.set(u, _)), _.push(o);
    }
  } catch (c) {
    t = { error: c };
  } finally {
    try {
      a && !a.done && (r = i.return) && r.call(i);
    } finally {
      if (t)
        throw t.error;
    }
  }
  return n;
}
function YT(e, t) {
  for (var r = HT(e), n = [], i = r.entries(), a = i.next(); !a.done; ) {
    for (var o = FT(a.value, 2), s = o[0], u = o[1], _ = [], c = u.values(), E = c.next(); !E.done; ) {
      var f = E.value;
      if (f.length > 0) {
        var h = f[0].instrumentationLibrary, p = h.name, v = h.version, m = h.schemaUrl, A = f.map(function(C) {
          return BT(C, t);
        });
        _.push({
          scope: { name: p, version: v },
          spans: A,
          schemaUrl: m
        });
      }
      E = c.next();
    }
    var N = {
      resource: {
        attributes: it(s.attributes),
        droppedAttributesCount: 0
      },
      scopeSpans: _,
      schemaUrl: void 0
    };
    n.push(N), a = i.next();
  }
  return n;
}
var jT = /* @__PURE__ */ function() {
  var e = function(t, r) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (n[a] = i[a]);
    }, e(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Tn = "v1/traces", XT = "http://localhost:4318/" + Tn, WT = (
  /** @class */
  function(e) {
    jT(t, e);
    function t(r) {
      r === void 0 && (r = {});
      var n = e.call(this, r) || this;
      return n._headers = Object.assign(n._headers, br(g().OTEL_EXPORTER_OTLP_TRACES_HEADERS)), n;
    }
    return t.prototype.convert = function(r) {
      return VT(r, {
        useHex: !0,
        useLongBits: !1
      });
    }, t.prototype.getDefaultUrl = function(r) {
      return typeof r.url == "string" ? r.url : g().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length > 0 ? ST(g().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT) : g().OTEL_EXPORTER_OTLP_ENDPOINT.length > 0 ? vT(g().OTEL_EXPORTER_OTLP_ENDPOINT, Tn) : XT;
    }, t;
  }(CT)
), KT = "deployment.environment", qT = "service.name", zT = KT, JT = qT;
function mt(e, t) {
  if (!!!e)
    throw new Error(t);
}
function QT(e) {
  return typeof e == "object" && e !== null;
}
function ZT(e, t) {
  if (!!!e)
    throw new Error(
      t != null ? t : "Unexpected invariant triggered."
    );
}
const eh = /\r\n|[\n\r]/g;
function bt(e, t) {
  let r = 0, n = 1;
  for (const i of e.body.matchAll(eh)) {
    if (typeof i.index == "number" || ZT(!1), i.index >= t)
      break;
    r = i.index + i[0].length, n += 1;
  }
  return {
    line: n,
    column: t + 1 - r
  };
}
function th(e) {
  return hn(
    e.source,
    bt(e.source, e.start)
  );
}
function hn(e, t) {
  const r = e.locationOffset.column - 1, n = "".padStart(r) + e.body, i = t.line - 1, a = e.locationOffset.line - 1, o = t.line + a, s = t.line === 1 ? r : 0, u = t.column + s, _ = `${e.name}:${o}:${u}
`, c = n.split(/\r\n|[\n\r]/g), E = c[i];
  if (E.length > 120) {
    const f = Math.floor(u / 80), h = u % 80, p = [];
    for (let v = 0; v < E.length; v += 80)
      p.push(E.slice(v, v + 80));
    return _ + pr([
      [`${o} |`, p[0]],
      ...p.slice(1, f + 1).map((v) => ["|", v]),
      ["|", "^".padStart(h)],
      ["|", p[f + 1]]
    ]);
  }
  return _ + pr([
    // Lines specified like this: ["prefix", "string"],
    [`${o - 1} |`, c[i - 1]],
    [`${o} |`, E],
    ["|", "^".padStart(u)],
    [`${o + 1} |`, c[i + 1]]
  ]);
}
function pr(e) {
  const t = e.filter(([n, i]) => i !== void 0), r = Math.max(...t.map(([n]) => n.length));
  return t.map(([n, i]) => n.padStart(r) + (i ? " " + i : "")).join(`
`);
}
function rh(e) {
  const t = e[0];
  return t == null || "kind" in t || "length" in t ? {
    nodes: t,
    source: e[1],
    positions: e[2],
    path: e[3],
    originalError: e[4],
    extensions: e[5]
  } : t;
}
class Xt extends Error {
  /**
   * An array of `{ line, column }` locations within the source GraphQL document
   * which correspond to this error.
   *
   * Errors during validation often contain multiple locations, for example to
   * point out two things with the same name. Errors during execution include a
   * single location, the field which produced the error.
   *
   * Enumerable, and appears in the result of JSON.stringify().
   */
  /**
   * An array describing the JSON-path into the execution response which
   * corresponds to this error. Only included for errors during execution.
   *
   * Enumerable, and appears in the result of JSON.stringify().
   */
  /**
   * An array of GraphQL AST Nodes corresponding to this error.
   */
  /**
   * The source GraphQL document for the first location of this error.
   *
   * Note that if this Error represents more than one node, the source may not
   * represent nodes after the first node.
   */
  /**
   * An array of character offsets within the source GraphQL document
   * which correspond to this error.
   */
  /**
   * The original error thrown from a field resolver during execution.
   */
  /**
   * Extension fields to add to the formatted error.
   */
  /**
   * @deprecated Please use the `GraphQLErrorOptions` constructor overload instead.
   */
  constructor(t, ...r) {
    var n, i, a;
    const { nodes: o, source: s, positions: u, path: _, originalError: c, extensions: E } = rh(r);
    super(t), this.name = "GraphQLError", this.path = _ != null ? _ : void 0, this.originalError = c != null ? c : void 0, this.nodes = lr(
      Array.isArray(o) ? o : o ? [o] : void 0
    );
    const f = lr(
      (n = this.nodes) === null || n === void 0 ? void 0 : n.map((p) => p.loc).filter((p) => p != null)
    );
    this.source = s != null ? s : f == null || (i = f[0]) === null || i === void 0 ? void 0 : i.source, this.positions = u != null ? u : f == null ? void 0 : f.map((p) => p.start), this.locations = u && s ? u.map((p) => bt(s, p)) : f == null ? void 0 : f.map((p) => bt(p.source, p.start));
    const h = QT(
      c == null ? void 0 : c.extensions
    ) ? c == null ? void 0 : c.extensions : void 0;
    this.extensions = (a = E != null ? E : h) !== null && a !== void 0 ? a : /* @__PURE__ */ Object.create(null), Object.defineProperties(this, {
      message: {
        writable: !0,
        enumerable: !0
      },
      name: {
        enumerable: !1
      },
      nodes: {
        enumerable: !1
      },
      source: {
        enumerable: !1
      },
      positions: {
        enumerable: !1
      },
      originalError: {
        enumerable: !1
      }
    }), c != null && c.stack ? Object.defineProperty(this, "stack", {
      value: c.stack,
      writable: !0,
      configurable: !0
    }) : Error.captureStackTrace ? Error.captureStackTrace(this, Xt) : Object.defineProperty(this, "stack", {
      value: Error().stack,
      writable: !0,
      configurable: !0
    });
  }
  get [Symbol.toStringTag]() {
    return "GraphQLError";
  }
  toString() {
    let t = this.message;
    if (this.nodes)
      for (const r of this.nodes)
        r.loc && (t += `

` + th(r.loc));
    else if (this.source && this.locations)
      for (const r of this.locations)
        t += `

` + hn(this.source, r);
    return t;
  }
  toJSON() {
    const t = {
      message: this.message
    };
    return this.locations != null && (t.locations = this.locations), this.path != null && (t.path = this.path), this.extensions != null && Object.keys(this.extensions).length > 0 && (t.extensions = this.extensions), t;
  }
}
function lr(e) {
  return e === void 0 || e.length === 0 ? void 0 : e;
}
function I(e, t, r) {
  return new Xt(`Syntax Error: ${r}`, {
    source: e,
    positions: [t]
  });
}
class nh {
  /**
   * The character offset at which this Node begins.
   */
  /**
   * The character offset at which this Node ends.
   */
  /**
   * The Token at which this Node begins.
   */
  /**
   * The Token at which this Node ends.
   */
  /**
   * The Source document the AST represents.
   */
  constructor(t, r, n) {
    this.start = t.start, this.end = r.end, this.startToken = t, this.endToken = r, this.source = n;
  }
  get [Symbol.toStringTag]() {
    return "Location";
  }
  toJSON() {
    return {
      start: this.start,
      end: this.end
    };
  }
}
class vn {
  /**
   * The kind of Token.
   */
  /**
   * The character offset at which this Node begins.
   */
  /**
   * The character offset at which this Node ends.
   */
  /**
   * The 1-indexed line number on which this Token appears.
   */
  /**
   * The 1-indexed column number at which this Token begins.
   */
  /**
   * For non-punctuation tokens, represents the interpreted value of the token.
   *
   * Note: is undefined for punctuation tokens, but typed as string for
   * convenience in the parser.
   */
  /**
   * Tokens exist as nodes in a double-linked-list amongst all tokens
   * including ignored tokens. <SOF> is always the first node and <EOF>
   * the last.
   */
  constructor(t, r, n, i, a, o) {
    this.kind = t, this.start = r, this.end = n, this.line = i, this.column = a, this.value = o, this.prev = null, this.next = null;
  }
  get [Symbol.toStringTag]() {
    return "Token";
  }
  toJSON() {
    return {
      kind: this.kind,
      value: this.value,
      line: this.line,
      column: this.column
    };
  }
}
const ih = {
  Name: [],
  Document: ["definitions"],
  OperationDefinition: [
    "name",
    "variableDefinitions",
    "directives",
    "selectionSet"
  ],
  VariableDefinition: ["variable", "type", "defaultValue", "directives"],
  Variable: ["name"],
  SelectionSet: ["selections"],
  Field: ["alias", "name", "arguments", "directives", "selectionSet"],
  Argument: ["name", "value"],
  FragmentSpread: ["name", "directives"],
  InlineFragment: ["typeCondition", "directives", "selectionSet"],
  FragmentDefinition: [
    "name",
    // Note: fragment variable definitions are deprecated and will removed in v17.0.0
    "variableDefinitions",
    "typeCondition",
    "directives",
    "selectionSet"
  ],
  IntValue: [],
  FloatValue: [],
  StringValue: [],
  BooleanValue: [],
  NullValue: [],
  EnumValue: [],
  ListValue: ["values"],
  ObjectValue: ["fields"],
  ObjectField: ["name", "value"],
  Directive: ["name", "arguments"],
  NamedType: ["name"],
  ListType: ["type"],
  NonNullType: ["type"],
  SchemaDefinition: ["description", "directives", "operationTypes"],
  OperationTypeDefinition: ["type"],
  ScalarTypeDefinition: ["description", "name", "directives"],
  ObjectTypeDefinition: [
    "description",
    "name",
    "interfaces",
    "directives",
    "fields"
  ],
  FieldDefinition: ["description", "name", "arguments", "type", "directives"],
  InputValueDefinition: [
    "description",
    "name",
    "type",
    "defaultValue",
    "directives"
  ],
  InterfaceTypeDefinition: [
    "description",
    "name",
    "interfaces",
    "directives",
    "fields"
  ],
  UnionTypeDefinition: ["description", "name", "directives", "types"],
  EnumTypeDefinition: ["description", "name", "directives", "values"],
  EnumValueDefinition: ["description", "name", "directives"],
  InputObjectTypeDefinition: ["description", "name", "directives", "fields"],
  DirectiveDefinition: ["description", "name", "arguments", "locations"],
  SchemaExtension: ["directives", "operationTypes"],
  ScalarTypeExtension: ["name", "directives"],
  ObjectTypeExtension: ["name", "interfaces", "directives", "fields"],
  InterfaceTypeExtension: ["name", "interfaces", "directives", "fields"],
  UnionTypeExtension: ["name", "directives", "types"],
  EnumTypeExtension: ["name", "directives", "values"],
  InputObjectTypeExtension: ["name", "directives", "fields"]
};
new Set(Object.keys(ih));
var ce;
(function(e) {
  e.QUERY = "query", e.MUTATION = "mutation", e.SUBSCRIPTION = "subscription";
})(ce || (ce = {}));
var Dt;
(function(e) {
  e.QUERY = "QUERY", e.MUTATION = "MUTATION", e.SUBSCRIPTION = "SUBSCRIPTION", e.FIELD = "FIELD", e.FRAGMENT_DEFINITION = "FRAGMENT_DEFINITION", e.FRAGMENT_SPREAD = "FRAGMENT_SPREAD", e.INLINE_FRAGMENT = "INLINE_FRAGMENT", e.VARIABLE_DEFINITION = "VARIABLE_DEFINITION", e.SCHEMA = "SCHEMA", e.SCALAR = "SCALAR", e.OBJECT = "OBJECT", e.FIELD_DEFINITION = "FIELD_DEFINITION", e.ARGUMENT_DEFINITION = "ARGUMENT_DEFINITION", e.INTERFACE = "INTERFACE", e.UNION = "UNION", e.ENUM = "ENUM", e.ENUM_VALUE = "ENUM_VALUE", e.INPUT_OBJECT = "INPUT_OBJECT", e.INPUT_FIELD_DEFINITION = "INPUT_FIELD_DEFINITION";
})(Dt || (Dt = {}));
var l;
(function(e) {
  e.NAME = "Name", e.DOCUMENT = "Document", e.OPERATION_DEFINITION = "OperationDefinition", e.VARIABLE_DEFINITION = "VariableDefinition", e.SELECTION_SET = "SelectionSet", e.FIELD = "Field", e.ARGUMENT = "Argument", e.FRAGMENT_SPREAD = "FragmentSpread", e.INLINE_FRAGMENT = "InlineFragment", e.FRAGMENT_DEFINITION = "FragmentDefinition", e.VARIABLE = "Variable", e.INT = "IntValue", e.FLOAT = "FloatValue", e.STRING = "StringValue", e.BOOLEAN = "BooleanValue", e.NULL = "NullValue", e.ENUM = "EnumValue", e.LIST = "ListValue", e.OBJECT = "ObjectValue", e.OBJECT_FIELD = "ObjectField", e.DIRECTIVE = "Directive", e.NAMED_TYPE = "NamedType", e.LIST_TYPE = "ListType", e.NON_NULL_TYPE = "NonNullType", e.SCHEMA_DEFINITION = "SchemaDefinition", e.OPERATION_TYPE_DEFINITION = "OperationTypeDefinition", e.SCALAR_TYPE_DEFINITION = "ScalarTypeDefinition", e.OBJECT_TYPE_DEFINITION = "ObjectTypeDefinition", e.FIELD_DEFINITION = "FieldDefinition", e.INPUT_VALUE_DEFINITION = "InputValueDefinition", e.INTERFACE_TYPE_DEFINITION = "InterfaceTypeDefinition", e.UNION_TYPE_DEFINITION = "UnionTypeDefinition", e.ENUM_TYPE_DEFINITION = "EnumTypeDefinition", e.ENUM_VALUE_DEFINITION = "EnumValueDefinition", e.INPUT_OBJECT_TYPE_DEFINITION = "InputObjectTypeDefinition", e.DIRECTIVE_DEFINITION = "DirectiveDefinition", e.SCHEMA_EXTENSION = "SchemaExtension", e.SCALAR_TYPE_EXTENSION = "ScalarTypeExtension", e.OBJECT_TYPE_EXTENSION = "ObjectTypeExtension", e.INTERFACE_TYPE_EXTENSION = "InterfaceTypeExtension", e.UNION_TYPE_EXTENSION = "UnionTypeExtension", e.ENUM_TYPE_EXTENSION = "EnumTypeExtension", e.INPUT_OBJECT_TYPE_EXTENSION = "InputObjectTypeExtension";
})(l || (l = {}));
function ah(e) {
  return e === 9 || e === 32;
}
function Ce(e) {
  return e >= 48 && e <= 57;
}
function Sn(e) {
  return e >= 97 && e <= 122 || // A-Z
  e >= 65 && e <= 90;
}
function An(e) {
  return Sn(e) || e === 95;
}
function oh(e) {
  return Sn(e) || Ce(e) || e === 95;
}
function sh(e) {
  var t;
  let r = Number.MAX_SAFE_INTEGER, n = null, i = -1;
  for (let o = 0; o < e.length; ++o) {
    var a;
    const s = e[o], u = uh(s);
    u !== s.length && (n = (a = n) !== null && a !== void 0 ? a : o, i = o, o !== 0 && u < r && (r = u));
  }
  return e.map((o, s) => s === 0 ? o : o.slice(r)).slice(
    (t = n) !== null && t !== void 0 ? t : 0,
    i + 1
  );
}
function uh(e) {
  let t = 0;
  for (; t < e.length && ah(e.charCodeAt(t)); )
    ++t;
  return t;
}
var d;
(function(e) {
  e.SOF = "<SOF>", e.EOF = "<EOF>", e.BANG = "!", e.DOLLAR = "$", e.AMP = "&", e.PAREN_L = "(", e.PAREN_R = ")", e.SPREAD = "...", e.COLON = ":", e.EQUALS = "=", e.AT = "@", e.BRACKET_L = "[", e.BRACKET_R = "]", e.BRACE_L = "{", e.PIPE = "|", e.BRACE_R = "}", e.NAME = "Name", e.INT = "Int", e.FLOAT = "Float", e.STRING = "String", e.BLOCK_STRING = "BlockString", e.COMMENT = "Comment";
})(d || (d = {}));
class _h {
  /**
   * The previously focused non-ignored token.
   */
  /**
   * The currently focused non-ignored token.
   */
  /**
   * The (1-indexed) line containing the current token.
   */
  /**
   * The character offset at which the current line begins.
   */
  constructor(t) {
    const r = new vn(d.SOF, 0, 0, 0, 0);
    this.source = t, this.lastToken = r, this.token = r, this.line = 1, this.lineStart = 0;
  }
  get [Symbol.toStringTag]() {
    return "Lexer";
  }
  /**
   * Advances the token stream to the next non-ignored token.
   */
  advance() {
    return this.lastToken = this.token, this.token = this.lookahead();
  }
  /**
   * Looks ahead and returns the next non-ignored token, but does not change
   * the state of Lexer.
   */
  lookahead() {
    let t = this.token;
    if (t.kind !== d.EOF)
      do
        if (t.next)
          t = t.next;
        else {
          const r = dh(this, t.end);
          t.next = r, r.prev = t, t = r;
        }
      while (t.kind === d.COMMENT);
    return t;
  }
}
function ch(e) {
  return e === d.BANG || e === d.DOLLAR || e === d.AMP || e === d.PAREN_L || e === d.PAREN_R || e === d.SPREAD || e === d.COLON || e === d.EQUALS || e === d.AT || e === d.BRACKET_L || e === d.BRACKET_R || e === d.BRACE_L || e === d.PIPE || e === d.BRACE_R;
}
function Te(e) {
  return e >= 0 && e <= 55295 || e >= 57344 && e <= 1114111;
}
function at(e, t) {
  return On(e.charCodeAt(t)) && mn(e.charCodeAt(t + 1));
}
function On(e) {
  return e >= 55296 && e <= 56319;
}
function mn(e) {
  return e >= 56320 && e <= 57343;
}
function ae(e, t) {
  const r = e.source.body.codePointAt(t);
  if (r === void 0)
    return d.EOF;
  if (r >= 32 && r <= 126) {
    const n = String.fromCodePoint(r);
    return n === '"' ? `'"'` : `"${n}"`;
  }
  return "U+" + r.toString(16).toUpperCase().padStart(4, "0");
}
function R(e, t, r, n, i) {
  const a = e.line, o = 1 + r - e.lineStart;
  return new vn(t, r, n, a, o, i);
}
function dh(e, t) {
  const r = e.source.body, n = r.length;
  let i = t;
  for (; i < n; ) {
    const a = r.charCodeAt(i);
    switch (a) {
      case 65279:
      case 9:
      case 32:
      case 44:
        ++i;
        continue;
      case 10:
        ++i, ++e.line, e.lineStart = i;
        continue;
      case 13:
        r.charCodeAt(i + 1) === 10 ? i += 2 : ++i, ++e.line, e.lineStart = i;
        continue;
      case 35:
        return Eh(e, i);
      case 33:
        return R(e, d.BANG, i, i + 1);
      case 36:
        return R(e, d.DOLLAR, i, i + 1);
      case 38:
        return R(e, d.AMP, i, i + 1);
      case 40:
        return R(e, d.PAREN_L, i, i + 1);
      case 41:
        return R(e, d.PAREN_R, i, i + 1);
      case 46:
        if (r.charCodeAt(i + 1) === 46 && r.charCodeAt(i + 2) === 46)
          return R(e, d.SPREAD, i, i + 3);
        break;
      case 58:
        return R(e, d.COLON, i, i + 1);
      case 61:
        return R(e, d.EQUALS, i, i + 1);
      case 64:
        return R(e, d.AT, i, i + 1);
      case 91:
        return R(e, d.BRACKET_L, i, i + 1);
      case 93:
        return R(e, d.BRACKET_R, i, i + 1);
      case 123:
        return R(e, d.BRACE_L, i, i + 1);
      case 124:
        return R(e, d.PIPE, i, i + 1);
      case 125:
        return R(e, d.BRACE_R, i, i + 1);
      case 34:
        return r.charCodeAt(i + 1) === 34 && r.charCodeAt(i + 2) === 34 ? vh(e, i) : ph(e, i);
    }
    if (Ce(a) || a === 45)
      return fh(e, i, a);
    if (An(a))
      return Sh(e, i);
    throw I(
      e.source,
      i,
      a === 39 ? `Unexpected single quote character ('), did you mean to use a double quote (")?` : Te(a) || at(r, i) ? `Unexpected character: ${ae(e, i)}.` : `Invalid character: ${ae(e, i)}.`
    );
  }
  return R(e, d.EOF, n, n);
}
function Eh(e, t) {
  const r = e.source.body, n = r.length;
  let i = t + 1;
  for (; i < n; ) {
    const a = r.charCodeAt(i);
    if (a === 10 || a === 13)
      break;
    if (Te(a))
      ++i;
    else if (at(r, i))
      i += 2;
    else
      break;
  }
  return R(
    e,
    d.COMMENT,
    t,
    i,
    r.slice(t + 1, i)
  );
}
function fh(e, t, r) {
  const n = e.source.body;
  let i = t, a = r, o = !1;
  if (a === 45 && (a = n.charCodeAt(++i)), a === 48) {
    if (a = n.charCodeAt(++i), Ce(a))
      throw I(
        e.source,
        i,
        `Invalid number, unexpected digit after 0: ${ae(
          e,
          i
        )}.`
      );
  } else
    i = Nt(e, i, a), a = n.charCodeAt(i);
  if (a === 46 && (o = !0, a = n.charCodeAt(++i), i = Nt(e, i, a), a = n.charCodeAt(i)), (a === 69 || a === 101) && (o = !0, a = n.charCodeAt(++i), (a === 43 || a === 45) && (a = n.charCodeAt(++i)), i = Nt(e, i, a), a = n.charCodeAt(i)), a === 46 || An(a))
    throw I(
      e.source,
      i,
      `Invalid number, expected digit but got: ${ae(
        e,
        i
      )}.`
    );
  return R(
    e,
    o ? d.FLOAT : d.INT,
    t,
    i,
    n.slice(t, i)
  );
}
function Nt(e, t, r) {
  if (!Ce(r))
    throw I(
      e.source,
      t,
      `Invalid number, expected digit but got: ${ae(
        e,
        t
      )}.`
    );
  const n = e.source.body;
  let i = t + 1;
  for (; Ce(n.charCodeAt(i)); )
    ++i;
  return i;
}
function ph(e, t) {
  const r = e.source.body, n = r.length;
  let i = t + 1, a = i, o = "";
  for (; i < n; ) {
    const s = r.charCodeAt(i);
    if (s === 34)
      return o += r.slice(a, i), R(e, d.STRING, t, i + 1, o);
    if (s === 92) {
      o += r.slice(a, i);
      const u = r.charCodeAt(i + 1) === 117 ? r.charCodeAt(i + 2) === 123 ? lh(e, i) : Th(e, i) : hh(e, i);
      o += u.value, i += u.size, a = i;
      continue;
    }
    if (s === 10 || s === 13)
      break;
    if (Te(s))
      ++i;
    else if (at(r, i))
      i += 2;
    else
      throw I(
        e.source,
        i,
        `Invalid character within String: ${ae(
          e,
          i
        )}.`
      );
  }
  throw I(e.source, i, "Unterminated string.");
}
function lh(e, t) {
  const r = e.source.body;
  let n = 0, i = 3;
  for (; i < 12; ) {
    const a = r.charCodeAt(t + i++);
    if (a === 125) {
      if (i < 5 || !Te(n))
        break;
      return {
        value: String.fromCodePoint(n),
        size: i
      };
    }
    if (n = n << 4 | me(a), n < 0)
      break;
  }
  throw I(
    e.source,
    t,
    `Invalid Unicode escape sequence: "${r.slice(
      t,
      t + i
    )}".`
  );
}
function Th(e, t) {
  const r = e.source.body, n = Tr(r, t + 2);
  if (Te(n))
    return {
      value: String.fromCodePoint(n),
      size: 6
    };
  if (On(n) && r.charCodeAt(t + 6) === 92 && r.charCodeAt(t + 7) === 117) {
    const i = Tr(r, t + 8);
    if (mn(i))
      return {
        value: String.fromCodePoint(n, i),
        size: 12
      };
  }
  throw I(
    e.source,
    t,
    `Invalid Unicode escape sequence: "${r.slice(t, t + 6)}".`
  );
}
function Tr(e, t) {
  return me(e.charCodeAt(t)) << 12 | me(e.charCodeAt(t + 1)) << 8 | me(e.charCodeAt(t + 2)) << 4 | me(e.charCodeAt(t + 3));
}
function me(e) {
  return e >= 48 && e <= 57 ? e - 48 : e >= 65 && e <= 70 ? e - 55 : e >= 97 && e <= 102 ? e - 87 : -1;
}
function hh(e, t) {
  const r = e.source.body;
  switch (r.charCodeAt(t + 1)) {
    case 34:
      return {
        value: '"',
        size: 2
      };
    case 92:
      return {
        value: "\\",
        size: 2
      };
    case 47:
      return {
        value: "/",
        size: 2
      };
    case 98:
      return {
        value: "\b",
        size: 2
      };
    case 102:
      return {
        value: "\f",
        size: 2
      };
    case 110:
      return {
        value: `
`,
        size: 2
      };
    case 114:
      return {
        value: "\r",
        size: 2
      };
    case 116:
      return {
        value: "	",
        size: 2
      };
  }
  throw I(
    e.source,
    t,
    `Invalid character escape sequence: "${r.slice(
      t,
      t + 2
    )}".`
  );
}
function vh(e, t) {
  const r = e.source.body, n = r.length;
  let i = e.lineStart, a = t + 3, o = a, s = "";
  const u = [];
  for (; a < n; ) {
    const _ = r.charCodeAt(a);
    if (_ === 34 && r.charCodeAt(a + 1) === 34 && r.charCodeAt(a + 2) === 34) {
      s += r.slice(o, a), u.push(s);
      const c = R(
        e,
        d.BLOCK_STRING,
        t,
        a + 3,
        // Return a string of the lines joined with U+000A.
        sh(u).join(`
`)
      );
      return e.line += u.length - 1, e.lineStart = i, c;
    }
    if (_ === 92 && r.charCodeAt(a + 1) === 34 && r.charCodeAt(a + 2) === 34 && r.charCodeAt(a + 3) === 34) {
      s += r.slice(o, a), o = a + 1, a += 4;
      continue;
    }
    if (_ === 10 || _ === 13) {
      s += r.slice(o, a), u.push(s), _ === 13 && r.charCodeAt(a + 1) === 10 ? a += 2 : ++a, s = "", o = a, i = a;
      continue;
    }
    if (Te(_))
      ++a;
    else if (at(r, a))
      a += 2;
    else
      throw I(
        e.source,
        a,
        `Invalid character within String: ${ae(
          e,
          a
        )}.`
      );
  }
  throw I(e.source, a, "Unterminated string.");
}
function Sh(e, t) {
  const r = e.source.body, n = r.length;
  let i = t + 1;
  for (; i < n; ) {
    const a = r.charCodeAt(i);
    if (oh(a))
      ++i;
    else
      break;
  }
  return R(
    e,
    d.NAME,
    t,
    i,
    r.slice(t, i)
  );
}
const Ah = 10, Nn = 2;
function Pn(e) {
  return ot(e, []);
}
function ot(e, t) {
  switch (typeof e) {
    case "string":
      return JSON.stringify(e);
    case "function":
      return e.name ? `[function ${e.name}]` : "[function]";
    case "object":
      return Oh(e, t);
    default:
      return String(e);
  }
}
function Oh(e, t) {
  if (e === null)
    return "null";
  if (t.includes(e))
    return "[Circular]";
  const r = [...t, e];
  if (mh(e)) {
    const n = e.toJSON();
    if (n !== e)
      return typeof n == "string" ? n : ot(n, r);
  } else if (Array.isArray(e))
    return Ph(e, r);
  return Nh(e, r);
}
function mh(e) {
  return typeof e.toJSON == "function";
}
function Nh(e, t) {
  const r = Object.entries(e);
  return r.length === 0 ? "{}" : t.length > Nn ? "[" + yh(e) + "]" : "{ " + r.map(
    ([i, a]) => i + ": " + ot(a, t)
  ).join(", ") + " }";
}
function Ph(e, t) {
  if (e.length === 0)
    return "[]";
  if (t.length > Nn)
    return "[Array]";
  const r = Math.min(Ah, e.length), n = e.length - r, i = [];
  for (let a = 0; a < r; ++a)
    i.push(ot(e[a], t));
  return n === 1 ? i.push("... 1 more item") : n > 1 && i.push(`... ${n} more items`), "[" + i.join(", ") + "]";
}
function yh(e) {
  const t = Object.prototype.toString.call(e).replace(/^\[object /, "").replace(/]$/, "");
  if (t === "Object" && typeof e.constructor == "function") {
    const r = e.constructor.name;
    if (typeof r == "string" && r !== "")
      return r;
  }
  return t;
}
const gh = (
  /* c8 ignore next 6 */
  // FIXME: https://github.com/graphql/graphql-js/issues/2317
  globalThis.process && globalThis.process.env.NODE_ENV === "production" ? function(t, r) {
    return t instanceof r;
  } : function(t, r) {
    if (t instanceof r)
      return !0;
    if (typeof t == "object" && t !== null) {
      var n;
      const i = r.prototype[Symbol.toStringTag], a = (
        // We still need to support constructor's name to detect conflicts with older versions of this library.
        Symbol.toStringTag in t ? t[Symbol.toStringTag] : (n = t.constructor) === null || n === void 0 ? void 0 : n.name
      );
      if (i === a) {
        const o = Pn(t);
        throw new Error(`Cannot use ${i} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`);
      }
    }
    return !1;
  }
);
class yn {
  constructor(t, r = "GraphQL request", n = {
    line: 1,
    column: 1
  }) {
    typeof t == "string" || mt(!1, `Body must be a string. Received: ${Pn(t)}.`), this.body = t, this.name = r, this.locationOffset = n, this.locationOffset.line > 0 || mt(
      !1,
      "line in locationOffset is 1-indexed and must be positive."
    ), this.locationOffset.column > 0 || mt(
      !1,
      "column in locationOffset is 1-indexed and must be positive."
    );
  }
  get [Symbol.toStringTag]() {
    return "Source";
  }
}
function Rh(e) {
  return gh(e, yn);
}
function Mh(e, t) {
  return new Ih(e, t).parseDocument();
}
class Ih {
  constructor(t, r = {}) {
    const n = Rh(t) ? t : new yn(t);
    this._lexer = new _h(n), this._options = r, this._tokenCounter = 0;
  }
  /**
   * Converts a name lex token into a name parse node.
   */
  parseName() {
    const t = this.expectToken(d.NAME);
    return this.node(t, {
      kind: l.NAME,
      value: t.value
    });
  }
  // Implements the parsing rules in the Document section.
  /**
   * Document : Definition+
   */
  parseDocument() {
    return this.node(this._lexer.token, {
      kind: l.DOCUMENT,
      definitions: this.many(
        d.SOF,
        this.parseDefinition,
        d.EOF
      )
    });
  }
  /**
   * Definition :
   *   - ExecutableDefinition
   *   - TypeSystemDefinition
   *   - TypeSystemExtension
   *
   * ExecutableDefinition :
   *   - OperationDefinition
   *   - FragmentDefinition
   *
   * TypeSystemDefinition :
   *   - SchemaDefinition
   *   - TypeDefinition
   *   - DirectiveDefinition
   *
   * TypeDefinition :
   *   - ScalarTypeDefinition
   *   - ObjectTypeDefinition
   *   - InterfaceTypeDefinition
   *   - UnionTypeDefinition
   *   - EnumTypeDefinition
   *   - InputObjectTypeDefinition
   */
  parseDefinition() {
    if (this.peek(d.BRACE_L))
      return this.parseOperationDefinition();
    const t = this.peekDescription(), r = t ? this._lexer.lookahead() : this._lexer.token;
    if (r.kind === d.NAME) {
      switch (r.value) {
        case "schema":
          return this.parseSchemaDefinition();
        case "scalar":
          return this.parseScalarTypeDefinition();
        case "type":
          return this.parseObjectTypeDefinition();
        case "interface":
          return this.parseInterfaceTypeDefinition();
        case "union":
          return this.parseUnionTypeDefinition();
        case "enum":
          return this.parseEnumTypeDefinition();
        case "input":
          return this.parseInputObjectTypeDefinition();
        case "directive":
          return this.parseDirectiveDefinition();
      }
      if (t)
        throw I(
          this._lexer.source,
          this._lexer.token.start,
          "Unexpected description, descriptions are supported only on type definitions."
        );
      switch (r.value) {
        case "query":
        case "mutation":
        case "subscription":
          return this.parseOperationDefinition();
        case "fragment":
          return this.parseFragmentDefinition();
        case "extend":
          return this.parseTypeSystemExtension();
      }
    }
    throw this.unexpected(r);
  }
  // Implements the parsing rules in the Operations section.
  /**
   * OperationDefinition :
   *  - SelectionSet
   *  - OperationType Name? VariableDefinitions? Directives? SelectionSet
   */
  parseOperationDefinition() {
    const t = this._lexer.token;
    if (this.peek(d.BRACE_L))
      return this.node(t, {
        kind: l.OPERATION_DEFINITION,
        operation: ce.QUERY,
        name: void 0,
        variableDefinitions: [],
        directives: [],
        selectionSet: this.parseSelectionSet()
      });
    const r = this.parseOperationType();
    let n;
    return this.peek(d.NAME) && (n = this.parseName()), this.node(t, {
      kind: l.OPERATION_DEFINITION,
      operation: r,
      name: n,
      variableDefinitions: this.parseVariableDefinitions(),
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    });
  }
  /**
   * OperationType : one of query mutation subscription
   */
  parseOperationType() {
    const t = this.expectToken(d.NAME);
    switch (t.value) {
      case "query":
        return ce.QUERY;
      case "mutation":
        return ce.MUTATION;
      case "subscription":
        return ce.SUBSCRIPTION;
    }
    throw this.unexpected(t);
  }
  /**
   * VariableDefinitions : ( VariableDefinition+ )
   */
  parseVariableDefinitions() {
    return this.optionalMany(
      d.PAREN_L,
      this.parseVariableDefinition,
      d.PAREN_R
    );
  }
  /**
   * VariableDefinition : Variable : Type DefaultValue? Directives[Const]?
   */
  parseVariableDefinition() {
    return this.node(this._lexer.token, {
      kind: l.VARIABLE_DEFINITION,
      variable: this.parseVariable(),
      type: (this.expectToken(d.COLON), this.parseTypeReference()),
      defaultValue: this.expectOptionalToken(d.EQUALS) ? this.parseConstValueLiteral() : void 0,
      directives: this.parseConstDirectives()
    });
  }
  /**
   * Variable : $ Name
   */
  parseVariable() {
    const t = this._lexer.token;
    return this.expectToken(d.DOLLAR), this.node(t, {
      kind: l.VARIABLE,
      name: this.parseName()
    });
  }
  /**
   * ```
   * SelectionSet : { Selection+ }
   * ```
   */
  parseSelectionSet() {
    return this.node(this._lexer.token, {
      kind: l.SELECTION_SET,
      selections: this.many(
        d.BRACE_L,
        this.parseSelection,
        d.BRACE_R
      )
    });
  }
  /**
   * Selection :
   *   - Field
   *   - FragmentSpread
   *   - InlineFragment
   */
  parseSelection() {
    return this.peek(d.SPREAD) ? this.parseFragment() : this.parseField();
  }
  /**
   * Field : Alias? Name Arguments? Directives? SelectionSet?
   *
   * Alias : Name :
   */
  parseField() {
    const t = this._lexer.token, r = this.parseName();
    let n, i;
    return this.expectOptionalToken(d.COLON) ? (n = r, i = this.parseName()) : i = r, this.node(t, {
      kind: l.FIELD,
      alias: n,
      name: i,
      arguments: this.parseArguments(!1),
      directives: this.parseDirectives(!1),
      selectionSet: this.peek(d.BRACE_L) ? this.parseSelectionSet() : void 0
    });
  }
  /**
   * Arguments[Const] : ( Argument[?Const]+ )
   */
  parseArguments(t) {
    const r = t ? this.parseConstArgument : this.parseArgument;
    return this.optionalMany(d.PAREN_L, r, d.PAREN_R);
  }
  /**
   * Argument[Const] : Name : Value[?Const]
   */
  parseArgument(t = !1) {
    const r = this._lexer.token, n = this.parseName();
    return this.expectToken(d.COLON), this.node(r, {
      kind: l.ARGUMENT,
      name: n,
      value: this.parseValueLiteral(t)
    });
  }
  parseConstArgument() {
    return this.parseArgument(!0);
  }
  // Implements the parsing rules in the Fragments section.
  /**
   * Corresponds to both FragmentSpread and InlineFragment in the spec.
   *
   * FragmentSpread : ... FragmentName Directives?
   *
   * InlineFragment : ... TypeCondition? Directives? SelectionSet
   */
  parseFragment() {
    const t = this._lexer.token;
    this.expectToken(d.SPREAD);
    const r = this.expectOptionalKeyword("on");
    return !r && this.peek(d.NAME) ? this.node(t, {
      kind: l.FRAGMENT_SPREAD,
      name: this.parseFragmentName(),
      directives: this.parseDirectives(!1)
    }) : this.node(t, {
      kind: l.INLINE_FRAGMENT,
      typeCondition: r ? this.parseNamedType() : void 0,
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    });
  }
  /**
   * FragmentDefinition :
   *   - fragment FragmentName on TypeCondition Directives? SelectionSet
   *
   * TypeCondition : NamedType
   */
  parseFragmentDefinition() {
    const t = this._lexer.token;
    return this.expectKeyword("fragment"), this._options.allowLegacyFragmentVariables === !0 ? this.node(t, {
      kind: l.FRAGMENT_DEFINITION,
      name: this.parseFragmentName(),
      variableDefinitions: this.parseVariableDefinitions(),
      typeCondition: (this.expectKeyword("on"), this.parseNamedType()),
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    }) : this.node(t, {
      kind: l.FRAGMENT_DEFINITION,
      name: this.parseFragmentName(),
      typeCondition: (this.expectKeyword("on"), this.parseNamedType()),
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    });
  }
  /**
   * FragmentName : Name but not `on`
   */
  parseFragmentName() {
    if (this._lexer.token.value === "on")
      throw this.unexpected();
    return this.parseName();
  }
  // Implements the parsing rules in the Values section.
  /**
   * Value[Const] :
   *   - [~Const] Variable
   *   - IntValue
   *   - FloatValue
   *   - StringValue
   *   - BooleanValue
   *   - NullValue
   *   - EnumValue
   *   - ListValue[?Const]
   *   - ObjectValue[?Const]
   *
   * BooleanValue : one of `true` `false`
   *
   * NullValue : `null`
   *
   * EnumValue : Name but not `true`, `false` or `null`
   */
  parseValueLiteral(t) {
    const r = this._lexer.token;
    switch (r.kind) {
      case d.BRACKET_L:
        return this.parseList(t);
      case d.BRACE_L:
        return this.parseObject(t);
      case d.INT:
        return this.advanceLexer(), this.node(r, {
          kind: l.INT,
          value: r.value
        });
      case d.FLOAT:
        return this.advanceLexer(), this.node(r, {
          kind: l.FLOAT,
          value: r.value
        });
      case d.STRING:
      case d.BLOCK_STRING:
        return this.parseStringLiteral();
      case d.NAME:
        switch (this.advanceLexer(), r.value) {
          case "true":
            return this.node(r, {
              kind: l.BOOLEAN,
              value: !0
            });
          case "false":
            return this.node(r, {
              kind: l.BOOLEAN,
              value: !1
            });
          case "null":
            return this.node(r, {
              kind: l.NULL
            });
          default:
            return this.node(r, {
              kind: l.ENUM,
              value: r.value
            });
        }
      case d.DOLLAR:
        if (t)
          if (this.expectToken(d.DOLLAR), this._lexer.token.kind === d.NAME) {
            const n = this._lexer.token.value;
            throw I(
              this._lexer.source,
              r.start,
              `Unexpected variable "$${n}" in constant value.`
            );
          } else
            throw this.unexpected(r);
        return this.parseVariable();
      default:
        throw this.unexpected();
    }
  }
  parseConstValueLiteral() {
    return this.parseValueLiteral(!0);
  }
  parseStringLiteral() {
    const t = this._lexer.token;
    return this.advanceLexer(), this.node(t, {
      kind: l.STRING,
      value: t.value,
      block: t.kind === d.BLOCK_STRING
    });
  }
  /**
   * ListValue[Const] :
   *   - [ ]
   *   - [ Value[?Const]+ ]
   */
  parseList(t) {
    const r = () => this.parseValueLiteral(t);
    return this.node(this._lexer.token, {
      kind: l.LIST,
      values: this.any(d.BRACKET_L, r, d.BRACKET_R)
    });
  }
  /**
   * ```
   * ObjectValue[Const] :
   *   - { }
   *   - { ObjectField[?Const]+ }
   * ```
   */
  parseObject(t) {
    const r = () => this.parseObjectField(t);
    return this.node(this._lexer.token, {
      kind: l.OBJECT,
      fields: this.any(d.BRACE_L, r, d.BRACE_R)
    });
  }
  /**
   * ObjectField[Const] : Name : Value[?Const]
   */
  parseObjectField(t) {
    const r = this._lexer.token, n = this.parseName();
    return this.expectToken(d.COLON), this.node(r, {
      kind: l.OBJECT_FIELD,
      name: n,
      value: this.parseValueLiteral(t)
    });
  }
  // Implements the parsing rules in the Directives section.
  /**
   * Directives[Const] : Directive[?Const]+
   */
  parseDirectives(t) {
    const r = [];
    for (; this.peek(d.AT); )
      r.push(this.parseDirective(t));
    return r;
  }
  parseConstDirectives() {
    return this.parseDirectives(!0);
  }
  /**
   * ```
   * Directive[Const] : @ Name Arguments[?Const]?
   * ```
   */
  parseDirective(t) {
    const r = this._lexer.token;
    return this.expectToken(d.AT), this.node(r, {
      kind: l.DIRECTIVE,
      name: this.parseName(),
      arguments: this.parseArguments(t)
    });
  }
  // Implements the parsing rules in the Types section.
  /**
   * Type :
   *   - NamedType
   *   - ListType
   *   - NonNullType
   */
  parseTypeReference() {
    const t = this._lexer.token;
    let r;
    if (this.expectOptionalToken(d.BRACKET_L)) {
      const n = this.parseTypeReference();
      this.expectToken(d.BRACKET_R), r = this.node(t, {
        kind: l.LIST_TYPE,
        type: n
      });
    } else
      r = this.parseNamedType();
    return this.expectOptionalToken(d.BANG) ? this.node(t, {
      kind: l.NON_NULL_TYPE,
      type: r
    }) : r;
  }
  /**
   * NamedType : Name
   */
  parseNamedType() {
    return this.node(this._lexer.token, {
      kind: l.NAMED_TYPE,
      name: this.parseName()
    });
  }
  // Implements the parsing rules in the Type Definition section.
  peekDescription() {
    return this.peek(d.STRING) || this.peek(d.BLOCK_STRING);
  }
  /**
   * Description : StringValue
   */
  parseDescription() {
    if (this.peekDescription())
      return this.parseStringLiteral();
  }
  /**
   * ```
   * SchemaDefinition : Description? schema Directives[Const]? { OperationTypeDefinition+ }
   * ```
   */
  parseSchemaDefinition() {
    const t = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("schema");
    const n = this.parseConstDirectives(), i = this.many(
      d.BRACE_L,
      this.parseOperationTypeDefinition,
      d.BRACE_R
    );
    return this.node(t, {
      kind: l.SCHEMA_DEFINITION,
      description: r,
      directives: n,
      operationTypes: i
    });
  }
  /**
   * OperationTypeDefinition : OperationType : NamedType
   */
  parseOperationTypeDefinition() {
    const t = this._lexer.token, r = this.parseOperationType();
    this.expectToken(d.COLON);
    const n = this.parseNamedType();
    return this.node(t, {
      kind: l.OPERATION_TYPE_DEFINITION,
      operation: r,
      type: n
    });
  }
  /**
   * ScalarTypeDefinition : Description? scalar Name Directives[Const]?
   */
  parseScalarTypeDefinition() {
    const t = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("scalar");
    const n = this.parseName(), i = this.parseConstDirectives();
    return this.node(t, {
      kind: l.SCALAR_TYPE_DEFINITION,
      description: r,
      name: n,
      directives: i
    });
  }
  /**
   * ObjectTypeDefinition :
   *   Description?
   *   type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition?
   */
  parseObjectTypeDefinition() {
    const t = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("type");
    const n = this.parseName(), i = this.parseImplementsInterfaces(), a = this.parseConstDirectives(), o = this.parseFieldsDefinition();
    return this.node(t, {
      kind: l.OBJECT_TYPE_DEFINITION,
      description: r,
      name: n,
      interfaces: i,
      directives: a,
      fields: o
    });
  }
  /**
   * ImplementsInterfaces :
   *   - implements `&`? NamedType
   *   - ImplementsInterfaces & NamedType
   */
  parseImplementsInterfaces() {
    return this.expectOptionalKeyword("implements") ? this.delimitedMany(d.AMP, this.parseNamedType) : [];
  }
  /**
   * ```
   * FieldsDefinition : { FieldDefinition+ }
   * ```
   */
  parseFieldsDefinition() {
    return this.optionalMany(
      d.BRACE_L,
      this.parseFieldDefinition,
      d.BRACE_R
    );
  }
  /**
   * FieldDefinition :
   *   - Description? Name ArgumentsDefinition? : Type Directives[Const]?
   */
  parseFieldDefinition() {
    const t = this._lexer.token, r = this.parseDescription(), n = this.parseName(), i = this.parseArgumentDefs();
    this.expectToken(d.COLON);
    const a = this.parseTypeReference(), o = this.parseConstDirectives();
    return this.node(t, {
      kind: l.FIELD_DEFINITION,
      description: r,
      name: n,
      arguments: i,
      type: a,
      directives: o
    });
  }
  /**
   * ArgumentsDefinition : ( InputValueDefinition+ )
   */
  parseArgumentDefs() {
    return this.optionalMany(
      d.PAREN_L,
      this.parseInputValueDef,
      d.PAREN_R
    );
  }
  /**
   * InputValueDefinition :
   *   - Description? Name : Type DefaultValue? Directives[Const]?
   */
  parseInputValueDef() {
    const t = this._lexer.token, r = this.parseDescription(), n = this.parseName();
    this.expectToken(d.COLON);
    const i = this.parseTypeReference();
    let a;
    this.expectOptionalToken(d.EQUALS) && (a = this.parseConstValueLiteral());
    const o = this.parseConstDirectives();
    return this.node(t, {
      kind: l.INPUT_VALUE_DEFINITION,
      description: r,
      name: n,
      type: i,
      defaultValue: a,
      directives: o
    });
  }
  /**
   * InterfaceTypeDefinition :
   *   - Description? interface Name Directives[Const]? FieldsDefinition?
   */
  parseInterfaceTypeDefinition() {
    const t = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("interface");
    const n = this.parseName(), i = this.parseImplementsInterfaces(), a = this.parseConstDirectives(), o = this.parseFieldsDefinition();
    return this.node(t, {
      kind: l.INTERFACE_TYPE_DEFINITION,
      description: r,
      name: n,
      interfaces: i,
      directives: a,
      fields: o
    });
  }
  /**
   * UnionTypeDefinition :
   *   - Description? union Name Directives[Const]? UnionMemberTypes?
   */
  parseUnionTypeDefinition() {
    const t = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("union");
    const n = this.parseName(), i = this.parseConstDirectives(), a = this.parseUnionMemberTypes();
    return this.node(t, {
      kind: l.UNION_TYPE_DEFINITION,
      description: r,
      name: n,
      directives: i,
      types: a
    });
  }
  /**
   * UnionMemberTypes :
   *   - = `|`? NamedType
   *   - UnionMemberTypes | NamedType
   */
  parseUnionMemberTypes() {
    return this.expectOptionalToken(d.EQUALS) ? this.delimitedMany(d.PIPE, this.parseNamedType) : [];
  }
  /**
   * EnumTypeDefinition :
   *   - Description? enum Name Directives[Const]? EnumValuesDefinition?
   */
  parseEnumTypeDefinition() {
    const t = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("enum");
    const n = this.parseName(), i = this.parseConstDirectives(), a = this.parseEnumValuesDefinition();
    return this.node(t, {
      kind: l.ENUM_TYPE_DEFINITION,
      description: r,
      name: n,
      directives: i,
      values: a
    });
  }
  /**
   * ```
   * EnumValuesDefinition : { EnumValueDefinition+ }
   * ```
   */
  parseEnumValuesDefinition() {
    return this.optionalMany(
      d.BRACE_L,
      this.parseEnumValueDefinition,
      d.BRACE_R
    );
  }
  /**
   * EnumValueDefinition : Description? EnumValue Directives[Const]?
   */
  parseEnumValueDefinition() {
    const t = this._lexer.token, r = this.parseDescription(), n = this.parseEnumValueName(), i = this.parseConstDirectives();
    return this.node(t, {
      kind: l.ENUM_VALUE_DEFINITION,
      description: r,
      name: n,
      directives: i
    });
  }
  /**
   * EnumValue : Name but not `true`, `false` or `null`
   */
  parseEnumValueName() {
    if (this._lexer.token.value === "true" || this._lexer.token.value === "false" || this._lexer.token.value === "null")
      throw I(
        this._lexer.source,
        this._lexer.token.start,
        `${ke(
          this._lexer.token
        )} is reserved and cannot be used for an enum value.`
      );
    return this.parseName();
  }
  /**
   * InputObjectTypeDefinition :
   *   - Description? input Name Directives[Const]? InputFieldsDefinition?
   */
  parseInputObjectTypeDefinition() {
    const t = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("input");
    const n = this.parseName(), i = this.parseConstDirectives(), a = this.parseInputFieldsDefinition();
    return this.node(t, {
      kind: l.INPUT_OBJECT_TYPE_DEFINITION,
      description: r,
      name: n,
      directives: i,
      fields: a
    });
  }
  /**
   * ```
   * InputFieldsDefinition : { InputValueDefinition+ }
   * ```
   */
  parseInputFieldsDefinition() {
    return this.optionalMany(
      d.BRACE_L,
      this.parseInputValueDef,
      d.BRACE_R
    );
  }
  /**
   * TypeSystemExtension :
   *   - SchemaExtension
   *   - TypeExtension
   *
   * TypeExtension :
   *   - ScalarTypeExtension
   *   - ObjectTypeExtension
   *   - InterfaceTypeExtension
   *   - UnionTypeExtension
   *   - EnumTypeExtension
   *   - InputObjectTypeDefinition
   */
  parseTypeSystemExtension() {
    const t = this._lexer.lookahead();
    if (t.kind === d.NAME)
      switch (t.value) {
        case "schema":
          return this.parseSchemaExtension();
        case "scalar":
          return this.parseScalarTypeExtension();
        case "type":
          return this.parseObjectTypeExtension();
        case "interface":
          return this.parseInterfaceTypeExtension();
        case "union":
          return this.parseUnionTypeExtension();
        case "enum":
          return this.parseEnumTypeExtension();
        case "input":
          return this.parseInputObjectTypeExtension();
      }
    throw this.unexpected(t);
  }
  /**
   * ```
   * SchemaExtension :
   *  - extend schema Directives[Const]? { OperationTypeDefinition+ }
   *  - extend schema Directives[Const]
   * ```
   */
  parseSchemaExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("schema");
    const r = this.parseConstDirectives(), n = this.optionalMany(
      d.BRACE_L,
      this.parseOperationTypeDefinition,
      d.BRACE_R
    );
    if (r.length === 0 && n.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: l.SCHEMA_EXTENSION,
      directives: r,
      operationTypes: n
    });
  }
  /**
   * ScalarTypeExtension :
   *   - extend scalar Name Directives[Const]
   */
  parseScalarTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("scalar");
    const r = this.parseName(), n = this.parseConstDirectives();
    if (n.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: l.SCALAR_TYPE_EXTENSION,
      name: r,
      directives: n
    });
  }
  /**
   * ObjectTypeExtension :
   *  - extend type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition
   *  - extend type Name ImplementsInterfaces? Directives[Const]
   *  - extend type Name ImplementsInterfaces
   */
  parseObjectTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("type");
    const r = this.parseName(), n = this.parseImplementsInterfaces(), i = this.parseConstDirectives(), a = this.parseFieldsDefinition();
    if (n.length === 0 && i.length === 0 && a.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: l.OBJECT_TYPE_EXTENSION,
      name: r,
      interfaces: n,
      directives: i,
      fields: a
    });
  }
  /**
   * InterfaceTypeExtension :
   *  - extend interface Name ImplementsInterfaces? Directives[Const]? FieldsDefinition
   *  - extend interface Name ImplementsInterfaces? Directives[Const]
   *  - extend interface Name ImplementsInterfaces
   */
  parseInterfaceTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("interface");
    const r = this.parseName(), n = this.parseImplementsInterfaces(), i = this.parseConstDirectives(), a = this.parseFieldsDefinition();
    if (n.length === 0 && i.length === 0 && a.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: l.INTERFACE_TYPE_EXTENSION,
      name: r,
      interfaces: n,
      directives: i,
      fields: a
    });
  }
  /**
   * UnionTypeExtension :
   *   - extend union Name Directives[Const]? UnionMemberTypes
   *   - extend union Name Directives[Const]
   */
  parseUnionTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("union");
    const r = this.parseName(), n = this.parseConstDirectives(), i = this.parseUnionMemberTypes();
    if (n.length === 0 && i.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: l.UNION_TYPE_EXTENSION,
      name: r,
      directives: n,
      types: i
    });
  }
  /**
   * EnumTypeExtension :
   *   - extend enum Name Directives[Const]? EnumValuesDefinition
   *   - extend enum Name Directives[Const]
   */
  parseEnumTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("enum");
    const r = this.parseName(), n = this.parseConstDirectives(), i = this.parseEnumValuesDefinition();
    if (n.length === 0 && i.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: l.ENUM_TYPE_EXTENSION,
      name: r,
      directives: n,
      values: i
    });
  }
  /**
   * InputObjectTypeExtension :
   *   - extend input Name Directives[Const]? InputFieldsDefinition
   *   - extend input Name Directives[Const]
   */
  parseInputObjectTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("input");
    const r = this.parseName(), n = this.parseConstDirectives(), i = this.parseInputFieldsDefinition();
    if (n.length === 0 && i.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: l.INPUT_OBJECT_TYPE_EXTENSION,
      name: r,
      directives: n,
      fields: i
    });
  }
  /**
   * ```
   * DirectiveDefinition :
   *   - Description? directive @ Name ArgumentsDefinition? `repeatable`? on DirectiveLocations
   * ```
   */
  parseDirectiveDefinition() {
    const t = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("directive"), this.expectToken(d.AT);
    const n = this.parseName(), i = this.parseArgumentDefs(), a = this.expectOptionalKeyword("repeatable");
    this.expectKeyword("on");
    const o = this.parseDirectiveLocations();
    return this.node(t, {
      kind: l.DIRECTIVE_DEFINITION,
      description: r,
      name: n,
      arguments: i,
      repeatable: a,
      locations: o
    });
  }
  /**
   * DirectiveLocations :
   *   - `|`? DirectiveLocation
   *   - DirectiveLocations | DirectiveLocation
   */
  parseDirectiveLocations() {
    return this.delimitedMany(d.PIPE, this.parseDirectiveLocation);
  }
  /*
   * DirectiveLocation :
   *   - ExecutableDirectiveLocation
   *   - TypeSystemDirectiveLocation
   *
   * ExecutableDirectiveLocation : one of
   *   `QUERY`
   *   `MUTATION`
   *   `SUBSCRIPTION`
   *   `FIELD`
   *   `FRAGMENT_DEFINITION`
   *   `FRAGMENT_SPREAD`
   *   `INLINE_FRAGMENT`
   *
   * TypeSystemDirectiveLocation : one of
   *   `SCHEMA`
   *   `SCALAR`
   *   `OBJECT`
   *   `FIELD_DEFINITION`
   *   `ARGUMENT_DEFINITION`
   *   `INTERFACE`
   *   `UNION`
   *   `ENUM`
   *   `ENUM_VALUE`
   *   `INPUT_OBJECT`
   *   `INPUT_FIELD_DEFINITION`
   */
  parseDirectiveLocation() {
    const t = this._lexer.token, r = this.parseName();
    if (Object.prototype.hasOwnProperty.call(Dt, r.value))
      return r;
    throw this.unexpected(t);
  }
  // Core parsing utility functions
  /**
   * Returns a node that, if configured to do so, sets a "loc" field as a
   * location object, used to identify the place in the source that created a
   * given parsed object.
   */
  node(t, r) {
    return this._options.noLocation !== !0 && (r.loc = new nh(
      t,
      this._lexer.lastToken,
      this._lexer.source
    )), r;
  }
  /**
   * Determines if the next token is of a given kind
   */
  peek(t) {
    return this._lexer.token.kind === t;
  }
  /**
   * If the next token is of the given kind, return that token after advancing the lexer.
   * Otherwise, do not change the parser state and throw an error.
   */
  expectToken(t) {
    const r = this._lexer.token;
    if (r.kind === t)
      return this.advanceLexer(), r;
    throw I(
      this._lexer.source,
      r.start,
      `Expected ${gn(t)}, found ${ke(r)}.`
    );
  }
  /**
   * If the next token is of the given kind, return "true" after advancing the lexer.
   * Otherwise, do not change the parser state and return "false".
   */
  expectOptionalToken(t) {
    return this._lexer.token.kind === t ? (this.advanceLexer(), !0) : !1;
  }
  /**
   * If the next token is a given keyword, advance the lexer.
   * Otherwise, do not change the parser state and throw an error.
   */
  expectKeyword(t) {
    const r = this._lexer.token;
    if (r.kind === d.NAME && r.value === t)
      this.advanceLexer();
    else
      throw I(
        this._lexer.source,
        r.start,
        `Expected "${t}", found ${ke(r)}.`
      );
  }
  /**
   * If the next token is a given keyword, return "true" after advancing the lexer.
   * Otherwise, do not change the parser state and return "false".
   */
  expectOptionalKeyword(t) {
    const r = this._lexer.token;
    return r.kind === d.NAME && r.value === t ? (this.advanceLexer(), !0) : !1;
  }
  /**
   * Helper function for creating an error when an unexpected lexed token is encountered.
   */
  unexpected(t) {
    const r = t != null ? t : this._lexer.token;
    return I(
      this._lexer.source,
      r.start,
      `Unexpected ${ke(r)}.`
    );
  }
  /**
   * Returns a possibly empty list of parse nodes, determined by the parseFn.
   * This list begins with a lex token of openKind and ends with a lex token of closeKind.
   * Advances the parser to the next lex token after the closing token.
   */
  any(t, r, n) {
    this.expectToken(t);
    const i = [];
    for (; !this.expectOptionalToken(n); )
      i.push(r.call(this));
    return i;
  }
  /**
   * Returns a list of parse nodes, determined by the parseFn.
   * It can be empty only if open token is missing otherwise it will always return non-empty list
   * that begins with a lex token of openKind and ends with a lex token of closeKind.
   * Advances the parser to the next lex token after the closing token.
   */
  optionalMany(t, r, n) {
    if (this.expectOptionalToken(t)) {
      const i = [];
      do
        i.push(r.call(this));
      while (!this.expectOptionalToken(n));
      return i;
    }
    return [];
  }
  /**
   * Returns a non-empty list of parse nodes, determined by the parseFn.
   * This list begins with a lex token of openKind and ends with a lex token of closeKind.
   * Advances the parser to the next lex token after the closing token.
   */
  many(t, r, n) {
    this.expectToken(t);
    const i = [];
    do
      i.push(r.call(this));
    while (!this.expectOptionalToken(n));
    return i;
  }
  /**
   * Returns a non-empty list of parse nodes, determined by the parseFn.
   * This list may begin with a lex token of delimiterKind followed by items separated by lex tokens of tokenKind.
   * Advances the parser to the next lex token after last item in the list.
   */
  delimitedMany(t, r) {
    this.expectOptionalToken(t);
    const n = [];
    do
      n.push(r.call(this));
    while (this.expectOptionalToken(t));
    return n;
  }
  advanceLexer() {
    const { maxTokens: t } = this._options, r = this._lexer.advance();
    if (t !== void 0 && r.kind !== d.EOF && (++this._tokenCounter, this._tokenCounter > t))
      throw I(
        this._lexer.source,
        r.start,
        `Document contains more that ${t} tokens. Parsing aborted.`
      );
  }
}
function ke(e) {
  const t = e.value;
  return gn(e.kind) + (t != null ? ` "${t}"` : "");
}
function gn(e) {
  return ch(e) ? `"${e}"` : e;
}
const Ch = ["click", "input", "submit"];
function Lh() {
  return !1;
}
class bh extends nt {
  constructor(r = {}) {
    var n;
    super("user-interaction", "1.0.0", r);
    $(this, "_spansData", /* @__PURE__ */ new WeakMap());
    // for addEventListener/removeEventListener state
    $(this, "_wrappedListeners", /* @__PURE__ */ new WeakMap());
    // for event bubbling
    $(this, "_eventsSpanMap", /* @__PURE__ */ new WeakMap());
    $(this, "_eventNames");
    $(this, "_shouldPreventSpanCreation");
    this._eventNames = new Set((n = r == null ? void 0 : r.eventNames) != null ? n : Ch), this._shouldPreventSpanCreation = typeof (r == null ? void 0 : r.shouldPreventSpanCreation) == "function" ? r.shouldPreventSpanCreation : Lh;
  }
  init() {
  }
  /**
   * Controls whether or not to create a span, based on the event type.
   */
  _allowEventName(r) {
    return this._eventNames.has(r);
  }
  /**
   * Creates a new span
   * @param event
   * @param parentSpan
   */
  _createSpan(r, n) {
    var s;
    const i = r == null ? void 0 : r.target, a = r == null ? void 0 : r.type;
    if (!(i instanceof HTMLElement) || !i.getAttribute || i.hasAttribute("disabled") || !this._allowEventName(a))
      return;
    const o = rn(i, !0);
    try {
      const u = this.tracer.startSpan(a, {
        attributes: {
          "event.type": a,
          "event.tag": i.tagName,
          "event.xpath": o,
          "event.id": i.id,
          "event.text": (s = i.textContent) != null ? s : "",
          "event.url": window.location.href,
          "viewport.width": window.innerWidth,
          "viewport.height": window.innerHeight
        }
      }, n ? P.setSpan(O.active(), n) : void 0);
      return r instanceof MouseEvent && (u.setAttribute("event.x", r.clientX), u.setAttribute("event.y", r.clientY), u.setAttribute("event.relativeX", r.clientX / window.innerWidth), u.setAttribute("event.relativeY", r.clientY / window.innerHeight), a === "scroll" && (u.setAttribute("event.scrollX", window.scrollX), u.setAttribute("event.scrollY", window.scrollY))), this._shouldPreventSpanCreation(a, i, u) === !0 ? void 0 : (this._spansData.set(u, {
        taskCount: 0
      }), u);
    } catch (u) {
      this._diag.error("failed to start create new user interaction span", u);
    }
  }
  /**
   * Returns true iff we should use the patched callback; false if it's already been patched
   */
  addPatchedListener(r, n, i, a) {
    let o = this._wrappedListeners.get(i);
    o || (o = /* @__PURE__ */ new Map(), this._wrappedListeners.set(i, o));
    let s = o.get(n);
    return s || (s = /* @__PURE__ */ new Map(), o.set(n, s)), s.has(r) ? !1 : (s.set(r, a), !0);
  }
  /**
   * Returns the patched version of the callback (or undefined)
   */
  removePatchedListener(r, n, i) {
    const a = this._wrappedListeners.get(i);
    if (!a)
      return;
    const o = a.get(n);
    if (!o)
      return;
    const s = o.get(r);
    return s && (o.delete(r), o.size === 0 && (a.delete(n), a.size === 0 && this._wrappedListeners.delete(i))), s;
  }
  // utility method to deal with the Function|EventListener nature of addEventListener
  _invokeListener(r, n, i) {
    return typeof r == "function" ? r.apply(n, i) : r.handleEvent(i[0]);
  }
  /**
   * This patches the addEventListener of HTMLElement to be able to
   * auto instrument the click events
   */
  _patchAddEventListener() {
    const r = this;
    let n = 0;
    return (i) => function(o, s, u) {
      if (!s)
        return i.call(this, o, s, u);
      const _ = u && typeof u == "object" && u.once, c = function(...E) {
        let f;
        const h = E[0];
        if ((h == null ? void 0 : h.type) === "mousemove" && Date.now() - n < 100)
          return;
        n = Date.now(), h && (f = r._eventsSpanMap.get(h)), _ && r.removePatchedListener(this, o, s);
        const p = r._createSpan(h, f);
        return p ? (h && r._eventsSpanMap.set(h, p), O.with(P.setSpan(O.active(), p), () => {
          const v = r._invokeListener(s, this, E);
          return p.end(), v;
        })) : r._invokeListener(s, this, E);
      };
      if (r.addPatchedListener(this, o, s, c))
        return i.call(this, o, c, u);
    };
  }
  /**
   * This patches the removeEventListener of HTMLElement to handle the fact that
   * we patched the original callbacks
   */
  _patchRemoveEventListener() {
    const r = this;
    return (n) => function(a, o, s) {
      const u = r.removePatchedListener(this, a, o);
      return u ? n.call(this, a, u, s) : n.call(this, a, o, s);
    };
  }
  /**
   * Most browser provide event listener api via EventTarget in prototype chain.
   * Exception to this is IE 11 which has it on the prototypes closest to EventTarget:
   *
   * * - has addEventListener in IE
   * ** - has addEventListener in all other browsers
   * ! - missing in IE
   *
   * HTMLElement -> Element -> Node * -> EventTarget **! -> Object
   * Document -> Node * -> EventTarget **! -> Object
   * Window * -> WindowProperties ! -> EventTarget **! -> Object
   */
  _getPatchableEventTargets() {
    return window.EventTarget ? [EventTarget.prototype] : [Node.prototype, Window.prototype];
  }
  /**
   * implements enable function
   */
  enable() {
    this._getPatchableEventTargets().forEach((n) => {
      re(n.addEventListener) && (this._unwrap(n, "addEventListener"), this._diag.debug("removing previous patch from method addEventListener")), re(n.removeEventListener) && (this._unwrap(n, "removeEventListener"), this._diag.debug("removing previous patch from method removeEventListener")), this._wrap(n, "addEventListener", this._patchAddEventListener()), this._wrap(n, "removeEventListener", this._patchRemoveEventListener());
    });
  }
  /**
   * implements unpatch function
   */
  disable() {
    this._getPatchableEventTargets().forEach((n) => {
      re(n.addEventListener) && this._unwrap(n, "addEventListener"), re(n.removeEventListener) && this._unwrap(n, "removeEventListener");
    });
  }
}
var hr = { BASE_URL: "/", MODE: "production", DEV: !1, PROD: !0, SSR: !1 };
let Y;
const et = "highlight.record", $h = (e) => {
  var _, c, E, f, h;
  if (Y !== void 0) {
    console.warn("OTEL already initialized. Skipping...");
    return;
  }
  const t = e.backendUrl || hr.REACT_APP_PUBLIC_GRAPH_URI || "https://pub.highlight.run", r = [
    ...(c = (_ = e.networkRecordingOptions) == null ? void 0 : _.urlBlocklist) != null ? c : [],
    ...Un
  ], n = hr.DEBUG === "true", i = (E = e.endpoint) != null ? E : "https://otel.highlight.io:4318", a = (f = e.environment) != null ? f : "production";
  Y = new Wc({
    resource: new Mt({
      [JT]: (h = e.serviceName) != null ? h : "highlight-browser",
      [zT]: a,
      "highlight.project_id": e.projectId,
      "highlight.session_id": e.sessionSecureId
    })
  }), n && Y.addSpanProcessor(new Hc(new $c()));
  const o = new WT({
    url: i + "/v1/traces",
    concurrencyLimit: 10,
    // Using any because we were getting an error importing CompressionAlgorithm
    // from @opentelemetry/otlp-exporter-base.
    compression: "gzip"
  }), s = new Dh(o, {
    maxExportBatchSize: 15
  });
  Y.addSpanProcessor(s), sd({
    instrumentations: [
      new Td({
        applyCustomAttributesOnSpan: {
          documentLoad: Ar,
          documentFetch: Ar,
          resourceFetch: Bh
        }
      }),
      new bh(),
      new Ff({
        propagateTraceHeaderCorsUrls: /.*/,
        applyCustomAttributesOnSpan: (p, v, m) => ut(void 0, null, function* () {
          var k, q, we;
          const A = p;
          if (A.attributes[et] === !1)
            return;
          const N = A.attributes["http.url"], C = (k = v.method) != null ? k : "GET";
          if (p.updateName(vr(N, C, v.body)), !(m instanceof Response)) {
            p.setAttributes({
              "http.response.error": m.message,
              "http.response.status": m.status
            });
            return;
          }
          Sr(p, v.body, v.headers, e.networkRecordingOptions);
          const K = yield Ln(m, (q = e.networkRecordingOptions) == null ? void 0 : q.bodyKeysToRecord, (we = e.networkRecordingOptions) == null ? void 0 : we.networkBodyKeysToRedact);
          p.setAttribute("http.response.body", K);
        })
      }),
      new dT({
        propagateTraceHeaderCorsUrls: /.*/,
        applyCustomAttributesOnSpan: (p, v) => {
          var K, k;
          const m = v;
          if (p.attributes[et] === !1)
            return;
          const N = vr(m._url, m._method, v.responseText);
          p.updateName(N), Sr(p, m._body, m._requestHeaders, e.networkRecordingOptions);
          const C = bn(m._body, (K = e.networkRecordingOptions) == null ? void 0 : K.networkBodyKeysToRedact, (k = e.networkRecordingOptions) == null ? void 0 : k.bodyKeysToRecord, m._requestHeaders);
          p.setAttribute("http.request.body", C);
        }
      })
    ]
  });
  const u = new Zr();
  u.enable(), Y.register({
    contextManager: u,
    propagator: new $r({
      propagators: [
        new Dr(),
        new wh({
          backendUrl: t,
          tracingOrigins: e.tracingOrigins,
          urlBlocklist: r
        })
      ]
    })
  });
};
class Dh extends Qr {
  onEnd(t) {
    t.attributes[et] !== !1 && super.onEnd(t);
  }
}
class wh extends Fr {
  constructor(r) {
    super();
    $(this, "backendUrl");
    $(this, "tracingOrigins");
    $(this, "urlBlocklist");
    this.backendUrl = r.backendUrl, this.tracingOrigins = r.tracingOrigins, this.urlBlocklist = r.urlBlocklist;
  }
  inject(r, n, i) {
    const a = P.getSpan(r);
    if (!a)
      return;
    const o = a.attributes["http.url"];
    if (typeof o == "string" && !Uh(o, this.backendUrl, this.tracingOrigins, this.urlBlocklist)) {
      a.setAttribute(et, !1);
      return;
    }
    super.inject(r, n, i);
  }
}
const xh = "highlight-browser", Fh = () => Y.getTracer(xh), Vh = () => ut(void 0, null, function* () {
  Y !== void 0 && (yield Y.forceFlush(), Y.shutdown());
}), vr = (e, t, r) => {
  var s, u, _;
  let n;
  const i = new URL(e), a = i.pathname;
  let o = `${t} - ${a}`;
  try {
    if (n = typeof r == "string" ? JSON.parse(r) : r, n && n.query) {
      const c = Mh(n.query), E = ((s = c.definitions[0]) == null ? void 0 : s.kind) === "OperationDefinition" ? (_ = (u = c.definitions[0]) == null ? void 0 : u.name) == null ? void 0 : _.value : void 0;
      E && (o = `${E} (GraphQL: ${i.host + i.pathname})`);
    }
  } catch (c) {
  }
  return o;
}, Sr = (e, t, r, n) => {
  var s;
  const i = typeof t == "string" ? t : String(t);
  let a;
  try {
    a = t ? JSON.parse(i) : void 0, a.operationName && e.setAttribute("graphql.operation.name", a.operationName);
  } catch (u) {
  }
  const o = Dn((s = n == null ? void 0 : n.networkHeadersToRedact) != null ? s : [], r, n == null ? void 0 : n.headerKeysToRecord);
  e.setAttributes({
    "highlight.type": "http.request",
    "http.request.headers": JSON.stringify(o),
    "http.request.body": i
  });
}, Uh = (e, t, r, n) => !!(n != null && n.some((o) => e.toLowerCase().includes(o))) || !wn(e, t, r) ? !1 : xn(e, r), Ar = (e) => {
  const r = e.events, n = {
    unload: w("unloadEventStart", "unloadEventEnd", r),
    dom_interactive: w("domInteractive", "fetchStart", r),
    dom_content_loaded: w("domContentLoadedEventEnd", "domContentLoadedEventStart", r),
    dom_complete: w("fetchStart", "domComplete", r),
    load_event: w("loadEventStart", "loadEventEnd", r),
    first_paint: w("fetchStart", "firstPaint", r),
    first_contentful_paint: w("fetchStart", "firstContentfulPaint", r),
    domain_lookup: w("domainLookupStart", "domainLookupEnd", r),
    connect: w("connectStart", "connectEnd", r),
    request: w("requestStart", "requestEnd", r),
    response: w("responseStart", "responseEnd", r)
  };
  Object.entries(n).forEach(([i, a]) => {
    a > 0 && (e.setAttribute(`timings.${i}.ns`, a), e.setAttribute(`timings.${i}.readable`, Rn(a)));
  });
};
function w(e, t, r) {
  const n = r.find((s) => s.name === e), i = r.find((s) => s.name === t);
  if (!n || !i)
    return 0;
  const a = n.time[0] * 1e9 + n.time[1];
  return i.time[0] * 1e9 + i.time[1] - a;
}
const Bh = (e, t) => {
  const r = {
    domain_lookup: (t.domainLookupEnd - t.domainLookupStart) * 1e6,
    connect: (t.connectEnd - t.connectStart) * 1e6,
    request: (t.responseEnd - t.requestStart) * 1e6,
    response: (t.responseEnd - t.responseStart) * 1e6
  };
  Object.entries(r).forEach(([n, i]) => {
    i > 0 && (e.setAttribute(`timings.${n}.ns`, i), e.setAttribute(`timings.${n}.readable`, Rn(i)));
  });
}, Rn = (e) => {
  if (e >= 36e11) {
    const o = e / 36e11;
    return `${Number(o.toFixed(1))}h`;
  } else if (e >= 6e10) {
    const o = e / 6e10;
    return `${Number(o.toFixed(1))}m`;
  } else if (e >= 1e9) {
    const o = e / 1e9;
    return `${Number(o.toFixed(1))}s`;
  } else if (e >= 1e6) {
    const o = e / 1e6;
    return `${Number(o.toFixed(1))}ms`;
  } else if (e >= 1e3) {
    const o = e / 1e3;
    return `${Number(o.toFixed(1))}µs`;
  } else
    return `${Number(e.toFixed(1))}ns`;
};
export {
  xh as BROWSER_TRACER_NAME,
  Fh as getTracer,
  $h as setupBrowserTracing,
  Vh as shutdown
};
//# sourceMappingURL=index-BYNUbnPS.js.map
