{"version":3,"sources":["../src/server.ts"],"sourcesContent":["import { H, NodeOptions } from '@highlight-run/node'\nimport type { DataFunctionArgs } from '@remix-run/node'\nimport { SESSION_STORAGE_KEYS } from '@highlight-run/client/src/utils/sessionStorage/sessionStorageKeys'\n\nexport { H } from '@highlight-run/node'\n\nexport function HandleError(nodeOptions: NodeOptions) {\n\tH.init(nodeOptions)\n\n\treturn function handleError(error: unknown, { request }: DataFunctionArgs) {\n\t\tif (error instanceof Error) {\n\t\t\tconst cookies = parseCookies(request.headers.get('Cookie') ?? '')\n\n\t\t\tH.consumeError(\n\t\t\t\terror,\n\t\t\t\tcookies[SESSION_STORAGE_KEYS.SESSION_SECURE_ID],\n\t\t\t)\n\t\t}\n\t}\n}\n\nfunction parseCookies(cookies: string) {\n\treturn Object.fromEntries(\n\t\tcookies.split(';').map((c) => c.trim().split('=')),\n\t)\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA+B;AAI/B,IAAAA,eAAkB;AAEX,SAAS,YAAY,aAA0B;AACrD,gBAAE,KAAK,WAAW;AAElB,SAAO,SAAS,YAAY,OAAgB,EAAE,QAAQ,GAAqB;AAT5E;AAUE,QAAI,iBAAiB,OAAO;AAC3B,YAAM,UAAU,cAAa,aAAQ,QAAQ,IAAI,QAAQ,MAA5B,YAAiC,EAAE;AAEhE,oBAAE;AAAA,QACD;AAAA,QACA,iDAA8C;AAAA,MAC/C;AAAA,IACD;AAAA,EACD;AACD;AAEA,SAAS,aAAa,SAAiB;AACtC,SAAO,OAAO;AAAA,IACb,QAAQ,MAAM,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,MAAM,GAAG,CAAC;AAAA,EAClD;AACD;","names":["import_node"]}