import{r as l,n as e}from"./components-DVmqD061.js";import{c as E,B as c,C as U,X as T,a as D,A as O,F as z}from"./footer-BH9mAwpq.js";import{R as P}from"./refresh-cw-DM2zEIv2.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=E("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),F=()=>{const[g,d]=l.useState("options"),[x,h]=l.useState(null),[w,N]=l.useState(!1),[m,o]=l.useState(null),[k,i]=l.useState(null),[j,p]=l.useState(null),[b,u]=l.useState(null),t=l.useRef(null),f=l.useRef(null),C=async()=>{d("camera");try{const s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});t.current&&(t.current.srcObject=s)}catch{p("Unable to access camera. Please check permissions."),d("options")}},A=()=>{if(!t.current)return;const s=document.createElement("canvas");s.width=t.current.videoWidth,s.height=t.current.videoHeight;const n=s.getContext("2d");if(n){n.drawImage(t.current,0,0,s.width,s.height);const a=s.toDataURL("image/jpeg");h(a),d("preview");const r=t.current.srcObject;r&&r.getTracks().forEach(y=>y.stop())}},I=s=>{var r;const n=(r=s.target.files)==null?void 0:r[0];if(!n)return;const a=new FileReader;a.onloadend=()=>{const y=a.result;h(y),d("preview")},a.readAsDataURL(n)},S=()=>{f.current&&(f.current.value="",f.current.click())},v=()=>{if(h(null),o(null),i(null),p(null),u(null),d("options"),t.current&&t.current.srcObject){const s=t.current.srcObject;s&&s.getTracks().forEach(n=>n.stop())}},R=async()=>{if(x){N(!0),p(null);try{const s=x.split(",")[1],n=await fetch("http://localhost:8080/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:s})});if(!n.ok)throw new Error(`Server responded with status: ${n.status}`);const a=await n.json();if(a.error)throw new Error(a.error);if(Array.isArray(a)&&a.length>0&&a[0].image){const r=a[0].image;u(r),r==="Tumor"?(o("positive"),i(95)):r==="Normal"?(o("negative"),i(95)):(o("positive"),i(85),u(`Detected: ${r}`))}else if(a.image){const r=a.image;u(r),r==="Tumor"?(o("positive"),i(95)):r==="Normal"?(o("negative"),i(95)):(o("positive"),i(85),u(`Detected: ${r}`))}else throw new Error("Unexpected response format from server")}catch(s){console.error("Error during analysis:",s),p(s instanceof Error?s.message:"An unexpected error occurred")}finally{N(!1)}}};return e.jsx("section",{className:"mx-auto mt-24 max-w-7xl px-5",children:e.jsxs("div",{className:"mx-auto flex max-w-2xl flex-col gap-6 text-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"rounded-full border border-primary/30 bg-primary/10 px-3 py-1 text-sm font-medium text-primary dark:bg-primary/25",children:e.jsx("span",{className:"brightness-[1.7]",children:"Kidney Scan Analysis"})}),e.jsx("h1",{className:"mt-4 scroll-m-20 font-inter text-4xl font-extrabold tracking-tight lg:text-5xl",children:e.jsx("span",{className:"bg-gradient-to-b from-foreground to-foreground/70 bg-clip-text text-transparent",children:"Capture or Upload"})})]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Take a photo of your kidney scan or upload an existing image for AI-powered tumor detection."}),e.jsxs("div",{className:"mx-auto mt-8 w-full max-w-xl",children:[g==="options"&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs(c,{onClick:C,size:"lg",className:"flex h-32 flex-col gap-2 p-0",children:[e.jsx(U,{className:"h-8 w-8"}),e.jsx("span",{children:"Take a Photo"})]}),e.jsxs(c,{onClick:S,size:"lg",variant:"outline",className:"flex h-32 flex-col gap-2 p-0",children:[e.jsx(_,{className:"h-8 w-8"}),e.jsx("span",{children:"Upload an Image"}),e.jsx("input",{type:"file",ref:f,className:"hidden",accept:"image/*",onChange:I})]})]}),g==="camera"&&e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg border border-primary/20 bg-black",children:e.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx(c,{variant:"outline",onClick:v,children:"Cancel"}),e.jsx(c,{onClick:A,children:"Capture Image"})]})]}),g==="preview"&&e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-6",children:[e.jsxs("div",{className:"relative aspect-square w-full max-w-sm overflow-hidden rounded-lg border border-primary/20 bg-black/5",children:[x&&e.jsx("img",{src:x,alt:"Kidney scan preview",className:"h-full w-full object-contain"}),e.jsx("button",{onClick:v,className:"absolute top-2 right-2 rounded-full bg-background/80 p-1 text-muted-foreground hover:bg-background hover:text-foreground","aria-label":"Remove image",children:e.jsx(T,{className:"h-5 w-5"})})]}),j&&e.jsxs("div",{className:"w-full max-w-sm rounded-lg border border-red-200 bg-red-50 p-4 text-left text-red-700 dark:border-red-900 dark:bg-red-950/50 dark:text-red-400",children:[e.jsx("h3",{className:"mb-1 font-semibold",children:"Analysis Error"}),e.jsx("p",{className:"text-sm",children:j})]}),!m&&!j?e.jsx(c,{onClick:R,disabled:w,className:"w-full max-w-sm",children:w?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing scan..."]}):"Analyze for tumor detection"}):null,m&&e.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[e.jsxs("div",{className:D("rounded-lg border p-4",m==="positive"?"border-red-200 bg-red-50 text-red-700 dark:border-red-900 dark:bg-red-950/50 dark:text-red-400":"border-green-200 bg-green-50 text-green-700 dark:border-green-900 dark:bg-green-950/50 dark:text-green-400"),children:[e.jsxs("h3",{className:"mb-2 font-semibold",children:[b&&e.jsx("span",{className:"font-bold",children:b}),!b&&(m==="positive"?"Potential tumor detected":"No tumor detected")]}),e.jsx("p",{className:"text-sm",children:m==="positive"?`Our AI has detected potential abnormalities with ${k}% confidence. Please consult with a healthcare professional for a thorough evaluation.`:`Our AI analysis shows no signs of kidney tumor with ${k}% confidence. Regular screening is still recommended.`})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",onClick:v,className:"flex-1",children:"New Scan"}),e.jsx(c,{className:"flex-1",children:"Schedule consultation"})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Note:"})," This is a preliminary assessment and should not replace professional medical diagnosis."]})]})]})]})})},$=F,B=()=>[{title:"KidneyScan AI - Image Analysis"},{name:"description",content:"Upload kidney scans or take photos for AI-powered tumor detection. Get fast and accurate preliminary results from our advanced detection technology."}];function H(){return e.jsxs("div",{className:"dark:bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,hsla(var(--primary)_/_30%),#ffffff00)]",children:[e.jsx(O,{}),e.jsx("main",{className:"pb-24",children:e.jsx($,{})}),e.jsx(z,{})]})}export{H as default,B as meta};
