import{z as wr,O as Cr,W as Ir,J as Pr,X as xr,i as Dr}from"./root-DaZoDgTo.js";import"./components-DVmqD061.js";import"./use-theme-mVS1s4CG.js";var qe={},kr=Object.defineProperty,Mr=(t,e,n)=>e in t?kr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y=(t,e,n)=>(Mr(t,typeof e!="symbol"?e+"":e,n),n),gn=(t,e,n)=>new Promise((r,o)=>{var i=u=>{try{a(n.next(u))}catch(c){o(c)}},s=u=>{try{a(n.throw(u))}catch(c){o(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(i,s);a((n=n.apply(t,e)).next())}),Ur=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Z="1.8.0",ze=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Fr(t){var e=new Set([t]),n=new Set,r=t.match(ze);if(!r)return function(){return!1};var o={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(o.prerelease!=null)return function(a){return a===t};function i(a){return n.add(a),!1}function s(a){return e.add(a),!0}return function(a){if(e.has(a))return!0;if(n.has(a))return!1;var u=a.match(ze);if(!u)return i(a);var c={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return c.prerelease!=null||o.major!==c.major?i(a):o.major===0?o.minor===c.minor&&o.patch<=c.patch?s(a):i(a):o.minor<=c.minor?s(a):i(a)}}var jr=Fr(Z),Br=Z.split(".")[0],Nt=Symbol.for("opentelemetry.js.api."+Br),Lt=Ur;function It(t,e,n,r){var o;r===void 0&&(r=!1);var i=Lt[Nt]=(o=Lt[Nt])!==null&&o!==void 0?o:{version:Z};if(!r&&i[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(s.stack||s.message),!1}if(i.version!==Z){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+Z);return n.error(s.stack||s.message),!1}return i[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+Z+"."),!0}function nt(t){var e,n,r=(e=Lt[Nt])===null||e===void 0?void 0:e.version;if(!(!r||!jr(r)))return(n=Lt[Nt])===null||n===void 0?void 0:n[t]}function Pt(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Z+".");var n=Lt[Nt];n&&delete n[t]}var Vr=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Hr=function(t,e,n){if(arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Xr=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return mt("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return mt("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return mt("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return mt("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return mt("verbose",this._namespace,e)},t}();function mt(t,e,n){var r=nt("diag");if(r)return n.unshift(e),r[t].apply(r,Hr([],Vr(n),!1))}var A;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(A||(A={}));function Gr(t,e){t<A.NONE?t=A.NONE:t>A.ALL&&(t=A.ALL),e=e||{};function n(r,o){var i=e[r];return typeof i=="function"&&t>=o?i.bind(e):function(){}}return{error:n("error",A.ERROR),warn:n("warn",A.WARN),info:n("info",A.INFO),debug:n("debug",A.DEBUG),verbose:n("verbose",A.VERBOSE)}}var Kr=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},qr=function(t,e,n){if(arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},zr="diag",U=function(){function t(){function e(o){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=nt("diag");if(a)return a[o].apply(a,qr([],Kr(i),!1))}}var n=this,r=function(o,i){var s,a,u;if(i===void 0&&(i={logLevel:A.INFO}),o===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=c.stack)!==null&&s!==void 0?s:c.message),!1}typeof i=="number"&&(i={logLevel:i});var p=nt("diag"),d=Gr((a=i.logLevel)!==null&&a!==void 0?a:A.INFO,o);if(p&&!i.suppressOverrideMessage){var f=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+f),d.warn("Current logger will overwrite one already registered from "+f)}return It("diag",d,n,!0)};n.setLogger=r,n.disable=function(){Pt(zr,n)},n.createComponentLogger=function(o){return new Xr(o)},n.verbose=e("verbose"),n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),Yr=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},$r=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jr=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var n=this._entries.get(e);if(n)return Object.assign({},n)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var n=Yr(e,2),r=n[0],o=n[1];return[r,o]})},t.prototype.setEntry=function(e,n){var r=new t(this._entries);return r._entries.set(e,n),r},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=new t(this._entries);try{for(var s=$r(r),a=s.next();!a.done;a=s.next()){var u=a.value;i._entries.delete(u)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i},t.prototype.clear=function(){return new t},t}(),Qr=Symbol("BaggageEntryMetadata"),Wr=U.instance();function Zr(t){return t===void 0&&(t={}),new Jr(new Map(Object.entries(t)))}function to(t){return typeof t!="string"&&(Wr.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:Qr,toString:function(){return t}}}function xe(t){return Symbol.for(t)}var eo=function(){function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,o){var i=new t(n._currentContext);return i._currentContext.set(r,o),i},n.deleteValue=function(r){var o=new t(n._currentContext);return o._currentContext.delete(r),o}}return t}(),J=new eo,_t=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),no=function(){function t(){}return t.prototype.createHistogram=function(e,n){return lo},t.prototype.createCounter=function(e,n){return po},t.prototype.createUpDownCounter=function(e,n){return fo},t.prototype.createObservableGauge=function(e,n){return _o},t.prototype.createObservableCounter=function(e,n){return ho},t.prototype.createObservableUpDownCounter=function(e,n){return Eo},t.prototype.addBatchObservableCallback=function(e,n){},t.prototype.removeBatchObservableCallback=function(e){},t}(),De=function(){function t(){}return t}(),ro=function(t){_t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,r){},e}(De),oo=function(t){_t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,r){},e}(De),io=function(t){_t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(n,r){},e}(De),ke=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),so=function(t){_t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ke),ao=function(t){_t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ke),uo=function(t){_t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ke),co=new no,po=new ro,lo=new io,fo=new oo,ho=new so,_o=new ao,Eo=new uo,mo={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},vo={set:function(t,e,n){t!=null&&(t[e]=n)}},To=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},yo=function(t,e,n){if(arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},go=function(){function t(){}return t.prototype.active=function(){return J},t.prototype.with=function(e,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return n.call.apply(n,yo([r],To(o),!1))},t.prototype.bind=function(e,n){return n},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),bo=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Oo=function(t,e,n){if(arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},ue="context",So=new go,ee=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return It(ue,e,U.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,n,r){for(var o,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(o=this._getContextManager()).with.apply(o,Oo([e,n,r],bo(i),!1))},t.prototype.bind=function(e,n){return this._getContextManager().bind(e,n)},t.prototype._getContextManager=function(){return nt(ue)||So},t.prototype.disable=function(){this._getContextManager().disable(),Pt(ue,U.instance())},t}(),F;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(F||(F={}));var bn="0000000000000000",On="00000000000000000000000000000000",Sn={traceId:On,spanId:bn,traceFlags:F.NONE},Ot=function(){function t(e){e===void 0&&(e=Sn),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,n){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,n){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,n){},t}(),Me=xe("OpenTelemetry Context Key SPAN");function Ue(t){return t.getValue(Me)||void 0}function Ao(){return Ue(ee.getInstance().active())}function Fe(t,e){return t.setValue(Me,e)}function Ro(t){return t.deleteValue(Me)}function No(t,e){return Fe(t,new Ot(e))}function An(t){var e;return(e=Ue(t))===null||e===void 0?void 0:e.spanContext()}var Lo=/^([0-9a-f]{32})$/i,wo=/^[0-9a-f]{16}$/i;function Rn(t){return Lo.test(t)&&t!==On}function Co(t){return wo.test(t)&&t!==bn}function ne(t){return Rn(t.traceId)&&Co(t.spanId)}function Io(t){return new Ot(t)}var ce=ee.getInstance(),Nn=function(){function t(){}return t.prototype.startSpan=function(e,n,r){r===void 0&&(r=ce.active());var o=!!(n!=null&&n.root);if(o)return new Ot;var i=r&&An(r);return Po(i)&&ne(i)?new Ot(i):new Ot},t.prototype.startActiveSpan=function(e,n,r,o){var i,s,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(i=n,a=r):(i=n,s=r,a=o);var u=s??ce.active(),c=this.startSpan(e,i,u),p=Fe(u,c);return ce.with(p,a,void 0,c)}},t}();function Po(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var xo=new Nn,Do=function(){function t(e,n,r,o){this._provider=e,this.name=n,this.version=r,this.options=o}return t.prototype.startSpan=function(e,n,r){return this._getTracer().startSpan(e,n,r)},t.prototype.startActiveSpan=function(e,n,r,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):xo},t}(),ko=function(){function t(){}return t.prototype.getTracer=function(e,n,r){return new Nn},t}(),Mo=new ko,Ye=function(){function t(){}return t.prototype.getTracer=function(e,n,r){var o;return(o=this.getDelegateTracer(e,n,r))!==null&&o!==void 0?o:new Do(this,e,n,r)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Mo},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,n,r){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,n,r)},t}(),Kt;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Kt||(Kt={}));var wt;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(wt||(wt={}));var Oe;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Oe||(Oe={}));var b=ee.getInstance(),m=U.instance(),Uo=function(){function t(){}return t.prototype.getMeter=function(e,n,r){return co},t}(),Fo=new Uo,pe="metrics",jo=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return It(pe,e,U.instance())},t.prototype.getMeterProvider=function(){return nt(pe)||Fo},t.prototype.getMeter=function(e,n,r){return this.getMeterProvider().getMeter(e,n,r)},t.prototype.disable=function(){Pt(pe,U.instance())},t}(),Ln=jo.getInstance(),Bo=function(){function t(){}return t.prototype.inject=function(e,n){},t.prototype.extract=function(e,n){return e},t.prototype.fields=function(){return[]},t}(),je=xe("OpenTelemetry Baggage Key");function wn(t){return t.getValue(je)||void 0}function Vo(){return wn(ee.getInstance().active())}function Ho(t,e){return t.setValue(je,e)}function Xo(t){return t.deleteValue(je)}var le="propagation",Go=new Bo,Ko=function(){function t(){this.createBaggage=Zr,this.getBaggage=wn,this.getActiveBaggage=Vo,this.setBaggage=Ho,this.deleteBaggage=Xo}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return It(le,e,U.instance())},t.prototype.inject=function(e,n,r){return r===void 0&&(r=vo),this._getGlobalPropagator().inject(e,n,r)},t.prototype.extract=function(e,n,r){return r===void 0&&(r=mo),this._getGlobalPropagator().extract(e,n,r)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Pt(le,U.instance())},t.prototype._getGlobalPropagator=function(){return nt(le)||Go},t}(),I=Ko.getInstance(),de="trace",qo=function(){function t(){this._proxyTracerProvider=new Ye,this.wrapSpanContext=Io,this.isSpanContextValid=ne,this.deleteSpan=Ro,this.getSpan=Ue,this.getActiveSpan=Ao,this.getSpanContext=An,this.setSpan=Fe,this.setSpanContext=No}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var n=It(de,this._proxyTracerProvider,U.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},t.prototype.getTracerProvider=function(){return nt(de)||this._proxyTracerProvider},t.prototype.getTracer=function(e,n){return this.getTracerProvider().getTracer(e,n)},t.prototype.disable=function(){Pt(de,U.instance()),this._proxyTracerProvider=new Ye},t}(),O=qo.getInstance(),Cn=xe("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function In(t){return t.setValue(Cn,!0)}function Be(t){return t.getValue(Cn)===!0}var zo="=",Se=";",qt=",",fe="baggage",Yo=180,$o=4096,Jo=8192,Qo=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i};function Wo(t){return t.reduce(function(e,n){var r=""+e+(e!==""?qt:"")+n;return r.length>Jo?e:r},"")}function Zo(t){return t.getAllEntries().map(function(e){var n=Qo(e,2),r=n[0],o=n[1],i=encodeURIComponent(r)+"="+encodeURIComponent(o.value);return o.metadata!==void 0&&(i+=Se+o.metadata.toString()),i})}function Pn(t){var e=t.split(Se);if(!(e.length<=0)){var n=e.shift();if(n){var r=n.indexOf(zo);if(!(r<=0)){var o=decodeURIComponent(n.substring(0,r).trim()),i=decodeURIComponent(n.substring(r+1).trim()),s;return e.length>0&&(s=to(e.join(Se))),{key:o,value:i,metadata:s}}}}}function xn(t){return typeof t!="string"||t.length===0?{}:t.split(qt).map(function(e){return Pn(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,n){return e[n.key]=n.value,e},{})}var Dn=function(){function t(){}return t.prototype.inject=function(e,n,r){var o=I.getBaggage(e);if(!(!o||Be(e))){var i=Zo(o).filter(function(a){return a.length<=$o}).slice(0,Yo),s=Wo(i);s.length>0&&r.set(n,fe,s)}},t.prototype.extract=function(e,n,r){var o=r.get(n,fe),i=Array.isArray(o)?o.join(qt):o;if(!i)return e;var s={};if(i.length===0)return e;var a=i.split(qt);return a.forEach(function(u){var c=Pn(u);if(c){var p={value:c.value};c.metadata&&(p.metadata=c.metadata),s[c.key]=p}}),Object.entries(s).length===0?e:I.setBaggage(e,I.createBaggage(s))},t.prototype.fields=function(){return[fe]},t}(),kn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ti=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i};function Bt(t){var e,n,r={};if(typeof t!="object"||t==null)return r;try{for(var o=kn(Object.entries(t)),i=o.next();!i.done;i=o.next()){var s=ti(i.value,2),a=s[0],u=s[1];if(!ei(a)){m.warn("Invalid attribute key: "+a);continue}if(!Mn(u)){m.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(u)?r[a]=u.slice():r[a]=u}}catch(c){e={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function ei(t){return typeof t=="string"&&t.length>0}function Mn(t){return t==null?!0:Array.isArray(t)?ni(t):Un(t)}function ni(t){var e,n,r;try{for(var o=kn(t),i=o.next();!i.done;i=o.next()){var s=i.value;if(s!=null){if(!r){if(Un(s)){r=typeof s;continue}return!1}if(typeof s!==r)return!1}}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return!0}function Un(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}function ri(){return function(t){m.error(oi(t))}}function oi(t){return typeof t=="string"?t:JSON.stringify(ii(t))}function ii(t){for(var e={},n=t;n!==null;)Object.getOwnPropertyNames(n).forEach(function(r){if(!e[r]){var o=n[r];o&&(e[r]=String(o))}}),n=Object.getPrototypeOf(n);return e}var si=ri();function et(t){try{si(t)}catch{}}var M;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(M||(M={}));var St=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},ai=",",ui=["OTEL_SDK_DISABLED"];function ci(t){return ui.indexOf(t)>-1}var pi=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function li(t){return pi.indexOf(t)>-1}var di=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function fi(t){return di.indexOf(t)>-1}var Vt=1/0,Ht=128,hi=128,_i=128,Fn={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:A.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Vt,OTEL_ATTRIBUTE_COUNT_LIMIT:Ht,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Vt,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Ht,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Vt,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Ht,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:hi,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:_i,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:M.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Ei(t,e,n){if(typeof n[t]<"u"){var r=String(n[t]);e[t]=r.toLowerCase()==="true"}}function mi(t,e,n,r,o){if(r===void 0&&(r=-1/0),o===void 0&&(o=1/0),typeof n[t]<"u"){var i=Number(n[t]);isNaN(i)||(i<r?e[t]=r:i>o?e[t]=o:e[t]=i)}}function vi(t,e,n,r){r===void 0&&(r=ai);var o=n[t];typeof o=="string"&&(e[t]=o.split(r).map(function(i){return i.trim()}))}var Ti={ALL:A.ALL,VERBOSE:A.VERBOSE,DEBUG:A.DEBUG,INFO:A.INFO,WARN:A.WARN,ERROR:A.ERROR,NONE:A.NONE};function yi(t,e,n){var r=n[t];if(typeof r=="string"){var o=Ti[r.toUpperCase()];o!=null&&(e[t]=o)}}function Ae(t){var e={};for(var n in Fn){var r=n;switch(r){case"OTEL_LOG_LEVEL":yi(r,e,t);break;default:if(ci(r))Ei(r,e,t);else if(li(r))mi(r,e,t);else if(fi(r))vi(r,e,t);else{var o=t[r];typeof o<"u"&&o!==null&&(e[r]=String(o))}}}return e}function gi(){return Ae(typeof process<"u"&&process&&qe?qe:St)}function R(){var t=Ae(St);return Object.assign({},Fn,t)}function $e(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function Ve(t){for(var e=new Uint8Array(t.length/2),n=0,r=0;r<t.length;r+=2){var o=$e(t.charCodeAt(r)),i=$e(t.charCodeAt(r+1));e[n++]=o<<4|i}return e}var P=performance,bi="1.22.0";function jn(t){for(var e={},n=t.length,r=0;r<n;r++){var o=t[r];o&&(e[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return e}var Oi="http.url",Si="http.user_agent",he=Oi,Ai=Si,Ri="cloud.provider",Ni="cloud.account.id",Li="cloud.region",wi="cloud.availability_zone",Ci="cloud.platform",Ii="aws.ecs.container.arn",Pi="aws.ecs.cluster.arn",xi="aws.ecs.launchtype",Di="aws.ecs.task.arn",ki="aws.ecs.task.family",Mi="aws.ecs.task.revision",Ui="aws.eks.cluster.arn",Fi="aws.log.group.names",ji="aws.log.group.arns",Bi="aws.log.stream.names",Vi="aws.log.stream.arns",Hi="container.name",Xi="container.id",Gi="container.runtime",Ki="container.image.name",qi="container.image.tag",zi="deployment.environment",Yi="device.id",$i="device.model.identifier",Ji="device.model.name",Qi="faas.name",Wi="faas.id",Zi="faas.version",ts="faas.instance",es="faas.max_memory",ns="host.id",rs="host.name",os="host.type",is="host.arch",ss="host.image.name",as="host.image.id",us="host.image.version",cs="k8s.cluster.name",ps="k8s.node.name",ls="k8s.node.uid",ds="k8s.namespace.name",fs="k8s.pod.uid",hs="k8s.pod.name",_s="k8s.container.name",Es="k8s.replicaset.uid",ms="k8s.replicaset.name",vs="k8s.deployment.uid",Ts="k8s.deployment.name",ys="k8s.statefulset.uid",gs="k8s.statefulset.name",bs="k8s.daemonset.uid",Os="k8s.daemonset.name",Ss="k8s.job.uid",As="k8s.job.name",Rs="k8s.cronjob.uid",Ns="k8s.cronjob.name",Ls="os.type",ws="os.description",Cs="os.name",Is="os.version",Ps="process.pid",xs="process.executable.name",Ds="process.executable.path",ks="process.command",Ms="process.command_line",Us="process.command_args",Fs="process.owner",js="process.runtime.name",Bs="process.runtime.version",Vs="process.runtime.description",Hs="service.name",Xs="service.namespace",Gs="service.instance.id",Ks="service.version",qs="telemetry.sdk.name",zs="telemetry.sdk.language",Ys="telemetry.sdk.version",$s="telemetry.auto.version",Js="webengine.name",Qs="webengine.version",Ws="webengine.description",k=jn([Ri,Ni,Li,wi,Ci,Ii,Pi,xi,Di,ki,Mi,Ui,Fi,ji,Bi,Vi,Hi,Xi,Gi,Ki,qi,zi,Yi,$i,Ji,Qi,Wi,Zi,ts,es,ns,rs,os,is,ss,as,us,cs,ps,ls,ds,fs,hs,_s,Es,ms,vs,Ts,ys,gs,bs,Os,Ss,As,Rs,Ns,Ls,ws,Cs,Is,Ps,xs,Ds,ks,Ms,Us,Fs,js,Bs,Vs,Hs,Xs,Gs,Ks,qs,zs,Ys,$s,Js,Qs,Ws]),Zs="cpp",ta="dotnet",ea="erlang",na="go",ra="java",oa="nodejs",ia="php",sa="python",aa="ruby",ua="webjs",ca=jn([Zs,ta,ea,na,ra,oa,ia,sa,aa,ua]),st,_e=(st={},st[k.TELEMETRY_SDK_NAME]="opentelemetry",st[k.PROCESS_RUNTIME_NAME]="browser",st[k.TELEMETRY_SDK_LANGUAGE]=ca.WEBJS,st[k.TELEMETRY_SDK_VERSION]=bi,st),pa=9,la=6,da=Math.pow(10,la),zt=Math.pow(10,pa);function X(t){var e=t/1e3,n=Math.trunc(e),r=Math.round(t%1e3*da);return[n,r]}function He(){var t=P.timeOrigin;if(typeof t!="number"){var e=P;t=e.timing&&e.timing.fetchStart}return t}function dt(t){var e=X(He()),n=X(typeof t=="number"?t:P.now());return Bn(e,n)}function At(t){if(Xe(t))return t;if(typeof t=="number")return t<He()?dt(t):X(t);if(t instanceof Date)return X(t.getTime());throw TypeError("Invalid input type")}function fa(t,e){var n=e[0]-t[0],r=e[1]-t[1];return r<0&&(n-=1,r+=zt),[n,r]}function G(t){return t[0]*zt+t[1]}function Je(t){return t[0]*1e6+t[1]/1e3}function Xe(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function Qe(t){return Xe(t)||typeof t=="number"||t instanceof Date}function Bn(t,e){var n=[t[0]+e[0],t[1]+e[1]];return n[1]>=zt&&(n[1]-=zt,n[0]+=1),n}var K;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(K||(K={}));var ha=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vn=function(){function t(e){e===void 0&&(e={});var n;this._propagators=(n=e.propagators)!==null&&n!==void 0?n:[],this._fields=Array.from(new Set(this._propagators.map(function(r){return typeof r.fields=="function"?r.fields():[]}).reduce(function(r,o){return r.concat(o)},[])))}return t.prototype.inject=function(e,n,r){var o,i;try{for(var s=ha(this._propagators),a=s.next();!a.done;a=s.next()){var u=a.value;try{u.inject(e,n,r)}catch(c){m.warn("Failed to inject with "+u.constructor.name+". Err: "+c.message)}}}catch(c){o={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}},t.prototype.extract=function(e,n,r){return this._propagators.reduce(function(o,i){try{return i.extract(o,n,r)}catch(s){m.warn("Failed to inject with "+i.constructor.name+". Err: "+s.message)}return o},e)},t.prototype.fields=function(){return this._fields.slice()},t}(),Re="[_0-9a-z-*/]",_a="[a-z]"+Re+"{0,255}",Ea="[a-z0-9]"+Re+"{0,240}@[a-z]"+Re+"{0,13}",ma=new RegExp("^(?:"+_a+"|"+Ea+")$"),va=/^[ -~]{0,255}[!-~]$/,Ta=/,|=/;function ya(t){return ma.test(t)}function ga(t){return va.test(t)&&!Ta.test(t)}var We=32,ba=512,Ze=",",tn="=",Oa=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,n){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,n),r},t.prototype.unset=function(e){var n=this._clone();return n._internalState.delete(e),n},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(n,r){return n.push(r+tn+e.get(r)),n},[]).join(Ze)},t.prototype._parse=function(e){e.length>ba||(this._internalState=e.split(Ze).reverse().reduce(function(n,r){var o=r.trim(),i=o.indexOf(tn);if(i!==-1){var s=o.slice(0,i),a=o.slice(i+1,r.length);ya(s)&&ga(a)&&n.set(s,a)}return n},new Map),this._internalState.size>We&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,We))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}(),Xt="traceparent",Ee="tracestate",Sa="00",Aa="(?!ff)[\\da-f]{2}",Ra="(?![0]{32})[\\da-f]{32}",Na="(?![0]{16})[\\da-f]{16}",La="[\\da-f]{2}",wa=new RegExp("^\\s?("+Aa+")-("+Ra+")-("+Na+")-("+La+")(-.*)?\\s?$");function Ca(t){var e=wa.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var Hn=function(){function t(){}return t.prototype.inject=function(e,n,r){var o=O.getSpanContext(e);if(!(!o||Be(e)||!ne(o))){var i=Sa+"-"+o.traceId+"-"+o.spanId+"-0"+Number(o.traceFlags||F.NONE).toString(16);r.set(n,Xt,i),o.traceState&&r.set(n,Ee,o.traceState.serialize())}},t.prototype.extract=function(e,n,r){var o=r.get(n,Xt);if(!o)return e;var i=Array.isArray(o)?o[0]:o;if(typeof i!="string")return e;var s=Ca(i);if(!s)return e;s.isRemote=!0;var a=r.get(n,Ee);if(a){var u=Array.isArray(a)?a.join(","):a;s.traceState=new Oa(typeof u=="string"?u:void 0)}return O.setSpanContext(e,s)},t.prototype.fields=function(){return[Xt,Ee]},t}(),Ia="[object Object]",Pa="[object Null]",xa="[object Undefined]",Da=Function.prototype,Xn=Da.toString,ka=Xn.call(Object),Ma=Ua(Object.getPrototypeOf,Object),Gn=Object.prototype,Kn=Gn.hasOwnProperty,Q=Symbol?Symbol.toStringTag:void 0,qn=Gn.toString;function Ua(t,e){return function(n){return t(e(n))}}function en(t){if(!Fa(t)||ja(t)!==Ia)return!1;var e=Ma(t);if(e===null)return!0;var n=Kn.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Xn.call(n)===ka}function Fa(t){return t!=null&&typeof t=="object"}function ja(t){return t==null?t===void 0?xa:Pa:Q&&Q in Object(t)?Ba(t):Va(t)}function Ba(t){var e=Kn.call(t,Q),n=t[Q],r=!1;try{t[Q]=void 0,r=!0}catch{}var o=qn.call(t);return r&&(e?t[Q]=n:delete t[Q]),o}function Va(t){return qn.call(t)}var Ha=20;function Xa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.shift(),r=new WeakMap;t.length>0;)n=zn(n,t.shift(),0,r);return n}function me(t){return Yt(t)?t.slice():t}function zn(t,e,n,r){n===void 0&&(n=0);var o;if(!(n>Ha)){if(n++,Gt(t)||Gt(e)||Yn(e))o=me(e);else if(Yt(t)){if(o=t.slice(),Yt(e))for(var i=0,s=e.length;i<s;i++)o.push(me(e[i]));else if(vt(e))for(var a=Object.keys(e),i=0,s=a.length;i<s;i++){var u=a[i];o[u]=me(e[u])}}else if(vt(t))if(vt(e)){if(!Ga(t,e))return e;o=Object.assign({},t);for(var a=Object.keys(e),i=0,s=a.length;i<s;i++){var u=a[i],c=e[u];if(Gt(c))typeof c>"u"?delete o[u]:o[u]=c;else{var p=o[u],d=c;if(nn(t,u,r)||nn(e,u,r))delete o[u];else{if(vt(p)&&vt(d)){var f=r.get(p)||[],v=r.get(d)||[];f.push({obj:t,key:u}),v.push({obj:e,key:u}),r.set(p,f),r.set(d,v)}o[u]=zn(o[u],c,n,r)}}}}else o=e;return o}}function nn(t,e,n){for(var r=n.get(t[e])||[],o=0,i=r.length;o<i;o++){var s=r[o];if(s.key===e&&s.obj===t)return!0}return!1}function Yt(t){return Array.isArray(t)}function Yn(t){return typeof t=="function"}function vt(t){return!Gt(t)&&!Yt(t)&&!Yn(t)&&typeof t=="object"}function Gt(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function Ga(t,e){return!(!en(t)||!en(e))}var Ka=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function $n(t,e){return typeof e=="string"?t===e:!!t.match(e)}function Jn(t,e){var n,r;if(!e)return!1;try{for(var o=Ka(e),i=o.next();!i.done;i=o.next()){var s=i.value;if($n(t,s))return!0}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1}var qa=function(){function t(){var e=this;this._promise=new Promise(function(n,r){e._resolve=n,e._reject=r})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}(),za=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Ya=function(t,e,n){if(arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Ge=function(){function t(e,n){this._callback=e,this._that=n,this._isCalled=!1,this._deferred=new qa}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,n=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,Ya([this._that],za(r),!1))).then(function(i){return n._deferred.resolve(i)},function(i){return n._deferred.reject(i)})}catch(i){this._deferred.reject(i)}}return this._deferred.promise},t}();function $a(t,e){return new Promise(function(n){b.with(In(b.active()),function(){t.export(e,function(r){n(r)})})})}var Ja={_export:$a};function Qa(t){for(var e={},n=t.length,r=0;r<n;r++){var o=t[r];o&&(e[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return e}var Wa="aws.lambda.invoked_arn",Za="db.system",tu="db.connection_string",eu="db.user",nu="db.jdbc.driver_classname",ru="db.name",ou="db.statement",iu="db.operation",su="db.mssql.instance_name",au="db.cassandra.keyspace",uu="db.cassandra.page_size",cu="db.cassandra.consistency_level",pu="db.cassandra.table",lu="db.cassandra.idempotence",du="db.cassandra.speculative_execution_count",fu="db.cassandra.coordinator.id",hu="db.cassandra.coordinator.dc",_u="db.hbase.namespace",Eu="db.redis.database_index",mu="db.mongodb.collection",vu="db.sql.table",Tu="exception.type",yu="exception.message",gu="exception.stacktrace",bu="exception.escaped",Ou="faas.trigger",Su="faas.execution",Au="faas.document.collection",Ru="faas.document.operation",Nu="faas.document.time",Lu="faas.document.name",wu="faas.time",Cu="faas.cron",Iu="faas.coldstart",Pu="faas.invoked_name",xu="faas.invoked_provider",Du="faas.invoked_region",ku="net.transport",Mu="net.peer.ip",Uu="net.peer.port",Fu="net.peer.name",ju="net.host.ip",Bu="net.host.port",Vu="net.host.name",Hu="net.host.connection.type",Xu="net.host.connection.subtype",Gu="net.host.carrier.name",Ku="net.host.carrier.mcc",qu="net.host.carrier.mnc",zu="net.host.carrier.icc",Yu="peer.service",$u="enduser.id",Ju="enduser.role",Qu="enduser.scope",Wu="thread.id",Zu="thread.name",tc="code.function",ec="code.namespace",nc="code.filepath",rc="code.lineno",oc="http.method",ic="http.url",sc="http.target",ac="http.host",uc="http.scheme",cc="http.status_code",pc="http.flavor",lc="http.user_agent",dc="http.request_content_length",fc="http.request_content_length_uncompressed",hc="http.response_content_length",_c="http.response_content_length_uncompressed",Ec="http.server_name",mc="http.route",vc="http.client_ip",Tc="aws.dynamodb.table_names",yc="aws.dynamodb.consumed_capacity",gc="aws.dynamodb.item_collection_metrics",bc="aws.dynamodb.provisioned_read_capacity",Oc="aws.dynamodb.provisioned_write_capacity",Sc="aws.dynamodb.consistent_read",Ac="aws.dynamodb.projection",Rc="aws.dynamodb.limit",Nc="aws.dynamodb.attributes_to_get",Lc="aws.dynamodb.index_name",wc="aws.dynamodb.select",Cc="aws.dynamodb.global_secondary_indexes",Ic="aws.dynamodb.local_secondary_indexes",Pc="aws.dynamodb.exclusive_start_table",xc="aws.dynamodb.table_count",Dc="aws.dynamodb.scan_forward",kc="aws.dynamodb.segment",Mc="aws.dynamodb.total_segments",Uc="aws.dynamodb.count",Fc="aws.dynamodb.scanned_count",jc="aws.dynamodb.attribute_definitions",Bc="aws.dynamodb.global_secondary_index_updates",Vc="messaging.system",Hc="messaging.destination",Xc="messaging.destination_kind",Gc="messaging.temp_destination",Kc="messaging.protocol",qc="messaging.protocol_version",zc="messaging.url",Yc="messaging.message_id",$c="messaging.conversation_id",Jc="messaging.message_payload_size_bytes",Qc="messaging.message_payload_compressed_size_bytes",Wc="messaging.operation",Zc="messaging.consumer_id",tp="messaging.rabbitmq.routing_key",ep="messaging.kafka.message_key",np="messaging.kafka.consumer_group",rp="messaging.kafka.client_id",op="messaging.kafka.partition",ip="messaging.kafka.tombstone",sp="rpc.system",ap="rpc.service",up="rpc.method",cp="rpc.grpc.status_code",pp="rpc.jsonrpc.version",lp="rpc.jsonrpc.request_id",dp="rpc.jsonrpc.error_code",fp="rpc.jsonrpc.error_message",hp="message.type",_p="message.id",Ep="message.compressed_size",mp="message.uncompressed_size",j=Qa([Wa,Za,tu,eu,nu,ru,ou,iu,su,au,uu,cu,pu,lu,du,fu,hu,_u,Eu,mu,vu,Tu,yu,gu,bu,Ou,Su,Au,Ru,Nu,Lu,wu,Cu,Iu,Pu,xu,Du,ku,Mu,Uu,Fu,ju,Bu,Vu,Hu,Xu,Gu,Ku,qu,zu,Yu,$u,Ju,Qu,Wu,Zu,tc,ec,nc,rc,oc,ic,sc,ac,uc,cc,pc,lc,dc,fc,hc,_c,Ec,mc,vc,Tc,yc,gc,bc,Oc,Sc,Ac,Rc,Nc,Lc,wc,Cc,Ic,Pc,xc,Dc,kc,Mc,Uc,Fc,jc,Bc,Vc,Hc,Xc,Gc,Kc,qc,zc,Yc,$c,Jc,Qc,Wc,Zc,tp,ep,np,rp,op,ip,sp,ap,up,cp,pp,lp,dp,fp,hp,_p,Ep,mp]),vp="exception",Tp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yp=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},gp=function(){function t(e,n,r,o,i,s,a,u,c,p){a===void 0&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Oe.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=o,this.parentSpanId=s,this.kind=i,this.links=a;var d=Date.now();this._performanceStartTime=P.now(),this._performanceOffset=d-(this._performanceStartTime+He()),this._startTimeProvided=u!=null,this.startTime=this._getTime(u??d),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,p!=null&&this.setAttributes(p),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,n){return n==null||this._isSpanEnded()?this:e.length===0?(m.warn("Invalid attribute key: "+e),this):Mn(n)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(n),this):(m.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var n,r;try{for(var o=Tp(Object.entries(e)),i=o.next();!i.done;i=o.next()){var s=yp(i.value,2),a=s[0],u=s[1];this.setAttribute(a,u)}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return this},t.prototype.addEvent=function(e,n,r){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return m.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&m.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Qe(n)&&(Qe(r)||(r=n),n=void 0);var o=Bt(n);return this.events.push({name:e,attributes:o,time:this._getTime(r),droppedAttributesCount:0}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){m.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=fa(this.startTime,this.endTime),this._duration[0]<0&&(m.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&m.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<P.now())return dt(e+this._performanceOffset);if(typeof e=="number")return X(e);if(e instanceof Date)return X(e.getTime());if(Xe(e))return e;if(this._startTimeProvided)return X(Date.now());var n=P.now()-this._performanceStartTime;return Bn(this.startTime,X(n))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,n){var r={};typeof e=="string"?r[j.EXCEPTION_MESSAGE]=e:e&&(e.code?r[j.EXCEPTION_TYPE]=e.code.toString():e.name&&(r[j.EXCEPTION_TYPE]=e.name),e.message&&(r[j.EXCEPTION_MESSAGE]=e.message),e.stack&&(r[j.EXCEPTION_STACKTRACE]=e.stack)),r[j.EXCEPTION_TYPE]||r[j.EXCEPTION_MESSAGE]?this.addEvent(vp,r,n):m.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&m.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,n){return e.length<=n?e:e.substr(0,n)},t.prototype._truncateToSize=function(e){var n=this,r=this._attributeValueLengthLimit;return r<=0?(m.warn("Attribute value limit must be positive, got "+r),e):typeof e=="string"?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(function(o){return typeof o=="string"?n._truncateToLimitUtil(o,r):o}):e},t}(),ft;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(ft||(ft={}));var $t=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:ft.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),lt=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:ft.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),ve=function(){function t(e){var n,r,o,i;this._root=e.root,this._root||(et(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new lt),this._remoteParentSampled=(n=e.remoteParentSampled)!==null&&n!==void 0?n:new lt,this._remoteParentNotSampled=(r=e.remoteParentNotSampled)!==null&&r!==void 0?r:new $t,this._localParentSampled=(o=e.localParentSampled)!==null&&o!==void 0?o:new lt,this._localParentNotSampled=(i=e.localParentNotSampled)!==null&&i!==void 0?i:new $t}return t.prototype.shouldSample=function(e,n,r,o,i,s){var a=O.getSpanContext(e);return!a||!ne(a)?this._root.shouldSample(e,n,r,o,i,s):a.isRemote?a.traceFlags&F.SAMPLED?this._remoteParentSampled.shouldSample(e,n,r,o,i,s):this._remoteParentNotSampled.shouldSample(e,n,r,o,i,s):a.traceFlags&F.SAMPLED?this._localParentSampled.shouldSample(e,n,r,o,i,s):this._localParentNotSampled.shouldSample(e,n,r,o,i,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}(),rn=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,n){return{decision:Rn(n)&&this._accumulate(n)<this._upperBound?ft.RECORD_AND_SAMPLED:ft.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var n=0,r=0;r<e.length/8;r++){var o=r*8,i=parseInt(e.slice(o,o+8),16);n=(n^i)>>>0}return n},t}(),bp=R(),Op=M.AlwaysOn,at=1;function Qn(){return{sampler:Wn(bp),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:R().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:R().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:R().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:R().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:R().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:R().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:R().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:R().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Wn(t){switch(t===void 0&&(t=R()),t.OTEL_TRACES_SAMPLER){case M.AlwaysOn:return new lt;case M.AlwaysOff:return new $t;case M.ParentBasedAlwaysOn:return new ve({root:new lt});case M.ParentBasedAlwaysOff:return new ve({root:new $t});case M.TraceIdRatio:return new rn(on(t));case M.ParentBasedTraceIdRatio:return new ve({root:new rn(on(t))});default:return m.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Op+'".'),new lt}}function on(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return m.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+at+"."),at;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(m.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+at+"."),at):e<0||e>1?(m.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+at+"."),at):e}function Sp(t){var e={sampler:Wn()},n=Qn(),r=Object.assign({},n,e,t);return r.generalLimits=Object.assign({},n.generalLimits,t.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,t.spanLimits||{}),r}function Ap(t){var e,n,r,o,i,s,a,u,c,p,d,f,v=Object.assign({},t.spanLimits),h=gi();return v.attributeCountLimit=(s=(i=(o=(n=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&n!==void 0?n:(r=t.generalLimits)===null||r===void 0?void 0:r.attributeCountLimit)!==null&&o!==void 0?o:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&i!==void 0?i:h.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:Ht,v.attributeValueLengthLimit=(f=(d=(p=(u=(a=t.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&u!==void 0?u:(c=t.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&p!==void 0?p:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:Vt,Object.assign({},t,{spanLimits:v})}var Rp=function(){function t(e,n){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var r=R();this._maxExportBatchSize=typeof(n==null?void 0:n.maxExportBatchSize)=="number"?n.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(n==null?void 0:n.maxQueueSize)=="number"?n.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(n==null?void 0:n.scheduledDelayMillis)=="number"?n.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(n==null?void 0:n.exportTimeoutMillis)=="number"?n.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Ge(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(m.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,n){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&F.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&m.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(m.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(n,r){for(var o=[],i=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),s=0,a=i;s<a;s++)o.push(e._flushOneBatch());Promise.all(o).then(function(){n()}).catch(r)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(n,r){var o=setTimeout(function(){r(new Error("Timeout"))},e._exportTimeoutMillis);b.with(In(b.active()),function(){var i;e._finishedSpans.length<=e._maxExportBatchSize?(i=e._finishedSpans,e._finishedSpans=[]):i=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var s=function(){return e._exporter.export(i,function(d){var f;clearTimeout(o),d.code===K.SUCCESS?n():r((f=d.error)!==null&&f!==void 0?f:new Error("BatchSpanProcessor: span export failed"))})},a=null,u=0,c=i.length;u<c;u++){var p=i[u];p.resource.asyncAttributesPending&&p.resource.waitForAsyncAttributes&&(a!=null||(a=[]),a.push(p.resource.waitForAsyncAttributes()))}a===null?s():Promise.all(a).then(s,function(d){et(d),r(d)})})})},t.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var n=function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(r){e._isExporting=!1,et(r)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return n();this._timer===void 0&&(this._timer=setTimeout(function(){return n()},this._scheduledDelayMillis))}},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}(),Np=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zn=function(t){Np(e,t);function e(n,r){var o=t.call(this,n,r)||this;return o.onInit(r),o}return e.prototype.onInit=function(n){var r=this;(n==null?void 0:n.disableAutoFlushOnDocumentHide)!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&r.forceFlush()},this._pageHideListener=function(){r.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(Rp),Lp=8,wp=16,Cp=function(){function t(){this.generateTraceId=sn(wp),this.generateSpanId=sn(Lp)}return t}(),kt=Array(32);function sn(t){return function(){for(var e=0;e<t*2;e++)kt[e]=Math.floor(Math.random()*16)+48,kt[e]>=58&&(kt[e]+=39);return String.fromCharCode.apply(null,kt.slice(0,t*2))}}var Ip=function(){function t(e,n,r){this._tracerProvider=r;var o=Sp(n);this._sampler=o.sampler,this._generalLimits=o.generalLimits,this._spanLimits=o.spanLimits,this._idGenerator=n.idGenerator||new Cp,this.resource=r.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,n,r){var o,i,s;n===void 0&&(n={}),r===void 0&&(r=b.active()),n.root&&(r=O.deleteSpan(r));var a=O.getSpan(r);if(Be(r)){m.debug("Instrumentation suppressed, returning Noop Span");var u=O.wrapSpanContext(Sn);return u}var c=a==null?void 0:a.spanContext(),p=this._idGenerator.generateSpanId(),d,f,v;!c||!O.isSpanContextValid(c)?d=this._idGenerator.generateTraceId():(d=c.traceId,f=c.traceState,v=c.spanId);var h=(o=n.kind)!==null&&o!==void 0?o:wt.INTERNAL,T=((i=n.links)!==null&&i!==void 0?i:[]).map(function(it){return{context:it.context,attributes:Bt(it.attributes)}}),y=Bt(n.attributes),g=this._sampler.shouldSample(r,d,e,h,y,T);f=(s=g.traceState)!==null&&s!==void 0?s:f;var S=g.decision===Kt.RECORD_AND_SAMPLED?F.SAMPLED:F.NONE,x={traceId:d,spanId:p,traceFlags:S,traceState:f};if(g.decision===Kt.NOT_RECORD){m.debug("Recording is off, propagating context in a non-recording span");var u=O.wrapSpanContext(x);return u}var q=Bt(Object.assign(y,g.attributes)),ot=new gp(this,r,e,x,h,v,T,n.startTime,void 0,q);return ot},t.prototype.startActiveSpan=function(e,n,r,o){var i,s,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(i=n,a=r):(i=n,s=r,a=o);var u=s??b.active(),c=this.startSpan(e,i,u),p=O.setSpan(u,c);return b.with(p,a,void 0,c)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}();function Pp(){return"unknown_service"}var z=function(){return z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},z.apply(this,arguments)},xp=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(p){try{c(r.next(p))}catch(d){s(d)}}function u(p){try{c(r.throw(p))}catch(d){s(d)}}function c(p){p.done?i(p.value):o(p.value).then(a,u)}c((r=r.apply(t,[])).next())})},Dp=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(p){return u([c,p])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(p){c=[6,p],o=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},kp=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Ne=function(){function t(e,n){var r=this,o;this._attributes=e,this.asyncAttributesPending=n!=null,this._syncAttributes=(o=this._attributes)!==null&&o!==void 0?o:{},this._asyncAttributesPromise=n==null?void 0:n.then(function(i){return r._attributes=Object.assign({},r._attributes,i),r.asyncAttributesPending=!1,i},function(i){return m.debug("a resource's async attributes promise rejected: %s",i),r.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[k.SERVICE_NAME]=Pp(),e[k.TELEMETRY_SDK_LANGUAGE]=_e[k.TELEMETRY_SDK_LANGUAGE],e[k.TELEMETRY_SDK_NAME]=_e[k.TELEMETRY_SDK_NAME],e[k.TELEMETRY_SDK_VERSION]=_e[k.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&m.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return xp(this,void 0,void 0,function(){return Dp(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var n=this,r;if(!e)return this;var o=z(z({},this._syncAttributes),(r=e._syncAttributes)!==null&&r!==void 0?r:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(o);var i=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(s){var a,u=kp(s,2),c=u[0],p=u[1];return z(z(z(z({},n._syncAttributes),c),(a=e._syncAttributes)!==null&&a!==void 0?a:e.attributes),p)});return new t(o,i)},t.EMPTY=new t({}),t}(),Mt=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mp=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,n,r=[];try{for(var o=Mt(this._spanProcessors),i=o.next();!i.done;i=o.next()){var s=i.value;r.push(s.forceFlush())}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return new Promise(function(a){Promise.all(r).then(function(){a()}).catch(function(u){et(u||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},t.prototype.onStart=function(e,n){var r,o;try{for(var i=Mt(this._spanProcessors),s=i.next();!s.done;s=i.next()){var a=s.value;a.onStart(e,n)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},t.prototype.onEnd=function(e){var n,r;try{for(var o=Mt(this._spanProcessors),i=o.next();!i.done;i=o.next()){var s=i.value;s.onEnd(e)}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.shutdown=function(){var e,n,r=[];try{for(var o=Mt(this._spanProcessors),i=o.next();!i.done;i=o.next()){var s=i.value;r.push(s.shutdown())}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return new Promise(function(a,u){Promise.all(r).then(function(){a()},u)})},t}(),Up=function(){function t(){}return t.prototype.onStart=function(e,n){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}(),W;(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(W||(W={}));var Fp=function(){function t(e){e===void 0&&(e={});var n;this._registeredSpanProcessors=[],this._tracers=new Map;var r=Xa({},Qn(),Ap(e));this.resource=(n=r.resource)!==null&&n!==void 0?n:Ne.empty(),this.resource=Ne.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});var o=this._buildExporterFromEnv();if(o!==void 0){var i=new Zn(o);this.activeSpanProcessor=i}else this.activeSpanProcessor=new Up}return t.prototype.getTracer=function(e,n,r){var o=e+"@"+(n||"")+":"+((r==null?void 0:r.schemaUrl)||"");return this._tracers.has(o)||this._tracers.set(o,new Ip({name:e,version:n,schemaUrl:r==null?void 0:r.schemaUrl},this._config,this)),this._tracers.get(o)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(n){return m.error("Error while trying to shutdown current span processor",n)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Mp(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),O.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&b.setGlobalContextManager(e.contextManager),e.propagator&&I.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,n=this._registeredSpanProcessors.map(function(r){return new Promise(function(o){var i,s=setTimeout(function(){o(new Error("Span processor did not completed within timeout period of "+e+" ms")),i=W.timeout},e);r.forceFlush().then(function(){clearTimeout(s),i!==W.timeout&&(i=W.resolved,o(i))}).catch(function(a){clearTimeout(s),i=W.error,o(a)})})});return new Promise(function(r,o){Promise.all(n).then(function(i){var s=i.filter(function(a){return a!==W.resolved});s.length>0?o(s):r()}).catch(function(i){return o([i])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var n;return(n=this.constructor._registeredPropagators.get(e))===null||n===void 0?void 0:n()},t.prototype._getSpanExporter=function(e){var n;return(n=this.constructor._registeredExporters.get(e))===null||n===void 0?void 0:n()},t.prototype._buildPropagatorFromEnv=function(){var e=this,n=Array.from(new Set(R().OTEL_PROPAGATORS)),r=n.map(function(i){var s=e._getPropagator(i);return s||m.warn('Propagator "'+i+'" requested through environment variable is unavailable.'),s}),o=r.reduce(function(i,s){return s&&i.push(s),i},[]);if(o.length!==0)return n.length===1?o[0]:new Vn({propagators:o})},t.prototype._buildExporterFromEnv=function(){var e=R().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var n=this._getSpanExporter(e);return n||m.error('Exporter "'+e+'" requested through environment variable is unavailable.'),n}},t._registeredPropagators=new Map([["tracecontext",function(){return new Hn}],["baggage",function(){return new Dn}]]),t._registeredExporters=new Map,t}(),jp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bp=function(){function t(){}return t.prototype.export=function(e,n){return this._sendSpans(e,n)},t.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype._exportInfo=function(e){var n;return{resource:{attributes:e.resource.attributes},traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(n=e.spanContext().traceState)===null||n===void 0?void 0:n.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:Je(e.startTime),duration:Je(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},t.prototype._sendSpans=function(e,n){var r,o;try{for(var i=jp(e),s=i.next();!s.done;s=i.next()){var a=s.value;console.dir(this._exportInfo(a),{depth:3})}}catch(u){r={error:u}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}if(n)return n({code:K.SUCCESS})},t}(),Vp=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(p){try{c(r.next(p))}catch(d){s(d)}}function u(p){try{c(r.throw(p))}catch(d){s(d)}}function c(p){p.done?i(p.value):o(p.value).then(a,u)}c((r=r.apply(t,[])).next())})},Hp=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(p){return u([c,p])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(p){c=[6,p],o=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Xp=function(){function t(e){this._exporter=e,this._shutdownOnce=new Ge(this._shutdown,this),this._unresolvedExports=new Set}return t.prototype.forceFlush=function(){return Vp(this,void 0,void 0,function(){return Hp(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.onStart=function(e,n){},t.prototype.onEnd=function(e){var n=this,r,o;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&F.SAMPLED){var i=function(){return Ja._export(n._exporter,[e]).then(function(a){var u;a.code!==K.SUCCESS&&et((u=a.error)!==null&&u!==void 0?u:new Error("SimpleSpanProcessor: span export failed (status "+a+")"))}).catch(function(a){et(a)})};if(e.resource.asyncAttributesPending){var s=(o=(r=e.resource).waitForAsyncAttributes)===null||o===void 0?void 0:o.call(r).then(function(){return s!=null&&n._unresolvedExports.delete(s),i()},function(a){return et(a)});s!=null&&this._unresolvedExports.add(s)}else i()}},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t}(),Gp=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Kp=function(t,e,n){if(arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},tr=function(){function t(){this._enabled=!1,this._currentContext=J}return t.prototype._bindFunction=function(e,n){e===void 0&&(e=J);var r=this,o=function(){for(var i=this,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return r.with(e,function(){return n.apply(i,s)})};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:n.length}),o},t.prototype.active=function(){return this._currentContext},t.prototype.bind=function(e,n){return e===void 0&&(e=this.active()),typeof n=="function"?this._bindFunction(e,n):n},t.prototype.disable=function(){return this._currentContext=J,this._enabled=!1,this},t.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=J,this)},t.prototype.with=function(e,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var s=this._currentContext;this._currentContext=e||J;try{return n.call.apply(n,Kp([r],Gp(o),!1))}finally{this._currentContext=s}},t}(),qp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zp=function(t){qp(e,t);function e(n){n===void 0&&(n={});var r=t.call(this,n)||this;if(n.contextManager)throw"contextManager should be defined in register method not in constructor";if(n.propagator)throw"propagator should be defined in register method not in constructor";return r}return e.prototype.register=function(n){n===void 0&&(n={}),n.contextManager===void 0&&(n.contextManager=new tr),n.contextManager&&n.contextManager.enable(),t.prototype.register.call(this,n)},e}(Fp),E;(function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"})(E||(E={}));var Te;function Yp(){return Te||(Te=document.createElement("a")),Te}function $(t,e){return e in t}function L(t,e,n,r){var o=void 0,i=void 0;$(n,e)&&typeof n[e]=="number"&&(o=n[e]);var s=E.FETCH_START;if($(n,s)&&typeof n[s]=="number"&&(i=n[s]),o!==void 0&&i!==void 0&&o>=i)return t.addEvent(e,o),t}function ht(t,e){L(t,E.FETCH_START,e),L(t,E.DOMAIN_LOOKUP_START,e),L(t,E.DOMAIN_LOOKUP_END,e),L(t,E.CONNECT_START,e),$(e,"name")&&e.name.startsWith("https:")&&L(t,E.SECURE_CONNECTION_START,e),L(t,E.CONNECT_END,e),L(t,E.REQUEST_START,e),L(t,E.RESPONSE_START,e),L(t,E.RESPONSE_END,e);var n=e[E.ENCODED_BODY_SIZE];n!==void 0&&t.setAttribute(j.HTTP_RESPONSE_CONTENT_LENGTH,n);var r=e[E.DECODED_BODY_SIZE];r!==void 0&&n!==r&&t.setAttribute(j.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,r)}function $p(t){return t.slice().sort(function(e,n){var r=e[E.FETCH_START],o=n[E.FETCH_START];return r>o?1:r<o?-1:0})}function er(){return typeof location<"u"?location.origin:void 0}function nr(t,e,n,r,o,i){o===void 0&&(o=new WeakSet);var s=V(t);t=s.toString();var a=Qp(t,e,n,r,o,i);if(a.length===0)return{mainRequest:void 0};if(a.length===1)return{mainRequest:a[0]};var u=$p(a);if(s.origin!==er()&&u.length>1){var c=u[0],p=Jp(u,c[E.RESPONSE_END],n),d=c[E.RESPONSE_END],f=p[E.FETCH_START];return f<d&&(p=c,c=void 0),{corsPreFlightRequest:c,mainRequest:p}}else return{mainRequest:a[0]}}function Jp(t,e,n){for(var r=G(n),o=G(At(e)),i=t[1],s,a=t.length,u=1;u<a;u++){var c=t[u],p=G(At(c[E.FETCH_START])),d=G(At(c[E.RESPONSE_END])),f=r-d;p>=o&&(!s||f<s)&&(s=f,i=c)}return i}function Qp(t,e,n,r,o,i){var s=G(e),a=G(n),u=r.filter(function(c){var p=G(At(c[E.FETCH_START])),d=G(At(c[E.RESPONSE_END]));return c.initiatorType.toLowerCase()===(i||"xmlhttprequest")&&c.name===t&&p>=s&&d<=a});return u.length>0&&(u=u.filter(function(c){return!o.has(c)})),u}function V(t){if(typeof URL=="function")return new URL(t,typeof document<"u"?document.baseURI:typeof location<"u"?location.href:void 0);var e=Yp();return e.href=t,e}function rr(t,e){if(t.nodeType===Node.DOCUMENT_NODE)return"/";var n=Zp(t,e);if(e&&n.indexOf("@id")>0)return n;var r="";return t.parentNode&&(r+=rr(t.parentNode,!1)),r+=n,r}function Wp(t){if(!t.parentNode)return 0;var e=[t.nodeType];t.nodeType===Node.CDATA_SECTION_NODE&&e.push(Node.TEXT_NODE);var n=Array.from(t.parentNode.childNodes);return n=n.filter(function(r){var o=r.localName;return e.indexOf(r.nodeType)>=0&&o===t.localName}),n.length>=1?n.indexOf(t)+1:0}function Zp(t,e){var n=t.nodeType,r=Wp(t),o="";if(n===Node.ELEMENT_NODE){var i=t.getAttribute("id");if(e&&i)return'//*[@id="'+i+'"]';o=t.localName}else if(n===Node.TEXT_NODE||n===Node.CDATA_SECTION_NODE)o="text()";else if(n===Node.COMMENT_NODE)o="comment()";else return"";return o&&r>1?"/"+o+"["+r+"]":"/"+o}function or(t,e){var n=e||[];(typeof n=="string"||n instanceof RegExp)&&(n=[n]);var r=V(t);return r.origin===er()?!0:n.some(function(o){return $n(t,o)})}var tl=function(){function t(){}return t.prototype.emit=function(e){},t}(),el=function(){function t(){}return t.prototype.getLogger=function(e,n,r){return new tl},t}(),an=new el,nl=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Ut=Symbol.for("io.opentelemetry.js.api.logs"),Tt=nl;function rl(t,e,n){return function(r){return r===t?e:n}}var un=1,ol=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalLoggerProvider=function(e){return Tt[Ut]?this.getLoggerProvider():(Tt[Ut]=rl(un,e,an),e)},t.prototype.getLoggerProvider=function(){var e,n;return(n=(e=Tt[Ut])===null||e===void 0?void 0:e.call(Tt,un))!==null&&n!==void 0?n:an},t.prototype.getLogger=function(e,n,r){return this.getLoggerProvider().getLogger(e,n,r)},t.prototype.disable=function(){delete Tt[Ut]},t}(),ir=ol.getInstance();function sr(t){t===void 0&&(t=[]);for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];if(Array.isArray(o)){var i=sr(o);e=e.concat(i.instrumentations)}else typeof o=="function"?e.push(new o):o.instrumentationName&&e.push(o)}return{instrumentations:e}}function il(t,e,n,r){for(var o=0,i=t.length;o<i;o++){var s=t[o];e&&s.setTracerProvider(e),n&&s.setMeterProvider(n),r&&s.setLoggerProvider&&s.setLoggerProvider(r),s.getConfig().enabled||s.enable()}}function sl(t){t.forEach(function(e){return e.disable()})}function al(t){var e=sr(t.instrumentations).instrumentations,n=t.tracerProvider||O.getTracerProvider(),r=t.meterProvider||Ln.getMeterProvider(),o=t.loggerProvider||ir.getLoggerProvider();return il(e,n,r,o),function(){sl(e)}}function Le(t){return typeof t=="function"}var C=console.error.bind(console);function yt(t,e,n){var r=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:r,writable:!0,value:n})}function xt(t){t&&t.logger&&(Le(t.logger)?C=t.logger:C("new logger isn't a function, not replacing"))}function ar(t,e,n){if(!t||!t[e]){C("no original function "+e+" to wrap");return}if(!n){C("no wrapper function"),C(new Error().stack);return}if(!Le(t[e])||!Le(n)){C("original object and wrapper must be functions");return}var r=t[e],o=n(r,e);return yt(o,"__original",r),yt(o,"__unwrap",function(){t[e]===o&&yt(t,e,r)}),yt(o,"__wrapped",!0),yt(t,e,o),o}function ul(t,e,n){if(t)Array.isArray(t)||(t=[t]);else{C("must provide one or more modules to patch"),C(new Error().stack);return}if(!(e&&Array.isArray(e))){C("must provide one or more functions to wrap on modules");return}t.forEach(function(r){e.forEach(function(o){ar(r,o,n)})})}function ur(t,e){if(!t||!t[e]){C("no function to unwrap."),C(new Error().stack);return}if(!t[e].__unwrap)C("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function cl(t,e){if(t)Array.isArray(t)||(t=[t]);else{C("must provide one or more modules to patch"),C(new Error().stack);return}if(!(e&&Array.isArray(e))){C("must provide one or more functions to unwrap on modules");return}t.forEach(function(n){e.forEach(function(r){ur(n,r)})})}xt.wrap=ar;xt.massWrap=ul;xt.unwrap=ur;xt.massUnwrap=cl;var Ft=xt,we=function(){return we=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},we.apply(this,arguments)},pl=function(){function t(e,n,r){r===void 0&&(r={}),this.instrumentationName=e,this.instrumentationVersion=n,this._wrap=Ft.wrap,this._unwrap=Ft.unwrap,this._massWrap=Ft.massWrap,this._massUnwrap=Ft.massUnwrap,this._config=we({enabled:!0},r),this._diag=m.createComponentLogger({namespace:e}),this._tracer=O.getTracer(e,n),this._meter=Ln.getMeter(e,n),this._logger=ir.getLogger(e,n),this._updateMetricInstruments()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(t.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),t.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},t.prototype.getModuleDefinitions=function(){var e,n=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(n)?n:[n]},t.prototype._updateMetricInstruments=function(){},t.prototype.getConfig=function(){return this._config},t.prototype.setConfig=function(e){e===void 0&&(e={}),this._config=Object.assign({},e)},t.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),t}(),ll=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),re=function(t){ll(e,t);function e(n,r,o){o===void 0&&(o={});var i=t.call(this,n,r,o)||this;return i._config.enabled&&i.enable(),i}return e}(pl);function Jt(t,e,n){var r,o;try{o=t()}catch(i){r=i}finally{if(e(r,o),r&&!n)throw r;return o}}function tt(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var Rt;(function(t){t.DOCUMENT_LOAD="documentLoad",t.DOCUMENT_FETCH="documentFetch",t.RESOURCE_FETCH="resourceFetch"})(Rt||(Rt={}));var dl="0.38.0",Qt;(function(t){t.FIRST_PAINT="firstPaint",t.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(Qt||(Qt={}));var fl=function(){var t,e,n={},r=(e=(t=P).getEntriesByType)===null||e===void 0?void 0:e.call(t,"navigation")[0];if(r){var o=Object.values(E);o.forEach(function(a){if($(r,a)){var u=r[a];typeof u=="number"&&(n[a]=u)}})}else{var i=P,s=i.timing;if(s){var o=Object.values(E);o.forEach(function(u){if($(s,u)){var c=s[u];typeof c=="number"&&(n[u]=c)}})}}return n},cn={"first-paint":Qt.FIRST_PAINT,"first-contentful-paint":Qt.FIRST_CONTENTFUL_PAINT},hl=function(t){var e,n,r=(n=(e=P).getEntriesByType)===null||n===void 0?void 0:n.call(e,"paint");r&&r.forEach(function(o){var i=o.name,s=o.startTime;$(cn,i)&&t.addEvent(cn[i],s)})},_l=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),El=function(t){_l(e,t);function e(n){n===void 0&&(n={});var r=t.call(this,"@opentelemetry/instrumentation-document-load",dl,n)||this;return r.component="document-load",r.version="1",r.moduleName=r.component,r}return e.prototype.init=function(){},e.prototype._onDocumentLoaded=function(){var n=this;window.setTimeout(function(){n._collectPerformance()})},e.prototype._addResourcesSpans=function(n){var r=this,o,i,s=(i=(o=P).getEntriesByType)===null||i===void 0?void 0:i.call(o,"resource");s&&s.forEach(function(a){r._initResourceSpan(a,n)})},e.prototype._collectPerformance=function(){var n=this,r=Array.from(document.getElementsByTagName("meta")).find(function(s){return s.getAttribute("name")===Xt}),o=fl(),i=r&&r.content||"";b.with(I.extract(J,{traceparent:i}),function(){var s,a=n._startSpan(Rt.DOCUMENT_LOAD,E.FETCH_START,o);a&&(b.with(O.setSpan(b.active(),a),function(){var u=n._startSpan(Rt.DOCUMENT_FETCH,E.FETCH_START,o);u&&(u.setAttribute(he,location.href),b.with(O.setSpan(b.active(),u),function(){var c;ht(u,o),n._addCustomAttributesOnSpan(u,(c=n._getConfig().applyCustomAttributesOnSpan)===null||c===void 0?void 0:c.documentFetch),n._endSpan(u,E.RESPONSE_END,o)}))}),a.setAttribute(he,location.href),a.setAttribute(Ai,navigator.userAgent),n._addResourcesSpans(a),L(a,E.FETCH_START,o),L(a,E.UNLOAD_EVENT_START,o),L(a,E.UNLOAD_EVENT_END,o),L(a,E.DOM_INTERACTIVE,o),L(a,E.DOM_CONTENT_LOADED_EVENT_START,o),L(a,E.DOM_CONTENT_LOADED_EVENT_END,o),L(a,E.DOM_COMPLETE,o),L(a,E.LOAD_EVENT_START,o),L(a,E.LOAD_EVENT_END,o),hl(a),n._addCustomAttributesOnSpan(a,(s=n._getConfig().applyCustomAttributesOnSpan)===null||s===void 0?void 0:s.documentLoad),n._endSpan(a,E.LOAD_EVENT_END,o))})},e.prototype._endSpan=function(n,r,o){n&&($(o,r)?n.end(o[r]):n.end())},e.prototype._initResourceSpan=function(n,r){var o,i=this._startSpan(Rt.RESOURCE_FETCH,E.FETCH_START,n,r);i&&(i.setAttribute(he,n.name),ht(i,n),this._addCustomAttributesOnResourceSpan(i,n,(o=this._getConfig().applyCustomAttributesOnSpan)===null||o===void 0?void 0:o.resourceFetch),this._endSpan(i,E.RESPONSE_END,n))},e.prototype._startSpan=function(n,r,o,i){if($(o,r)&&typeof o[r]=="number"){var s=this.tracer.startSpan(n,{startTime:o[r]},i?O.setSpan(b.active(),i):void 0);return s}},e.prototype._waitForPageLoad=function(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))},e.prototype._getConfig=function(){return this._config},e.prototype._addCustomAttributesOnSpan=function(n,r){var o=this;r&&Jt(function(){return r(n)},function(i){i&&o._diag.error("addCustomAttributesOnSpan",i)},!0)},e.prototype._addCustomAttributesOnResourceSpan=function(n,r,o){var i=this;o&&Jt(function(){return o(n,r)},function(s){s&&i._diag.error("addCustomAttributesOnResourceSpan",s)},!0)},e.prototype.enable=function(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()},e.prototype.disable=function(){window.removeEventListener("load",this._onDocumentLoaded)},e}(re),Wt;(function(t){t.COMPONENT="component",t.HTTP_ERROR_NAME="http.error_name",t.HTTP_STATUS_TEXT="http.status_text"})(Wt||(Wt={}));function ml(t){for(var e={},n=t.length,r=0;r<n;r++){var o=t[r];o&&(e[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return e}var vl="aws.lambda.invoked_arn",Tl="db.system",yl="db.connection_string",gl="db.user",bl="db.jdbc.driver_classname",Ol="db.name",Sl="db.statement",Al="db.operation",Rl="db.mssql.instance_name",Nl="db.cassandra.keyspace",Ll="db.cassandra.page_size",wl="db.cassandra.consistency_level",Cl="db.cassandra.table",Il="db.cassandra.idempotence",Pl="db.cassandra.speculative_execution_count",xl="db.cassandra.coordinator.id",Dl="db.cassandra.coordinator.dc",kl="db.hbase.namespace",Ml="db.redis.database_index",Ul="db.mongodb.collection",Fl="db.sql.table",jl="exception.type",Bl="exception.message",Vl="exception.stacktrace",Hl="exception.escaped",Xl="faas.trigger",Gl="faas.execution",Kl="faas.document.collection",ql="faas.document.operation",zl="faas.document.time",Yl="faas.document.name",$l="faas.time",Jl="faas.cron",Ql="faas.coldstart",Wl="faas.invoked_name",Zl="faas.invoked_provider",td="faas.invoked_region",ed="net.transport",nd="net.peer.ip",rd="net.peer.port",od="net.peer.name",id="net.host.ip",sd="net.host.port",ad="net.host.name",ud="net.host.connection.type",cd="net.host.connection.subtype",pd="net.host.carrier.name",ld="net.host.carrier.mcc",dd="net.host.carrier.mnc",fd="net.host.carrier.icc",hd="peer.service",_d="enduser.id",Ed="enduser.role",md="enduser.scope",vd="thread.id",Td="thread.name",yd="code.function",gd="code.namespace",bd="code.filepath",Od="code.lineno",Sd="http.method",Ad="http.url",Rd="http.target",Nd="http.host",Ld="http.scheme",wd="http.status_code",Cd="http.flavor",Id="http.user_agent",Pd="http.request_content_length",xd="http.request_content_length_uncompressed",Dd="http.response_content_length",kd="http.response_content_length_uncompressed",Md="http.server_name",Ud="http.route",Fd="http.client_ip",jd="aws.dynamodb.table_names",Bd="aws.dynamodb.consumed_capacity",Vd="aws.dynamodb.item_collection_metrics",Hd="aws.dynamodb.provisioned_read_capacity",Xd="aws.dynamodb.provisioned_write_capacity",Gd="aws.dynamodb.consistent_read",Kd="aws.dynamodb.projection",qd="aws.dynamodb.limit",zd="aws.dynamodb.attributes_to_get",Yd="aws.dynamodb.index_name",$d="aws.dynamodb.select",Jd="aws.dynamodb.global_secondary_indexes",Qd="aws.dynamodb.local_secondary_indexes",Wd="aws.dynamodb.exclusive_start_table",Zd="aws.dynamodb.table_count",tf="aws.dynamodb.scan_forward",ef="aws.dynamodb.segment",nf="aws.dynamodb.total_segments",rf="aws.dynamodb.count",of="aws.dynamodb.scanned_count",sf="aws.dynamodb.attribute_definitions",af="aws.dynamodb.global_secondary_index_updates",uf="messaging.system",cf="messaging.destination",pf="messaging.destination_kind",lf="messaging.temp_destination",df="messaging.protocol",ff="messaging.protocol_version",hf="messaging.url",_f="messaging.message_id",Ef="messaging.conversation_id",mf="messaging.message_payload_size_bytes",vf="messaging.message_payload_compressed_size_bytes",Tf="messaging.operation",yf="messaging.consumer_id",gf="messaging.rabbitmq.routing_key",bf="messaging.kafka.message_key",Of="messaging.kafka.consumer_group",Sf="messaging.kafka.client_id",Af="messaging.kafka.partition",Rf="messaging.kafka.tombstone",Nf="rpc.system",Lf="rpc.service",wf="rpc.method",Cf="rpc.grpc.status_code",If="rpc.jsonrpc.version",Pf="rpc.jsonrpc.request_id",xf="rpc.jsonrpc.error_code",Df="rpc.jsonrpc.error_message",kf="message.type",Mf="message.id",Uf="message.compressed_size",Ff="message.uncompressed_size",ut=ml([vl,Tl,yl,gl,bl,Ol,Sl,Al,Rl,Nl,Ll,wl,Cl,Il,Pl,xl,Dl,kl,Ml,Ul,Fl,jl,Bl,Vl,Hl,Xl,Gl,Kl,ql,zl,Yl,$l,Jl,Ql,Wl,Zl,td,ed,nd,rd,od,id,sd,ad,ud,cd,pd,ld,dd,fd,hd,_d,Ed,md,vd,Td,yd,gd,bd,Od,Sd,Ad,Rd,Nd,Ld,wd,Cd,Id,Pd,xd,Dd,kd,Md,Ud,Fd,jd,Bd,Vd,Hd,Xd,Gd,Kd,qd,zd,Yd,$d,Jd,Qd,Wd,Zd,tf,ef,nf,rf,of,sf,af,uf,cf,pf,lf,df,ff,hf,_f,Ef,mf,vf,Tf,yf,gf,bf,Of,Sf,Af,Rf,Nf,Lf,wf,Cf,If,Pf,xf,Df,kf,Mf,Uf,Ff]),pn="0.51.1",jf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ye,Bf=300,ln=typeof process=="object"&&((ye=process.release)===null||ye===void 0?void 0:ye.name)==="node",Vf=function(t){jf(e,t);function e(n){var r=t.call(this,"@opentelemetry/instrumentation-fetch",pn,n)||this;return r.component="fetch",r.version=pn,r.moduleName=r.component,r._usedResources=new WeakSet,r._tasksCount=0,r}return e.prototype.init=function(){},e.prototype._getConfig=function(){return this._config},e.prototype._addChildSpan=function(n,r){var o=this.tracer.startSpan("CORS Preflight",{startTime:r[E.FETCH_START]},O.setSpan(b.active(),n));this._getConfig().ignoreNetworkEvents||ht(o,r),o.end(r[E.RESPONSE_END])},e.prototype._addFinalSpanAttributes=function(n,r){var o=V(r.url);n.setAttribute(ut.HTTP_STATUS_CODE,r.status),r.statusText!=null&&n.setAttribute(Wt.HTTP_STATUS_TEXT,r.statusText),n.setAttribute(ut.HTTP_HOST,o.host),n.setAttribute(ut.HTTP_SCHEME,o.protocol.replace(":","")),typeof navigator<"u"&&n.setAttribute(ut.HTTP_USER_AGENT,navigator.userAgent)},e.prototype._addHeaders=function(n,r){if(!or(r,this._getConfig().propagateTraceHeaderCorsUrls)){var o={};I.inject(b.active(),o),Object.keys(o).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(n instanceof Request)I.inject(b.active(),n.headers,{set:function(i,s,a){return i.set(s,typeof a=="string"?a:String(a))}});else if(n.headers instanceof Headers)I.inject(b.active(),n.headers,{set:function(i,s,a){return i.set(s,typeof a=="string"?a:String(a))}});else if(n.headers instanceof Map)I.inject(b.active(),n.headers,{set:function(i,s,a){return i.set(s,typeof a=="string"?a:String(a))}});else{var o={};I.inject(b.active(),o),n.headers=Object.assign({},o,n.headers||{})}},e.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},e.prototype._createSpan=function(n,r){var o;if(r===void 0&&(r={}),Jn(n,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var i=(r.method||"GET").toUpperCase(),s="HTTP "+i;return this.tracer.startSpan(s,{kind:wt.CLIENT,attributes:(o={},o[Wt.COMPONENT]=this.moduleName,o[ut.HTTP_METHOD]=i,o[ut.HTTP_URL]=n,o)})},e.prototype._findResourceAndAddNetworkEvents=function(n,r,o){var i=r.entries;if(!i.length){if(!performance.getEntriesByType)return;i=performance.getEntriesByType("resource")}var s=nr(r.spanUrl,r.startTime,o,i,this._usedResources,"fetch");if(s.mainRequest){var a=s.mainRequest;this._markResourceAsUsed(a);var u=s.corsPreFlightRequest;u&&(this._addChildSpan(n,u),this._markResourceAsUsed(u)),this._getConfig().ignoreNetworkEvents||ht(n,a)}},e.prototype._markResourceAsUsed=function(n){this._usedResources.add(n)},e.prototype._endSpan=function(n,r,o){var i=this,s=X(Date.now()),a=dt();this._addFinalSpanAttributes(n,o),setTimeout(function(){var u;(u=r.observer)===null||u===void 0||u.disconnect(),i._findResourceAndAddNetworkEvents(n,r,a),i._tasksCount--,i._clearResources(),n.end(s)},Bf)},e.prototype._patchConstructor=function(){var n=this;return function(r){var o=n;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=this,u=V(i[0]instanceof Request?i[0].url:String(i[0])).href,c=i[0]instanceof Request?i[0]:i[1]||{},p=o._createSpan(u,c);if(!p)return r.apply(this,i);var d=o._prepareSpanData(u);function f(y,g){o._applyAttributesAfterFetch(y,c,g),o._endSpan(y,d,{status:g.status||0,statusText:g.message,url:u})}function v(y,g){o._applyAttributesAfterFetch(y,c,g),g.status>=200&&g.status<400?o._endSpan(y,d,g):o._endSpan(y,d,{status:g.status,statusText:g.statusText,url:u})}function h(y,g,S){try{var x=S.clone(),q=S.clone(),ot=x.body;if(ot){var it=ot.getReader(),Dt=function(){it.read().then(function(ae){var Lr=ae.done;Lr?v(y,q):Dt()},function(ae){f(y,ae)})};Dt()}else v(y,S)}finally{g(S)}}function T(y,g,S){try{f(y,S)}finally{g(S)}}return new Promise(function(y,g){return b.with(O.setSpan(b.active(),p),function(){return o._addHeaders(c,u),o._tasksCount++,r.apply(a,c instanceof Request?[c]:[u,c]).then(h.bind(a,p,y),T.bind(a,p,g))})})}}},e.prototype._applyAttributesAfterFetch=function(n,r,o){var i=this,s=this._getConfig().applyCustomAttributesOnSpan;s&&Jt(function(){return s(n,r,o)},function(a){a&&i._diag.error("applyCustomAttributesOnSpan",a)},!0)},e.prototype._prepareSpanData=function(n){var r=dt(),o=[];if(typeof PerformanceObserver!="function")return{entries:o,startTime:r,spanUrl:n};var i=new PerformanceObserver(function(s){var a=s.getEntries();a.forEach(function(u){u.initiatorType==="fetch"&&u.name===n&&o.push(u)})});return i.observe({entryTypes:["resource"]}),{entries:o,observer:i,startTime:r,spanUrl:n}},e.prototype.enable=function(){if(ln){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}tt(fetch)&&(this._unwrap(St,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(St,"fetch",this._patchConstructor())},e.prototype.disable=function(){ln||(this._unwrap(St,"fetch"),this._usedResources=new WeakSet)},e}(re);function Hf(t){for(var e={},n=t.length,r=0;r<n;r++){var o=t[r];o&&(e[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return e}var Xf="aws.lambda.invoked_arn",Gf="db.system",Kf="db.connection_string",qf="db.user",zf="db.jdbc.driver_classname",Yf="db.name",$f="db.statement",Jf="db.operation",Qf="db.mssql.instance_name",Wf="db.cassandra.keyspace",Zf="db.cassandra.page_size",th="db.cassandra.consistency_level",eh="db.cassandra.table",nh="db.cassandra.idempotence",rh="db.cassandra.speculative_execution_count",oh="db.cassandra.coordinator.id",ih="db.cassandra.coordinator.dc",sh="db.hbase.namespace",ah="db.redis.database_index",uh="db.mongodb.collection",ch="db.sql.table",ph="exception.type",lh="exception.message",dh="exception.stacktrace",fh="exception.escaped",hh="faas.trigger",_h="faas.execution",Eh="faas.document.collection",mh="faas.document.operation",vh="faas.document.time",Th="faas.document.name",yh="faas.time",gh="faas.cron",bh="faas.coldstart",Oh="faas.invoked_name",Sh="faas.invoked_provider",Ah="faas.invoked_region",Rh="net.transport",Nh="net.peer.ip",Lh="net.peer.port",wh="net.peer.name",Ch="net.host.ip",Ih="net.host.port",Ph="net.host.name",xh="net.host.connection.type",Dh="net.host.connection.subtype",kh="net.host.carrier.name",Mh="net.host.carrier.mcc",Uh="net.host.carrier.mnc",Fh="net.host.carrier.icc",jh="peer.service",Bh="enduser.id",Vh="enduser.role",Hh="enduser.scope",Xh="thread.id",Gh="thread.name",Kh="code.function",qh="code.namespace",zh="code.filepath",Yh="code.lineno",$h="http.method",Jh="http.url",Qh="http.target",Wh="http.host",Zh="http.scheme",t_="http.status_code",e_="http.flavor",n_="http.user_agent",r_="http.request_content_length",o_="http.request_content_length_uncompressed",i_="http.response_content_length",s_="http.response_content_length_uncompressed",a_="http.server_name",u_="http.route",c_="http.client_ip",p_="aws.dynamodb.table_names",l_="aws.dynamodb.consumed_capacity",d_="aws.dynamodb.item_collection_metrics",f_="aws.dynamodb.provisioned_read_capacity",h_="aws.dynamodb.provisioned_write_capacity",__="aws.dynamodb.consistent_read",E_="aws.dynamodb.projection",m_="aws.dynamodb.limit",v_="aws.dynamodb.attributes_to_get",T_="aws.dynamodb.index_name",y_="aws.dynamodb.select",g_="aws.dynamodb.global_secondary_indexes",b_="aws.dynamodb.local_secondary_indexes",O_="aws.dynamodb.exclusive_start_table",S_="aws.dynamodb.table_count",A_="aws.dynamodb.scan_forward",R_="aws.dynamodb.segment",N_="aws.dynamodb.total_segments",L_="aws.dynamodb.count",w_="aws.dynamodb.scanned_count",C_="aws.dynamodb.attribute_definitions",I_="aws.dynamodb.global_secondary_index_updates",P_="messaging.system",x_="messaging.destination",D_="messaging.destination_kind",k_="messaging.temp_destination",M_="messaging.protocol",U_="messaging.protocol_version",F_="messaging.url",j_="messaging.message_id",B_="messaging.conversation_id",V_="messaging.message_payload_size_bytes",H_="messaging.message_payload_compressed_size_bytes",X_="messaging.operation",G_="messaging.consumer_id",K_="messaging.rabbitmq.routing_key",q_="messaging.kafka.message_key",z_="messaging.kafka.consumer_group",Y_="messaging.kafka.client_id",$_="messaging.kafka.partition",J_="messaging.kafka.tombstone",Q_="rpc.system",W_="rpc.service",Z_="rpc.method",tE="rpc.grpc.status_code",eE="rpc.jsonrpc.version",nE="rpc.jsonrpc.request_id",rE="rpc.jsonrpc.error_code",oE="rpc.jsonrpc.error_message",iE="message.type",sE="message.id",aE="message.compressed_size",uE="message.uncompressed_size",ct=Hf([Xf,Gf,Kf,qf,zf,Yf,$f,Jf,Qf,Wf,Zf,th,eh,nh,rh,oh,ih,sh,ah,uh,ch,ph,lh,dh,fh,hh,_h,Eh,mh,vh,Th,yh,gh,bh,Oh,Sh,Ah,Rh,Nh,Lh,wh,Ch,Ih,Ph,xh,Dh,kh,Mh,Uh,Fh,jh,Bh,Vh,Hh,Xh,Gh,Kh,qh,zh,Yh,$h,Jh,Qh,Wh,Zh,t_,e_,n_,r_,o_,i_,s_,a_,u_,c_,p_,l_,d_,f_,h_,__,E_,m_,v_,T_,y_,g_,b_,O_,S_,A_,R_,N_,L_,w_,C_,I_,P_,x_,D_,k_,M_,U_,F_,j_,B_,V_,H_,X_,G_,K_,q_,z_,Y_,$_,J_,Q_,W_,Z_,tE,eE,nE,rE,oE,iE,sE,aE,uE]),B;(function(t){t.METHOD_OPEN="open",t.METHOD_SEND="send",t.EVENT_ABORT="abort",t.EVENT_ERROR="error",t.EVENT_LOAD="loaded",t.EVENT_TIMEOUT="timeout"})(B||(B={}));var dn="0.51.1",Ce;(function(t){t.HTTP_STATUS_TEXT="http.status_text"})(Ce||(Ce={}));var cE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pE=300,lE=function(t){cE(e,t);function e(n){var r=t.call(this,"@opentelemetry/instrumentation-xml-http-request",dn,n)||this;return r.component="xml-http-request",r.version=dn,r.moduleName=r.component,r._tasksCount=0,r._xhrMem=new WeakMap,r._usedResources=new WeakSet,r}return e.prototype.init=function(){},e.prototype._getConfig=function(){return this._config},e.prototype._addHeaders=function(n,r){var o=V(r).href;if(!or(o,this._getConfig().propagateTraceHeaderCorsUrls)){var i={};I.inject(b.active(),i),Object.keys(i).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}var s={};I.inject(b.active(),s),Object.keys(s).forEach(function(a){n.setRequestHeader(a,String(s[a]))})},e.prototype._addChildSpan=function(n,r){var o=this;b.with(O.setSpan(b.active(),n),function(){var i=o.tracer.startSpan("CORS Preflight",{startTime:r[E.FETCH_START]});o._getConfig().ignoreNetworkEvents||ht(i,r),i.end(r[E.RESPONSE_END])})},e.prototype._addFinalSpanAttributes=function(n,r,o){if(typeof o=="string"){var i=V(o);r.status!==void 0&&n.setAttribute(ct.HTTP_STATUS_CODE,r.status),r.statusText!==void 0&&n.setAttribute(Ce.HTTP_STATUS_TEXT,r.statusText),n.setAttribute(ct.HTTP_HOST,i.host),n.setAttribute(ct.HTTP_SCHEME,i.protocol.replace(":","")),n.setAttribute(ct.HTTP_USER_AGENT,navigator.userAgent)}},e.prototype._applyAttributesAfterXHR=function(n,r){var o=this,i=this._getConfig().applyCustomAttributesOnSpan;typeof i=="function"&&Jt(function(){return i(n,r)},function(s){s&&o._diag.error("applyCustomAttributesOnSpan",s)},!0)},e.prototype._addResourceObserver=function(n,r){var o=this._xhrMem.get(n);!o||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(o.createdResources={observer:new PerformanceObserver(function(i){var s=i.getEntries(),a=V(r);s.forEach(function(u){u.initiatorType==="xmlhttprequest"&&u.name===a.href&&o.createdResources&&o.createdResources.entries.push(u)})}),entries:[]},o.createdResources.observer.observe({entryTypes:["resource"]}))},e.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(P.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},e.prototype._findResourceAndAddNetworkEvents=function(n,r,o,i,s){if(!(!o||!i||!s||!n.createdResources)){var a=n.createdResources.entries;(!a||!a.length)&&(a=P.getEntriesByType("resource"));var u=nr(V(o).href,i,s,a,this._usedResources);if(u.mainRequest){var c=u.mainRequest;this._markResourceAsUsed(c);var p=u.corsPreFlightRequest;p&&(this._addChildSpan(r,p),this._markResourceAsUsed(p)),this._getConfig().ignoreNetworkEvents||ht(r,c)}}},e.prototype._cleanPreviousSpanInformation=function(n){var r=this._xhrMem.get(n);if(r){var o=r.callbackToRemoveEvents;o&&o(),this._xhrMem.delete(n)}},e.prototype._createSpan=function(n,r,o){var i;if(Jn(r,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var s=o.toUpperCase(),a=this.tracer.startSpan(s,{kind:wt.CLIENT,attributes:(i={},i[ct.HTTP_METHOD]=o,i[ct.HTTP_URL]=V(r).toString(),i)});return a.addEvent(B.METHOD_OPEN),this._cleanPreviousSpanInformation(n),this._xhrMem.set(n,{span:a,spanUrl:r}),a},e.prototype._markResourceAsUsed=function(n){this._usedResources.add(n)},e.prototype._patchOpen=function(){var n=this;return function(r){var o=n;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=i[0],u=i[1];return o._createSpan(this,u,a),r.apply(this,i)}}},e.prototype._patchSend=function(){var n=this;function r(p,d,f,v){var h=d.callbackToRemoveEvents;typeof h=="function"&&h();var T=d.span,y=d.spanUrl,g=d.sendStartTime;T&&(n._findResourceAndAddNetworkEvents(d,T,y,g,f),T.addEvent(p,v),n._addFinalSpanAttributes(T,d,y),T.end(v),n._tasksCount--),n._clearResources()}function o(p,d){var f=n._xhrMem.get(d);if(f){f.status=d.status,f.statusText=d.statusText,n._xhrMem.delete(d),f.span&&n._applyAttributesAfterXHR(f.span,d);var v=dt(),h=Date.now();setTimeout(function(){r(p,f,v,h)},pE)}}function i(){o(B.EVENT_ERROR,this)}function s(){o(B.EVENT_ABORT,this)}function a(){o(B.EVENT_TIMEOUT,this)}function u(){this.status<299?o(B.EVENT_LOAD,this):o(B.EVENT_ERROR,this)}function c(p){p.removeEventListener("abort",s),p.removeEventListener("error",i),p.removeEventListener("load",u),p.removeEventListener("timeout",a);var d=n._xhrMem.get(p);d&&(d.callbackToRemoveEvents=void 0)}return function(p){return function(){for(var d=this,f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];var h=n._xhrMem.get(this);if(!h)return p.apply(this,f);var T=h.span,y=h.spanUrl;return T&&y&&b.with(O.setSpan(b.active(),T),function(){n._tasksCount++,h.sendStartTime=dt(),T.addEvent(B.METHOD_SEND),d.addEventListener("abort",s),d.addEventListener("error",i),d.addEventListener("load",u),d.addEventListener("timeout",a),h.callbackToRemoveEvents=function(){c(d),h.createdResources&&h.createdResources.observer.disconnect()},n._addHeaders(d,y),n._addResourceObserver(d,y)}),p.apply(this,f)}}},e.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),tt(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),tt(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},e.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},e}(re),dE=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},cr=1e4,fE=5,hE=1e3,_E=5e3,EE=1.5;function mE(t){t===void 0&&(t={});var e={};return Object.entries(t).forEach(function(n){var r=dE(n,2),o=r[0],i=r[1];typeof i<"u"?e[o]=String(i):m.warn('Header "'+o+'" has wrong value and will be ignored')}),e}function vE(t,e){return t.endsWith("/")||(t=t+"/"),t+e}function TE(t){try{var e=new URL(t);return e.pathname===""&&(e.pathname=e.pathname+"/"),e.toString()}catch{return m.warn("Could not parse export URL: '"+t+"'"),t}}function yE(t){return typeof t=="number"?t<=0?pr(t,cr):t:gE()}function gE(){var t,e=Number((t=R().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&t!==void 0?t:R().OTEL_EXPORTER_OTLP_TIMEOUT);return e<=0?pr(e,cr):e}function pr(t,e){return m.warn("Timeout must be greater than 0",t),e}function bE(t){var e=[429,502,503,504];return e.includes(t)}function OE(t){if(t==null)return-1;var e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?e*1e3:-1;var n=new Date(t).getTime()-Date.now();return n>=0?n:0}var SE=function(){function t(e){e===void 0&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),typeof e.hostname=="string"&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new Ge(this._shutdown,this),this._concurrencyLimit=typeof e.concurrencyLimit=="number"?e.concurrencyLimit:30,this.timeoutMillis=yE(e.timeoutMillis),this.onInit(e)}return t.prototype.export=function(e,n){if(this._shutdownOnce.isCalled){n({code:K.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){n({code:K.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(e).then(function(){n({code:K.SUCCESS})}).catch(function(r){n({code:K.FAILED,error:r})})},t.prototype._export=function(e){var n=this;return new Promise(function(r,o){try{m.debug("items to be sent",e),n.send(e,r,o)}catch(i){o(i)}})},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then(function(){})},t.prototype._shutdown=function(){return m.debug("shutdown started"),this.onShutdown(),this.forceFlush()},t}(),AE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(t){AE(e,t);function e(n,r,o){var i=t.call(this,n)||this;return i.name="OTLPExporterError",i.data=o,i.code=r,i}return e}(Error),Zt=function(){return Zt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Zt.apply(this,arguments)},RE=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i};function NE(t,e,n,r,o){if(navigator.sendBeacon(e,new Blob([t],n)))m.debug("sendBeacon - can send",t),r();else{var i=new gt("sendBeacon - cannot send "+t);o(i)}}function LE(t,e,n,r,o,i){var s,a,u=!1,c=setTimeout(function(){if(clearTimeout(s),u=!0,a.readyState===XMLHttpRequest.DONE){var d=new gt("Request Timeout");i(d)}else a.abort()},r),p=function(d,f){d===void 0&&(d=fE),f===void 0&&(f=hE),a=new XMLHttpRequest,a.open("POST",e);var v={Accept:"application/json","Content-Type":"application/json"};Object.entries(Zt(Zt({},v),n)).forEach(function(h){var T=RE(h,2),y=T[0],g=T[1];a.setRequestHeader(y,g)}),a.send(t),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE&&u===!1)if(a.status>=200&&a.status<=299)m.debug("xhr success",t),o(),clearTimeout(c),clearTimeout(s);else if(a.status&&bE(a.status)&&d>0){var h=void 0;f=EE*f,a.getResponseHeader("Retry-After")?h=OE(a.getResponseHeader("Retry-After")):h=Math.round(Math.random()*(_E-f)+f),s=setTimeout(function(){p(d-1,f)},h)}else{var T=new gt("Failed to export with XHR (status: "+a.status+")",a.status);i(T),clearTimeout(c),clearTimeout(s)}},a.onabort=function(){if(u){var h=new gt("Request Timeout");i(h)}clearTimeout(c),clearTimeout(s)},a.onerror=function(){if(u){var h=new gt("Request Timeout");i(h)}clearTimeout(c),clearTimeout(s)}};p()}var wE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),CE=function(t){wE(e,t);function e(n){n===void 0&&(n={});var r=t.call(this,n)||this;return r._useXHR=!1,r._useXHR=!!n.headers||typeof navigator.sendBeacon!="function",r._useXHR?r._headers=Object.assign({},mE(n.headers),xn(R().OTEL_EXPORTER_OTLP_HEADERS)):r._headers={},r}return e.prototype.onInit=function(){},e.prototype.onShutdown=function(){},e.prototype.send=function(n,r,o){var i=this;if(this._shutdownOnce.isCalled){m.debug("Shutdown already started. Cannot send objects");return}var s=this.convert(n),a=JSON.stringify(s),u=new Promise(function(p,d){i._useXHR?LE(a,i.url,i._headers,i.timeoutMillis,p,d):NE(a,i.url,{type:"application/json"},p,d)}).then(r,o);this._sendingPromises.push(u);var c=function(){var p=i._sendingPromises.indexOf(u);i._sendingPromises.splice(p,1)};u.then(c,c)},e}(SE);function lr(t){var e=BigInt(1e9);return BigInt(t[0])*e+BigInt(t[1])}function IE(t){var e=Number(BigInt.asUintN(32,t)),n=Number(BigInt.asUintN(32,t>>BigInt(32)));return{low:e,high:n}}function dr(t){var e=lr(t);return IE(e)}function PE(t){var e=lr(t);return e.toString()}var xE=typeof BigInt<"u"?PE:G;function fn(t){return t}function fr(t){if(t!==void 0)return Ve(t)}var DE={encodeHrTime:dr,encodeSpanContext:Ve,encodeOptionalSpanContext:fr};function kE(t){var e,n;if(t===void 0)return DE;var r=(e=t.useLongBits)!==null&&e!==void 0?e:!0,o=(n=t.useHex)!==null&&n!==void 0?n:!1;return{encodeHrTime:r?dr:xE,encodeSpanContext:o?fn:Ve,encodeOptionalSpanContext:o?fn:fr}}var ME=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i};function oe(t){return Object.keys(t).map(function(e){return hr(e,t[e])})}function hr(t,e){return{key:t,value:_r(e)}}function _r(t){var e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(_r)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(function(n){var r=ME(n,2),o=r[0],i=r[1];return hr(o,i)})}}:{}}function UE(t,e){var n,r=t.spanContext(),o=t.status;return{traceId:e.encodeSpanContext(r.traceId),spanId:e.encodeSpanContext(r.spanId),parentSpanId:e.encodeOptionalSpanContext(t.parentSpanId),traceState:(n=r.traceState)===null||n===void 0?void 0:n.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:oe(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(function(i){return jE(i,e)}),droppedEventsCount:t.droppedEventsCount,status:{code:o.code,message:o.message},links:t.links.map(function(i){return FE(i,e)}),droppedLinksCount:t.droppedLinksCount}}function FE(t,e){var n;return{attributes:t.attributes?oe(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:(n=t.context.traceState)===null||n===void 0?void 0:n.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}function jE(t,e){return{attributes:t.attributes?oe(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}var BE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VE=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i};function HE(t,e){var n=kE(e);return{resourceSpans:GE(t,n)}}function XE(t){var e,n,r=new Map;try{for(var o=BE(t),i=o.next();!i.done;i=o.next()){var s=i.value,a=r.get(s.resource);a||(a=new Map,r.set(s.resource,a));var u=s.instrumentationLibrary.name+"@"+(s.instrumentationLibrary.version||"")+":"+(s.instrumentationLibrary.schemaUrl||""),c=a.get(u);c||(c=[],a.set(u,c)),c.push(s)}}catch(p){e={error:p}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function GE(t,e){for(var n=XE(t),r=[],o=n.entries(),i=o.next();!i.done;){for(var s=VE(i.value,2),a=s[0],u=s[1],c=[],p=u.values(),d=p.next();!d.done;){var f=d.value;if(f.length>0){var v=f[0].instrumentationLibrary,h=v.name,T=v.version,y=v.schemaUrl,g=f.map(function(x){return UE(x,e)});c.push({scope:{name:h,version:T},spans:g,schemaUrl:y})}d=p.next()}var S={resource:{attributes:oe(a.attributes),droppedAttributesCount:0},scopeSpans:c,schemaUrl:void 0};r.push(S),i=o.next()}return r}var KE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Er="v1/traces",qE="http://localhost:4318/"+Er,zE=function(t){KE(e,t);function e(n){n===void 0&&(n={});var r=t.call(this,n)||this;return r._headers=Object.assign(r._headers,xn(R().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),r}return e.prototype.convert=function(n){return HE(n,{useHex:!0,useLongBits:!1})},e.prototype.getDefaultUrl=function(n){return typeof n.url=="string"?n.url:R().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?TE(R().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):R().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?vE(R().OTEL_EXPORTER_OTLP_ENDPOINT,Er):qE},e}(CE),YE="deployment.environment",$E="service.name",JE=YE,QE=$E;function ge(t,e){throw new Error(e)}function WE(t){return typeof t=="object"&&t!==null}function ZE(t,e){throw new Error("Unexpected invariant triggered.")}const tm=/\r\n|[\n\r]/g;function Ie(t,e){let n=0,r=1;for(const o of t.body.matchAll(tm)){if(typeof o.index=="number"||ZE(),o.index>=e)break;n=o.index+o[0].length,r+=1}return{line:r,column:e+1-n}}function em(t){return mr(t.source,Ie(t.source,t.start))}function mr(t,e){const n=t.locationOffset.column-1,r="".padStart(n)+t.body,o=e.line-1,i=t.locationOffset.line-1,s=e.line+i,a=e.line===1?n:0,u=e.column+a,c=`${t.name}:${s}:${u}
`,p=r.split(/\r\n|[\n\r]/g),d=p[o];if(d.length>120){const f=Math.floor(u/80),v=u%80,h=[];for(let T=0;T<d.length;T+=80)h.push(d.slice(T,T+80));return c+hn([[`${s} |`,h[0]],...h.slice(1,f+1).map(T=>["|",T]),["|","^".padStart(v)],["|",h[f+1]]])}return c+hn([[`${s-1} |`,p[o-1]],[`${s} |`,d],["|","^".padStart(u)],[`${s+1} |`,p[o+1]]])}function hn(t){const e=t.filter(([r,o])=>o!==void 0),n=Math.max(...e.map(([r])=>r.length));return e.map(([r,o])=>r.padStart(n)+(o?" "+o:"")).join(`
`)}function nm(t){const e=t[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:t[1],positions:t[2],path:t[3],originalError:t[4],extensions:t[5]}:e}class Ke extends Error{constructor(e,...n){var r,o,i;const{nodes:s,source:a,positions:u,path:c,originalError:p,extensions:d}=nm(n);super(e),this.name="GraphQLError",this.path=c??void 0,this.originalError=p??void 0,this.nodes=_n(Array.isArray(s)?s:s?[s]:void 0);const f=_n((r=this.nodes)===null||r===void 0?void 0:r.map(h=>h.loc).filter(h=>h!=null));this.source=a??(f==null||(o=f[0])===null||o===void 0?void 0:o.source),this.positions=u??(f==null?void 0:f.map(h=>h.start)),this.locations=u&&a?u.map(h=>Ie(a,h)):f==null?void 0:f.map(h=>Ie(h.source,h.start));const v=WE(p==null?void 0:p.extensions)?p==null?void 0:p.extensions:void 0;this.extensions=(i=d??v)!==null&&i!==void 0?i:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),p!=null&&p.stack?Object.defineProperty(this,"stack",{value:p.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Ke):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const n of this.nodes)n.loc&&(e+=`

`+em(n.loc));else if(this.source&&this.locations)for(const n of this.locations)e+=`

`+mr(this.source,n);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function _n(t){return t===void 0||t.length===0?void 0:t}function w(t,e,n){return new Ke(`Syntax Error: ${n}`,{source:t,positions:[e]})}class rm{constructor(e,n,r){this.start=e.start,this.end=n.end,this.startToken=e,this.endToken=n,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class vr{constructor(e,n,r,o,i,s){this.kind=e,this.start=n,this.end=r,this.line=o,this.column=i,this.value=s,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const om={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};new Set(Object.keys(om));var pt;(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})(pt||(pt={}));var Pe;(function(t){t.QUERY="QUERY",t.MUTATION="MUTATION",t.SUBSCRIPTION="SUBSCRIPTION",t.FIELD="FIELD",t.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",t.FRAGMENT_SPREAD="FRAGMENT_SPREAD",t.INLINE_FRAGMENT="INLINE_FRAGMENT",t.VARIABLE_DEFINITION="VARIABLE_DEFINITION",t.SCHEMA="SCHEMA",t.SCALAR="SCALAR",t.OBJECT="OBJECT",t.FIELD_DEFINITION="FIELD_DEFINITION",t.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",t.INTERFACE="INTERFACE",t.UNION="UNION",t.ENUM="ENUM",t.ENUM_VALUE="ENUM_VALUE",t.INPUT_OBJECT="INPUT_OBJECT",t.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Pe||(Pe={}));var _;(function(t){t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.VARIABLE="Variable",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.DIRECTIVE_DEFINITION="DirectiveDefinition",t.SCHEMA_EXTENSION="SchemaExtension",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(_||(_={}));function im(t){return t===9||t===32}function Ct(t){return t>=48&&t<=57}function Tr(t){return t>=97&&t<=122||t>=65&&t<=90}function yr(t){return Tr(t)||t===95}function sm(t){return Tr(t)||Ct(t)||t===95}function am(t){var e;let n=Number.MAX_SAFE_INTEGER,r=null,o=-1;for(let s=0;s<t.length;++s){var i;const a=t[s],u=um(a);u!==a.length&&(r=(i=r)!==null&&i!==void 0?i:s,o=s,s!==0&&u<n&&(n=u))}return t.map((s,a)=>a===0?s:s.slice(n)).slice((e=r)!==null&&e!==void 0?e:0,o+1)}function um(t){let e=0;for(;e<t.length&&im(t.charCodeAt(e));)++e;return e}var l;(function(t){t.SOF="<SOF>",t.EOF="<EOF>",t.BANG="!",t.DOLLAR="$",t.AMP="&",t.PAREN_L="(",t.PAREN_R=")",t.SPREAD="...",t.COLON=":",t.EQUALS="=",t.AT="@",t.BRACKET_L="[",t.BRACKET_R="]",t.BRACE_L="{",t.PIPE="|",t.BRACE_R="}",t.NAME="Name",t.INT="Int",t.FLOAT="Float",t.STRING="String",t.BLOCK_STRING="BlockString",t.COMMENT="Comment"})(l||(l={}));class cm{constructor(e){const n=new vr(l.SOF,0,0,0,0);this.source=e,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==l.EOF)do if(e.next)e=e.next;else{const n=lm(this,e.end);e.next=n,n.prev=e,e=n}while(e.kind===l.COMMENT);return e}}function pm(t){return t===l.BANG||t===l.DOLLAR||t===l.AMP||t===l.PAREN_L||t===l.PAREN_R||t===l.SPREAD||t===l.COLON||t===l.EQUALS||t===l.AT||t===l.BRACKET_L||t===l.BRACKET_R||t===l.BRACE_L||t===l.PIPE||t===l.BRACE_R}function Et(t){return t>=0&&t<=55295||t>=57344&&t<=1114111}function ie(t,e){return gr(t.charCodeAt(e))&&br(t.charCodeAt(e+1))}function gr(t){return t>=55296&&t<=56319}function br(t){return t>=56320&&t<=57343}function rt(t,e){const n=t.source.body.codePointAt(e);if(n===void 0)return l.EOF;if(n>=32&&n<=126){const r=String.fromCodePoint(n);return r==='"'?`'"'`:`"${r}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function N(t,e,n,r,o){const i=t.line,s=1+n-t.lineStart;return new vr(e,n,r,i,s,o)}function lm(t,e){const n=t.source.body,r=n.length;let o=e;for(;o<r;){const i=n.charCodeAt(o);switch(i){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++t.line,t.lineStart=o;continue;case 13:n.charCodeAt(o+1)===10?o+=2:++o,++t.line,t.lineStart=o;continue;case 35:return dm(t,o);case 33:return N(t,l.BANG,o,o+1);case 36:return N(t,l.DOLLAR,o,o+1);case 38:return N(t,l.AMP,o,o+1);case 40:return N(t,l.PAREN_L,o,o+1);case 41:return N(t,l.PAREN_R,o,o+1);case 46:if(n.charCodeAt(o+1)===46&&n.charCodeAt(o+2)===46)return N(t,l.SPREAD,o,o+3);break;case 58:return N(t,l.COLON,o,o+1);case 61:return N(t,l.EQUALS,o,o+1);case 64:return N(t,l.AT,o,o+1);case 91:return N(t,l.BRACKET_L,o,o+1);case 93:return N(t,l.BRACKET_R,o,o+1);case 123:return N(t,l.BRACE_L,o,o+1);case 124:return N(t,l.PIPE,o,o+1);case 125:return N(t,l.BRACE_R,o,o+1);case 34:return n.charCodeAt(o+1)===34&&n.charCodeAt(o+2)===34?vm(t,o):hm(t,o)}if(Ct(i)||i===45)return fm(t,o,i);if(yr(i))return Tm(t,o);throw w(t.source,o,i===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Et(i)||ie(n,o)?`Unexpected character: ${rt(t,o)}.`:`Invalid character: ${rt(t,o)}.`)}return N(t,l.EOF,r,r)}function dm(t,e){const n=t.source.body,r=n.length;let o=e+1;for(;o<r;){const i=n.charCodeAt(o);if(i===10||i===13)break;if(Et(i))++o;else if(ie(n,o))o+=2;else break}return N(t,l.COMMENT,e,o,n.slice(e+1,o))}function fm(t,e,n){const r=t.source.body;let o=e,i=n,s=!1;if(i===45&&(i=r.charCodeAt(++o)),i===48){if(i=r.charCodeAt(++o),Ct(i))throw w(t.source,o,`Invalid number, unexpected digit after 0: ${rt(t,o)}.`)}else o=be(t,o,i),i=r.charCodeAt(o);if(i===46&&(s=!0,i=r.charCodeAt(++o),o=be(t,o,i),i=r.charCodeAt(o)),(i===69||i===101)&&(s=!0,i=r.charCodeAt(++o),(i===43||i===45)&&(i=r.charCodeAt(++o)),o=be(t,o,i),i=r.charCodeAt(o)),i===46||yr(i))throw w(t.source,o,`Invalid number, expected digit but got: ${rt(t,o)}.`);return N(t,s?l.FLOAT:l.INT,e,o,r.slice(e,o))}function be(t,e,n){if(!Ct(n))throw w(t.source,e,`Invalid number, expected digit but got: ${rt(t,e)}.`);const r=t.source.body;let o=e+1;for(;Ct(r.charCodeAt(o));)++o;return o}function hm(t,e){const n=t.source.body,r=n.length;let o=e+1,i=o,s="";for(;o<r;){const a=n.charCodeAt(o);if(a===34)return s+=n.slice(i,o),N(t,l.STRING,e,o+1,s);if(a===92){s+=n.slice(i,o);const u=n.charCodeAt(o+1)===117?n.charCodeAt(o+2)===123?_m(t,o):Em(t,o):mm(t,o);s+=u.value,o+=u.size,i=o;continue}if(a===10||a===13)break;if(Et(a))++o;else if(ie(n,o))o+=2;else throw w(t.source,o,`Invalid character within String: ${rt(t,o)}.`)}throw w(t.source,o,"Unterminated string.")}function _m(t,e){const n=t.source.body;let r=0,o=3;for(;o<12;){const i=n.charCodeAt(e+o++);if(i===125){if(o<5||!Et(r))break;return{value:String.fromCodePoint(r),size:o}}if(r=r<<4|bt(i),r<0)break}throw w(t.source,e,`Invalid Unicode escape sequence: "${n.slice(e,e+o)}".`)}function Em(t,e){const n=t.source.body,r=En(n,e+2);if(Et(r))return{value:String.fromCodePoint(r),size:6};if(gr(r)&&n.charCodeAt(e+6)===92&&n.charCodeAt(e+7)===117){const o=En(n,e+8);if(br(o))return{value:String.fromCodePoint(r,o),size:12}}throw w(t.source,e,`Invalid Unicode escape sequence: "${n.slice(e,e+6)}".`)}function En(t,e){return bt(t.charCodeAt(e))<<12|bt(t.charCodeAt(e+1))<<8|bt(t.charCodeAt(e+2))<<4|bt(t.charCodeAt(e+3))}function bt(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function mm(t,e){const n=t.source.body;switch(n.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw w(t.source,e,`Invalid character escape sequence: "${n.slice(e,e+2)}".`)}function vm(t,e){const n=t.source.body,r=n.length;let o=t.lineStart,i=e+3,s=i,a="";const u=[];for(;i<r;){const c=n.charCodeAt(i);if(c===34&&n.charCodeAt(i+1)===34&&n.charCodeAt(i+2)===34){a+=n.slice(s,i),u.push(a);const p=N(t,l.BLOCK_STRING,e,i+3,am(u).join(`
`));return t.line+=u.length-1,t.lineStart=o,p}if(c===92&&n.charCodeAt(i+1)===34&&n.charCodeAt(i+2)===34&&n.charCodeAt(i+3)===34){a+=n.slice(s,i),s=i+1,i+=4;continue}if(c===10||c===13){a+=n.slice(s,i),u.push(a),c===13&&n.charCodeAt(i+1)===10?i+=2:++i,a="",s=i,o=i;continue}if(Et(c))++i;else if(ie(n,i))i+=2;else throw w(t.source,i,`Invalid character within String: ${rt(t,i)}.`)}throw w(t.source,i,"Unterminated string.")}function Tm(t,e){const n=t.source.body,r=n.length;let o=e+1;for(;o<r;){const i=n.charCodeAt(o);if(sm(i))++o;else break}return N(t,l.NAME,e,o,n.slice(e,o))}const ym=10,Or=2;function Sr(t){return se(t,[])}function se(t,e){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return gm(t,e);default:return String(t)}}function gm(t,e){if(t===null)return"null";if(e.includes(t))return"[Circular]";const n=[...e,t];if(bm(t)){const r=t.toJSON();if(r!==t)return typeof r=="string"?r:se(r,n)}else if(Array.isArray(t))return Sm(t,n);return Om(t,n)}function bm(t){return typeof t.toJSON=="function"}function Om(t,e){const n=Object.entries(t);return n.length===0?"{}":e.length>Or?"["+Am(t)+"]":"{ "+n.map(([r,o])=>r+": "+se(o,e)).join(", ")+" }"}function Sm(t,e){if(t.length===0)return"[]";if(e.length>Or)return"[Array]";const n=Math.min(ym,t.length),r=t.length-n,o=[];for(let i=0;i<n;++i)o.push(se(t[i],e));return r===1?o.push("... 1 more item"):r>1&&o.push(`... ${r} more items`),"["+o.join(", ")+"]"}function Am(t){const e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){const n=t.constructor.name;if(typeof n=="string"&&n!=="")return n}return e}const Rm=globalThis.process?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;if(typeof t=="object"&&t!==null){var n;const r=e.prototype[Symbol.toStringTag],o=Symbol.toStringTag in t?t[Symbol.toStringTag]:(n=t.constructor)===null||n===void 0?void 0:n.name;if(r===o){const i=Sr(t);throw new Error(`Cannot use ${r} "${i}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class Ar{constructor(e,n="GraphQL request",r={line:1,column:1}){typeof e=="string"||ge(!1,`Body must be a string. Received: ${Sr(e)}.`),this.body=e,this.name=n,this.locationOffset=r,this.locationOffset.line>0||ge(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||ge(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function Nm(t){return Rm(t,Ar)}function Lm(t,e){return new wm(t,e).parseDocument()}class wm{constructor(e,n={}){const r=Nm(e)?e:new Ar(e);this._lexer=new cm(r),this._options=n,this._tokenCounter=0}parseName(){const e=this.expectToken(l.NAME);return this.node(e,{kind:_.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:_.DOCUMENT,definitions:this.many(l.SOF,this.parseDefinition,l.EOF)})}parseDefinition(){if(this.peek(l.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),n=e?this._lexer.lookahead():this._lexer.token;if(n.kind===l.NAME){switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw w(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(n.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(n)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(l.BRACE_L))return this.node(e,{kind:_.OPERATION_DEFINITION,operation:pt.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const n=this.parseOperationType();let r;return this.peek(l.NAME)&&(r=this.parseName()),this.node(e,{kind:_.OPERATION_DEFINITION,operation:n,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(l.NAME);switch(e.value){case"query":return pt.QUERY;case"mutation":return pt.MUTATION;case"subscription":return pt.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(l.PAREN_L,this.parseVariableDefinition,l.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:_.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(l.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(l.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(l.DOLLAR),this.node(e,{kind:_.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:_.SELECTION_SET,selections:this.many(l.BRACE_L,this.parseSelection,l.BRACE_R)})}parseSelection(){return this.peek(l.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,n=this.parseName();let r,o;return this.expectOptionalToken(l.COLON)?(r=n,o=this.parseName()):o=n,this.node(e,{kind:_.FIELD,alias:r,name:o,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(l.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const n=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(l.PAREN_L,n,l.PAREN_R)}parseArgument(e=!1){const n=this._lexer.token,r=this.parseName();return this.expectToken(l.COLON),this.node(n,{kind:_.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(l.SPREAD);const n=this.expectOptionalKeyword("on");return!n&&this.peek(l.NAME)?this.node(e,{kind:_.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:_.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:_.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:_.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const n=this._lexer.token;switch(n.kind){case l.BRACKET_L:return this.parseList(e);case l.BRACE_L:return this.parseObject(e);case l.INT:return this.advanceLexer(),this.node(n,{kind:_.INT,value:n.value});case l.FLOAT:return this.advanceLexer(),this.node(n,{kind:_.FLOAT,value:n.value});case l.STRING:case l.BLOCK_STRING:return this.parseStringLiteral();case l.NAME:switch(this.advanceLexer(),n.value){case"true":return this.node(n,{kind:_.BOOLEAN,value:!0});case"false":return this.node(n,{kind:_.BOOLEAN,value:!1});case"null":return this.node(n,{kind:_.NULL});default:return this.node(n,{kind:_.ENUM,value:n.value})}case l.DOLLAR:if(e)if(this.expectToken(l.DOLLAR),this._lexer.token.kind===l.NAME){const r=this._lexer.token.value;throw w(this._lexer.source,n.start,`Unexpected variable "$${r}" in constant value.`)}else throw this.unexpected(n);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:_.STRING,value:e.value,block:e.kind===l.BLOCK_STRING})}parseList(e){const n=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:_.LIST,values:this.any(l.BRACKET_L,n,l.BRACKET_R)})}parseObject(e){const n=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:_.OBJECT,fields:this.any(l.BRACE_L,n,l.BRACE_R)})}parseObjectField(e){const n=this._lexer.token,r=this.parseName();return this.expectToken(l.COLON),this.node(n,{kind:_.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){const n=[];for(;this.peek(l.AT);)n.push(this.parseDirective(e));return n}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const n=this._lexer.token;return this.expectToken(l.AT),this.node(n,{kind:_.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let n;if(this.expectOptionalToken(l.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(l.BRACKET_R),n=this.node(e,{kind:_.LIST_TYPE,type:r})}else n=this.parseNamedType();return this.expectOptionalToken(l.BANG)?this.node(e,{kind:_.NON_NULL_TYPE,type:n}):n}parseNamedType(){return this.node(this._lexer.token,{kind:_.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(l.STRING)||this.peek(l.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),o=this.many(l.BRACE_L,this.parseOperationTypeDefinition,l.BRACE_R);return this.node(e,{kind:_.SCHEMA_DEFINITION,description:n,directives:r,operationTypes:o})}parseOperationTypeDefinition(){const e=this._lexer.token,n=this.parseOperationType();this.expectToken(l.COLON);const r=this.parseNamedType();return this.node(e,{kind:_.OPERATION_TYPE_DEFINITION,operation:n,type:r})}parseScalarTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),o=this.parseConstDirectives();return this.node(e,{kind:_.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:o})}parseObjectTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),o=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:_.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:o,directives:i,fields:s})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(l.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(l.BRACE_L,this.parseFieldDefinition,l.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,n=this.parseDescription(),r=this.parseName(),o=this.parseArgumentDefs();this.expectToken(l.COLON);const i=this.parseTypeReference(),s=this.parseConstDirectives();return this.node(e,{kind:_.FIELD_DEFINITION,description:n,name:r,arguments:o,type:i,directives:s})}parseArgumentDefs(){return this.optionalMany(l.PAREN_L,this.parseInputValueDef,l.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(l.COLON);const o=this.parseTypeReference();let i;this.expectOptionalToken(l.EQUALS)&&(i=this.parseConstValueLiteral());const s=this.parseConstDirectives();return this.node(e,{kind:_.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s})}parseInterfaceTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),o=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:_.INTERFACE_TYPE_DEFINITION,description:n,name:r,interfaces:o,directives:i,fields:s})}parseUnionTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),o=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:_.UNION_TYPE_DEFINITION,description:n,name:r,directives:o,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(l.EQUALS)?this.delimitedMany(l.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),o=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:_.ENUM_TYPE_DEFINITION,description:n,name:r,directives:o,values:i})}parseEnumValuesDefinition(){return this.optionalMany(l.BRACE_L,this.parseEnumValueDefinition,l.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,n=this.parseDescription(),r=this.parseEnumValueName(),o=this.parseConstDirectives();return this.node(e,{kind:_.ENUM_VALUE_DEFINITION,description:n,name:r,directives:o})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw w(this._lexer.source,this._lexer.token.start,`${jt(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),o=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:_.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(l.BRACE_L,this.parseInputValueDef,l.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===l.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const n=this.parseConstDirectives(),r=this.optionalMany(l.BRACE_L,this.parseOperationTypeDefinition,l.BRACE_R);if(n.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:_.SCHEMA_EXTENSION,directives:n,operationTypes:r})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const n=this.parseName(),r=this.parseConstDirectives();if(r.length===0)throw this.unexpected();return this.node(e,{kind:_.SCALAR_TYPE_EXTENSION,name:n,directives:r})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const n=this.parseName(),r=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&o.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:_.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:o,fields:i})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const n=this.parseName(),r=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&o.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:_.INTERFACE_TYPE_EXTENSION,name:n,interfaces:r,directives:o,fields:i})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const n=this.parseName(),r=this.parseConstDirectives(),o=this.parseUnionMemberTypes();if(r.length===0&&o.length===0)throw this.unexpected();return this.node(e,{kind:_.UNION_TYPE_EXTENSION,name:n,directives:r,types:o})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const n=this.parseName(),r=this.parseConstDirectives(),o=this.parseEnumValuesDefinition();if(r.length===0&&o.length===0)throw this.unexpected();return this.node(e,{kind:_.ENUM_TYPE_EXTENSION,name:n,directives:r,values:o})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const n=this.parseName(),r=this.parseConstDirectives(),o=this.parseInputFieldsDefinition();if(r.length===0&&o.length===0)throw this.unexpected();return this.node(e,{kind:_.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:o})}parseDirectiveDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(l.AT);const r=this.parseName(),o=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const s=this.parseDirectiveLocations();return this.node(e,{kind:_.DIRECTIVE_DEFINITION,description:n,name:r,arguments:o,repeatable:i,locations:s})}parseDirectiveLocations(){return this.delimitedMany(l.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,n=this.parseName();if(Object.prototype.hasOwnProperty.call(Pe,n.value))return n;throw this.unexpected(e)}node(e,n){return this._options.noLocation!==!0&&(n.loc=new rm(e,this._lexer.lastToken,this._lexer.source)),n}peek(e){return this._lexer.token.kind===e}expectToken(e){const n=this._lexer.token;if(n.kind===e)return this.advanceLexer(),n;throw w(this._lexer.source,n.start,`Expected ${Rr(e)}, found ${jt(n)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const n=this._lexer.token;if(n.kind===l.NAME&&n.value===e)this.advanceLexer();else throw w(this._lexer.source,n.start,`Expected "${e}", found ${jt(n)}.`)}expectOptionalKeyword(e){const n=this._lexer.token;return n.kind===l.NAME&&n.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const n=e??this._lexer.token;return w(this._lexer.source,n.start,`Unexpected ${jt(n)}.`)}any(e,n,r){this.expectToken(e);const o=[];for(;!this.expectOptionalToken(r);)o.push(n.call(this));return o}optionalMany(e,n,r){if(this.expectOptionalToken(e)){const o=[];do o.push(n.call(this));while(!this.expectOptionalToken(r));return o}return[]}many(e,n,r){this.expectToken(e);const o=[];do o.push(n.call(this));while(!this.expectOptionalToken(r));return o}delimitedMany(e,n){this.expectOptionalToken(e);const r=[];do r.push(n.call(this));while(this.expectOptionalToken(e));return r}advanceLexer(){const{maxTokens:e}=this._options,n=this._lexer.advance();if(e!==void 0&&n.kind!==l.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw w(this._lexer.source,n.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function jt(t){const e=t.value;return Rr(t.kind)+(e!=null?` "${e}"`:"")}function Rr(t){return pm(t)?`"${t}"`:t}const Cm=["click","input","submit"];function Im(){return!1}class Pm extends re{constructor(e={}){var n;super("user-interaction","1.0.0",e),Y(this,"_spansData",new WeakMap),Y(this,"_wrappedListeners",new WeakMap),Y(this,"_eventsSpanMap",new WeakMap),Y(this,"_eventNames"),Y(this,"_shouldPreventSpanCreation"),this._eventNames=new Set((n=e==null?void 0:e.eventNames)!=null?n:Cm),this._shouldPreventSpanCreation=typeof(e==null?void 0:e.shouldPreventSpanCreation)=="function"?e.shouldPreventSpanCreation:Im}init(){}_allowEventName(e){return this._eventNames.has(e)}_createSpan(e,n){var r;const o=e==null?void 0:e.target,i=e==null?void 0:e.type;if(!(o instanceof HTMLElement)||!o.getAttribute||o.hasAttribute("disabled")||!this._allowEventName(i))return;const s=rr(o,!0);try{const a=this.tracer.startSpan(i,{attributes:{"event.type":i,"event.tag":o.tagName,"event.xpath":s,"event.id":o.id,"event.text":(r=o.textContent)!=null?r:"","event.url":window.location.href,"viewport.width":window.innerWidth,"viewport.height":window.innerHeight}},n?O.setSpan(b.active(),n):void 0);return e instanceof MouseEvent&&(a.setAttribute("event.x",e.clientX),a.setAttribute("event.y",e.clientY),a.setAttribute("event.relativeX",e.clientX/window.innerWidth),a.setAttribute("event.relativeY",e.clientY/window.innerHeight),i==="scroll"&&(a.setAttribute("event.scrollX",window.scrollX),a.setAttribute("event.scrollY",window.scrollY))),this._shouldPreventSpanCreation(i,o,a)===!0?void 0:(this._spansData.set(a,{taskCount:0}),a)}catch(a){this._diag.error("failed to start create new user interaction span",a)}}addPatchedListener(e,n,r,o){let i=this._wrappedListeners.get(r);i||(i=new Map,this._wrappedListeners.set(r,i));let s=i.get(n);return s||(s=new Map,i.set(n,s)),s.has(e)?!1:(s.set(e,o),!0)}removePatchedListener(e,n,r){const o=this._wrappedListeners.get(r);if(!o)return;const i=o.get(n);if(!i)return;const s=i.get(e);return s&&(i.delete(e),i.size===0&&(o.delete(n),o.size===0&&this._wrappedListeners.delete(r))),s}_invokeListener(e,n,r){return typeof e=="function"?e.apply(n,r):e.handleEvent(r[0])}_patchAddEventListener(){const e=this;let n=0;return r=>function(o,i,s){if(!i)return r.call(this,o,i,s);const a=s&&typeof s=="object"&&s.once,u=function(...c){let p;const d=c[0];if((d==null?void 0:d.type)==="mousemove"&&Date.now()-n<100)return;n=Date.now(),d&&(p=e._eventsSpanMap.get(d)),a&&e.removePatchedListener(this,o,i);const f=e._createSpan(d,p);return f?(d&&e._eventsSpanMap.set(d,f),b.with(O.setSpan(b.active(),f),()=>{const v=e._invokeListener(i,this,c);return f.end(),v})):e._invokeListener(i,this,c)};if(e.addPatchedListener(this,o,i,u))return r.call(this,o,u,s)}}_patchRemoveEventListener(){const e=this;return n=>function(r,o,i){const s=e.removePatchedListener(this,r,o);return s?n.call(this,r,s,i):n.call(this,r,o,i)}}_getPatchableEventTargets(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]}enable(){this._getPatchableEventTargets().forEach(e=>{tt(e.addEventListener)&&(this._unwrap(e,"addEventListener"),this._diag.debug("removing previous patch from method addEventListener")),tt(e.removeEventListener)&&(this._unwrap(e,"removeEventListener"),this._diag.debug("removing previous patch from method removeEventListener")),this._wrap(e,"addEventListener",this._patchAddEventListener()),this._wrap(e,"removeEventListener",this._patchRemoveEventListener())})}disable(){this._getPatchableEventTargets().forEach(e=>{tt(e.addEventListener)&&this._unwrap(e,"addEventListener"),tt(e.removeEventListener)&&this._unwrap(e,"removeEventListener")})}}var mn={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let H;const te="highlight.record",Vm=t=>{var e,n,r,o,i;if(H!==void 0){console.warn("OTEL already initialized. Skipping...");return}const s=t.backendUrl||mn.REACT_APP_PUBLIC_GRAPH_URI||"https://pub.highlight.run",a=[...(n=(e=t.networkRecordingOptions)==null?void 0:e.urlBlocklist)!=null?n:[],...wr],u=mn.DEBUG==="true",c=(r=t.endpoint)!=null?r:"https://otel.highlight.io:4318",p=(o=t.environment)!=null?o:"production";H=new zp({resource:new Ne({[QE]:(i=t.serviceName)!=null?i:"highlight-browser",[JE]:p,"highlight.project_id":t.projectId,"highlight.session_id":t.sessionSecureId})}),u&&H.addSpanProcessor(new Xp(new Bp));const d=new zE({url:c+"/v1/traces",concurrencyLimit:10,compression:"gzip"}),f=new xm(d,{maxExportBatchSize:15});H.addSpanProcessor(f),al({instrumentations:[new El({applyCustomAttributesOnSpan:{documentLoad:yn,documentFetch:yn,resourceFetch:Um}}),new Pm,new Vf({propagateTraceHeaderCorsUrls:/.*/,applyCustomAttributesOnSpan:(h,T,y)=>gn(void 0,null,function*(){var g,S,x;const q=h;if(q.attributes[te]===!1)return;const ot=q.attributes["http.url"],it=(g=T.method)!=null?g:"GET";if(h.updateName(vn(ot,it,T.body)),!(y instanceof Response)){h.setAttributes({"http.response.error":y.message,"http.response.status":y.status});return}Tn(h,T.body,T.headers,t.networkRecordingOptions);const Dt=yield Dr(y,(S=t.networkRecordingOptions)==null?void 0:S.bodyKeysToRecord,(x=t.networkRecordingOptions)==null?void 0:x.networkBodyKeysToRedact);h.setAttribute("http.response.body",Dt)})}),new lE({propagateTraceHeaderCorsUrls:/.*/,applyCustomAttributesOnSpan:(h,T)=>{var y,g;const S=T;if(h.attributes[te]===!1)return;const x=vn(S._url,S._method,T.responseText);h.updateName(x),Tn(h,S._body,S._requestHeaders,t.networkRecordingOptions);const q=Cr(S._body,(y=t.networkRecordingOptions)==null?void 0:y.networkBodyKeysToRedact,(g=t.networkRecordingOptions)==null?void 0:g.bodyKeysToRecord,S._requestHeaders);h.setAttribute("http.request.body",q)}})]});const v=new tr;v.enable(),H.register({contextManager:v,propagator:new Vn({propagators:[new Dn,new Dm({backendUrl:s,tracingOrigins:t.tracingOrigins,urlBlocklist:a})]})})};class xm extends Zn{onEnd(e){e.attributes[te]!==!1&&super.onEnd(e)}}class Dm extends Hn{constructor(e){super(),Y(this,"backendUrl"),Y(this,"tracingOrigins"),Y(this,"urlBlocklist"),this.backendUrl=e.backendUrl,this.tracingOrigins=e.tracingOrigins,this.urlBlocklist=e.urlBlocklist}inject(e,n,r){const o=O.getSpan(e);if(!o)return;const i=o.attributes["http.url"];if(typeof i=="string"&&!Mm(i,this.backendUrl,this.tracingOrigins,this.urlBlocklist)){o.setAttribute(te,!1);return}super.inject(e,n,r)}}const km="highlight-browser",Hm=()=>H.getTracer(km),Xm=()=>gn(void 0,null,function*(){H!==void 0&&(yield H.forceFlush(),H.shutdown())}),vn=(t,e,n)=>{var r,o,i;let s;const a=new URL(t),u=a.pathname;let c=`${e} - ${u}`;try{if(s=typeof n=="string"?JSON.parse(n):n,s&&s.query){const p=Lm(s.query),d=((r=p.definitions[0])==null?void 0:r.kind)==="OperationDefinition"?(i=(o=p.definitions[0])==null?void 0:o.name)==null?void 0:i.value:void 0;d&&(c=`${d} (GraphQL: ${a.host+a.pathname})`)}}catch{}return c},Tn=(t,e,n,r)=>{var o;const i=typeof e=="string"?e:String(e);let s;try{s=e?JSON.parse(i):void 0,s.operationName&&t.setAttribute("graphql.operation.name",s.operationName)}catch{}const a=Ir((o=r==null?void 0:r.networkHeadersToRedact)!=null?o:[],n,r==null?void 0:r.headerKeysToRecord);t.setAttributes({"highlight.type":"http.request","http.request.headers":JSON.stringify(a),"http.request.body":i})},Mm=(t,e,n,r)=>r!=null&&r.some(o=>t.toLowerCase().includes(o))||!Pr(t,e,n)?!1:xr(t,n),yn=t=>{const e=t.events,n={unload:D("unloadEventStart","unloadEventEnd",e),dom_interactive:D("domInteractive","fetchStart",e),dom_content_loaded:D("domContentLoadedEventEnd","domContentLoadedEventStart",e),dom_complete:D("fetchStart","domComplete",e),load_event:D("loadEventStart","loadEventEnd",e),first_paint:D("fetchStart","firstPaint",e),first_contentful_paint:D("fetchStart","firstContentfulPaint",e),domain_lookup:D("domainLookupStart","domainLookupEnd",e),connect:D("connectStart","connectEnd",e),request:D("requestStart","requestEnd",e),response:D("responseStart","responseEnd",e)};Object.entries(n).forEach(([r,o])=>{o>0&&(t.setAttribute(`timings.${r}.ns`,o),t.setAttribute(`timings.${r}.readable`,Nr(o)))})};function D(t,e,n){const r=n.find(s=>s.name===t),o=n.find(s=>s.name===e);if(!r||!o)return 0;const i=r.time[0]*1e9+r.time[1];return o.time[0]*1e9+o.time[1]-i}const Um=(t,e)=>{const n={domain_lookup:(e.domainLookupEnd-e.domainLookupStart)*1e6,connect:(e.connectEnd-e.connectStart)*1e6,request:(e.responseEnd-e.requestStart)*1e6,response:(e.responseEnd-e.responseStart)*1e6};Object.entries(n).forEach(([r,o])=>{o>0&&(t.setAttribute(`timings.${r}.ns`,o),t.setAttribute(`timings.${r}.readable`,Nr(o)))})},Nr=t=>{if(t>=36e11){const e=t/36e11;return`${Number(e.toFixed(1))}h`}else if(t>=6e10){const e=t/6e10;return`${Number(e.toFixed(1))}m`}else if(t>=1e9){const e=t/1e9;return`${Number(e.toFixed(1))}s`}else if(t>=1e6){const e=t/1e6;return`${Number(e.toFixed(1))}ms`}else if(t>=1e3){const e=t/1e3;return`${Number(e.toFixed(1))}s`}else return`${Number(t.toFixed(1))}ns`};export{km as BROWSER_TRACER_NAME,Hm as getTracer,Vm as setupBrowserTracing,Xm as shutdown};
